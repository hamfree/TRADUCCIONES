<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../css/JSP-Styles.css" type="text/css">
    <title>Usando Componentes JavaBeans en Documentos JSP - La
      lección</title>
  </head>
  <body>
    <h1>Usando Componentes JavaBeans en Documentos JSP</h1>
    <h2>La Lección</h2>
    <h3>Agenda</h3>
    <ul>
      <li class="n1">Entender los beneficios de los beans</li>
      <li class="n2">Usaremos beans simples aquí. Las secciones
        posteriores cubrirán beans con MVC y el lenguaje de expresión JSP.</li>
      <li class="n1">Crear beans</li>
      <li class="n1">Instalar clases de beans en su servidor</li>
      <li class="n1">Acceder a propiedades del bean</li>
      <li class="n1">Establecer explícitamente propiedades de un bean</li>
      <li class="n1">Establecimiento automático de propiedades de bean
        a partir de parámetros de solicitud</li>
      <li class="n1">Compartir beans entre multiples servlets y páginas
        JSP</li>
    </ul>
    <hr />
    <h3>Usos de construcciones JSP</h3>
    (IMAGEN A LA IZQUIERDA)
    <ul>
      <li class="n1">Elementos de script llamando a código del servlet
        directamente</li>
      <li class="n1">Elementos de script llamando a código del servlet
        indirectamente (por medio de clases de utilidad)</li>
      <li class="n1"><em class="rojo">Beans</em></li>
      <li class="n1">Combinado Servlet/JSP (MVC)</li>
      <li class="n1">MVC con el lenguaje de expresión JSP</li>
      <li class="n1">Etiquetas personalizadas</li>
      <li class="n1">MVC con beans, etiquetas personalizadas, y marcos
        de trabajo como Struts o JSF</li>
    </ul>
    <hr />
    <h3>Antecedentes: ¿Qué Son los Beans?</h3>
    <ul>
      <li class="n1">Clases Java que siguen ciertas convenciones</li>
      <li class="n2">Deben tener un constructor de cero argumentos
        (vacío)</li>
      <li class="n3">Puede satisfacer este requerimiento o definiendo
        explícitamente tal constructor u omitir todos los constructores.</li>
      <li class="n2">No debería tener variables de instancia públicas
        (campos)</li>
      <li class="n3">Debería seguir esta práctica y usar metodos de
        acceso en vez de permitir el acceso directo a los campos</li>
      <li class="n2">se debe acceder a los valores persistentes a
        través de métodos llamados <i>getXxx</i> y <i>setXxx</i>
      </li>
      <li class="n3">Si la clase tiene el método getTitle que devuelve
        una String, se dice que la clase tiene una <i>propiedad</i> de tipo
        String llamada title
      </li>
      <li class="n3">Las propiedades booleanas pueden usar <i>isXxx</i>
        en vez de <i>getXxx</i></li>
      <li class="n3">¡Es el nombre del método, no la variable de
        instancia lo que importa!</li>
      <li class="n2">Para saber más sobre beans, vea
        http://java.sun.com/beans/docs/</li>
    </ul>
    <hr />
    <h3>Más sobre Propiedades del Bean</h3>
    <ul>
      <li class="n1">Regla usual para convertir el nombre del método en
        el nombre de la propiedad</li>
      <li class="n2">Suelta la palabra "get" o "set" y cambia la
        siguiente letra a minúsculas. Nuevamente, el nombre de la instancia
        var es irrelevante.</li>
      <li class="n3">Nombre del método: getUserFirstName</li>
      <li class="n3">Nombre de la propiedad: userFirstName</li>
      <li class="n1">Excepción 1: propiedades booleanas</li>
      <li class="n2">Si el método getter devuelve boolean o Boolean</li>
      <li class="n3">Nombre del metodo: getPrime <em class="sub">o</em>
        isPrime
      </li>
      <li class="n3">Nombre de la propiedad: prime</li>
      <li class="n1">Excepción 2: letras mayúsculas consecutivas</li>
      <li class="n2">Si dos letras mayúsculas en una fila después de
        “get” o “set”</li>
      <li class="n3">Nombre del método: getURL</li>
      <li class="n3">Nombre de propiedad: URL (no uRL)</li>
    </ul>
    <hr />
    <h3>Propiedades del Bean: Ejemplos</h3>
    <table style="border-spacing: 2px; width: 100%">
      <thead>
        <tr style="color: white; background-color: black">
          <th>Nombres del Método</th>
          <th>Nombre de la Propiedad</th>
          <th>Uso de Ejemplo de JSP</th>
        </tr>
      </thead>
      <tbody>
        <tr style="background-color: gray;">
          <td>getFirstName<br> setFirstName
          </td>
          <td style="text-align: center">firstname</td>
          <td>&lt;jsp:getProperty … property="firstName"/&gt;<br />
            &lt;jsp:setProperty … property="firstName"/&gt;<br />
            ${customer.firstName}
          </td>
        </tr>
        <tr style="background-color: rgb(171, 169, 168)">
          <td>isExecutive<br /> setExecutive<br /> (Propiedad booleana)
          </td>
          <td style="text-align: center">executive</td>
          <td>&lt;jsp:getProperty … property="executive"/&gt;<br />
            &lt;jsp:setProperty … property="executive"/&gt;<br />
            ${customer.executive}
          </td>
        </tr>
        <tr style="background-color: gray;">
          <td>getExecutive<br /> setExecutive<br /> (Propiedad
            booleana)
          </td>
          <td style="text-align: center">executive</td>
          <td>&lt;jsp:getProperty … property="executive"/&gt;<br />
            &lt;jsp:setProperty … property="executive"/&gt;<br />
            ${customer.executive}
          </td>
        </tr>
        <tr style="background-color: rgb(171, 169, 168)">
          <td>getZIP<br /> setZIP
          </td>
          <td style="text-align: center">ZIP</td>
          <td>&lt;jsp:getProperty … property="ZIP"/&gt;<br />
            &lt;jsp:setProperty … property="ZIP"/&gt;<br /> ${address.ZIP}
          </td>
        </tr>
      </tbody>
    </table>

    <p style="font-size: 11px; color: blue; text-align: center;">Nota
      1: el nombre de la propiedad no existe en ninguna parte en tu código.
      Es solo un atajo para el nombre del método.</p>
    <p style="font-size: 11px; color: blue; text-align: center;">Nota
      2: el nombre de la propiedad se deriva sólo del nombre del método. El
      nombre de la variable de instancia es irrelevante.</p>
    <hr />
    <h3>Porqué Debería Usar Métodos de Acceso, No Campos Públicos</h3>
    <ul>
      <li class="n1">Reglas de Bean</li>
      <li class="n2">Para ser un bean, no deberías tener campos
        públicos.</li>
      <li class="n2">Incorrecto<br /> 
        <pre>
<em class="rojo">public</em> double speed;
        </pre>
      </li>
      <li class="n2">Correcto 
        <pre> 
<em class="rojo">private</em> double speed; // La variable no necesita coincidir el nombre del método 

public double <em class="rojo">getSpeed</em>() { 
	return(speed); 
} 
public void <em class="rojo">setSpeed</em>(double speed) { 
	this.speed = speed; 
} 
        </pre>
      </li>

      <li class="n1">Diseño POO</li>
      <li class="n2">Deberías hacer esto en todo tu código Java de
        todos modos. ¿Por qué?</li>
    </ul>
    <p>Nota: en Eclipse, después de crear una variable de instancia, si
      usted hace click derecho y elije "Fuente", le da la opción de generar
      getters y setters por usted.</p>
    <hr />
    <h3>Porque Debería Usar Métodos de Acceso, No Campos Públicos</h3>
    <ul>
      <li class="n1">1) Puede colocar restricciones en valores</li>
    </ul>
    <pre> 
    public void setSpeed(double newSpeed) { 
	  if (newSpeed &lt; 0) {
	    sendErrorMessage(...); 
        newSpeed = Math.abs(newSpeed); 
      } 
      speed = newSpeed; 
    }
    </pre>
    <ul>
      <li class="n2">Si los usuarios de su clase accedieran
        directamente a los campos, serían responsables de verificar las
        restricciones .</li>
      <li class="n1">2) Puede cambiar su representación interna sin
        cambiar el interfaz</li>
    </ul>
    <pre> 
    // Ahora usando unidades métricas (kph, not mph)
    public void setSpeed(double newSpeed) { 
        speedInKPH = convert(newSpeed); 
    }

    public void setSpeedInKPH(double newSpeed) {
        speedInKPH = newSpeed; 
    }
    </pre>
    <ul>
      <li class="n1">3) Puede realizar efectos secundarios arbitrarios:</li>
    </ul>
    <pre> 
    public double setSpeed(double newSpeed) { 
        speed = newSpeed;
        updateSpeedometerDisplay(); 
    }
    </pre>
    <ul>
      <li class="n2">Si los usuarios de su clase accedieran
        directamente a los campos, serían responsables de la ejecución de los
        efectos secundarios. Demasiado trabajo y corre un gran riesgo de que
        la visualización no sea coherente con los valores reales .</li>
    </ul>
    <hr />
    <h3>Resultado Final</h3>
    <ul>
      <li class="n1">No es un requisito oneroso ser un "bean"</li>
      <li class="n2">Probablemente ya estés siguiendo la mayoría de las
        convenciones de todos modos</li>
      <li class="n1">Constructor de cero argumentos (¡no requerido en
        MVC!)</li>
      <li class="n1">Sin variables de instancia públicas</li>
      <li class="n1">Se usa convenciones de nombrado getBlah/setBlah o
        isBlah/setBlah</li>
      <li class="n1">JSP proporciona muchos lugares donde se refiere a
        "propiedades bean"</li>
      <li class="n2">Cuáles son los atajos para los métodos getter /
        setter</li>
      <li class="n3">Método getFirstName: refiere a “firstName”</li>
      <li class="n3">Método isMyThingCool (booleano): refiere a
        “myThingCool”</li>
      <li class="n3">Metodo getHTMLString: refiere a “HTMLString”</li>
    </ul>
    <hr />
    <h3>Usar Beans: Tareas Básicas</h3>
    <ul>
      <li class="n1">jsp:useBean</li>
      <li class="n2">En el caso más simple, este elemento construye un
        nuevo bean. Se usa normalmente como sigue:</li>
      <li class="n3">&lt;jsp:useBean id="beanName"
        class="package.Class" /&gt;</li>
      <li class="n1">jsp:setProperty</li>
      <li class="n2">Este elemento modifica una propiedad del bean
        (p.e., llama a un método setBlah ). Se usa normalmente como sigue:</li>
      <li class="n3">&lt;jsp:setProperty name="beanName"
        property="propertyName" value="propertyValue" /&gt;</li>
      <li class="n1">jsp:getProperty</li>
      <li class="n2">Este elemento lee y emite el valor de una
        propiedad bean. Se usa como sigue:</li>
      <li class="n3">&lt;jsp:getProperty name="beanName"
        property="propertyName" /&gt;</li>
    </ul>
    <hr />
    <h3>Enfoque general con páginas independientes y jsp: Etiquetas
      useBean</h3>
    <ul>
      <li class="n1">Formulario de entrada</li>
      <li class="n2">El usuario envía un formulario que hace referencia
        a una página JSP</li>
      <li class="n3">&lt;FORM ACTION="SomePage.jsp"&gt;</li>
      <li class="n1">Página JSP</li>
      <li class="n2">La página JSP instancia un bean</li>
      <li class="n3">&lt;jsp:useBean id="myBean" class="…"/&gt;</li>
      <li class="n2">Usted pasa algunos datos de la petición al bean</li>
      <li class="n3">&lt;jsp:setProperty name="myBean" …/&gt;</li>
      <li class="n4">Hay varias formas de usar jsp:setProperty, pero la
        mejor es con property="*", como veremos en breve.</li>
      <li class="n2">Emite algunos valores derivados de los datos de la
        petición</li>
      <li class="n3">&lt;jsp:getProperty name="myBean"
        property="bankAccountBalance"/&gt;</li>
    </ul>
    <hr />
    <h3>Building Beans: jsp:useBean</h3>
    <ul>
      <li class="n1">Format</li>
      <li class="n2">&lt;jsp:useBean id="name" class="package.Class"
        /&gt;</li>
      <li class="n1">Purpose</li>
      <li class="n2">Allow instantiation of Java classes without
        explicit Java programming (XML-compatible syntax)</li>
      <li class="n1">Notes</li>
      <li class="n2">Simple Interpretation:</li>
    </ul>
    <pre style="padding-left: 60px;">&lt;jsp:useBean id="book1" class="cores ervlets.Book" /&gt; </pre>
    <span style="padding-left: 80px;">can be thought of as
      equivalent to the</span>
    <pre style="padding-left: 60px;">scriptlet &lt;% coreservlets.Book book1 = new coreservlets.Book();%&gt;</pre>
    <ul>
      <li class="n2">But jsp:useBean has two additional advantages:</li>
      <li class="n3">It is easier to derive object values from request
        parameters</li>
      <li class="n3">It is easier to share objects among pages or
        servlets</li>
    </ul>
    <hr />
    <h3>Setting Simple Bean Properties: jsp:setProperty</h3>
    <ul>
      <li class="n1">Format</li>
      <li class="n2">&lt;jsp:setProperty name="name"
        property="property" value="value" /&gt;</li>
      <li class="n1">Purpose</li>
      <li class="n2">Allow setting of bean properties (i.e., calls to
        setXxx methods) without explicit Java programming</li>
      <li class="n1">Notes</li>
      <li class="n2">&lt;jsp:setProperty name="book1" property="title"
        value="Core Servlets and JavaServer Pages" /&gt; <br />is equivalent
        to the following scriptlet <br />&lt;% book1.setTitle("Core Servlets
        and JavaServer Pages"); %&gt;
      </li>
    </ul>
    <hr />
    <h3>Accessing Bean Properties: jsp:getProperty</h3>
    <ul>
      <li class="n1">Format<br /> &lt;jsp:getProperty name="name"
        property="property" /&gt;
      </li>
      <li class="n1">Purpose</li>
      <li class="n2">Allow access to bean properties (i.e., calls to
        getXxx methods) without explicit Java programming</li>
      <li class="n1">Notes</li>
      <li class="n2">&lt;jsp:getProperty name="book1" property="title"
        /&gt; is equivalent to the following JSP expression &lt;%=
        book1.getTitle() %&gt;</li>
    </ul>
    <hr />
    <h3>Example: StringBean</h3>
    <pre>
	package coreservlets; 
	
	public class StringBean {
	  private String message = "No message specified"; 
	  
	  public String getMessage() {
	    return(message);
	  }
	  
	  public void setMessage(String message) {
	    this.message = message; 
	  }
	}
    </pre>
    <ul>
      <li class="n1">Beans installed in normal Java directory</li>
      <li class="n2">MyEclipse: src/folderMatchingPackage</li>
      <li class="n2">Deployment: WEB-INF/classes/folderMatchingPackage</li>
      <li class="n1">Beans must always be in packages!</li>
    </ul>
    <hr />
    <h3>JSP Page That Uses StringBean(Code)</h3>
    <pre>
	&lt;jsp:useBean id="stringBean" class="coreservlets.StringBean" /&gt;
	&lt;OL&gt;
	  &lt;LI&gt;Initial value (from jsp:getProperty):
	    &lt;I&gt;&lt;jsp:getProperty name="stringBean" 
	        property="message" /&gt;&lt;/I&gt;
	  &lt;LI&gt;Initial value (from JSP expression):
	    &lt;I&gt;&lt;%= stringBean.getMessage() %&gt;&lt;/I&gt;
	  &lt;LI&gt;&lt;jsp:setProperty name="stringBean" 
	                                property="message"
	                                value="Best string bean: Fortex" /&gt;
	    Value after setting property with jsp:setProperty: 
	    &lt;I&gt;&lt;jsp:getProperty name="stringBean"
	                                 property="message" /&gt;&lt;/I&gt;
    &lt;LI&gt;&lt;%	stringBean.setMessage("My favorite: Kentucky Wonder"); %&gt; 
           Value after setting property with scriptlet: 
           &lt;I&gt;&lt;%=stringBean.getMessage() %&gt;&lt;/I&gt;
    &lt;/OL&gt; 
    </pre>
    <p>Don’t really mix scripting and jsp:useBean in same page! I am
      just illustrating that behind the scenes, the jsp: tags are just
      calling Java code.</p>
    <hr />
    <h3>JSP Page That Uses StringBean(Result)</h3>
    (IMAGEN) 23
    <hr />
    <h3>Setting Bean Properties Case 1: Explicit Conversion &amp;
      Assignment</h3>
    <pre>
	&lt;!DOCTYPE ...&gt; ...
	&lt;jsp:useBean id="entry" class="coreservlets.SaleEntry" /&gt;
	&lt;%--setItemID expects a String --%&gt;
	&lt;jsp:setPropertyname="entry" property="itemID" value='&lt;%=
	request.getParameter("itemID") %&gt;' /&gt; 
    </pre>
    <p>Bad: violates rule of not having scripting in pages that use
      jsp:useBean, jsp:getProperty, and jsp:setProperty.</p>
    <hr />
    <h3>Setting Bean Properties Case 1: Explicit Conversion &amp;
      Assignment</h3>
    <pre>
	&lt;% int numItemsOrdered = 1; try {
	numItemsOrdered = Integer.parseInt(request.getParameter("numItems")); }
	catch(NumberFormatException nfe) {} %&gt; &lt;%--setNumItems expects an
	int --%&gt; &lt;jsp:setPropertyname="entry" property="numItems"
	value="&lt;%= numItemsOrdered %&gt;" /&gt; 
    </pre>
    <p>Even worse than previous slide: not only has scripting, but has
      long ugly sections of Java code.</p>
    <hr />
    <h3>Setting Bean Properties Case 1: Explicit Conversion &amp;
      Assignment</h3>
    <pre>
	&lt;% 
	double discountCode = 1.0; 
	try { 
	  String discountString =
	    request.getParameter("discountCode"); 
	  discountCode =
	    Double.parseDouble(discountString); 
	} catch(NumberFormatException nfe) {} 
	
	%&gt; &lt;%--setDiscountCode expects a double --%&gt;
	
	&lt;jsp:setProperty 
	    name="entry" 
	    property="discountCode" 
	    value="&lt;%=discountCode %&gt;" /&gt;
    </pre>
    <hr />
    <h3>Setting Bean Properties Case 1: Explicit Conversion &amp;
      Assignment</h3>
    (IMAGEN) 26
    <hr />
    <h3>Case 2: Associating IndividualProperties with Input Parameters</h3>
    <ul>
      <li class="n1">Use the param attribute of jsp:setProperty to
        indicate that</li>
      <li class="n2">Value should come from specified request parameter</li>
      <li class="n2">Simple automatic type conversion should be
        performed for properties that expect values of standard types</li>
      <li class="n3">boolean, Boolean, byte, Byte, char, Character,
        double, Double, int, Integer, float, Float, long, or Long.</li>
    </ul>
    <hr />
    <h3>Case 2: Associating IndividualProperties with Input Parameters</h3>
    <pre>
	&lt;jsp:useBean id="entry" 
	                class="coreservlets.SaleEntry" /&gt;
	&lt;jsp:setProperty 
	     name="entry" 
	     property="itemID" 
	     param="itemID" /&gt;
	&lt;jsp:setProperty 
	     name="entry" 
	     property="numItems" 
	     param="numItems" /&gt; 
	&lt;jsp:setProperty 
	     name="entry" 
	     property="discountCode"
	     param="discountCode" /&gt;
    </pre>
    <hr />
    <h3>Case 3: Associating All Propertieswith Input Parameters</h3>
    <ul>
      <li class="n1">• Use "*" for the value of the propertyattribute
        of jsp:setProperty to indicate that</li>
      <li class="n2">– Value should come from request parameter whose
        name matches property name</li>
      <li class="n2">– Simple automatic type conversion should be
        performed</li>
    </ul>

    <h3>Case 3: Associating All Propertieswith Input Parameters</h3>
    <pre>
	&lt;jsp:useBean id="entry" class="coreservlets.SaleEntry" /&gt;
	&lt;jsp:setProperty name="entry" property="*" /&gt; 
    </pre>
    <ul>
      <li class="n1">This is extremely convenient for making “form
        beans” --objects whose properties are filled in from a form
        submission.</li>
      <li class="n2">You can even divide the process up across multiple
        forms, where each submission fills in part of the object.</li>
    </ul>
    <hr />
    <h3>Sharing Beans</h3>
    <ul>
      <li class="n1">You can use the scope attribute to specify
        additional places where bean is stored</li>
      <li class="n2">Still also bound to local variable in _jspService</li>
      <li class="n2">&lt;jsp:useBean id="…" class="…" scope="…" /&gt;</li>
      <li class="n1">Benefits</li>
      <li class="n2">Lets multiple servlets or JSP pages share data</li>
      <li class="n2">Also permits conditional bean creation</li>
      <li class="n3">Creates new object only if it can't find existing
        one</li>
    </ul>
    <hr />
    <h3>Sharing Beans: Example</h3>
    <ul>
      <li class="n1">page1.jsp</li>
    </ul>
    <pre> 
	&lt;jsp:useBean id="foo" class="…" scope="application"/&gt;
	&lt;jsp:setProperty name="foo" property="message" value="Hello"/&gt;
	&lt;jsp:getProperty name="foo" property="message"/&gt; 
    </pre>
    <ul>
      <li class="n1">page2.jsp</li>
    </ul>
    <pre>
	&lt;jsp:useBean id="foo" class="…" scope="application"/&gt;
	&lt;jsp:getProperty name="foo" property="message"/&gt; 
    </pre>
    <ul>
      <li class="n1">Possible scenario 1</li>
      <li class="n2">Joe goes to page 2 (output is "Default Message")</li>
      <li class="n2">Jane goes to page 1 (output is "Hello")</li>
      <li class="n1">Possible scenario 2</li>
      <li class="n2">Joe goes to page 1 (output is "Hello")</li>
      <li class="n2">Jane goes to page 2 (output is "Hello")</li>
    </ul>
    <hr />
    <h3>Values of the scope Attribute</h3>
    <ul>
      <li class="n1">page (&lt;jsp:useBean … scope="page"/&gt;
        or&lt;jsp:useBean…&gt;)</li>
      <li class="n2">Default value. Bean object should be placed in the
        PageContext object for the duration of the current request. Lets
        methods in same servlet access bean.</li>
      <li class="n1">application(&lt;jsp:useBean …
        scope="application"/&gt;)</li>
      <li class="n2">Bean will be stored in ServletContext (available
        through the application variable or by call to getServletContext()).
        ServletContext is shared by all servlets in the same Web application
        (or all servlets on server if no explicit Web applications are
        defined).</li>
    </ul>
    <hr />
    <h3>Values of the scope Attribute</h3>
    <ul>
      <li class="n1">session (&lt;jsp:useBean … scope="session"/&gt;)</li>
      <li class="n2">Bean will be stored in the HttpSession object
        associated with the current request, where it can be accessed from
        regular servlet code with getAttribute and setAttribute, as with
        normal session objects.</li>
      <li class="n1">request(&lt;jsp:useBean … scope="request"/&gt;)</li>
      <li class="n2">Bean object should be placed in the ServletRequest
        object for the duration of the current request, where it is available
        by means of getAttribute</li>
    </ul>
    <hr />
    <h3>Sharing Beans in Four DifferentWays</h3>
    <ul>
      <li class="n1">Using unshared (page-scoped) beans.</li>
      <li class="n1">Sharing request-scoped beans.</li>
      <li class="n1">Sharing session-scoped beans.</li>
      <li class="n1">Sharing application-scoped (i.e.,
        ServletContext-scoped) beans.</li>
      <li class="n1">Important:</li>
      <li class="n2">Use different names (i.e., id in jsp:useBean) for
        different beans</li>
      <li class="n3">Don’t store beans in different places with same id</li>
    </ul>
    <hr />
    <h3>Sharing Beans Four Ways: Bean Code</h3>
    <pre>
	package coreservlets;
	 … 
	public class BakedBean implements Serializable { 
	  private String level = "half-baked"; 
	  private String goesWith = "hot dogs"; 
	  
	  public String getLevel() { 
	    return(level); 
	  } 
	  public void setLevel(String newLevel) { 
	    level = newLevel; 
	  } 
	  public String getGoesWith() { 
	    return(goesWith); 
	  } 
	  public void setGoesWith(String dish) { 
	    goesWith = dish; 
	  } 
	}
    </pre>
    <hr />
    <h3>Sharing Beans Example 1: Page-Scoped (Unshared)</h3>
    <ul>
      <li class="n1">Create the bean</li>
      <li class="n2">Use jsp:useBean with scope="page" (or no scope at
        all, since page is the default).</li>
      <li class="n1">Modify the bean</li>
      <li class="n2">Use jsp:setProperty with property="*".</li>
      <li class="n2">Then, supply request parameters that match the
        bean property names.</li>
      <li class="n1">Access the bean</li>
      <li class="n2">Use jsp:getProperty.</li>
    </ul>
    <hr />
    <h3>Sharing Beans Example 1: Page-Scoped (Unshared)</h3>
    <pre>
	… 
	&lt;BODY&gt; 
	&lt;H1&gt;Baked Bean Values: page-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="pageBean"
	                class="coreservlets.BakedBean" /&gt;
    &lt;jsp:setProperty name="pageBean" property="*" /&gt; 
    &lt;H2&gt;Bean level:
	&lt;jsp:getProperty name="pageBean" 
	                    property="level" /&gt; 
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with: 
	&lt;jsp:getProperty name="pageBean"
	                    property="goesWith" /&gt; 
	&lt;/H2&gt;
	&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Sharing Beans Example 1: Result (Initial Request)</h3>
    (IMAGEN) 40
    <hr />
    <h3>Sharing Beans Example 1: Result (Later Request)</h3>
    (IMAGEN)
    <hr />
    <h3>Sharing Beans Example 2:Request-Based Sharing</h3>
    <ul>
      <li class="n1">Create the bean</li>
      <li class="n2">Use jsp:useBean with scope="request".</li>
      <li class="n1">Modify the bean</li>
      <li class="n2">Use jsp:setProperty with property="*".</li>
      <li class="n2">Then, supply request parameters that match the
        bean property names.</li>
      <li class="n1">Access the bean in the 1st (main) page</li>
      <li class="n2">Use jsp:getProperty.</li>
      <li class="n2">Then, use jsp:include to invoke the second page.</li>
      <li class="n1">Access the bean in the 2nd (included) page</li>
      <li class="n2">Use jsp:useBean with the same id as on the first
        page, again with scope="request".</li>
      <li class="n2">Then, use jsp:getProperty.</li>
    </ul>
    <hr />
    <h3>Request-Based Sharing:Code for Main Page</h3>
    <pre>
	… 
	&lt;BODY&gt;
	&lt;H1&gt;Baked Bean Values: request-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="requestBean"
	                class="coreservlets.BakedBean" 
	                scope="request" /&gt;
	&lt;jsp:setProperty name="requestBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="requestBean"
	                    property="level" /&gt;&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="requestBean" 
	                    property="goesWith"	/&gt;&lt;/H2&gt;
    &lt;jsp:include page=
	  "/WEB-INF/includes/BakedBeanDisplay-snippet.jsp"/&gt;
	&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Request-Based Sharing: Code for Included Page</h3>
    <pre>
	&lt;H1&gt;Repeated Baked Bean Values: 
	request-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="requestBean" 
	                class="coreservlets.BakedBean"
	                scope="request" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="requestBean" 
	                    property="level" /&gt;
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with: 
	&lt;jsp:getProperty name="requestBean"
	                    property="goesWith" /&gt;
	&lt;/H2&gt;
    </pre>
    <hr />
    <h3>Request-Based Sharing:Result (Initial Request)</h3>
    (IMAGEN) 45
    <hr />
    <h3>Request-Based Sharing: Result (Later Request)</h3>
    (IMAGEN) 46
    <hr />
    <h3>Sharing Beans Example 3: Session-Based Sharing</h3>
    <ul>
      <li class="n1">Create the bean</li>
      <li class="n2">Use jsp:useBean with scope="session".</li>
      <li class="n1">Modify the bean</li>
      <li class="n2">Use jsp:setProperty with property="*".</li>
      <li class="n2">Then, supply request parameters that match the
        bean property names.</li>
      <li class="n1">Access the bean in the initial request</li>
      <li class="n2">Use jsp:getProperty in the request in which
        jsp:setProperty is invoked.</li>
      <li class="n1">Access the bean later</li>
      <li class="n2">Use jsp:getProperty in a request that does not
        include request parameters and thus does not invoke jsp:setProperty.
        If this request is from the same client (within the session timeout),
        the previously modified value is seen. If this request is from a
        different client (or after the session timeout), a newly created bean
        is seen.</li>
    </ul>
    <hr />
    <h3>Session-Based Sharing: Code</h3>
    <pre>
	… 
	&lt;BODY&gt;
	&lt;H1&gt;Baked Bean Values: session-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="sessionBean"
	                class="coreservlets.BakedBean" 
	                scope="session" /&gt;
	&lt;jsp:setProperty name="sessionBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="sessionBean"
	                    property="level" /&gt;
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="sessionBean" 
	                    property="goesWith" /&gt;
	&lt;/H2&gt;&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Session-Based Sharing: Result(Initial Request)</h3>
    (IMAGEN) 49
    <hr />
    <h3>Session-Based Sharing: Result(Later Request --Same Client)</h3>
    (IMAGEN) 50
    <hr />
    <h3>Session-Based Sharing: Result(Later Request --New Client)</h3>
    (IMAGEN) 51
    <hr />
    <h3>Sharing Beans Example 4: Application-Based Sharing</h3>
    <ul>
      <li class="n1">Create the bean</li>
      <li class="n2">Use jsp:useBean with scope="application".</li>
      <li class="n1">Modify the bean</li>
      <li class="n2">Use jsp:setProperty with property="*".</li>
      <li class="n2">Then, supply request parameters that match the
        bean property names.</li>
      <li class="n1">Access the bean in the initial request</li>
      <li class="n2">Use jsp:getProperty in the request in which
        jsp:setProperty is invoked.</li>
      <li class="n1">Access the bean later</li>
      <li class="n2">Use jsp:getProperty in a request that does not
        include request parameters and thus does not invoke jsp:setProperty.
        Whether this request is from the same client or a different client
        (regardless of the session timeout), the previously modified value is
        seen.</li>
    </ul>
    <hr />
    <h3>Application-Based Sharing:Code</h3>
    <pre>
	&lt;BODY&gt; 
	&lt;H1&gt;Baked Bean Values: 
	application-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="applicationBean"
	                class="coreservlets.BakedBean" 
	                scope="application" /&gt;
	&lt;jsp:setProperty name="applicationBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level:
	&lt;jsp:getProperty name="applicationBean"
	                    property="level" /&gt;
    &lt;/H2&gt;
    &lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="applicationBean" 
	                    property="goesWith"/&gt;
	&lt;/H2&gt;&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Application-Based Sharing: Result (Initial Request)</h3>
    (IMAGEN) 54
    <hr />
    <h3>Application-Based Sharing: Result(Later Request --Same Client)</h3>
    (IMAGEN) 55
    <hr />
    <h3>Application-Based Sharing: Result(Later Request --New Client)</h3>
    (IMAGEN) 56
    <hr />
    <h3>Conditional Bean Operations</h3>
    <ul>
      <li class="n1">Bean conditionally created</li>
      <li class="n2">jsp:useBean results in new bean being instantiated
        only if no bean with same id and scope can be found.</li>
      <li class="n2">If a bean with same id and scope is found, the
        preexisting bean is simply bound to variable referenced by id.</li>
      <li class="n1">Bean properties conditionally set</li>
      <li class="n2">&lt;jsp:useBean ... /&gt; replaced by
        &lt;jsp:useBean ...&gt;statements&lt;/jsp:useBean&gt;</li>
      <li class="n2">The statements (jsp:setProperty elements) are
        executed only if a new bean is created, not if an existing bean is
        found.</li>
    </ul>
    <hr />
    <h3>Conditional Bean Creation: AccessCountBean</h3>
    <pre>
	public class AccessCountBean { 
	  private String firstPage; 
	  private int accessCount = 1; 
	  
	  public String getFirstPage() { 
	    return(firstPage); 
	  }
	  public void setFirstPage(String firstPage) { 
	    this.firstPage = firstPage; 
	  } 
	  public int getAccessCount() { 
	    return(accessCount); 
	  }
	  public void setAccessCountIncrement(int increment) { 
	    accessCount = accessCount + increment; 
	  } 
	}
    </pre>
    <h3>Conditional Bean Creation: SharedCounts1.jsp</h3>
    <pre>
	&lt;jsp:useBean id="counter" 
	                class="coreservlets.AccessCountBean"
	                scope="application"&gt; 
      &lt;jsp:setProperty name="counter"
	                      property="firstPage" 
	                      value="SharedCounts1.jsp" /&gt;
	&lt;/jsp:useBean&gt; 
	Of SharedCounts1.jsp (this page), 
	&lt;A HREF="SharedCounts2.jsp"&gt;SharedCounts2.jsp&lt;/A&gt;, and 
	&lt;A HREF="SharedCounts3.jsp"&gt;SharedCounts3.jsp&lt;/A&gt;,
	&lt;jsp:getProperty name="counter" property="firstPage" /&gt; 
	was the first page accessed. 
	&lt;P&gt;
	Collectively, the three pages have been accessed 
	&lt;jsp:getProperty name="counter" property="accessCount" /&gt;
	times. 
	&lt;jsp:setProperty name="counter"
	                    property="accessCountIncrement" 
	                    value="1" /&gt;
    </pre>
    <hr />
    <h3>Accessing SharedCounts1, SharedCounts2, SharedCounts3</h3>
    <ul>
      <li class="n1">SharedCounts2.jsp was accessed first.</li>
      <li class="n1">Pages have been accessed twelve previous times by
        an arbitrary number of clients</li>
    </ul>
    (IMAGEN 60)
    <hr />
    <h3>Summary</h3>
    <ul>
      <li class="n1">Benefits of jsp:useBean</li>
      <li class="n2">Hides the Java syntax. No scripting in these
        pages!</li>
      <li class="n2">Makes it easier to associate request parameters
        with Java objects (bean properties)</li>
      <li class="n2">Simplifies sharing objects among multiple requests
        or servlets/JSPs</li>
      <li class="n1">jsp:useBean</li>
      <li class="n2">Creates or accesses a bean</li>
      <li class="n1">jsp:setProperty</li>
      <li class="n2">Sets bean property (i.e. passes value to setXxx)</li>
      <li class="n1">You usually use property="*" to pass in request
        params</li>
      <li class="n1">jsp:getProperty</li>
      <li class="n2">Puts bean property (i.e. getXxx call) into servlet
        output</li>
    </ul>
    <hr />
    <p style="text-align: center;">
      <a href="index.html">Volver al inicio de la sección</a>
    </p>
    <p style="font-size: small;">
      Todo el código de los <a
        href="http://courses.coreservlets.com/Course-Materials/">
        tutoriales J2EE de coreservlets.com (servlets, JSP, Struts, JSF 1,
        JSF 2, PrimeFaces, Ajax [con jQuery], GWT 2, Spring, Hibernate, JPA,
        basado en SOAP y Servicios Web RESTful, Hadoop, &amp; programación
        Java 7) </a>. Hay también cursos de formación con un instructor en vivo <a
        href="http://courses.coreservlets.com/"> sobre los mismos tópicos
        J2EE (servlets, JSP, Struts, JSF 1, JSF 2, PrimeFaces, Ajax [con
        jQuery], GWT 0, Spring, Hibernate, JPA, basado en SOAP y Servicios
        Web RESTful, Hadoop, &amp; programación Java 7) </a>.
    </p>
  </body>
</html>