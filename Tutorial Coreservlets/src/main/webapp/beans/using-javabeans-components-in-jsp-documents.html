<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../css/JSP-Styles.css" type="text/css">
    <title>Usando Componentes JavaBeans en Documentos JSP - La lección</title>
  </head>
  <body>
    <h1>Usando Componentes JavaBeans en Documentos JSP</h1>
    <h2>La Lección</h2>
    <h3>Agenda</h3>
    <ul>
      <li class="n1">Entender los beneficios de los beans</li>
      <li class="n2">
        Usaremos beans simples aquí. Las secciones posteriores cubrirán beans con MVC y el lenguaje de expresión JSP.
      </li>
      <li class="n1">Crear beans</li>
      <li class="n1">Instalar clases de beans en su servidor</li>
      <li class="n1">Acceder a propiedades del bean</li>
      <li class="n1">Establecer explícitamente propiedades de un bean</li>
      <li class="n1">Establecimiento automático de propiedades de bean a partir de parámetros de solicitud</li>
      <li class="n1">Compartir beans entre multiples servlets y páginas JSP</li>
    </ul>
    <hr />
    <h3>Usos de construcciones JSP</h3>
    (IMAGEN A LA IZQUIERDA)
    <ul>
      <li class="n1">Elementos de script llamando a código del servlet directamente</li>
      <li class="n1">Elementos de script llamando a código del servlet indirectamente (por medio de clases de utilidad)</li>
      <li class="n1"><em class="rojo">Beans</em></li>
      <li class="n1">Combinado Servlet/JSP (MVC)</li>
      <li class="n1">MVC con el lenguaje de expresión JSP</li>
      <li class="n1">Etiquetas personalizadas</li>
      <li class="n1">MVC con beans, etiquetas personalizadas, y marcos de trabajo como Struts o JSF</li>
    </ul>
    <hr />
    <h3>Antecedentes: ¿Qué Son los Beans?</h3>
    <ul>
      <li class="n1">Clases Java que siguen ciertas convenciones</li>
      <li class="n2">Deben tener un constructor de cero argumentos (vacío)</li>
      <li class="n3">
        Puede satisfacer este requerimiento o definiendo explícitamente tal constructor u omitir todos los constructores.
      </li>
      <li class="n2">No debería tener variables de instancia públicas (campos)</li>
      <li class="n3">Debería seguir esta práctica y usar metodos de acceso en vez de permitir el acceso directo a los campos</li>
      <li class="n2">se debe acceder a los valores persistentes a través de métodos llamados <i>getXxx</i> y <i>setXxx</i>
      </li>
      <li class="n3">
        Si la clase tiene el método getTitle que devuelve una String, se dice que la clase tiene una <i>propiedad</i> de tipo 
        String llamada title
      </li>
      <li class="n3">Las propiedades booleanas pueden usar <i>isXxx</i> en vez de <i>getXxx</i></li>
      <li class="n3">¡Es el nombre del método, no la variable de instancia lo que importa!</li>
      <li class="n2">Para saber más sobre beans, vea http://java.sun.com/beans/docs/</li>
    </ul>
    <hr />
    <h3>Más sobre Propiedades del Bean</h3>
    <ul>
      <li class="n1">Regla usual para convertir el nombre del método en el nombre de la propiedad</li>
      <li class="n2">
        Suelta la palabra "get" o "set" y cambia la siguiente letra a minúsculas. Nuevamente, el nombre de la instancia var es 
        irrelevante.
      </li>
      <li class="n3">Nombre del método: getUserFirstName</li>
      <li class="n3">Nombre de la propiedad: userFirstName</li>
      <li class="n1">Excepción 1: propiedades booleanas</li>
      <li class="n2">Si el método getter devuelve boolean o Boolean</li>
      <li class="n3">Nombre del metodo: getPrime <em class="sub">o</em>isPrime</li>
      <li class="n3">Nombre de la propiedad: prime</li>
      <li class="n1">Excepción 2: letras mayúsculas consecutivas</li>
      <li class="n2">Si dos letras mayúsculas en una fila después de “get” o “set”</li>
      <li class="n3">Nombre del método: getURL</li>
      <li class="n3">Nombre de propiedad: URL (no uRL)</li>
    </ul>
    <hr />
    <h3>Propiedades del Bean: Ejemplos</h3>
    <table style="border-spacing: 2px; width: 100%">
      <thead>
        <tr style="color: white; background-color: black">
          <th>Nombres del Método</th>
          <th>Nombre de la Propiedad</th>
          <th>Uso de Ejemplo de JSP</th>
        </tr>
      </thead>
      <tbody>
        <tr style="background-color: gray;">
          <td>getFirstName<br> setFirstName
          </td>
          <td style="text-align: center">firstname</td>
          <td>&lt;jsp:getProperty … property="firstName"/&gt;<br />
            &lt;jsp:setProperty … property="firstName"/&gt;<br />
            ${customer.firstName}
          </td>
        </tr>
        <tr style="background-color: rgb(171, 169, 168)">
          <td>isExecutive<br /> setExecutive<br /> (Propiedad booleana)
          </td>
          <td style="text-align: center">executive</td>
          <td>&lt;jsp:getProperty … property="executive"/&gt;<br />
            &lt;jsp:setProperty … property="executive"/&gt;<br />
            ${customer.executive}
          </td>
        </tr>
        <tr style="background-color: gray;">
          <td>getExecutive<br /> setExecutive<br /> (Propiedad
            booleana)
          </td>
          <td style="text-align: center">executive</td>
          <td>&lt;jsp:getProperty … property="executive"/&gt;<br />
            &lt;jsp:setProperty … property="executive"/&gt;<br />
            ${customer.executive}
          </td>
        </tr>
        <tr style="background-color: rgb(171, 169, 168)">
          <td>getZIP<br /> setZIP
          </td>
          <td style="text-align: center">ZIP</td>
          <td>&lt;jsp:getProperty … property="ZIP"/&gt;<br />
            &lt;jsp:setProperty … property="ZIP"/&gt;<br /> ${address.ZIP}
          </td>
        </tr>
      </tbody>
    </table>
    <p style="font-size: 11px; color: blue; text-align: center;">
      Nota 1: el nombre de la propiedad no existe en ninguna parte en tu código. Es solo un atajo para el nombre del método.
    </p>
    <p style="font-size: 11px; color: blue; text-align: center;">
      Nota 2: el nombre de la propiedad se deriva sólo del nombre del método. El nombre de la variable de instancia es irrelevante.
    </p>
    <hr />
    <h3>Porqué Debería Usar Métodos de Acceso, No Campos Públicos</h3>
    <ul>
      <li class="n1">Reglas de Bean</li>
      <li class="n2">Para ser un bean, no deberías tener campos públicos.</li>
      <li class="n2">Incorrecto<br /> 
        <pre>
<em class="rojo">public</em> double speed;
        </pre>
      </li>
      <li class="n2">Correcto 
        <pre> 
<em class="rojo">private</em> double speed; // La variable no necesita coincidir el nombre del método 

public double <em class="rojo">getSpeed</em>() { 
	return(speed); 
} 
public void <em class="rojo">setSpeed</em>(double speed) { 
	this.speed = speed; 
} 
        </pre>
      </li>

      <li class="n1">Diseño POO</li>
      <li class="n2">Deberías hacer esto en todo tu código Java de todos modos. ¿Por qué?</li>
    </ul>
    <p>
      Nota: en Eclipse, después de crear una variable de instancia, si usted hace click derecho y elije "Fuente", le da la opción 
      de generar getters y setters por usted.
    </p>
    <hr />
    <h3>Porque Debería Usar Métodos de Acceso, No Campos Públicos</h3>
    <ul>
      <li class="n1">1) Puede colocar restricciones en valores</li>
    </ul>
    <pre> 
    public void setSpeed(double newSpeed) { 
	  if (newSpeed &lt; 0) {
	    sendErrorMessage(...); 
        newSpeed = Math.abs(newSpeed); 
      } 
      speed = newSpeed; 
    }
    </pre>
    <ul>
      <li class="n2">
        Si los usuarios de su clase accedieran directamente a los campos, serían responsables de verificar las restricciones .
      </li>
      <li class="n1">2) Puede cambiar su representación interna sin cambiar el interfaz</li>
    </ul>
    <pre> 
    // Ahora usando unidades métricas (kph, not mph)
    public void setSpeed(double newSpeed) { 
        speedInKPH = convert(newSpeed); 
    }

    public void setSpeedInKPH(double newSpeed) {
        speedInKPH = newSpeed; 
    }
    </pre>
    <ul>
      <li class="n1">3) Puede realizar efectos secundarios arbitrarios:</li>
    </ul>
    <pre> 
    public double setSpeed(double newSpeed) { 
        speed = newSpeed;
        updateSpeedometerDisplay(); 
    }
    </pre>
    <ul>
      <li class="n2">
        Si los usuarios de su clase accedieran directamente a los campos, serían responsables de la ejecución de los efectos 
        secundarios. Demasiado trabajo y corre un gran riesgo de que la visualización no sea coherente con los valores reales .
      </li>
    </ul>
    <hr />
    <h3>Resultado Final</h3>
    <ul>
      <li class="n1">No es un requisito oneroso ser un "bean"</li>
      <li class="n2">Probablemente ya estés siguiendo la mayoría de las convenciones de todos modos</li>
      <li class="n1">Constructor de cero argumentos (¡no requerido en MVC!)</li>
      <li class="n1">Sin variables de instancia públicas</li>
      <li class="n1">Se usa convenciones de nombrado getBlah/setBlah o isBlah/setBlah</li>
      <li class="n1">JSP proporciona muchos lugares donde se refiere a "propiedades bean"</li>
      <li class="n2">Cuáles son los atajos para los métodos getter /setter</li>
      <li class="n3">Método getFirstName: refiere a “firstName”</li>
      <li class="n3">Método isMyThingCool (booleano): refiere a “myThingCool”</li>
      <li class="n3">Metodo getHTMLString: refiere a “HTMLString”</li>
    </ul>
    <hr />
    <h3>Usar Beans: Tareas Básicas</h3>
    <ul>
      <li class="n1">jsp:useBean</li>
      <li class="n2">En el caso más simple, este elemento construye un nuevo bean. Se usa normalmente como sigue:</li>
      <li class="n3">&lt;jsp:useBean id="beanName" class="package.Class" /&gt;</li>
      <li class="n1">jsp:setProperty</li>
      <li class="n2">
        Este elemento modifica una propiedad del bean (p.e., llama a un método setBlah ). Se usa normalmente como sigue:
      </li>
      <li class="n3">&lt;jsp:setProperty name="beanName" property="propertyName" value="propertyValue" /&gt;</li>
      <li class="n1">jsp:getProperty</li>
      <li class="n2">Este elemento lee y emite el valor de una propiedad bean. Se usa como sigue:</li>
      <li class="n3">&lt;jsp:getProperty name="beanName" property="propertyName" /&gt;</li>
    </ul>
    <hr />
    <h3>Enfoque general con páginas independientes y jsp: Etiquetas useBean</h3>
    <ul>
      <li class="n1">Formulario de entrada</li>
      <li class="n2">El usuario envía un formulario que hace referencia a una página JSP</li>
      <li class="n3">&lt;FORM ACTION="SomePage.jsp"&gt;</li>
      <li class="n1">Página JSP</li>
      <li class="n2">La página JSP instancia un bean</li>
      <li class="n3">&lt;jsp:useBean id="myBean" class="…"/&gt;</li>
      <li class="n2">Usted pasa algunos datos de la petición al bean</li>
      <li class="n3">&lt;jsp:setProperty name="myBean" …/&gt;</li>
      <li class="n4">Hay varias formas de usar jsp:setProperty, pero la mejor es con property="*", como veremos en breve.</li>
      <li class="n2">Emite algunos valores derivados de los datos de la petición</li>
      <li class="n3">&lt;jsp:getProperty name="myBean" property="bankAccountBalance"/&gt;</li>
    </ul>
    <hr />
    <h3>Construir Beans: jsp:useBean</h3>
    <ul>
      <li class="n1">Formato</li>
      <li class="n2">&lt;jsp:useBean id="name" class="package.Class" /&gt;</li>
      <li class="n1">Propósito</li>
      <li class="n2">Permitir la instanciación de clases Java sin programación explícita en Java (sintaxis compatible con XML)</li>
      <li class="n1">Notas</li>
      <li class="n2">Interpretación Simple:</li>
    </ul>
    <pre style="padding-left: 60px;">&lt;jsp:useBean id="book1" class="coreservlets.Book" /&gt; </pre>
    <span style="padding-left: 80px;">puede pensarse como equivalente al </span>
    <pre style="padding-left: 60px;">scriptlet &lt;% coreservlets.Book book1 = new coreservlets.Book();%&gt;</pre>
    <ul>
      <li class="n2">Pero jsp:useBean tiene dos ventajas adicionales:</li>
      <li class="n3">Es más fácil de derivar valores de objeto de los parámetros de petición</li>
      <li class="n3">Es más fácil compartir objetos entre páginas o servlets</li>
    </ul>
    <hr />
    <h3>Establecer Propiedades Simples del Bean: jsp:setProperty</h3>
    <ul>
      <li class="n1">Formato</li>
      <li class="n2">&lt;jsp:setProperty name="name" property="property" value="value" /&gt;</li>
      <li class="n1">Propósito</li>
      <li class="n2">Permite establecer propiedades de bean (p.e., llamadas a metodos setXxx) sin programación explícita en Java</li>
      <li class="n1">Notas</li>
      <li class="n2">&lt;jsp:setProperty name="book1" property="title"
        value="Core Servlets and JavaServer Pages" /&gt; <br />es equivalente al siguiente scriptlet<br />
        &lt;% book1.setTitle("Core Servlets and JavaServer Pages"); %&gt;
      </li>
    </ul>
    <hr />
    <h3>Acceder a Propiedades del Bean: jsp:getProperty</h3>
    <ul>
      <li class="n1">Formato<br /> &lt;jsp:getProperty name="name" property="property" /&gt;
      </li>
      <li class="n1">Propósito</li>
      <li class="n2">Permitir el acceso a propiedades del bean (p.e., llamadas a métodos getXxx) sin programación explícita en Java</li>
      <li class="n1">Notas</li>
      <li class="n2">
        &lt;jsp:getProperty name="book1" property="title"/&gt; es equivalente a la siguiente expresión JSP 
        &lt;%=book1.getTitle() %&gt;
      </li>
    </ul>
    <hr />
    <h3>Ejemplo: StringBean</h3>
    <pre>
	package coreservlets; 
	
	public class StringBean {
	  private String message = "No message specified"; 
	  
	  public String getMessage() {
	    return(message);
	  }
	  
	  public void setMessage(String message) {
	    this.message = message; 
	  }
	}
    </pre>
    <ul>
      <li class="n1">Beans instalado en directorio normal de Java</li>
      <li class="n2">MyEclipse: src/folderMatchingPackage</li>
      <li class="n2">Despliegue: WEB-INF/classes/folderMatchingPackage</li>
      <li class="n1">¡Los beans deben estar siempre dentro de los paquetes!</li>
    </ul>
    <hr />
    <h3>Página JSP Que Usa StringBean (Código)</h3>
    <pre>
	&lt;jsp:useBean id="stringBean" class="coreservlets.StringBean" /&gt;
	&lt;OL&gt;
	  &lt;LI&gt;Initial value (from jsp:getProperty):
	    &lt;I&gt;&lt;jsp:getProperty name="stringBean" 
	        property="message" /&gt;&lt;/I&gt;
	  &lt;LI&gt;Initial value (from JSP expression):
	    &lt;I&gt;&lt;%= stringBean.getMessage() %&gt;&lt;/I&gt;
	  &lt;LI&gt;&lt;jsp:setProperty name="stringBean" 
	                                property="message"
	                                value="Best string bean: Fortex" /&gt;
	    Value after setting property with jsp:setProperty: 
	    &lt;I&gt;&lt;jsp:getProperty name="stringBean"
	                                 property="message" /&gt;&lt;/I&gt;
    &lt;LI&gt;&lt;%	stringBean.setMessage("My favorite: Kentucky Wonder"); %&gt; 
           Value after setting property with scriptlet: 
           &lt;I&gt;&lt;%=stringBean.getMessage() %&gt;&lt;/I&gt;
    &lt;/OL&gt; 
    </pre>
    <p>
      ¡No mezcle realmente scripting y jsp;useBean en la misma página! Solo estoy ilustrando que detrás de escena, las etiquetas 
      jsp: solo están llamando al código Java.
    </p>
    <hr />
    <h3>Página JSP Que Usa StringBean (Resultado)</h3>
    (IMAGEN) 23
    <hr />
    <h3>Establecer Propiedades del Bean Caso 1: Conversión Explícita &amp; Asignación</h3>
    <pre>
	&lt;!DOCTYPE ...&gt; ...
	&lt;jsp:useBean id="entry" class="coreservlets.SaleEntry" /&gt;
	&lt;%--setItemID expects a String --%&gt;
	&lt;jsp:setPropertyname="entry" property="itemID" value='&lt;%=
	request.getParameter("itemID") %&gt;' /&gt; 
    </pre>
    <p>
      Mal: Viola la regla de no tener scripting en páginas que usan jsp:useBean, jsp:getProperty, y jsp:setProperty.
    </p>
    <hr />
    <h3>Establecer Propiedades del Bean Caso 1: Conversión Explícita &amp; Asignación</h3>
    <pre>
	&lt;% int numItemsOrdered = 1; try {
	numItemsOrdered = Integer.parseInt(request.getParameter("numItems")); }
	catch(NumberFormatException nfe) {} %&gt; &lt;%--setNumItems expects an
	int --%&gt; &lt;jsp:setPropertyname="entry" property="numItems"
	value="&lt;%= numItemsOrdered %&gt;" /&gt; 
    </pre>
    <p>
      Incluso peor que en la anterior diapositiva: no solo tiene scripting, sino que tiene secciones largas y feas de código Java.
    </p>
    <hr />
    <h3>Establecer Propiedades del Bean Caso 1: Conversión Explicita &amp; Asignación</h3>
    <pre>
	&lt;% 
	double discountCode = 1.0; 
	try { 
	  String discountString =
	    request.getParameter("discountCode"); 
	  discountCode =
	    Double.parseDouble(discountString); 
	} catch(NumberFormatException nfe) {} 
	
	%&gt; &lt;%--setDiscountCode expects a double --%&gt;
	
	&lt;jsp:setProperty 
	    name="entry" 
	    property="discountCode" 
	    value="&lt;%=discountCode %&gt;" /&gt;
    </pre>
    <hr />
    <h3>Establecer Propiedades del Bean Caso 1: Conversión Explícita &amp; Asignación</h3>
    (IMAGEN) 26
    <hr />
    <h3>Caso 2: Asociar IndividualProperties con Parámetros de Entrada</h3>
    <ul>
      <li class="n1">Uso del atributo de parámetro de jsp:setProperty para indicar que</li>
      <li class="n2">El valor debe provenir del parámetro de solicitud especificado</li>
      <li class="n2">
        Se debe realizar una conversión de tipo automática simple para las propiedades que esperan valores de tipos estándar
      </li>
      <li class="n3">boolean, Boolean, byte, Byte, char, Character, double, Double, int, Integer, float, Float, long, o Long.</li>
    </ul>
    <hr />
    <h3>Caso 2: Asociar IndividualProperties con Parámetros de Entrada</h3>
    <pre>
	&lt;jsp:useBean id="entry" 
	                class="coreservlets.SaleEntry" /&gt;
	&lt;jsp:setProperty 
	     name="entry" 
	     property="itemID" 
	     param="itemID" /&gt;
	&lt;jsp:setProperty 
	     name="entry" 
	     property="numItems" 
	     param="numItems" /&gt; 
	&lt;jsp:setProperty 
	     name="entry" 
	     property="discountCode"
	     param="discountCode" /&gt;
    </pre>
    <hr />
    <h3>Caso 3: Asociar Todas las Propiedades con los Parámetros de Entrada</h3>
    <ul>
      <li class="n1">• Use "*" para el valor del atributo de propiedad de jsp:setProperty para indicar que</li>
      <li class="n2">– El valor debe venir del parámetro de petición cuyo nombre coincide con la propiedad de nombre</li>
      <li class="n2">– Se debe realizar una conversión de tipo automática simple</li>
    </ul>
    <h3>Caso 3: Asociar Todas las Propiedades con los Parámetros de Entrada</h3>
    <pre>
	&lt;jsp:useBean id="entry" class="coreservlets.SaleEntry" /&gt;
	&lt;jsp:setProperty name="entry" property="*" /&gt; 
    </pre>
    <ul>
      <li class="n1">
        Esto es extremadamente conveniente para hacer "beans de formulario" -- objetos cuyas propiedades se rellenan desde un 
        envío de formulario.
      </li>
      <li class="n2">Incluso puede dividir el proceso en varios formularios, donde cada envío llena una parte del objeto.</li>
    </ul>
    <hr />
    <h3>Compartir Beans</h3>
    <ul>
      <li class="n1">Puede usar el atributo de alcance para especificar lugares adicionales donde almacenar el bean</li>
      <li class="n2">Todavía también vinculado a la variable local en _jspService</li>
      <li class="n2">&lt;jsp:useBean id="…" class="…" scope="…" /&gt;</li>
      <li class="n1">Beneficios</li>
      <li class="n2">Permite que múltiples servlets o páginas JSP compartan datgos</li>
      <li class="n2">También permite la creación condicional de beans</li>
      <li class="n3">Cree un nuevo objeto solo si no se pueden encontrar uno existente </li>
    </ul>
    <hr />
    <h3>Compartir Beans: Ejemplo</h3>
    <ul>
      <li class="n1">page1.jsp</li>
    </ul>
    <pre> 
	&lt;jsp:useBean id="foo" class="…" scope="application"/&gt;
	&lt;jsp:setProperty name="foo" property="message" value="Hello"/&gt;
	&lt;jsp:getProperty name="foo" property="message"/&gt; 
    </pre>
    <ul>
      <li class="n1">page2.jsp</li>
    </ul>
    <pre>
	&lt;jsp:useBean id="foo" class="…" scope="application"/&gt;
	&lt;jsp:getProperty name="foo" property="message"/&gt; 
    </pre>
    <ul>
      <li class="n1">Escenario posible 1</li>
      <li class="n2">Joe va a la página 2(la salida es "Mensaje por defecto")</li>
      <li class="n2">Jane va la página 1 (la salida es "Hola")</li>
      <li class="n1">Escenario posible 2</li>
      <li class="n2">Joe va la página 1(la salida es "Hola")</li>
      <li class="n2">Jane va a la página 2 (la salida es "Hola")</li>
    </ul>
    <hr />
    <h3>Valores del Atributo de alcance</h3>
    <ul>
      <li class="n1">page (&lt;jsp:useBean … scope="page"/&gt;or&lt;jsp:useBean…&gt;)</li>
      <li class="n2">
        Valor predeterminado. El objeto bean debe ser colocado en el objeto PageContext durante la duración de la 
        petición actual. Permite a los métodos en el mismo servlet acceder al bean.
      </li>
      <li class="n1">application(&lt;jsp:useBean …scope="application"/&gt;)</li>
      <li class="n2">
        El bean será almacenado en ServletContext (disponible a traés de la variable application o llamando a 
        getServletContext()). ServletContext es compartido por todos los servlets en la misma aplicación Web (o todos los servlets 
        en el servidor si no existen o se definen aplicaciones web explícitas).
      </li>
    </ul>
    <hr />
    <h3>Valores del Atributo alcance</h3>
    <ul>
      <li class="n1">session (&lt;jsp:useBean … scope="session"/&gt;)</li>
      <li class="n2">
        Lod beans serán almacenados en el objeto HttpSession asociado con la petición actual, donde puede ser accedido desde el 
        código de un servlet normal con getAttribute y setAttribute, como con los objetos normales de sesión.
      </li>
      <li class="n1">request(&lt;jsp:useBean … scope="request"/&gt;)</li>
      <li class="n2">
        El objeto bean debe ser colocado en el objeto ServletRequest durante la duración de la petición actual, donde está 
        disponible mediante getAttribute</li>
    </ul>
    <hr />
    <h3>Compartir Beans en Cuatro Formas Diferentes</h3>
    <ul>
      <li class="n1">Usar beans no compartidos (alcance de página).</li>
      <li class="n1">Compartiendo beans de alcance de petición.</li>
      <li class="n1">Compartiendo beans de alcance de sesión.</li>
      <li class="n1">Compartiendo beans de alcance de aplicación (p.e. en el alcance de ServletContext)</li>
      <li class="n1">Importante:</li>
      <li class="n2">Use nombres diferentes (p.e. id in jsp:useBean) par beans diferentes</li>
      <li class="n3">No almacene beans en lugares diferentes con el mismo Id</li>
    </ul>
    <hr />
    <h3>Compartir Beans de Cuatro Formas: Código del Bean</h3>
    <pre>
	package coreservlets;
	 … 
	public class BakedBean implements Serializable { 
	  private String level = "half-baked"; 
	  private String goesWith = "hot dogs"; 
	  
	  public String getLevel() { 
	    return(level); 
	  } 
	  public void setLevel(String newLevel) { 
	    level = newLevel; 
	  } 
	  public String getGoesWith() { 
	    return(goesWith); 
	  } 
	  public void setGoesWith(String dish) { 
	    goesWith = dish; 
	  } 
	}
    </pre>
    <hr />
    <h3>Compartir Beans Ejemplo 1: Alcance de Página (No compartido)</h3>
    <ul>
      <li class="n1">Cree el bean</li>
      <li class="n2">Use jsp:useBean con scope="page" (o sin ningún alcance, ya que página es el alcance predeterminado).</li>
      <li class="n1">Modifique el bean</li>
      <li class="n2">Use jsp:setProperty con property="*".</li>
      <li class="n2">Luego, proporcione los parámetros de solicitud que coincidan con los nombres de las propiedades del bean.</li>
      <li class="n1">Acceda al bean</li>
      <li class="n2">Use jsp:getProperty.</li>
    </ul>
    <hr />
    <h3>Compartir Beans Ejemplo 1: Alcance de Página (No compartido)</h3>
    <pre>
	… 
	&lt;BODY&gt; 
	&lt;H1&gt;Baked Bean Values: page-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="pageBean"
	                class="coreservlets.BakedBean" /&gt;
    &lt;jsp:setProperty name="pageBean" property="*" /&gt; 
    &lt;H2&gt;Bean level:
	&lt;jsp:getProperty name="pageBean" 
	                    property="level" /&gt; 
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with: 
	&lt;jsp:getProperty name="pageBean"
	                    property="goesWith" /&gt; 
	&lt;/H2&gt;
	&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Compartir Beans Ejemplo 1: Resultado (Petición Inicial)</h3>
    (IMAGEN) 40
    <hr />
    <h3>Compartir Beans Ejemplo 1: Resultado (Solicitud Posterior)</h3>
    (IMAGEN)
    <hr />
    <h3>Compartir Beans Ejemplo 2: Compartido Basado en la Petición</h3>
    <ul>
      <li class="n1">Cree el bean</li>
      <li class="n2">Use jsp:useBean con scope="request".</li>
      <li class="n1">Modifique el bean</li>
      <li class="n2">Use jsp:setProperty con property="*".</li>
      <li class="n2">Luego, proporcione los parámetros de solicitud que coincidan con los nombres de las propiedades del bean.</li>
      <li class="n1">Acceda al bean en la primera página (principal)</li>
      <li class="n2">Use jsp:getProperty.</li>
      <li class="n2">Luego, use jsp:include  para invocar a la segunda página.</li>
      <li class="n1">Acceda al bean en la segunda página (incluída)</li>
      <li class="n2">Use jsp:useBean con el mismo id como en la primera página, de nuevo con scope="request".</li>
      <li class="n2">Luego, use jsp:getProperty.</li>
    </ul>
    <hr />
    <h3>Compartido Basado en la Petición: Código para la Página Principal</h3>
    <pre>
	… 
	&lt;BODY&gt;
	&lt;H1&gt;Baked Bean Values: request-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="requestBean"
	                class="coreservlets.BakedBean" 
	                scope="request" /&gt;
	&lt;jsp:setProperty name="requestBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="requestBean"
	                    property="level" /&gt;&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="requestBean" 
	                    property="goesWith"	/&gt;&lt;/H2&gt;
    &lt;jsp:include page=
	  "/WEB-INF/includes/BakedBeanDisplay-snippet.jsp"/&gt;
	&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Compartido Basado en la Petición: Código para la Página Incluída</h3>
    <pre>
	&lt;H1&gt;Repeated Baked Bean Values: 
	request-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="requestBean" 
	                class="coreservlets.BakedBean"
	                scope="request" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="requestBean" 
	                    property="level" /&gt;
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with: 
	&lt;jsp:getProperty name="requestBean"
	                    property="goesWith" /&gt;
	&lt;/H2&gt;
    </pre>
    <hr />
    <h3>Compartido Basado en la Petición: Resultado (Petición Inicial)</h3>
    (IMAGEN) 45
    <hr />
    <h3>Compartido Basado en la Petición: Resultado (Solicitud Posterior)</h3>
    (IMAGEN) 46
    <hr />
    <h3>Compartir Beans Ejemplo 3: Compartido Basado en la Sesión:</h3>
    <ul>
      <li class="n1">Cree el bean</li>
      <li class="n2">Use jsp:useBean con scope="session".</li>
      <li class="n1">Modifique el bean</li>
      <li class="n2">Use jsp:setProperty con property="*".</li>
      <li class="n2">Luego, proporcione parámetros que coincidan con los nombres de propiedad del bean.</li>
      <li class="n1">Acceda al bean en la petición inicial</li>
      <li class="n2">Use jsp:getProperty en la petición en la que se invoca a jsp:setProperty.</li>
      <li class="n1">Acceda al bean más tarde</li>
      <li class="n2">
        Use jsp:getProperty en una petición que no incluya peticiones de parámetros y por lo tanto no invoque a jsp:setProperty. 
        Si esta petición es desde el mismo cliente (dentro del tiempo de espera de la sesión), se ve el valor modficado previamente. 
        Si esta petición es desde un cliente diferente (o después del tiempo de espera de la sesión), se ve un bean nuevamente 
        creado.
      </li>
    </ul>
    <hr />
    <h3>Compartir Basado en Sesión: Código</h3>
    <pre>
	… 
	&lt;BODY&gt;
	&lt;H1&gt;Baked Bean Values: session-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="sessionBean"
	                class="coreservlets.BakedBean" 
	                scope="session" /&gt;
	&lt;jsp:setProperty name="sessionBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level: 
	&lt;jsp:getProperty name="sessionBean"
	                    property="level" /&gt;
	&lt;/H2&gt;
	&lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="sessionBean" 
	                    property="goesWith" /&gt;
	&lt;/H2&gt;&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Compartido Basado en la Sesión: Resultado (Petición Inicial)</h3>
    (IMAGEN) 49
    <hr />
    <h3>Compartido Basado en la Sesión: Resultado (Solicitud Posterior - Mismo Cliente)</h3>
    (IMAGEN) 50
    <hr />
    <h3>Compartido Basado en la Sesión: Resultado (Solicitud Posterior - Nuevo Cliente)</h3>
    (IMAGEN) 51
    <hr />
    <h3>Compartir Beans Ejemplo 4: Compartir Basado en la Aplicación</h3>
    <ul>
      <li class="n1">Cree el bean</li>
      <li class="n2">Use jsp:useBean con scope="application".</li>
      <li class="n1">Modifique el bean</li>
      <li class="n2">Use jsp:setProperty con property="*".</li>
      <li class="n2">Luego, proporcione parámetros de petición que coincidan con los nombres de las propiedades del bean.</li>
      <li class="n1">Acceda al bean en la petición inicial</li>
      <li class="n2">Use jsp:getProperty en la petición en la cual se invocó jsp:setProperty.</li>
      <li class="n1">Acceda al bean más tarde</li>
      <li class="n2">
        Use jsp:getProperty en una petición que no incluya parámetros de petición y así no invoque a jsp:setProperty. 
        Use jsp:getProperty. Ya sea que esta solicitud sea del mismo cliente o de un cliente diferente (independientemente del 
        tiempo de espera de la sesión), se ve el valor modificado previamente.</li>
    </ul>
    <hr />
    <h3>Compartir Basado en la Aplicación: Código</h3>
    <pre>
	&lt;BODY&gt; 
	&lt;H1&gt;Baked Bean Values: 
	application-based Sharing&lt;/H1&gt;
	&lt;jsp:useBean id="applicationBean"
	                class="coreservlets.BakedBean" 
	                scope="application" /&gt;
	&lt;jsp:setProperty name="applicationBean" 
	                    property="*" /&gt;
	&lt;H2&gt;Bean level:
	&lt;jsp:getProperty name="applicationBean"
	                    property="level" /&gt;
    &lt;/H2&gt;
    &lt;H2&gt;Dish bean goes with:
	&lt;jsp:getProperty name="applicationBean" 
	                    property="goesWith"/&gt;
	&lt;/H2&gt;&lt;/BODY&gt;&lt;/HTML&gt;
    </pre>
    <hr />
    <h3>Compartido Basado en la Aplicación: Resultado (Petición Inicial)</h3>
    (IMAGEN) 54
    <hr />
    <h3>Compartido Basado en la Aplicación: Resultado (Petición Posterior - Mismo Cliente)</h3>
    (IMAGEN) 55
    <hr />
    <h3>Compartido Basado en la Aplicación: Resultado (Petición Posterior - Nuevo Cliente)</h3>
    (IMAGEN) 56
    <hr />
    <h3>Operaciones Condicionales con Beans</h3>
    <ul>
      <li class="n1">Bean creado condicionalmente</li>
      <li class="n2">
        jsp: useBean da como resultado la instanciación de un nuevo bean solo si no se puede encontrar ningún bean con el mismo ID 
        y alcance.
      </li>
      <li class="n2">
        Si un bean con el mismo id y alcance se encuentra, el bean preexistente simplemente se vincula a la variable referenciada 
        por id.
      </li>
      <li class="n1">Propiedades del bean establecidas condicionalmente.</li>
      <li class="n2">&lt;jsp:useBean ... /&gt; reemplazado por &lt;jsp:useBean ...&gt;sentencias&lt;/jsp:useBean&gt;</li>
      <li class="n2">
        Las sentencias (elementos jsp:setProperty) son ejecutados solo si se crea un nuevo bean, no si se encuentra un bean 
        existente.
      </li>
    </ul>
    <hr />
    <h3>Creación Condicional de Bean: AccessCountBean</h3>
    <pre>
	public class AccessCountBean { 
	  private String firstPage; 
	  private int accessCount = 1; 
	  
	  public String getFirstPage() { 
	    return(firstPage); 
	  }
	  public void setFirstPage(String firstPage) { 
	    this.firstPage = firstPage; 
	  } 
	  public int getAccessCount() { 
	    return(accessCount); 
	  }
	  public void setAccessCountIncrement(int increment) { 
	    accessCount = accessCount + increment; 
	  } 
	}
    </pre>
    <h3>Creación Condicional de Bean: SharedCounts1.jsp</h3>
    <pre>
	&lt;jsp:useBean id="counter" 
	                class="coreservlets.AccessCountBean"
	                scope="application"&gt; 
      &lt;jsp:setProperty name="counter"
	                      property="firstPage" 
	                      value="SharedCounts1.jsp" /&gt;
	&lt;/jsp:useBean&gt; 
	Of SharedCounts1.jsp (this page), 
	&lt;A HREF="SharedCounts2.jsp"&gt;SharedCounts2.jsp&lt;/A&gt;, and 
	&lt;A HREF="SharedCounts3.jsp"&gt;SharedCounts3.jsp&lt;/A&gt;,
	&lt;jsp:getProperty name="counter" property="firstPage" /&gt; 
	was the first page accessed. 
	&lt;P&gt;
	Collectively, the three pages have been accessed 
	&lt;jsp:getProperty name="counter" property="accessCount" /&gt;
	times. 
	&lt;jsp:setProperty name="counter"
	                    property="accessCountIncrement" 
	                    value="1" /&gt;
    </pre>
    <hr />
    <h3>Accediendo a SharedCounts1, SharedCounts2, SharedCounts3</h3>
    <ul>
      <li class="n1">Se accedió primero a SharedCounts2.jsp.</li>
      <li class="n1">Se ha accedido a las páginas doce veces anteriormente por un número arbitrario de clientes</li>
    </ul>
    (IMAGEN 60)
    <hr />
    <h3>Sumario</h3>
    <ul>
      <li class="n1">Beneficios de jsp:useBean</li>
      <li class="n2">Ocultar la sintaxis Java. ¡No hay scripts en estas páginas!</li>
      <li class="n2">Hace más fácil asociar parámetros de petición con objetos Java (propiedades del bean)</li>
      <li class="n2">
        Simplifica compartir objetos entre múltiples peticiones o servlets/JSPs</li>
      <li class="n1">jsp:useBean</li>
      <li class="n2">Crear o acceder un bean</li>
      <li class="n1">jsp:setProperty</li>
      <li class="n2">Establecer la propiedad de un bean (p.e. pasar valor a setXxx)</li>
      <li class="n1">Habitualmente usa property="*" para pasar en los parámetros de petición</li>
      <li class="n1">jsp:getProperty</li>
      <li class="n2">Coloca la propiedad del bean (p.e. llamada getXxx) en la salida de un servlet</li>
    </ul>
    <hr />
    <p style="text-align: center;">
      <a href="index.html">Volver al inicio de la sección</a>
    </p>
    <p style="font-size: small;">
      Todo el código de los <a href="http://courses.coreservlets.com/Course-Materials/">tutoriales J2EE de coreservlets.com 
        (servlets, JSP, Struts, JSF 1, JSF 2, PrimeFaces, Ajax [con jQuery], GWT 2, Spring, Hibernate, JPA, basado en SOAP y 
        Servicios Web RESTful, Hadoop, &amp; programación Java 7) </a>. Hay también cursos de formación con un instructor en vivo 
      <a href="http://courses.coreservlets.com/"> sobre los mismos tópicos J2EE (servlets, JSP, Struts, JSF 1, JSF 2, PrimeFaces, 
        Ajax [con jQuery], GWT 0, Spring, Hibernate, JPA, basado en SOAP y Servicios Web RESTful, Hadoop, &amp; programación Java 
        7)</a>.
    </p>
  </body>
</html>