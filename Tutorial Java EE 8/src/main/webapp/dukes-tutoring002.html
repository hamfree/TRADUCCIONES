<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Interfaz Principal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="dukes-tutoring001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="dukes-tutoring003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GKAFH">
      <h2 id="main-interface">Interfaz Principal</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            La interfaz principal permite que los estudiantes y el personal registren la entrada y salida de 
            los estudiantes y registren cuándo los estudiantes están afuera en el patio de recreo.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>
                <a href="#GKAFJ">
                  IPA de Java de las Entidades de Persistencia Utilizadas en la Interfaz Principal
                </a>
              </p>
            </li>
            <li>
              <p><a href="#GKAFC">Enterprise Beans Utilizados en la Interfaz Principal</a></p>
            </li>
            <li>
              <p><a href="#BCGHHCDA">Extremo de WebSocket Utilizado en la Interfaz Principal</a></p>
            </li>
            <li>
              <p><a href="#GKAET">Archivos Facelets Utilizados en la Interfaz Principal</a></p>
            </li>
            <li>
              <p><a href="#GKADH">Clases Auxiliares Utilizadas en la Interfaz Principal</a></p>
            </li>
            <li>
              <p><a href="#GKADA">Archivos de Propiedades</a></p>
            </li>
            <li>
              <p><a href="#GKAEV">Descriptores de Implementación Utilizados en la Tutoría de Duke</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="GKAFJ">
          <h3 id="java-persistence-api-entities-used-in-the-main-interface">
            IPA de Java de las Entidades de Persistencia Utilizadas en la Interfaz Principal
          </h3>
          <div class="paragraph">
            <p>
              Las siguientes entidades utilizadas en la interfaz principal encapsulan los datos almacenados y 
              manipulados por la Tutoría de Duke y se encuentran en el paquete 
              <code>dukestutoring.entity</code> en el proyecto <code>dukes-tutoring-common</code>.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>Person</code>: la entidad <code>Person</code> define atributos comunes a los 
                  estudiantes y tutores rastreados por la aplicación. Estos atributos son el nombre de la 
                  persona y la información de contacto, incluidos los números de teléfono y la dirección de 
                  correo electrónico. Esta entidad tiene dos subclases, <code>Student</code> y 
                  <code>Guardian</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>PersonDetails</code>: la entidad <code>PersonDetails</code> se usa para almacenar 
                  datos adicionales comunes a todas las personas, como atributos como imágenes y el cumpleaños 
                  de la persona, que no están incluidos en la entidad <code>Person</code> por motivos de 
                  rendimiento.
                </p>
              </li>
              <li>
                <p>
                  <code>Student</code> y <code>Guardian</code>: La entidad <code>Student</code> almacena 
                  atributos específicos de los estudiantes que acuden a la tutoría. Esto incluye información 
                  como el nivel de grado y la escuela del estudiante. Los atributos de la entidad 
                  <code>Guardian</code> son específicos de los padres o tutores de un <code>Student</code>. 
                  Los estudiantes y tutores tienen una relación de muchos a muchos. Es decir, un alumno puede 
                  tener uno o más tutores y un tutor puede tener uno o más alumnos.
                </p>
              </li>
              <li>
                <p>
                  <code>Address</code>: La entidad <code>Address</code> representa una dirección postal y está 
                  asociada con las entidades <code>Person</code>. Las direcciones y las personas tienen una 
                  relación de muchos a uno. Es decir, una persona puede tener muchas direcciones.
                </p>
              </li>
              <li>
                <p>
                  <code>TutoringSession</code>: La entidad <code>TutoringSession</code> representa un día 
                  particular en el centro de tutoría. Una sesión particular de tutoría rastrea qué estudiantes 
                  asistieron ese día y cuáles fueron al parque.
                </p>
              </li>
              <li>
                <p>
                  <code>StatusEntry</code>: la entidad <code>StatusEntry</code>, que registra cuando cambia el 
                  estado de un estudiante, está asociada con la entidad <code>TutoringSession</code>. Los 
                  estados de los estudiantes cambian cuando ingresan a una sesión de tutoría, cuando van al 
                  parque y cuando se retiran. La entrada de estado le permite al personal del centro de 
                  tutoría rastrear exactamente qué estudiantes asistieron a una sesión de tutoría, cuándo se 
                  registraron y cuándo salieron, qué estudiantes fueron al parque mientras estaban en el 
                  centro de tutoría y cuándo fueron y regresaron del parque.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Para obtener información sobre la creación de entidades de la IPA de Persistencia de Java, 
              consulte el 
              <a href="persistence-intro.html#BNBPZ">
                Capítulo 40, "Introducción a la IPA de Persistencia de Java"
              </a>. Para obtener información sobre la validación de datos de entidades, ver 
              <a href="persistence-intro002.html#GKAHQ">Validación de Propiedades y Campos Persistentes</a> y 
              <a href="bean-validation-advanced.html#GKAHP">
                Capítulo 24, "Validación de Beans: Temas Avanzados"</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKAFC">
          <h3 id="enterprise-beans-used-in-the-main-interface">
            Enterprise Beans Utilizados en la Interfaz Principal
          </h3>
          <div class="paragraph">
            <p>
              Los siguientes enterprise beans utilizados en la interfaz principal proporcionan la lógica de 
              negocio para la Tutoría de Duke y se encuentran en el paquete <code>dukestutoring.ejb</code> en 
              el proyecto <code>dukes-tutoring-war</code>:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>ConfigBean</code> es un bean de sesión único que se usa para crear los estudiantes 
                  predeterminados cuando la aplicación se implementa inicialmente y para crear un temporizador 
                  EJB automático que crea entidades de sesión de tutoría todos los días de la semana.
                </p>
              </li>
              <li>
                <p>
                  <code>RequestBean</code> es un bean de sesión sin estado que contiene los métodos de negocio 
                  para la interfaz principal. El bean también tiene métodos de negocio para recuperar listas 
                  de estudiantes. Estos métodos comerciales utilizan consultas API Criteria fuertemente 
                  tipadas para recuperar datos de la base de datos. <code>RequestBean</code> también inyecta 
                  una instancia de evento CDI, <code>StatusEvent</code>. Este evento se activa desde los 
                  métodos de negocio cuando cambia el estado de un estudiante.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Para obtener información sobre la creación y el uso de beans empresariales, consulte 
              <a href="partentbeans.html#BNBLR">Beans empresariales</a>. Para obtener información sobre cómo 
              crear consultas API Criteria fuertemente tipadas, consulte 
              <a href="persistence-criteria.html#GJITV">
                Capítulo 43, "Usando la IPA Criteria para Crear Consultas"
              </a>. Para obtener información sobre eventos CDI, consulte 
              <a href="cdi-adv005.html#GKHIC">Usando Eventos en Aplicaciones CDI</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="BCGHHCDA">
          <h3 id="websocket-endpoint-used-in-the-main-interface">
            Extremo de WebSocket Utilizado en la Interfaz Principal
          </h3>
          <div class="paragraph">
            <p>
              La clase <code>javaeetutorial.dukestutoring.web.websocket.StatusEndpoint</code> es un punto 
              final del servidor WebSocket que devuelve a los estudiantes y su estado a los puntos finales del 
              cliente. El método <code>StatusEndpoint.updateStatus</code> es un método observador CDI para el 
              evento <code>StatusEvent</code>. Cuando el estado de un alumno cambia en la interfaz principal, 
              se activa un <code>StatusEvent</code>. El contenedor llama al método observador 
              <code>updateStatus</code> y envía el cambio de estado a todos los puntos finales del cliente 
              registrados con <code>StatusEndpoint</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La página <code>index.xhtml</code> de JavaServer Faces contiene código JavaScript para 
              conectarse al punto final de WebSocket. El método <code>onMessage</code> en esta página hace 
              clic en un botón JavaServer Faces, que realiza una solicitud Ajax para actualizar la tabla que 
              muestra el estado actual de los estudiantes.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Para obtener más información sobre los extremos de WebSocket, consulte el 
              <a href="websocket.html#GKJIQ5">Capítulo 19, "IPA de Java para WebSocket"</a>. Para obtener 
              información sobre los eventos de CDI, consulte 
              <a href="cdi-adv005 .html#GKHIC">Usando Eventos en Aplicaciones CDI</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKAET">
          <h3 id="facelets-files-used-in-the-main-interface">
            Archivos Facelets Utilizados en la Interfaz Principal
          </h3>
          <div class="paragraph">
            <p>
              La aplicación Tutoría de Duke utiliza Facelets para mostrar la interfaz de usuario, haciendo un 
              amplio uso de las funciones de plantilla de Facelets. Facelets, la tecnología de visualización 
              predeterminada para la tecnología JavaServer Faces, consta de archivos XHTML ubicados en el 
              directorio <code>_tut-install_/examples/case-studies/dukes-tutoring-war/src/main/webapp/</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>Los siguientes archivos Facelets se utilizan en la interfaz principal:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><code>template.xhtml</code>: archivo de plantilla para la interfaz principal</p>
              </li>
              <li>
                <p><code>error.xhtml</code>: archivo de error si algo sale mal</p>
              </li>
              <li>
                <p><code>index.xhtml</code>: página de destino de la interfaz principal</p>
              </li>
              <li>
                <p><code>park.xhtml</code>: página que muestra quién está actualmente en el parque</p>
              </li>
              <li>
                <p>
                  <code>current.xhtml</code>: página que muestra quién está actualmente en la sesión de 
                  tutoría de hoy
                </p>
              </li>
              <li>
                <p>
                  <code>statusEntries.xhtml</code>: página que muestra el registro de entrada de estado 
                  detallado para la sesión de hoy
                </p>
              </li>
              <li>
                <p>
                  <code>resources/components/allStudentsTable.xhtml</code>: un componente compuesto para una 
                  tabla que muestra todos los estudiantes activos
                </p>
              </li>
              <li>
                <p>
                  <code>resources/components/allInactiveStudentsTable.xhtml</code>: un componente compuesto 
                  para una tabla que muestra todos los estudiantes inactivos
                </p>
              </li>
              <li>
                <p>
                  <code>resources/components/currentSessionTable.xhtml</code>: un componente compuesto para 
                  una tabla que muestra a todos los estudiantes en la sesión de hoy
                </p>
              </li>
              <li>
                <p>
                  <code>resources/components/parkTable.xhtml</code>: un componente compuesto para una tabla 
                  que muestra todos los estudiantes actualmente en el parque
                </p>
              </li>
              <li>
                <p>
                  <code>WEB-INF/includes/mainNav.xhtml</code>: fragmento XHTML para la barra de navegación de 
                  la interfaz principal
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Para obtener información sobre el uso de Facelets, consulte el 
              <a href="jsf-facelets.html#GIEPX">Capítulo 8, "Introducción a los Facelets"</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKADH">
          <h3 id="helper-classes-used-in-the-main-interface">
            Clases Auxiliares Utilizadas en la Interfaz Principal
          </h3>
          <div class="paragraph">
            <p>
              Las siguientes clases auxiliares, que se encuentran en el paquete 
              <code>dukestutoring.util</code> del proyecto <code>dukes-tutoring-common</code>, se utilizan en 
              la interfaz principal.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>CalendarUtil</code>: una clase que proporciona un método para eliminar los datos de 
                  tiempo innecesarios de las instancias de <code>java.util.Calendar</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>Email</code>: Una clase de anotación personalizada de Validación de Beans para validar 
                  direcciones de correo electrónico en la entidad <code>Person</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>StatusType</code>: Un tipo enumerado que define los diferentes estados que puede tener 
                  un estudiante. Los valores posibles son <code>IN</code>, <code>OUT</code> y 
                  <code>PARK</code>. <code>StatusType</code> se utiliza en toda la aplicación, incluso en la 
                  entidad <code>StatusEntry</code> y en toda la interfaz principal. <code>StatusType</code> 
                  también define un método <code>toString</code> que devuelve una traducción localizada del 
                  estado según la configuración regional.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="GKADA">
          <h3 id="properties-files">Archivos de Propiedades</h3>
          <div class="paragraph">
            <p>
              Las cadenas utilizadas en la interfaz principal se encapsulan en paquetes de recursos para 
              permitir la visualización de cadenas localizadas en varias configuraciones regionales. Cada uno 
              de los archivos de propiedades tiene archivos específicos de la configuración regional adjuntos 
              con códigos de configuración regional, que contienen las cadenas traducidas para cada 
              configuración regional. Por ejemplo, <code>Messages_es.properties</code> contiene las cadenas 
              localizadas para las configuraciones regionales en español.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El proyecto <code>dukes-tutoring-common</code> tiene el siguiente paquete de recursos en 
              <code>src/main/resources/</code>.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>javaeetutorial/dukestutoring/util/StatusMessages.properties</code>: cadenas para cada 
                  uno de los tipos de estado definidos en el tipo enumerado <code>StatusType</code> para la 
                  configuración regional predeterminada. Cada configuración regional admitida tiene un archivo 
                  de propiedades con el formato <code>StatusMessages_`locale prefix</code>.properties` que 
                  contiene las cadenas localizadas. Por ejemplo, las cadenas para locales de habla hispana se 
                  encuentran en <code>StatusMessages_es.properties</code>.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              El proyecto <code>dukes-tutoring-war</code> tiene los siguientes paquetes de recursos en 
              <code>src/main/resources/</code>.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>ValidationMessages.properties</code>: Cadenas para la configuración regional 
                  predeterminada utilizada por el tiempo de ejecución de Validación de Beans para mostrar 
                  mensajes de validación. Este archivo debe llamarse 
                  <code>ValidationMessages.properties</code> y estar ubicado en el paquete predeterminado 
                  según lo requiere la especificación de Validación de Beans. Cada configuración regional 
                  admitida tiene un archivo de propiedades con el formato 
                  <code>ValidationMessages_`locale prefix</code>.properties` que contiene las cadenas 
                  localizadas. Por ejemplo, las cadenas para las configuraciones regionales de habla alemana 
                  se encuentran en <code>ValidationMessages_de.properties</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>javaeetutorial/dukestutoring/web/messages/Messages.properties</code>: cadenas para la 
                  configuración regional predeterminada para la interfaz principal y de administración de 
                  Facelets. Cada configuración regional admitida tiene un archivo de propiedades con el 
                  formato <code>Messages_`locale prefix</code>.properties` que contiene las cadenas 
                  localizadas. Por ejemplo, las cadenas para las configuraciones regionales de 
                  habla china simplificadas se encuentran en <code>Messages_zh.properties</code>.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Para obtener información sobre la localización de aplicaciones web, consulte 
              <a href="jsf-configure006.html#BNAXB">Registrando Mensajes de Aplicación</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKAEV">
          <h3 id="deployment-descriptors-used-in-dukes-tutoring">
            Descriptores de Implementación Utilizados en la Tutoría de Duke
          </h3>
          <div class="paragraph">
            <p>
              Tutoría de Duke utiliza estos descriptores de despliegue en el directorio 
              <code>src/main/webapp/WEB-INF</code> del proyecto <code>dukes-tutoring-war</code>:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><code>faces-config.xml</code>: El archivo de configuración de JavaServer Faces</p>
              </li>
              <li>
                <p>
                  <code>glassfish-web.xml</code>: el archivo de configuración específico del servidor 
                  GlassFish, que define la asignación de roles de seguridad
                </p>
              </li>
              <li>
                <p><code>web.xml</code>: El archivo de configuración de la aplicación web</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Tutoría de Duke también utiliza el siguiente descriptor de despliegue en el directorio 
              <code>src/main/resources/META-INF</code> del proyecto <code>dukes-tutoring-common</code>:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>persistence.xml</code>: El archivo de configuración de persistencia de IPA de Java
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              En Tutoría de Duke no se utiliza ningún descriptor de despliegue de enterprise beans. Las 
              anotaciones en los archivos de clases de enterprise beans se utilizan para la configuración de 
              enterprise beans en esta aplicación.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="dukes-tutoring001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="dukes-tutoring003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
