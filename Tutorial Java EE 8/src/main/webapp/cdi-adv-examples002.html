<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>El Ejemplo encoder: Usando Alternativas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="cdi-adv-examples001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="cdi-adv-examples003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GKHPU">
      <h2 id="the-encoder-example-using-alternatives">El Ejemplo encoder: Usando Alternativas</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El ejemplo de <code>encoder</code> muestra cómo usar alternativas para elegir entre dos beans en 
            el momento de la implementación, como se describe en 
            <a href="cdi-adv002.html#GJSDF">Usando Alternativas en Aplicaciones CDI</a>. El ejemplo incluye 
            una interfaz y dos implementaciones de la misma, un bean administrado, una página Facelets y 
            archivos de configuración.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Los archivos fuente se encuentran en el directorio 
            <code><em>tut-install</em>/examples/cdi/encoder/src/main/java/javaeetutorial/encoder/</code>.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#GKHQA">La Interfaz e Implementaciones de Coder</a></p>
            </li>
            <li>
              <p><a href="#GKHPM">La Página Facelets y Bean Gestionado de encoder</a></p>
            </li>
            <li>
              <p><a href="#GKHQQ">Ejecutando el Ejemplo encoder</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="GKHQA">
          <h3 id="the-coder-interface-and-implementations">La Interfaz e Implementaciones de Coder</h3>
          <div class="paragraph">
            <p>
              La interfaz <code>Coder</code> contiene solo un método, <code>codeString</code>, que toma dos 
              argumentos: una cadena y un valor entero que especifica cómo deben transponerse las letras de la 
              cadena.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
public interface Coder {
    public String codeString(String s, int tval);
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              La interfaz tiene dos clases de implementación, <code>CoderImpl</code> y 
              <code>TestCoderImpl</code>. La implementación de <code>codeString</code> en 
              <code>CoderImpl</code> desplaza el argumento de cadena hacia delante en el alfabeto según el 
              número de letras especificado en el segundo argumento; los caracteres que no son letras se dejan 
              sin cambios. (Este código de turno simple se conoce como cifrado César porque, según los 
              informes, Julio César lo usó para comunicarse con sus generales). La implementación en 
              <code>TestCoderImpl</code> simplemente muestra los valores de los argumentos. La implementación 
              de <code>TestCoderImpl</code> está anotada <code>@Alternative</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
import javax.enterprise.inject.Alternative;
@Alternative
public class TestCoderImpl implements Coder {
    @Override
    public String codeString(String s, int tval) {
        return ("la cadena de entrada es" + s + ", el valor de cambio es " + tval);
    }
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El archivo <code>beans.xml</code> para el ejemplo <code>encoder</code> contiene un elemento 
              <code>alternatives</code> para la clase <code>TestCoderImpl</code>, pero por defecto el el 
              elemento está comentado:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;beans ...&gt;
    &lt;!--&lt;alternatives&gt;
        &lt;class&gt;javaeetutorial.encoder.TestCoderImpl&lt;/class&gt;
    &lt;/alternatives&gt;--&gt;
&lt;/beans&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Esto significa que, de forma predeterminada, no se utilizará la clase 
              <code>TestCoderImpl</code>, anotada <code>@Alternative</code>. En su lugar, se utilizará la 
              clase <code>CoderImpl</code>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKHPM">
          <h3 id="the-encoder-facelets-page-and-managed-bean">La Página Facelets y Bean Gestionado de encoder</h3>
          <div class="paragraph">
            <p>
              La página Facelets simple para el ejemplo de <code>encoder</code>, <code>index.xhtml</code>, 
              le pide al usuario que ingrese la cadena y los valores enteros y los pasa al bean administrado, 
              <code>CoderBean</code>, como <code>coderBean.inputString</code> y 
              <code>coderBean.transVal</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;html lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
    &lt;h:head&gt;
        &lt;h:outputStylesheet library="css" name="default.css"/&gt;
        &lt;title&gt;Codificador de cadenas&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        &lt;h2&gt;Codificador de cadenas&lt;/h2&gt;
        &lt;p&gt;Escriba una cadena y un número entero, luego haga clic en Codificar.&lt;/p&gt;
        &lt;p&gt;Dependiendo de qué alternativa esté habilitada, el bean codificador
            mostrará los valores de los argumentos o devolverá una cadena que
            desplaza las letras de la cadena original según el valor que
            especifique. El valor debe estar entre 0 y 26.&lt;/p&gt;
        &lt;h:form id="encodeit"&gt;
            &lt;p&gt;&lt;h:outputLabel value="Introduzca una cadena: " for="inputString"/&gt;
                &lt;h:inputText id="inputString"
                             value="#{coderBean.inputString}"/&gt;
                &lt;h:outputLabel value="Ingrese el número de letras para cambiar por: "
                               for="transVal"/&gt;
                &lt;h:inputText id="transVal" value="#{coderBean.transVal}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Codificar"
                                action="#{coderBean.encodeString()}"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:outputLabel value="Resultado: " for="outputString"/&gt;
                &lt;h:outputText id="outputString"
                              value="#{coderBean.codedString}"
                              style="color:blue"/&gt;&lt;/p&gt;
            &lt;p&gt;&lt;h:commandButton value="Restablecer"
                                action="#{coderBean.reset}"/&gt;&lt;/p&gt;
        &lt;/h:form&gt;
        ...
    &lt;/h:body&gt;
&lt;/html&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Cuando el usuario hace clic en el botón Codificar, la página invoca el método 
              <code>encodeString</code> del bean administrado y muestra el resultado, 
              <code>coderBean.codedString</code>, en azul. La página también tiene un botón Restablecer que 
              borra los campos.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El bean administrado, <code>CoderBean</code>, es un bean <code>@RequestScoped</code> que declara 
              sus propiedades de entrada y salida. La propiedad <code>transVal</code> tiene tres restricciones 
              de validación de Bean que imponen límites en el valor entero, de modo que si el usuario ingresa 
              un valor no válido, aparece un mensaje de error predeterminado en la página Facelets. El bean 
              también inyecta una instancia de la interfaz <code>Coder</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Named
@RequestScoped
public class CoderBean {
    private String inputString;
    private String codedString;
    @Max(26)
    @Min(0)
    @NotNull
    private int transVal;
    @Inject
    Coder coder;
    ...
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Además de los métodos getter y setter simples para las tres propiedades, el bean define el 
              método de acción <code>encodeString</code> llamado por la página Facelets. Este método establece 
              la propiedad <code>codedString</code> en el valor devuelto por una llamada al método 
              <code>codeString</code> de la implementación de <code>Coder</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
    public void encodeString() {
        setCodedString(coder.codeString(inputString, transVal));
    }
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Finalmente, el bean define el método <code>reset</code> para vaciar los campos de la página 
              Facelets:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
    public void reset() {
        setInputString("");
        setTransVal(0);
    }
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="GKHQQ">
          <h3 id="running-the-encoder-example">Ejecutando el Ejemplo encoder</h3>
          <div class="paragraph">
            <p>
              Puede usar el EID NetBeans o Maven para compilar, empaquetar, implementar y ejecutar la 
              aplicación <code>encoder</code>.
            </p>
          </div>
          <div class="sect3">
            <h4 id="to-build-package-and-deploy-the-encoder-example-using-netbeans-ide">
              Para construir, empaquetar e implementar el Ejemplo codificador usando el EID NetBeans
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que se haya iniciado el Servidor GlassFish (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>).
                  </p>
                </li>
                <li>
                  <p>En el menú Archivo, elija Abrir proyecto.</p>
                </li>
                <li>
                  <p>En el cuadro de diálogo Abrir proyecto, vaya a:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/cdi
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Seleccione la carpeta <code>encoder</code>.</p>
                </li>
                <li>
                  <p>Haga clic en Abrir proyecto.</p>
                </li>
                <li>
                  <p>
                    En la pestaña Proyectos, haga clic con el botón derecho en el proyecto 
                    <code>encoder</code> y seleccione Build.
                  </p>
                  <div class="paragraph">
                    <p>
                      Este comando construye y empaqueta la aplicación en un archivo WAR, 
                      <code>encoder.war</code>, ubicado en el directorio <code>target</code>, y luego lo 
                      implementa en el Servidor GlassFish.
                    </p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3">
            <h4 id="to-run-the-encoder-example-using-netbeans-ide">
              Para Ejecutar el Ejemplo encoder usando el EID NetBeans
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>En un navegador web, ingrese la siguiente URL:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
http://localhost:8080/encoder
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>
                    En la página Codificador de cadenas, ingrese una cadena y el número de letras para cambiar 
                    y luego haga clic en Codificar.
                  </p>
                  <div class="paragraph">
                    <p>
                      La cadena codificada aparece en azul en la línea de resultados. Por ejemplo, si 
                      ingresa <code>Java</code> y <code>4</code>, el resultado es <code>Neze</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>
                    Ahora, edite el archivo <code>beans.xml</code> para habilitar la implementación 
                    alternativa de <code>Coder</code>.
                  </p>
                  <div class="olist loweralpha">
                    <ol class="loweralpha" type="a">
                      <li>
                        <p>
                          En la pestaña Proyectos, bajo el proyecto <code>encoder</code>, expanda el nodo 
                          Páginas web, luego expanda el nodo WEB-INF.
                        </p>
                      </li>
                      <li>
                        <p>Haga doble clic en el archivo <code>beans.xml</code> para abrirlo.</p>
                      </li>
                      <li>
                        <p>
                          Elimine los caracteres de comentario que rodean el elemento 
                          <code>alternatives</code>, para que se vea así:
                        </p>
                        <div class="listingblock">
                          <div class="content">
                            <pre class="prettyprint highlight">
                              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;alternatives&gt;
    &lt;class&gt;javaeetutorial.encoder.TestCoderImpl&lt;/class&gt;
&lt;/alternatives&gt;
                              </code>
                            </pre>
                          </div>
                        </div>
                      </li>
                      <li>
                        <p>Guarde el archivo.</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>
                    Haga clic con el botón derecho en el proyecto <code>encoder</code> y seleccione Limpiar y 
                    compilar.
                  </p>
                </li>
                <li>
                  <p>
                    En el navegador web, vuelva a ingresar la URL para mostrar la página String Encoder para 
                    el proyecto redistribuido:
                  </p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
http://localhost:8080/encoder/
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Ingrese una cadena y el número de letras para cambiar y luego haga clic en Codificar.</p>
                  <div class="paragraph">
                    <p>
                      Esta vez, la línea de resultados muestra sus argumentos. Por ejemplo, si ingresa 
                      <code>Java</code> y <code>4</code>, el resultado es:
                    </p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
Resultado: la cadena de entrada es Java, el valor de cambio es 4
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3">
            <h4 id="to-build-package-and-deploy-the-encoder-example-using-maven">
              Para Compilar, Empaquetar e Implementar el Ejemplo encoder Usando Maven
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que el Servidor GlassFish se haya iniciado (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>).
                  </p>
                </li>
                <li>
                  <p>En una ventana de terminal, vaya a:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/cdi/encoder/
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Ingrese el siguiente comando para implementar la aplicación:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
mvn install
                        </code>
                      </pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>
                      Este comando construye y empaqueta la aplicación en un archivo WAR, 
                      <code>encoder.war</code>, ubicado en el directorio <code>target</code>, y luego lo 
                      implementa en el Servidor GlassFish.
                    </p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3">
            <h4 id="to-run-the-encoder-example-using-maven">Para Ejecutar el Ejemplo encoder Usando Maven</h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>En un navegador web, ingrese la siguiente URL:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
http://localhost:8080/encoder/
                        </code>
                      </pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>Se abre la página Codificador de cadenas.</p>
                  </div>
                </li>
                <li>
                  <p>Ingrese una cadena y el número de letras para cambiar y luego haga clic en Codificar.</p>
                  <div class="paragraph">
                    <p>
                      La cadena codificada aparece en azul en la línea de resultados. Por ejemplo, si ingresa 
                      <code>Java</code> y <code>4</code>, el resultado es <code>Neze</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>
                    Ahora, edite el archivo <code>beans.xml</code> para habilitar la implementación 
                    alternativa de <code>Coder</code>.
                  </p>
                  <div class="olist loweralpha">
                    <ol class="loweralpha" type="a">
                      <li>
                        <p>En un editor de texto, abra el siguiente archivo:</p>
                        <div class="listingblock">
                          <div class="content">
                            <pre class="prettyprint highlight">
                              <code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/cdi/encoder/src/main/webapp/WEB-INF/beans.xml
                            </code></pre>
                          </div>
                        </div>
                      </li>
                      <li>
                        <p>
                          Elimina los caracteres de comentario que rodean el elemento 
                          <code>alternatives</code>, para que se vea así:
                        </p>
                        <div class="listingblock">
                          <div class="content">
                            <pre class="prettyprint highlight">
                              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;alternatives&gt;
    &lt;class&gt;javaeetutorial.encoder.TestCoderImpl&lt;/class&gt;
&lt;/alternatives&gt;
                              </code>
                            </pre>
                          </div>
                        </div>
                      </li>
                      <li>
                        <p>Guarde y cierre el archivo.</p>
                      </li>
                    </ol>
                  </div>
                </li>
                <li>
                  <p>Introduzca el siguiente comando:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
mvn clean install
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>
                    En el navegador web, vuelva a ingresar la URL para mostrar la página String Encoder para 
                    el proyecto redistribuido:
                  </p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
http://localhost:8080/encoder
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>
                    Ingrese una cadena y el número de letras para cambiar y luego haga clic en Codificar.
                  </p>
                  <div class="paragraph">
                    <p>
                      Esta vez, la línea de resultados muestra sus argumentos. Por ejemplo, si ingresa 
                      <code>Java</code> y <code>4</code>, el resultado es:
                    </p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
Resultado: la cadena de entrada es Java, el valor de cambio es 4
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="cdi-adv-examples001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="cdi-adv-examples003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
