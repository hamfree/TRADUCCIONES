<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Proporcionando Mensajes y Etiquetas Localizadas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="webi18n001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="webi18n003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNAXW">
      <h2 id="providing-localized-messages-and-labels">Proporcionando Mensajes y Etiquetas Localizadas</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Los mensajes y las etiquetas deben adaptarse de acuerdo con las convenciones del idioma y la 
            región del usuario. Existen dos enfoques para proporcionar mensajes y etiquetas localizados en una 
            aplicación web.
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>
                Proporcione una versión de la página web en cada una de las configuraciones regionales de 
                destino y haga que un servlet de controlador envíe la solicitud a la página adecuada según la 
                configuración regional solicitada. Este enfoque es útil si es necesario internacionalizar 
                grandes cantidades de datos en una página o una aplicación web completa.
              </p>
            </li>
            <li>
              <p>
                Aísle los datos sensibles a la configuración regional en una página en paquetes de recursos y 
                acceda a los datos para que el mensaje traducido correspondiente se obtenga automáticamente y 
                se inserte en la página. Por lo tanto, en lugar de crear cadenas directamente en su código, 
                crea un paquete de recursos que contiene traducciones y lee las traducciones de ese paquete 
                usando la clave correspondiente.
              </p>
            </li>
          </ul>
        </div>
        <div class="paragraph">
          <p>
            La aplicación Duke's Bookstore sigue el segundo enfoque. Aquí hay algunas líneas del paquete de 
            recursos predeterminado <code>messages</code>.<code>properties</code>:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
TitleShoppingCart=Shopping Cart
TitleReceipt=Receipt
TitleBookCatalog=Book Catalog
TitleCashier=Cashier
TitleBookDescription=Book Description
Visitor=You are visitor number
What=What We\'re Reading
              </code>
            </pre>
          </div>
        </div>
        <div class="sect2" id="GKUIA">
          <h3 id="establishing-the-locale">Estableciendo la Configuración Regional</h3>
          <div class="paragraph">
            <p>
              Para obtener las cadenas correctas para un usuario determinado, una aplicación web recupera la 
              configuración regional (establecida por una preferencia de idioma del navegador) de la solicitud 
              mediante el método <code>getLocale</code> o permite que el usuario seleccione explícitamente la 
              configuración regional.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Un componente puede establecer explícitamente la configuración regional utilizando la etiqueta 
              <code>fmt:setLocale</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El elemento <code>locale-config</code> en el archivo de configuración registra la configuración 
              regional predeterminada y también registra otras configuraciones regionales admitidas. Este 
              elemento en Duke's Bookstore registra el inglés como configuración regional predeterminada e 
              indica que el alemán, el francés y el español son configuraciones regionales admitidas.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;locale-config&gt;
    &lt;default-locale&gt;en&lt;/default-locale&gt;
    &lt;supported-locale&gt;es&lt;/supported-locale&gt;
    &lt;supported-locale&gt;de&lt;/supported-locale&gt;
    &lt;supported-locale&gt;fr&lt;/supported-locale&gt;
&lt;/locale-config&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El <code>LocaleBean</code> de la aplicación Duke's Bookstore utiliza el método 
              <code>getLocale</code> para recuperar la configuración regional.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
public class LocaleBean {
    ...
    private FacesContext ctx = FacesContext.getCurrentInstance();
    private Locale locale = ctx.getViewRoot().getLocale();;
    ...
}
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNAXY">
          <h3 id="setting-the-resource-bundle">Estableciendo el Paquete de Recursos</h3>
          <div class="paragraph">
            <p>
              El paquete de recursos se establece con el elemento <code>resource-bundle</code> en el archivo 
              de configuración. La configuración de Duke's Bookstore se ve así:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;resource-bundle&gt;
    &lt;base-name&gt;
        javaeetutorial.dukesbookstore.web.messages.Messages
    &lt;/base-name&gt;
    &lt;var&gt;bundle&lt;/var&gt;
&lt;/resource-bundle&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Una vez establecida la configuración regional, el controlador de una aplicación web podría 
              recuperar el paquete de recursos para esa configuración regional y guardarlo como un atributo de 
              sesión (consulte <a href="servlets009.html#BNAGO">Asociando Objetos con una Sesión</a>) para que 
              lo usen otros componentes o simplemente para devolver una cadena de texto apropiada para la 
              configuración regional seleccionada:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
public String toString(Locale locale) {
    ResourceBundle res =
        ResourceBundle.getBundle(
            "javaeetutorial.dukesbookstore.web.messages.Messages", locale);
    return res.getString(name() + ".string");
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Alternativamente, una aplicación podría usar la etiqueta <code>f:loadBundle</code> para 
              establecer el paquete de recursos. Esta etiqueta carga el paquete de recursos correcto según la 
              configuración regional almacenada en <code>FacesContext</code>.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;f:loadBundle basename="javaeetutorial.dukesbookstore.web.messages.Messages"
    var="bundle"/&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Los paquetes de recursos que contienen mensajes a los que se hace referencia explícitamente 
              desde un atributo de etiqueta JavaServer Faces mediante una expresión de valor deben registrarse 
              mediante el elemento <code>resource-bundle</code> del archivo de configuración.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Para obtener más información sobre el uso de este elemento, consulte 
              <a href="jsf-configure006.html#BNAXB">Registrando Mensajes de Aplicación</a>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKUFC">
          <h3 id="retrieving-localized-messages">Recuperando Mensajes Localizados</h3>
          <div class="paragraph">
            <p>
              Un componente web escrito en el lenguaje de programación Java recupera el paquete de recursos de 
              la sesión:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
ResourceBundle messages = (ResourceBundle)session.getAttribute("messages");
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Luego busca la cadena asociada con la clave <code>person.lastName</code> de la siguiente manera:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
messages.getString("person.lastName");
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Solo puede usar una etiqueta <code>message</code> o <code>messages</code> para mostrar mensajes 
              que están en cola en un componente como resultado de un convertidor o validador registrado en el 
              componente. El siguiente ejemplo muestra una etiqueta <code>message</code> que muestra el 
              mensaje de error en cola en el componente de entrada <code>userNo</code> si el validador 
              registrado en el componente no valida el valor que el usuario ingresa en el componente.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:inputText id="userNo" value="#{UserNumberBean.userNumber}"&gt;
    &lt;f:validateLongRange minimum="0" maximum="10" /&gt;
&lt;/h:inputText&gt;
...
&lt;h:message style="color: red; text-decoration: overline"
           id="errors1" for="userNo"/&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Para obtener más información sobre el uso de las etiquetas <code>message</code> o 
              <code>messages</code>, consulte 
              <a href="jsf-page002.html#BNASO">
                Mostrando Mensajes de Error con las Etiquetas h:message y h:mensajes
              </a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los mensajes que no están en cola en un componente y, por lo tanto, no se cargan automáticamente 
              se referencian mediante una expresión de valor. Puede hacer referencia a un mensaje localizado 
              desde casi cualquier atributo de etiqueta JavaServer Faces.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La expresión de valor que hace referencia a un mensaje tiene la misma notación tanto si cargó el 
              paquete de recursos con la etiqueta <code>loadBundle</code> como si lo registró con el elemento 
              <code>resource-bundle</code> en el archivo de configuración.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La notación de expresión de valor es <code>var.message</code>, en la que <code>var</code> 
              coincide con el atributo <code>var</code> de la etiqueta <code>loadBundle</code> o el 
              <code>var</code> definido en el elemento <code>resource-bundle</code> del archivo de 
              configuración, y <code>message</code> coincide con la clave del mensaje contenido en el paquete 
              de recursos, referido por el atributo <code>var</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí hay un ejemplo de <code>bookcashier.xhtml</code> en Duke's Bookstore:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:outputLabel for="name" value="#{bundle.Name}" /&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Observe que <code>bundle</code> coincide con el elemento <code>var</code> del archivo de 
              configuración y que <code>Name</code> coincide con la clave en el paquete de recursos.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="webi18n001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="webi18n003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
