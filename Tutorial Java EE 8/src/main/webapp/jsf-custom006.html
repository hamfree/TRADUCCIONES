<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Delegación de Renderizado a un Renderizador</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-custom005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-custom007.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNAWA">
      <h2 id="delegating-rendering-to-a-renderer">Delegación de Renderizado a un Renderizador</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Tanto <code>MapComponent</code> como <code>AreaComponent</code> delegan todo su renderizado a un 
            renderizador independiente. La sección 
            <a href="jsf-custom005.html#BNAVW">Realización de Codificación</a> explica cómo 
            <code>MapRenderer</code> realiza la codificación para <code>MapComponent</code>. Esta sección 
            explica en detalle el proceso de delegar el renderizado a un renderizador usando 
            <code>AreaRenderer</code>, que realiza el renderizado para <code>AreaComponent</code>.
          </p>
        </div>
        <div class="paragraph">
          <p>Para delegar la representación, realice las tareas descritas en los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#BNAWB">Creando la Clase del Renderizador</a></p>
            </li>
            <li>
              <p><a href="#BNAWC">Identificando el Tipo de Renderizador</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="BNAWB">
          <h3 id="creating-the-renderer-class">Creando la Clase del Renderizador</h3>
          <div class="paragraph">
            <p>
              Al delegar el renderizado a un renderizador, puede delegar toda la codificación y decodificación 
              al renderizador, o puede optar por hacer parte de ella en la clase de componente. La clase 
              <code>AreaComponent</code> delega la codificación en la clase <code>AreaRenderer</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>La clase de renderizador comienza con una anotación <code>@FacesRenderer</code>:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
@FacesRenderer(componentFamily = "Area", rendererType = "DemoArea")
public class AreaRenderer extends Renderer {
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              La anotación <code>@FacesRenderer</code> registra la clase de renderizador con la implementación 
              de JavaServer Faces como una clase de renderizador. La anotación identifica la familia de 
              componentes, así como el tipo de renderizador.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Para realizar el renderizado de <code>AreaComponent</code>, <code>AreaRenderer</code> debe 
              implementar un método <code>encodeEnd</code>. El método <code>encodeEnd</code> de 
              <code>AreaRenderer</code> recupera la forma, las coordenadas y los valores de texto alternativos 
              almacenados en el bean <code>ImageArea</code> que está vinculado a <code>AreaComponent </code>. 
              Suponga que la etiqueta <code>area</code> que se está renderizando actualmente tiene un valor de 
              atributo <code>value</code> de <code>"book203"</code>. La siguiente línea de 
              <code>encodeEnd</code> obtiene el valor del atributo <code>"book203"</code> de la instancia de 
              <code>FacesContext</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
ImageArea ia = (ImageArea)area.getValue();
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El valor del atributo es la instancia del bean <code>ImageArea</code>, que contiene los valores 
              <code>shape</code>, <code>coords</code> y <code>alt</code> asociados con la instancia de 
              <code>book203</code> <code>AreaComponent</code>. 
              <a href="jsf-custom003.html#GLPBO"> Configurando el Modelo de Datos </a> describe cómo la 
              aplicación almacena estos valores.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Después de recuperar el objeto <code>ImageArea</code>, el método representa los valores de 
              <code>shape</code>, <code>coords</code> y <code>alt</code> simplemente llamando al métodos de 
              acceso asociados y pasar los valores devueltos a la instancia de <code>ResponseWriter</code>, 
              como se muestra en estas líneas de código, que escriben la forma y las coordenadas:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
writer.startElement("area", area);
writer.writeAttribute("alt", iarea.getAlt(), "alt");
writer.writeAttribute("coords", iarea.getCoords(), "coords");
writer.writeAttribute("shape", iarea.getShape(), "shape");
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El método <code>encodeEnd</code> también procesa JavaScript para los atributos 
              <code>onmouseout</code>, <code>onmouseover</code> y <code>onclick</code>. La página Facelets 
              debe proporcionar solo la ruta a las imágenes que se cargarán durante una acción 
              <code>onmouseover</code> o <code>onmouseout</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;bookstore:area id="map3" value="#{Book203}"
                onmouseover="resources/images/book_203.jpg"
                onmouseout="resources/images/book_all.jpg"
                targetImage="mapImage"/&gt;
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              La clase <code>AreaRenderer</code> se encarga de generar el JavaScript para estas acciones, como 
              se muestra en el siguiente código de <code>encodeEnd</code>. El JavaScript que 
              <code>AreaRenderer</code> genera para la acción <code>onclick</code> establece el valor del 
              campo oculto en el valor del ID de componente del área actual y envía la página.
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
sb = new StringBuffer("document.forms[0]['").append(targetImageId).
        append("'].src='");
sb.append(
        getURI(context,
        (String) area.getAttributes().get("onmouseout")));
sb.append("'");
writer.writeAttribute("onmouseout", sb.toString(), "onmouseout");
sb = new StringBuffer("document.forms[0]['").append(targetImageId).
        append("'].src='");
sb.append(
        getURI(context,
        (String) area.getAttributes().get("onmouseover")));
sb.append("'");
writer.writeAttribute("onmouseover", sb.toString(), "onmouseover");
sb = new StringBuffer("document.forms[0]['");
sb.append(getName(context, area));
sb.append("'].value='");
sb.append(iarea.getAlt());
sb.append("'; document.forms[0].submit()");
writer.writeAttribute("onclick", sb.toString(), "value");
writer.endElement("area");
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Al enviar la página, este código hace que el ciclo de vida de JavaServer Faces vuelva a la fase 
              Restaurar Vista. Esta fase guarda cualquier información de estado, incluido el valor del campo 
              oculto, para que se construya un nuevo árbol de componentes de solicitud. Este valor se recupera 
              mediante el método <code>decode</code> de la clase <code>MapComponent</code>. Este método de 
              decodificación es llamado por la implementación de JavaServer Faces durante la fase Aplicar 
              Valores de Solicitud, que sigue a la fase Restaurar vista.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Además del método <code>encodeEnd</code>, <code>AreaRenderer</code> contiene un constructor 
              vacío. Esto se usa para crear una instancia de <code>AreaRenderer</code> para que pueda 
              agregarse al kit de renderizado.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La anotación <code>@FacesRenderer</code> registra la clase de renderizador con la implementación 
              de JavaServer Faces como una clase de renderizador. La anotación identifica la familia de 
              componentes, así como el tipo de renderizador.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNAWC">
          <h3 id="identifying-the-renderer-type">Identificando el Tipo de Renderizador</h3>
          <div class="paragraph">
            <p>
              Registre el renderizador con un kit de renderizado usando la anotación 
              <code>@FacesRenderer</code> (o usando el archivo de recursos de configuración de la aplicación, 
              como se explica en <a href="jsf-configure011.html#BNAXH">Registrando un Renderizador 
                Personalizado con un Kit Render</a>). Durante la fase de Respuesta de Procesamiento, la 
                implementación de JavaServer Faces llama al método <code>getRendererType</code> del 
                controlador de etiquetas del componente para determinar qué renderizador invocar, si hay uno.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El tipo asociado con el renderizador se identifica en el elemento <code>rendererType</code> de 
              la anotación <code>@FacesRenderer</code> para <code>AreaRenderer</code>, así como en el 
              elemento <code>renderer-type</code> del descriptor de la biblioteca de etiquetas.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-custom005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-custom007.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
