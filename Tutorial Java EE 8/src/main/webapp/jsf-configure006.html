<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Registrando Mensajes de Aplicación</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-configure005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-configure007.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNAXB">
      <h2 id="registering-application-messages">Registrando Mensajes de Aplicación</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Los mensajes de la aplicación pueden incluir cualquier cadena que se muestre al usuario, así como 
            mensajes de error personalizados (que se muestran mediante las etiquetas <code>message</code> y 
            <code>messages</code>) para sus convertidores o validadores personalizados. Para que los mensajes 
            estén disponibles en el momento del inicio de la aplicación, realice una de las siguientes 
            acciones:
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>
                Ponga en cola un mensaje individual en la instancia 
                <code>javax.faces.context.FacesContext</code> mediante programación, como se describe en  
                <a href="#GKUHG">Usando FacesMessage para Crear un Mensaje</a>
              </p>
            </li>
            <li>
              <p>
                Registre todos los mensajes con su aplicación usando el archivo de recursos de configuración 
                de la aplicación
              </p>
            </li>
          </ul>
        </div>
        <div class="paragraph">
          <p>
            Aquí está la sección del archivo <code>faces-config.xml</code> que registra los mensajes para la 
            aplicación de estudio de caso de Duke's Bookstore:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;application&gt;
    &lt;resource-bundle&gt;
        &lt;base-name&gt;
            javaeetutorial.dukesbookstore.web.messages.Messages
        &lt;/base-name&gt;
        &lt;var&gt;bundle&lt;/var&gt;
    &lt;/resource-bundle&gt;
    &lt;locale-config&gt;
        &lt;default-locale&gt;en&lt;/default-locale&gt;
        &lt;supported-locale&gt;es&lt;/supported-locale&gt;
        &lt;supported-locale&gt;de&lt;/supported-locale&gt;
        &lt;supported-locale&gt;fr&lt;/supported-locale&gt;
    &lt;/locale-config&gt;
&lt;/application&gt;
            </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Este conjunto de elementos hace que la aplicación se llene con los mensajes contenidos en el 
            paquete de recursos especificado.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El elemento <code>resource-bundle</code> representa un conjunto de mensajes localizados. Debe 
            contener la ruta completa al paquete de recursos que contiene los mensajes localizados (en este 
            caso, <code>dukesbookstore.web.messages.Messages</code>). El elemento <code>var</code> define el 
            nombre EL por el cual los autores de la página se refieren al paquete de recursos.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El elemento <code>locale-config</code> enumera la configuración regional predeterminada y las 
            otras configuraciones regionales admitidas. El elemento <code>locale-config</code> permite al 
            sistema encontrar la configuración regional correcta según la configuración de idioma del 
            navegador.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Las etiquetas <code>supported-locale</code> y <code>default-locale</code> aceptan los códigos de 
            dos caracteres en minúsculas definidos por ISO 639-1 (consulte 
            <code>http://www.loc.gov/standards/iso639-2/php/English_list.php</code>). Asegúrese de que su 
            paquete de recursos realmente contenga los mensajes para las configuraciones regionales que 
            especifique con estas etiquetas.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Para acceder al mensaje localizado, el desarrollador de la aplicación simplemente hace referencia 
            a la clave del mensaje del paquete de recursos.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Puede extraer texto localizado en una etiqueta <code>alt</code> para una imagen gráfica, como en 
            el siguiente ejemplo:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:graphicImage id="mapImage"
                name="book_all.jpg"
                library="images"
                alt="#{bundle.ChooseBook}"
                usemap="#bookMap" /&gt;
            </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            El atributo <code>alt</code> puede aceptar expresiones de valor. En este caso, el atributo 
            <code>alt</code> se refiere al texto localizado que se incluirá en el texto alternativo de la 
            imagen renderizada por esta etiqueta.
          </p>
        </div>
        <div class="sect2" id="GKUHG">
          <h3 id="using-facesmessage-to-create-a-message">Usando FacesMessage para Crear un Mensaje</h3>
          <div class="paragraph">
            <p>
              En lugar de registrar mensajes en el archivo de recursos de configuración de la aplicación, 
              puede acceder al <code>java.util.ResourceBundle</code> directamente desde el código de bean 
              gestionado. El fragmento de código a continuación localiza un mensaje de error de correo 
              electrónico:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
String message = "";
...
message = ExampleBean.loadErrorMessage(context,
    ExampleBean.EX_RESOURCE_BUNDLE_NAME,
         "EMailError");
context.addMessage(toValidate.getClientId(context),
    new FacesMessage(message));
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Estas líneas llaman al método <code>loadErrorMessage</code> del bean para obtener el mensaje del 
              <code>ResourceBundle</code>. Aquí está el método <code>loadErrorMessage</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
public static String loadErrorMessage(FacesContext context,
     String basename, String key) {
    if ( bundle == null ) {
         try {
            bundle = ResourceBundle.getBundle(basename,
                 context.getViewRoot().getLocale());
        } catch (Exception e) {
            return null;
        }
    }
    return bundle.getString(key);
}
              </code></pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNASS">
          <h3 id="referencing-error-messages">Referenciando Mensajes de Error</h3>
          <div class="paragraph">
            <p>
              Una página de JavaServer Faces utiliza las etiquetas <code>message</code> o 
              <code>messages</code> para acceder a los mensajes de error, como se explica en 
              <a href="jsf-page002.html#BNASO">
                Mostrando Mensajes de Error con las Etiquetas h:message y h:messages
              </a>.
            </p>
          </div>
          <div class="paragraph">
            <p>Los mensajes de error a los que acceden estas etiquetas incluyen</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Los mensajes de error estándar que acompañan a los convertidores y validadores estándar que 
                  se envían con la IPA. (consulte la Sección 2.5.2.4 de la especificación JavaServer Faces 
                  para obtener una lista completa de los mensajes de error estándar)
                </p>
              </li>
              <li>
                <p>
                  Mensajes de error personalizados contenidos en paquetes de recursos registrados con la 
                  aplicación por el arquitecto de la aplicación usando el elemento 
                  <code>resource-bundle</code> en el archivo de configuración
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Cuando se registra un convertidor o validador en un componente de entrada, el mensaje de error 
              correspondiente se coloca automáticamente en la cola del componente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El autor de una página puede anular los mensajes de error que se encuentran en la cola de un 
              componente mediante el uso de los siguientes atributos de la etiqueta del componente:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>converterMessage</code>: Hace referencia al mensaje de error que se muestra cuando el 
                  convertidor registrado en este componente no puede convertir los datos del componente 
                  adjunto.
                </p>
              </li>
              <li>
                <p>
                  <code>requiredMessage</code>: Hace referencia al mensaje de error que se muestra cuando no 
                  se ha introducido ningún valor en el componente adjunto.
                </p>
              </li>
              <li>
                <p>
                  <code>validatorMessage</code>: Hace referencia al mensaje de error que se muestra cuando los 
                  datos del componente adjunto no pueden ser validados por el validador registrado en este 
                  componente.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Los tres atributos están habilitados para tomar valores literales y expresiones de valor. Si un 
              atributo usa una expresión de valor, esta expresión hace referencia al mensaje de error en un 
              paquete de recursos. Este paquete de recursos debe estar disponible para la aplicación de una de 
              las siguientes formas:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Por el arquitecto de la aplicación utilizando el elemento <code>resource-bundle</code> en el 
                  archivo de configuración
                </p>
              </li>
              <li>
                <p>Por el autor de la página usando la etiqueta <code>f:loadBundle</code></p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Por el contrario, el elemento <code>resource-bundle</code> debe usarse para poner a disposición 
              de la aplicación aquellos paquetes de recursos que contienen mensajes de error personalizados 
              que están en cola en el componente como resultado de un convertidor o validador personalizado 
              registrado en el componente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Las siguientes etiquetas muestran cómo especificar el atributo <code>requiredMessage</code> 
              utilizando una expresión de valor para hacer referencia a un mensaje de error:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:inputText id="ccno" size="19"
    required="true"
    requiredMessage="#{customMessages.ReqMessage}"&gt;
    ...
&lt;/h:inputText&gt;
&lt;h:message styleClass="error-message" for="ccno"/&gt;
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              La expresión de valor utilizada por <code>requiredMessage</code> en este ejemplo hace 
              referencia al mensaje de error con la clave <code>ReqMessage</code> en el paquete de recursos 
              <code>customMessages</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Este mensaje reemplaza el mensaje correspondiente en la cola del componente y se mostrará 
              dondequiera que se coloque la etiqueta <code>message</code> o <code>messages</code> en la 
              página.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-configure005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-configure007.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
