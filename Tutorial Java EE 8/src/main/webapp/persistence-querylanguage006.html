<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Sintaxis Completa del Lenguaje de Consulta</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="persistence-querylanguage005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="persistence-criteria.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNBUF">
      <h2 id="full-query-language-syntax">Sintaxis Completa del Lenguaje de Consulta</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Esta sección analiza la sintaxis del lenguaje de consulta, tal como se define en la 
            especificación Java Persistence API 2.0 disponible en
            <code>
              <a href="http://jcp.org/en/jsr/detail?id=317" class="bare">
                http://jcp.org/en/jsr/detail?id=317</a>
            </code>. Gran parte del siguiente material parafrasea o cita directamente la 
            especificación.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#BNBUG">Símbolos BNF</a></p>
            </li>
            <li>
              <p>
                <a href="#BNBUI">
                  Gramática BNF del Lenguaje de Consultas de la  Persistencia de Java
                </a>
              </p>
            </li>
            <li>
              <p><a href="#BNBUJ">Cláusula FROM</a></p>
            </li>
            <li>
              <p><a href="#BNBUQ">Expresiones de Ruta</a></p>
            </li>
            <li>
              <p><a href="#BNBUU">Clásula WHERE</a></p>
            </li>
            <li>
              <p><a href="#BNBVX">Cláusula SELECT</a></p>
            </li>
            <li>
              <p><a href="#BNBWD">Cláusula ORDER BY</a></p>
            </li>
            <li>
              <p><a href="#BNBWE">Cláusulas GROUP BY y HAVING</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="BNBUG">
          <h3 id="bnf-symbols">Símbolos BNF</h3>
          <div class="paragraph">
            <p>
              La <a href="#BNBUH">tabla 42-1</a> describe los símbolos BNF utilizados en este 
              capítulo.
            </p>
          </div>
          <div class="paragraph">
            <p><a id="sthref169"></a><a id="BNBUH"></a></p>
          </div>
          <div class="paragraph">
            <p><strong>Tabla 42-1 Resumen de símbolos BNF</strong></p>
          </div>
          <table class="tableblock frame-all grid-all" style="width: 75%;">
            <colgroup>
              <col style="width: 35.7142%;">
              <col style="width: 64.2858%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Símbolo</strong></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Descripción</strong></p></td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>::=</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    El elemento a la izquierda del símbolo está definido por las construcciones a la 
                    derecha.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <div>
                    <div class="paragraph">
                      <p><code>*</code></p>
                    </div>
                  </div>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La construcción anterior puede ocurrir cero o más veces.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>{&#8230;&#8203;}</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    Las construcciones dentro de las llaves se agrupan.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>[&#8230;&#8203;]</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    Las construcciones entre paréntesis son opcionales.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <div>
                    <div class="paragraph">
                      <p>`</p>
                    </div>
                  </div>
                </td>
                <td class="tableblock halign-left valign-top"><p class="tableblock">`</p></td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">Un <code>OR</code> exclusivo.</p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>NEGRITA</code></p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    Una palabra clave; aunque en mayúsculas en el diagrama BNF, las palabras clave 
                    no distinguen entre mayúsculas y minúsculas.
                  </p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">Espacio en blanco</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="sect2" id="BNBUI">
          <h3 id="bnf-grammar-of-the-java-persistence-query-language">
            Gramática BNF del Lenguaje de Consultas de la  Persistencia de Java
          </h3>
          <div class="paragraph">
            <p>Aquí está el diagrama BNF completo para el lenguaje de consulta:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
QL_statement ::= select_statement | update_statement | delete_statement
select_statement ::= select_clause from_clause [where_clause] [groupby_clause]
    [having_clause] [orderby_clause]
update_statement ::= update_clause [where_clause]
delete_statement ::= delete_clause [where_clause]
from_clause ::=
    FROM identification_variable_declaration
        {, {identification_variable_declaration |
            collection_member_declaration}}*
identification_variable_declaration ::=
        range_variable_declaration { join | fetch_join }*
range_variable_declaration ::= abstract_schema_name [AS]
        identification_variable
join ::= join_spec join_association_path_expression [AS]
        identification_variable
fetch_join ::= join_specFETCH join_association_path_expression
association_path_expression ::=
        collection_valued_path_expression |
        single_valued_association_path_expression
join_spec::= [LEFT [OUTER] |INNER] JOIN
join_association_path_expression ::=
        join_collection_valued_path_expression |
        join_single_valued_association_path_expression
join_collection_valued_path_expression::=
    identification_variable.collection_valued_association_field
join_single_valued_association_path_expression::=
        identification_variable.single_valued_association_field
collection_member_declaration ::=
        IN (collection_valued_path_expression) [AS]
        identification_variable
single_valued_path_expression ::=
        state_field_path_expression |
        single_valued_association_path_expression
state_field_path_expression ::=
    {identification_variable |
    single_valued_association_path_expression}.state_field
single_valued_association_path_expression ::=
    identification_variable.{single_valued_association_field.}*
    single_valued_association_field
collection_valued_path_expression ::=
    identification_variable.{single_valued_association_field.}*
    collection_valued_association_field
state_field ::=
    {embedded_class_state_field.}*simple_state_field
update_clause ::=UPDATE abstract_schema_name [[AS]
    identification_variable] SET update_item {, update_item}*
update_item ::= [identification_variable.]{state_field |
    single_valued_association_field} = new_value
new_value ::=
     simple_arithmetic_expression |
    string_primary |
    datetime_primary |
    boolean_primary |
    enum_primary simple_entity_expression |
    NULL
delete_clause ::= DELETE FROM abstract_schema_name [[AS]
    identification_variable]
select_clause ::= SELECT [DISTINCT] select_expression {,
    select_expression}*
select_expression ::=
    single_valued_path_expression |
    aggregate_expression |
    identification_variable |
    OBJECT(identification_variable) |
    constructor_expression
constructor_expression ::=
    NEW constructor_name(constructor_item {,
    constructor_item}*)
constructor_item ::= single_valued_path_expression |
    aggregate_expression
aggregate_expression ::=
    {AVG |MAX |MIN |SUM} ([DISTINCT]
        state_field_path_expression) |
    COUNT ([DISTINCT] identification_variable |
        state_field_path_expression |
        single_valued_association_path_expression)
where_clause ::= WHERE conditional_expression
groupby_clause ::= GROUP BY groupby_item {, groupby_item}*
groupby_item ::= single_valued_path_expression
having_clause ::= HAVING conditional_expression
orderby_clause ::= ORDER BY orderby_item {, orderby_item}*
orderby_item ::= state_field_path_expression [ASC |DESC]
subquery ::= simple_select_clause subquery_from_clause
    [where_clause] [groupby_clause] [having_clause]
subquery_from_clause ::=
    FROM subselect_identification_variable_declaration
        {, subselect_identification_variable_declaration}*
subselect_identification_variable_declaration ::=
    identification_variable_declaration |
    association_path_expression [AS] identification_variable |
    collection_member_declaration
simple_select_clause ::= SELECT [DISTINCT]
    simple_select_expression
simple_select_expression::=
    single_valued_path_expression |
    aggregate_expression |
    identification_variable
conditional_expression ::= conditional_term |
    conditional_expression OR conditional_term
conditional_term ::= conditional_factor | conditional_term AND
    conditional_factor
conditional_factor ::= [NOT] conditional_primary
conditional_primary ::= simple_cond_expression |(
    conditional_expression)
simple_cond_expression ::=
    comparison_expression |
    between_expression |
    like_expression |
    in_expression |
    null_comparison_expression |
    empty_collection_comparison_expression |
    collection_member_expression |
    exists_expression
between_expression ::=
    arithmetic_expression [NOT] BETWEEN
        arithmetic_expressionAND arithmetic_expression |
    string_expression [NOT] BETWEEN string_expression AND
        string_expression |
    datetime_expression [NOT] BETWEEN
        datetime_expression AND datetime_expression
in_expression ::=
    state_field_path_expression [NOT] IN (in_item {, in_item}*
    | subquery)
in_item ::= literal | input_parameter
like_expression ::=
    string_expression [NOT] LIKE pattern_value [ESCAPE
        escape_character]
null_comparison_expression ::=
    {single_valued_path_expression | input_parameter} IS [NOT]
        NULL
empty_collection_comparison_expression ::=
    collection_valued_path_expression IS [NOT] EMPTY
collection_member_expression ::= entity_expression
    [NOT] MEMBER [OF] collection_valued_path_expression
exists_expression::= [NOT] EXISTS (subquery)
all_or_any_expression ::= {ALL |ANY |SOME} (subquery)
comparison_expression ::=
    string_expression comparison_operator {string_expression |
    all_or_any_expression} |
    boolean_expression {= |&lt;&gt; } {boolean_expression |
    all_or_any_expression} |
    enum_expression {= |&lt;&gt; } {enum_expression |
    all_or_any_expression} |
    datetime_expression comparison_operator
        {datetime_expression | all_or_any_expression} |
    entity_expression {= |&lt;&gt; } {entity_expression |
    all_or_any_expression} |
    arithmetic_expression comparison_operator
        {arithmetic_expression | all_or_any_expression}
comparison_operator ::= = |&gt; |&gt;= |&lt; |&lt;= |&lt;&gt;
arithmetic_expression ::= simple_arithmetic_expression |
    (subquery)
simple_arithmetic_expression ::=
    arithmetic_term | simple_arithmetic_expression {+ |- }
        arithmetic_term
arithmetic_term ::= arithmetic_factor | arithmetic_term {* |/ }
    arithmetic_factor
arithmetic_factor ::= [{+ |- }] arithmetic_primary
arithmetic_primary ::=
    state_field_path_expression |
    numeric_literal |
    (simple_arithmetic_expression) |
    input_parameter |
    functions_returning_numerics |
    aggregate_expression
string_expression ::= string_primary | (subquery)
string_primary ::=
    state_field_path_expression |
    string_literal |
    input_parameter |
    functions_returning_strings |
    aggregate_expression
datetime_expression ::= datetime_primary | (subquery)
datetime_primary ::=
    state_field_path_expression |
    input_parameter |
    functions_returning_datetime |
    aggregate_expression
boolean_expression ::= boolean_primary | (subquery)
boolean_primary ::=
    state_field_path_expression |
    boolean_literal |
    input_parameter
 enum_expression ::= enum_primary | (subquery)
enum_primary ::=
    state_field_path_expression |
    enum_literal |
    input_parameter
entity_expression ::=
    single_valued_association_path_expression |
        simple_entity_expression
simple_entity_expression ::=
    identification_variable |
    input_parameter
functions_returning_numerics::=
    LENGTH(string_primary) |
    LOCATE(string_primary, string_primary[,
        simple_arithmetic_expression]) |
    ABS(simple_arithmetic_expression) |
    SQRT(simple_arithmetic_expression) |
    MOD(simple_arithmetic_expression,
        simple_arithmetic_expression) |
    SIZE(collection_valued_path_expression)
functions_returning_datetime ::=
    CURRENT_DATE |
    CURRENT_TIME |
    CURRENT_TIMESTAMP
functions_returning_strings ::=
    CONCAT(string_primary, string_primary) |
    SUBSTRING(string_primary,
        simple_arithmetic_expression,
        simple_arithmetic_expression)|
    TRIM([[trim_specification] [trim_character] FROM]
        string_primary) |
    LOWER(string_primary) |
    UPPER(string_primary)
trim_specification ::= LEADING | TRAILING | BOTH
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNBUJ">
          <h3 id="from-clause">Cláusula FROM</h3>
          <div class="paragraph">
            <p>
              La cláusula <code>FROM</code> define el dominio de la consulta declarando variables de 
              identificación.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#BNBUK">Identificadores</a></p>
              </li>
              <li>
                <p><a href="#BNBUM">Variables de Identificación</a></p>
              </li>
              <li>
                <p><a href="#BNBUN">Declaraciones de Variables de Rango</a></p>
              </li>
              <li>
                <p><a href="#BNBUO">Declaraciones de Miembros de la Colección</a></p>
              </li>
              <li>
                <p><a href="#BNBUP">Uniones</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="BNBUK">
            <h4 id="identifiers">Identificadores</h4>
            <div class="paragraph">
              <p>
                Un identificador es una secuencia de uno o más caracteres. El primer carácter debe 
                ser un primer carácter válido (letra, <code>$</code>, <code>...</code>) <em>en un 
                  identificador del lenguaje de programación Java, en lo sucesivo en este capítulo 
                  llamado simplemente "Java." Cada carácter subsiguiente en la secuencia debe ser un 
                  carácter válido que no sea el primero</em> (letra, dígito, <code>$</code>, 
                <code>...</code>) en un identificador de Java. (Para obtener más información, 
                consulte la documentación de la API de Java SE de los métodos 
                <code>isJavaIdentifierStart</code> y <code>isJavaIdentifierPart</code> de la clase 
                <code>Character</code>). El signo de interrogación (<code> ?</code>) es un 
                carácter reservado en el lenguaje de consulta y no se puede utilizar en un 
                identificador.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Un identificador de idioma de consulta distingue entre mayúsculas y minúsculas, con 
                dos excepciones:
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>Palabras clave</p>
                </li>
                <li>
                  <p>Variables de identificación</p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>
                Un identificador no puede ser lo mismo que una palabra clave del lenguaje de 
                consulta. Aquí hay una lista de palabras clave del lenguaje de consulta:
              </p>
            </div>
            <div class="paragraph">
              <p>
                <code>ABS</code><br>
                <code>ALL</code><br>
                <code>AND</code><br>
                <code>ANY</code><br>
                <code>AS</code><br>
                <code>ASC</code><br>
                <code>AVG</code><br>
                <code>BETWEEN</code><br>
                <code>BIT_LENGTH</code><br>
                <code>BOTH</code><br>
                <code>BY</code><br>
                <code>CASE</code><br>
                <code>CHAR_LENGTH</code><br>
                <code>CHARACTER_LENGTH</code><br>
                <code>CLASS</code><br>
                <code>COALESCE</code><br>
                <code>CONCAT</code><br>
                <code>COUNT</code><br>
                <code>CURRENT_DATE</code><br>
                <code>CURRENT_TIMESTAMP</code><br>
                <code>DELETE</code><br>
                <code>DESC</code><br>
                <code>DISTINCT</code><br>
                <code>ELSE</code><br>
                <code>EMPTY</code><br>
                <code>END</code><br>
                <code>ENTRY</code><br>
                <code>ESCAPE</code><br>
                <code>EXISTS</code><br>
                <code>FALSE</code><br>
                <code>FETCH</code><br>
                <code>FROM</code><br>
                <code>GROUP</code><br>
                <code>HAVING</code><br>
                <code>IN</code><br>
                <code>INDEX</code><br>
                <code>INNER</code><br>
                <code>IS</code><br>
                <code>JOIN</code><br>
                <code>KEY</code><br>
                <code>LEADING</code><br>
                <code>LEFT</code><br>
                <code>LENGTH</code><br>
                <code>LIKE</code><br>
                <code>LOCATE</code><br>
                <code>LOWER</code><br>
                <code>MAX</code><br>
                <code>MEMBER</code><br>
                <code>MIN</code><br>
                <code>MOD</code><br>
                <code>NEW</code><br>
                <code>NOT</code><br>
                <code>NULL</code><br>
                <code>NULLIF</code><br>
                <code>OBJECT</code><br>
                <code>OF</code><br>
                <code>OR</code><br>
                <code>ORDER</code><br>
                <code>OUTER</code><br>
                <code>POSITION</code><br>
                <code>SELECT</code><br>
                <code>SET</code><br>
                <code>SIZE</code><br>
                <code>SOME</code><br>
                <code>SQRT</code><br>
                <code>SUBSTRING</code><br>
                <code>SUM</code><br>
                <code>THEN</code><br>
                <code>TRAILING</code><br>
                <code>TRIM</code><br>
                <code>TRUE</code><br>
                <code>TYPE</code><br>
                <code>UNKNOWN</code><br>
                <code>UPDATE</code><br>
                <code>UPPER</code><br>
                <code>VALUE</code><br>
                <code>WHEN</code><br>
                <code>WHERE</code><br>
              </p>
            </div>
            <div class="paragraph">
              <p>
                No se recomienda utilizar una palabra clave SQL como identificador, ya que la lista 
                de palabras clave puede expandirse para incluir otras palabras SQL reservadas en el 
                futuro.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBUM">
            <h4 id="identification-variables">Variables de Identificación</h4>
            <div class="paragraph">
              <p>
                Una variable de identificación es un identificador declarado en la cláusula 
                <code>FROM</code>. Aunque pueden hacer referencia a variables de identificación, las 
                cláusulas <code>SELECT</code> y <code>WHERE</code> no pueden declararlas. Todas las 
                variables de identificación deben declararse en la cláusula <code>FROM</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Debido a que es un identificador, una variable de identificación tiene las mismas 
                convenciones y restricciones de nomenclatura que un identificador, con la excepción 
                de que una variable de identificación no distingue entre mayúsculas y minúsculas. 
                Por ejemplo, una variable de identificación no puede ser la misma que una palabra 
                clave del lenguaje de consulta. (Consulte <a href="#BNBUK">Identificadores</a> para 
                obtener más reglas de nomenclatura). Además, dentro de una unidad de persistencia 
                determinada, el nombre de una variable de identificación no debe coincidir con el 
                nombre de ninguna entidad o esquema abstracto.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La cláusula <code>FROM</code> puede contener múltiples declaraciones, separadas por 
                comas. Una declaración puede hacer referencia a otra variable de identificación que 
                haya sido declarada previamente (a la izquierda). En la siguiente cláusula 
                <code>FROM</code>, la variable <code>t</code> hace referencia a la variable 
                declarada previamente <code>p</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player p, IN (p.teams) AS t
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Incluso si no se usa en la cláusula <code>WHERE</code>, la declaración de una 
                variable de identificación puede afectar los resultados de la consulta. Por ejemplo, 
                compare las siguientes dos consultas. La siguiente consulta devuelve todos los 
                jugadores, ya sea que pertenezcan o no a un equipo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT p
FROM Player p
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Por el contrario, debido a que declara la variable de identificación <code>t</code>, 
                la siguiente consulta obtiene todos los jugadores que pertenecen a un equipo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT p
FROM Player p, IN (p.teams) AS t
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La siguiente consulta devuelve los mismos resultados que la consulta anterior, pero 
                la cláusula <code>WHERE</code> facilita la lectura:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT p
FROM Player p
WHERE p.teams IS NOT EMPTY
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Una variable de identificación siempre designa una referencia a un solo valor cuyo 
                tipo es el de la expresión utilizada en la declaración. Hay dos tipos de 
                declaraciones: variable de rango y miembro de colección.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBUN">
            <h4 id="range-variable-declarations">Declaraciones de Variables de Rango</h4>
            <div class="paragraph">
              <p>
                Para declarar una variable de identificación como un tipo de esquema abstracto, 
                especifique una declaración de variable de rango. En otras palabras, una variable de 
                identificación puede abarcar el tipo de esquema abstracto de una entidad. En el 
                siguiente ejemplo, una variable de identificación llamada <code>p</code> representa 
                el esquema abstracto llamado <code>Player</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player p
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Una declaración de variable de rango puede incluir el operador <code>AS</code>
                opcional:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player AS p
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Para obtener objetos, una consulta generalmente usa expresiones de ruta para navegar 
                a través de las relaciones. Pero para aquellos objetos que no se pueden obtener 
                mediante la navegación, puede usar una declaración de variable de rango para 
                designar un punto de inicio o consulta raíz.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si la consulta compara múltiples valores del mismo tipo de esquema abstracto, la 
                cláusula <code>FROM</code> debe declarar múltiples variables de identificación para 
                el esquema abstracto:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player p1, Player p2
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Para ver un ejemplo de una consulta de este tipo, consulte 
                <a href="persistence-querylanguage005.html#BNBUB">Operadores de Comparación</a>.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBUO">
            <h4 id="collection-member-declarations">Declaraciones de Miembros de la Colección</h4>
            <div class="paragraph">
              <p>
                En una relación de uno a muchos, el lado múltiple consta de una colección de 
                entidades. Una variable de identificación puede representar a un miembro de esta 
                colección. Para acceder a un miembro de la colección, la expresión de ruta en la 
                declaración de la variable navega a través de las relaciones en el esquema 
                abstracto. (Para obtener más información sobre las expresiones de ruta, consulte 
                <a href="#BNBUQ">Expresiones de Ruta</a>.) Dado que una expresión de ruta puede 
                basarse en otra expresión de ruta, la navegación puede atravesar varias relaciones. 
                Ver <a href="persistence-querylanguage005.html#BNBTU">
                  Atravesar Múltiples Relaciones</a>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Una declaración de miembro de colección debe incluir el operador <code>IN</code> 
                pero puede omitir el operador opcional <code>AS</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En el siguiente ejemplo, la entidad representada por el esquema abstracto denominado 
                <code>Palyer</code> tiene un campo de relación denominado <code>teams</code>. La 
                variable de identificación denominada <code>t</code> representa un solo miembro de 
                la colección <code>teams</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player p, IN (p.teams) t
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBUP">
            <h4 id="joins">Uniones</h4>
            <div class="paragraph">
              <p>
                El operador <code>JOIN</code> se usa para atravesar relaciones entre entidades y es 
                funcionalmente similar al operador <code>IN</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En el siguiente ejemplo, la consulta se une a la relación entre clientes y pedidos:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c
FROM Customer c JOIN c.orders o
WHERE c.status = 1 AND o.totalPrice &gt; 10000
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>La palabra clave <code>INNER</code> es opcional:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c
FROM Customer c INNER JOIN c.orders o
WHERE c.status = 1 AND o.totalPrice &gt; 10000
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Estos ejemplos son equivalentes a la siguiente consulta, que utiliza el operador 
                <code>IN</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c
FROM Customer c, IN (c.orders) o
WHERE c.status = 1 AND o.totalPrice &gt; 10000
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>También puede unirse a una relación de un solo valor:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT t
FROM Team t JOIN t.league l
WHERE l.sport = :sport
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Un <code>LEFT JOIN</code> o <code>LEFT OUTER JOIN</code> recupera un conjunto de 
                entidades donde los valores coincidentes en la condición de unión pueden estar 
                ausentes. La palabra clave <code>OUTER</code> es opcional:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c.name, o.totalPrice
FROM CustomerOrder o LEFT JOIN o.customer c
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Un <code>FETCH JOIN</code> es una operación de unión que devuelve entidades 
                asociadas como efecto secundario de ejecutar la consulta. En el siguiente ejemplo, 
                la consulta devuelve un conjunto de departamentos y, como efecto secundario, los 
                empleados asociados de los departamentos, aunque la cláusula <code>SELECT</code> no 
                recuperó explícitamente a los empleados:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT d
FROM Department d LEFT JOIN FETCH d.employees
WHERE d.deptno = 1
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNBUQ">
          <h3 id="path-expressions">Expresiones de Ruta</h3>
          <div class="paragraph">
            <p>
              Las expresiones de ruta son construcciones importantes en la sintaxis del lenguaje de 
              consulta por varias razones. Primero, las expresiones de ruta definen rutas de 
              navegación a través de las relaciones en el esquema abstracto. Estas definiciones de 
              ruta afectan tanto al alcance como a los resultados de una consulta. En segundo lugar, 
              las expresiones de ruta pueden aparecer en cualquiera de las cláusulas principales de 
              una consulta (<code>SELECT</code>, <code>DELETE</code>, <code>HAVING</code>, 
              <code>UPDATE</code >, <code>DÓNDE</code>, <code>DESDE</code>, 
              <code>AGRUPAR POR</code>, <code>ORDENAR POR</code>). Finalmente, aunque gran parte del 
              lenguaje de consulta es un subconjunto de SQL, las expresiones de ruta son extensiones 
              que no se encuentran en SQL.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#BNBUR">Ejemplos de Expresiones de Ruta</a></p>
              </li>
              <li>
                <p><a href="#BNBUS">Tipos de Expresión</a></p>
              </li>
              <li>
                <p><a href="#BNBUT">Navegación</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="BNBUR">
            <h4 id="examples-of-path-expressions">Ejemplos de Expresiones de Ruta</h4>
            <div class="paragraph">
              <p>
                Aquí, la cláusula <code>WHERE</code> contiene una 
                <code>single_valued_path_expression</code>; <code>p</code> es una variable de 
                identificación, y <code>salary</code> es un campo persistente de 
                <code>Player</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT DISTINCT p
FROM Player p
WHERE p.salary BETWEEN :lowerSalary AND :higherSalary
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Aquí, la cláusula <code>WHERE</code> también contiene una 
                <code>single_valued_path_expression</code>; <code>t</code> es una variable de 
                identificación, <code>league</code> es un campo de relación de un solo valor y 
                <code>sport</code> es un campo persistente de <code>league</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT DISTINCT p
FROM Player p, IN (p.teams) t
WHERE t.league.sport = :sport
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Aquí, la cláusula <code>WHERE</code> contiene una 
                <code>collection_valued_path_expression</code>; <code>p</code> es una variable de 
                identificación, y <code>teams</code> designa un campo de relación con valor de 
                colección:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT DISTINCT p
FROM Player p
WHERE p.teams IS EMPTY
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBUS">
            <h4 id="expression-types">Tipos de Expresión</h4>
            <div class="paragraph">
              <p>
                El tipo de una expresión de ruta es el tipo del objeto representado por el elemento 
                final, que puede ser uno de los siguientes:
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>Campo persistente</p>
                </li>
                <li>
                  <p>Campo de relación de valor único</p>
                </li>
                <li>
                  <p>Campo de relación con valor de colección</p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>
                Por ejemplo, el tipo de la expresión <code>p.salary</code> es <code>double</code> 
                porque el campo persistente final (<code>salary</code>) es <code>double</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En la expresión <code>p.teams</code>, el elemento de terminación es un campo de 
                relación con valor de colección (<code>teams</code>). El tipo de esta expresión es 
                una colección del tipo de esquema abstracto denominado <code>Team</code>. Debido a 
                que <code>Team</code> es el nombre de esquema abstracto para la entidad 
                <code>Team</code>, este tipo se asigna a la entidad. Para más información sobre el 
                mapeo de tipos de esquemas abstractos, ver <a href="#BNBVY">Tipos de Retorno</a>.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBUT">
            <h4 id="navigation">Navegación</h4>
            <div class="paragraph">
              <p>
                Una expresión de ruta permite que la consulta navegue a entidades relacionadas. Los 
                elementos finales de una expresión determinan si se permite la navegación. Si una 
                expresión contiene un campo de relación de un solo valor, la navegación puede 
                continuar hasta un objeto relacionado con el campo. Sin embargo, una expresión no 
                puede navegar más allá de un campo persistente o un campo de relación con valores de 
                colección. Por ejemplo, la expresión <code>p.teams.league.sport</code> es ilegal 
                porque <code>teams</code> es un campo de relación con valor de colección. Para 
                llegar al campo <code>sport</code>, la cláusula <code>FROM</code> podría definir una 
                variable de identificación denominada <code>t</code> para el campo 
                <code>teams</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
FROM Player AS p, IN (p.teams) t
WHERE t.league.sport = 'soccer'
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNBUU">
          <h3 id="where-clause">Cláusula WHERE</h3>
          <div class="paragraph">
            <p>
              La cláusula <code>WHERE</code> especifica una expresión condicional que limita los 
              valores devueltos por la consulta. La consulta devuelve todos los valores 
              correspondientes en el almacén de datos para los que la expresión condicional es 
              <code>TRUE</code>. Aunque normalmente se especifica, la cláusula <code>WHERE</code> es 
              opcional. Si se omite la cláusula <code>WHERE</code>, la consulta devuelve todos los 
              valores. La sintaxis de alto nivel para la cláusula <code>WHERE</code> es la 
              siguiente:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
where_clause ::= WHERE conditional_expression
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#BNBUV">Literales</a></p>
              </li>
              <li>
                <p><a href="#BNBVA">Parámetros de Entrada</a></p>
              </li>
              <li>
                <p><a href="#BNBVB">Expresiones Condicionales</a></p>
              </li>
              <li>
                <p><a href="#BNBVC">Operadores y Su Precedencia</a></p>
              </li>
              <li>
                <p><a href="#BNBVE">Expresiones BETWEEN</a></p>
              </li>
              <li>
                <p><a href="#BNBVF">Expresiones IN</a></p>
              </li>
              <li>
                <p><a href="#BNBVG">Expresiones LIKE</a></p>
              </li>
              <li>
                <p><a href="#BNBVI">Expresiones de Comparación con NULL</a></p>
              </li>
              <li>
                <p><a href="#BNBVJ">Expresiones de Comparación con una Colección Vacía</a></p>
              </li>
              <li>
                <p><a href="#BNBVK">Expresiones de Miembro de Colección</a></p>
              </li>
              <li>
                <p><a href="#BNBVL">Subconsultas</a></p>
              </li>
              <li>
                <p><a href="#BNBVO">Expresiones Funcionales</a></p>
              </li>
              <li>
                <p><a href="#GJJND">Expresiones de Caso</a></p>
              </li>
              <li>
                <p><a href="#BNBVR">Valores NULL</a></p>
              </li>
              <li>
                <p><a href="#BNBVU">Semántica de la Igualdad</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="BNBUV">
            <h4 id="literals">Literales</h4>
            <div class="paragraph">
              <p>Hay cuatro tipos de literales: cadena, numérico, booleano y enumeración.</p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>Literales de cadena: un literal de cadena está entre comillas simples:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
'Duke'
                        </code>
                      </pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>
                      Si un literal de cadena contiene una comilla simple, indique la comilla usando 
                      dos comillas simples:
                    </p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
'Duke''s'
                        </code>
                      </pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>
                      Al igual que un <code>String</code> de Java, un literal de cadena en el 
                      lenguaje de consulta utiliza la codificación de caracteres Unicode.
                    </p>
                  </div>
                </li>
                <li>
                  <p>
                    Literales numéricos: Hay dos tipos de literales numéricos: exactos y 
                    aproximados.
                  </p>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Un literal numérico exacto es un valor numérico sin punto decimal, como 
                          65, –233 y +12. Usando la sintaxis de enteros de Java, los literales 
                          numéricos exactos admiten números en el rango de un <code>long</code> de 
                          Java.
                        </p>
                      </li>
                      <li>
                        <p>
                          Un literal numérico aproximado es un valor numérico en notación 
                          científica, como 57, –85,7 y +2,1. Usando la sintaxis del literal de punto 
                          flotante de Java, los literales numéricos aproximados admiten números en 
                          el rango de un <code>double</code> de Java.
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
                    Literales booleanos: un literal booleano es <code>TRUE</code> o 
                    <code>FALSE</code>. Estas palabras clave no distinguen entre mayúsculas y 
                    minúsculas.
                  </p>
                </li>
                <li>
                  <p>
                    Literales de enumeración: el lenguaje de consulta de persistencia de Java admite 
                    el uso de literales de enumeración mediante la sintaxis de literales de 
                    enumeración de Java. El nombre de la clase enum debe especificarse como un 
                    nombre de clase completo:
                  </p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT e
FROM Employee e
WHERE e.status = com.example.EmployeeStatus.FULL_TIME
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3" id="BNBVA">
            <h4 id="input-parameters">Parámetros de Entrada</h4>
            <div class="paragraph">
              <p>
                Un parámetro de entrada puede ser un parámetro con nombre o un parámetro posicional.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Un parámetro de entrada con nombre se designa con dos puntos (<code>:</code>) 
                    seguido de una cadena; por ejemplo, <code>:name</code>.
                  </p>
                </li>
                <li>
                  <p>
                    Un parámetro de entrada posicional se designa con un signo de interrogación 
                    (<code>?</code>) seguido de un número entero. Por ejemplo, el primer parámetro 
                    de entrada es <code>?1</code>, el segundo es <code>?2</code> y así 
                    sucesivamente.
                  </p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>Las siguientes reglas se aplican a los parámetros de entrada.</p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Solo se pueden usar en una cláusula <code>WHERE</code> o <code>HAVING</code>.
                  </p>
                </li>
                <li>
                  <p>
                    Los parámetros posicionales deben estar numerados, comenzando con el número 
                    entero 1.
                  </p>
                </li>
                <li>
                  <p>
                    Los parámetros con nombre y los parámetros posicionales no se pueden mezclar en 
                    una sola consulta.
                  </p>
                </li>
                <li>
                  <p>Los parámetros con nombre distinguen entre mayúsculas y minúsculas.</p>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3" id="BNBVB">
            <h4 id="conditional-expressions">Expresiones Condicionales</h4>
            <div class="paragraph">
              <p>
                Una cláusula <code>WHERE</code> consta de una expresión condicional, que se evalúa 
                de izquierda a derecha dentro de un nivel de precedencia. Puede cambiar el orden de 
                evaluación usando paréntesis.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBVC">
            <h4 id="operators-and-their-precedence">Operadores y Su Precedencia</h4>
            <div class="paragraph">
              <p>
                La <a href="#BNBVD">tabla 42-2</a> enumera los operadores de lenguaje de consulta en 
                orden de precedencia decreciente.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref170"></a><a id="BNBVD"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-2 Precedencia del orden del lenguaje de consulta</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 75%;">
              <colgroup>
                <col style="width: 35.7142%;">
                <col style="width: 64.2858%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Tipo</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Orden de precedencia</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Navegación</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>.</code> (un punto)</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Aritmética</p></td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>+ –</code> (unario)</p></div>
                      <div class="paragraph"><p><code>* /</code> (multiplicación y división)</p></div>
                      <div class="paragraph"><p><code>+ –</code> (adición y sustracción)</p></div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Comparación</p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>=</code></p></div>
                      <div class="paragraph"><p><code>&gt;</code></p></div>
                      <div class="paragraph"><p><code>&gt;=</code></p></div>
                      <div class="paragraph"><p><code>&lt;</code></p></div>
                      <div class="paragraph"><p><code>&#8656;</code></p></div>
                      <div class="paragraph"><p><code>&lt;&gt;</code> (no igual)</p></div>
                      <div class="paragraph"><p><code>[NOT] BETWEEN</code></p></div>
                      <div class="paragraph"><p><code>[NOT] LIKE</code></p></div>
                      <div class="paragraph"><p><code>[NOT] IN</code></p></div>
                      <div class="paragraph"><p><code>IS [NOT] NULL</code></p></div>
                      <div class="paragraph"><p><code>IS [NOT] EMPTY</code></p></div>
                      <div class="paragraph"><p><code>[NOT] MEMBER OF</code></p></div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Lógica</p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>NOT</code></p></div>
                      <div class="paragraph"><p><code>AND</code></p></div>
                      <div class="paragraph"><p><code>OR</code></p></div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="sect3" id="BNBVE">
            <h4 id="between-expressions">Expresiones BETWEEN</h4>
            <div class="paragraph">
              <p>
                Una expresión <code>BETWEEN</code> determina si una expresión aritmética se 
                encuentra dentro de un rango de valores.
              </p>
            </div>
            <div class="paragraph">
              <p>Estas dos expresiones son equivalentes:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
p.age BETWEEN 15 AND 19
p.age &gt;= 15 AND p.age &lt;= 19
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>Las siguientes dos expresiones también son equivalentes:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
p.age NOT BETWEEN 15 AND 19
p.age &lt; 15 OR p.age &gt; 19
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Si una expresión aritmética tiene un valor <code>NULL</code>, se desconoce el valor 
                de la expresión <code>BETWEEN</code>.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBVF">
            <h4 id="in-expressions">Expresiones IN</h4>
            <div class="paragraph">
              <p>
                Una expresión <code>IN</code> determina si una cadena pertenece a un conjunto de 
                literales de cadena o si un número pertenece a un conjunto de valores numéricos.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La expresión de ruta debe tener una cadena o un valor numérico. Si la expresión de 
                ruta tiene un valor <code>NULL</code>, el valor de la expresión <code>IN</code> es 
                desconocido.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En el siguiente ejemplo, la expresión es <code>TRUE</code> si el país es 
                <code>UK</code>, pero <code>FALSE</code> si el país es <code>Peru</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
o.country IN ('UK', 'US', 'France')
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>También puede usar parámetros de entrada:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
o.country IN ('UK', 'US', 'France', :country)
                </code></pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBVG">
            <h4 id="like-expressions">Expresiones LIKE</h4>
            <div class="paragraph">
              <p>
                Una expresión <code>LIKE</code> determina si un patrón comodín coincide con una 
                cadena.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La expresión de ruta debe tener una cadena o un valor numérico. Si este valor es 
                <code>NULL</code>, el valor de la expresión <code>LIKE</code> es desconocido. El 
                valor del patrón es un literal de cadena que puede contener caracteres comodín. El 
                carácter comodín de guión bajo (<code>_</code>) representa cualquier carácter 
                individual. El carácter comodín de porcentaje (<code>%</code>) representa cero o más 
                caracteres. La cláusula <code>ESCAPE</code> especifica un carácter de escape para 
                los caracteres comodín en el valor del patrón. La <a href="#BNBVH">tabla 42-3</a> 
                muestra algunos ejemplos de expresiones <code>LIKE</code>.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref171"></a><a id="BNBVH"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-3 Ejemplos de expresiones LIKE</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 75%;">
              <colgroup>
                <col style="width: 46.6666%;">
                <col style="width: 26.6666%;">
                <col style="width: 26.6668%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Expresión</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>TRUE</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>FALSE</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>address.phone LIKE '12%3'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>'123'</code></p></div>
                      <div class="paragraph"><p><code>'12993'</code></p></div>
                    </div>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'1234'</code></p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>asentence.word LIKE 'l_se'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'lose'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'loose'</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>aword.underscored LIKE '\_%' ESCAPE '\'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'_foo'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'bar'</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>address.phone NOT LIKE '12%3'</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>'1234'</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>'123'</code></p></div>
                      <div class="paragraph"><p><code>'12993'</code></p></div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="sect3" id="BNBVI">
            <h4 id="null-comparison-expressions">Expresiones de Comparación con NULL</h4>
            <div class="paragraph">
              <p>
                Una expresión de comparación <code>NULL</code> comprueba si una expresión de ruta de 
                un solo valor o un parámetro de entrada tiene un valor <code>NULL</code>. Por lo 
                general, la expresión de comparación <code>NULL</code> se usa para probar si se ha 
                establecido una relación de un solo valor:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT t
FROM Team t
WHERE t.league IS NULL
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Esta consulta selecciona todos los equipos donde la relación de liga no está 
                establecida. Tenga en cuenta que la siguiente consulta no es equivalente:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT t
FROM Team t
WHERE t.league = NULL
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La comparación con <code>NULL</code> usando el operador igual (<code>=</code>) 
                siempre devuelve un valor desconocido, incluso si la relación no está establecida. 
                La segunda consulta siempre devolverá un resultado vacío.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBVJ">
            <h4 id="empty-collection-comparison-expressions">
              Expresiones de Comparación con una Colección Vacía
            </h4>
            <div class="paragraph">
              <p>
                La expresión de comparación <code>IS [NOT] EMPTY</code> comprueba si una expresión 
                de ruta con valor de colección no tiene elementos. En otras palabras, comprueba si 
                se ha establecido una relación de valor de colección.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si la expresión de ruta con valor de colección es <code>NULL</code>, la expresión de 
                comparación de colección vacía tiene un valor <code>NULL</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Aquí hay un ejemplo que encuentra todos los pedidos que no tienen artículos de 
                línea:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT o
FROM CustomerOrder o
WHERE o.lineItems IS EMPTY
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBVK">
            <h4 id="collection-member-expressions">Expresiones de Miembro de Colección</h4>
            <div class="paragraph">
              <p>
                La expresión de miembro de colección <code>[NOT]</code> <code>MEMBER [OF]</code> 
                determina si un valor es miembro de una colección. El valor y los miembros de la 
                colección deben tener el mismo tipo.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si se desconoce la expresión de ruta con valor de colección o de valor único, se 
                desconoce la expresión de miembro de colección. Si la expresión de ruta con valor de 
                colección designa una colección vacía, la expresión de miembro de la colección es 
                <code>FALSE</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>La palabra clave <code>OF</code> es opcional.</p>
            </div>
            <div class="paragraph">
              <p>El siguiente ejemplo prueba si una línea de pedido es parte de un pedido:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT o
FROM CustomerOrder o
WHERE :lineItem MEMBER OF o.lineItems
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBVL">
            <h4 id="subqueries">Subconsultas</h4>
            <div class="paragraph">
              <p>
                Las subconsultas se pueden utilizar en la cláusula <code>WHERE</code> o 
                <code>HAVING</code> de una consulta. Las subconsultas deben estar entre paréntesis.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo encuentra todos los clientes que han realizado más de diez 
                pedidos:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c
FROM Customer c
WHERE (SELECT COUNT(o) FROM c.orders o)&gt; 10
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Las subconsultas pueden contener expresiones <code>EXISTS</code>, <code>ALL</code> y 
                <code>ANY</code>.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Expresiones EXISTS: La expresión <code>[NOT] EXISTS</code> se usa con una 
                    subconsulta y es verdadera solo si el resultado de la subconsulta consta de uno 
                    o más valores; de lo contrario, es falso.
                  </p>
                  <div class="paragraph">
                    <p>
                      El siguiente ejemplo encuentra a todos los empleados cuyos cónyuges también 
                      son empleados:
                    </p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT DISTINCT emp
FROM Employee emp
WHERE EXISTS (
    SELECT spouseEmp
    FROM Employee spouseEmp
    WHERE spouseEmp = emp.spouse)
                      </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>
                    Expresiones ALL y ANY: la expresión <code>ALL</code> se usa con una subconsulta 
                    y es verdadera si todos los valores devueltos por la subconsulta son verdaderos 
                    o si la subconsulta está vacía.
                  </p>
                  <div class="paragraph">
                    <p>
                      La expresión <code>ANY</code> se usa con una subconsulta y es verdadera si 
                      algunos de los valores devueltos por la subconsulta son verdaderos. Una 
                      expresión <code>ANY</code> es falsa si el resultado de la subconsulta está 
                      vacío o si todos los valores devueltos son falsos. La palabra clave 
                      <code>SOME</code> es sinónimo de <code>ANY</code>.
                    </p>
                  </div>
                  <div class="paragraph">
                    <p>
                      Las expresiones <code>ALL</code> y <code>ANY</code> se utilizan con 
                      <code>=</code>, <code>&lt;</code>, <code>&#8656;</code>, <code>&gt;</code>, 
                      los operadores de comparación <code>&gt;=</code> y <code>&lt;&gt;</code>.
                    </p>
                  </div>
                  <div class="paragraph">
                    <p>
                      El siguiente ejemplo encuentra todos los empleados cuyos salarios son más 
                      altos que los salarios de los gerentes en el departamento del empleado:
                    </p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT emp
FROM Employee emp
WHERE emp.salary &gt; ALL (
    SELECT m.salary
    FROM Manager m
    WHERE m.department = emp.department)
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3" id="BNBVO">
            <h4 id="functional-expressions">Expresiones Funcionales</h4>
            <div class="paragraph">
              <p>
                El lenguaje de consulta incluye varias funciones de cadena, aritméticas y de 
                fecha/hora que se pueden usar en la cláusula <code>SELECT</code>, <code>WHERE</code> 
                o <code>HAVING</code> de un consulta. Las funciones se enumeran en 
                <a href="#BNBVP">Tabla 42-4</a>, <a href="#BNBVQ">Tabla 42-5</a> y 
                <a href="#GJJNL" >Cuadro 42-6</a>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En la <a href="#BNBVP">Tabla 42-4</a>, los argumentos <code>start</code> y 
                <code>length</code> son del tipo <code>int</code> y designan posiciones en el 
                argumento <code>String</code>. La primera posición en una cadena se designa con 1.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref172"></a><a id="BNBVP"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-4 Expresiones de cadena</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 75%;">
              <colgroup>
                <col style="width: 64.2857%;">
                <col style="width: 35.7143%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Sintaxis de la función</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Tipo de devolución</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>CONCAT(String, String)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>String</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>LENGTH(String)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>int</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>LOCATE(String, String [, start])</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>int</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>SUBSTRING(String, start, length)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>String</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">`TRIM([[LEADING</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">TRAILING</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">BOTH] char) FROM] (String)`</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>String</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>LOWER(String)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>String</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>UPPER(String)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>String</code></p></td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>La función <code>CONCAT</code> concatena dos cadenas en una cadena.</p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>LENGTH</code> devuelve la longitud de una cadena en caracteres como 
                un número entero.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>LOCATE</code> devuelve la posición de una cadena dada dentro de una 
                cadena. Esta función devuelve la primera posición en la que se encontró la cadena 
                como un número entero. El primer argumento es la cadena a localizar. El segundo 
                argumento es la cadena a buscar. El tercer argumento opcional es un número entero 
                que representa la posición inicial de la cadena. De forma predeterminada, 
                <code>LOCATE</code> comienza al principio de la cadena. La posición inicial de una 
                cadena es <code>1</code>. Si no se puede ubicar la cadena, <code>LOCATE</code> 
                devuelve <code>0</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>SUBSTRING</code> devuelve una cadena que es una subcadena del 
                primer argumento según la posición inicial y la longitud.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>TRIM</code> recorta el carácter especificado desde el principio y/o 
                el final de una cadena. Si no se especifica ningún carácter, <code>TRIM</code> 
                elimina los espacios en blanco de la cadena. Si se usa la especificación opcional 
                <code>LEADING</code>, <code>TRIM</code> elimina solo los caracteres iniciales de la 
                cadena. Si se usa la especificación opcional <code>TRAILING</code>, 
                <code>TRIM</code> elimina solo los caracteres finales de la cadena. El valor 
                predeterminado es <code>BOTH</code>, que elimina los caracteres iniciales y finales 
                de la cadena.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Las funciones <code>LOWER</code> y <code>UPPER</code> convierten una cadena a 
                minúsculas o mayúsculas, respectivamente.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En la <a href="#BNBVQ">Tabla 42-5</a>, el argumento <code>number</code> puede ser un 
                <code>int</code>, un <code>float</code> , o un <code>doble</code>.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref173"></a><a id="BNBVQ"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-5 Expresiones aritméticas</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 60%;">
              <colgroup>
                <col style="width: 50%;">
                <col style="width: 50%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Sintaxis de la función</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Tipo de devolución</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>ABS(number)</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>int</code>, <code>float</code>, o <code>double</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>MOD(int, int)</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>int</code></p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>SQRT(double)</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>double</code></p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>SIZE(Collection)</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>int</code></p>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>
                La función <code>ABS</code> toma una expresión numérica y devuelve un número del 
                mismo tipo que el argumento.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>MOD</code> devuelve el resto del primer argumento dividido por el 
                segundo.
              </p>
            </div>
            <div class="paragraph">
              <p>La función <code>SQRT</code> devuelve la raíz cuadrada de un número.</p>
            </div>
            <div class="paragraph">
              <p>
                La función <code>SIZE</code> devuelve un número entero del número de elementos en la 
                colección dada.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En la <a href="#GJJNL">Tabla 42-6</a>, las funciones de fecha/hora devuelven la 
                fecha, la hora o la marca de tiempo en el servidor de la base de datos.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref174"></a><a id="GJJNL"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-6 Expresiones de fecha/hora</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 60%;">
              <colgroup>
                <col style="width: 50%;">
                <col style="width: 50%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Sintaxis de la función</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Tipo de devolución</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>CURRENT_DATE</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.sql.Date</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>CURRENT_TIME</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.sql.Time</code></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>CURRENT_TIMESTAMP</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.sql.Timestamp</code></p></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="sect3" id="GJJND">
            <h4 id="case-expressions">Expresiones de Caso</h4>
            <div class="paragraph">
              <p>
                Las expresiones de mayúsculas y minúsculas cambian en función de una condición, 
                similar a la palabra clave <code>case</code> del lenguaje de programación Java. La 
                palabra clave <code>CASE</code> indica el comienzo de una expresión de caso, y la 
                expresión termina con la palabra clave <code>END</code>. Las palabras clave 
                <code>WHEN</code> y <code>THEN</code> definen condiciones individuales, y la palabra 
                clave <code>ELSE</code> define la condición predeterminada en caso de que no se 
                cumpla ninguna de las otras condiciones.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La siguiente consulta selecciona el nombre de una persona y una cadena condicional, 
                según el subtipo de la entidad <code>Person</code>. Si el subtipo es 
                <code>Student</code>, se devuelve la cadena <code>kid</code>. Si el subtipo es 
                <code>Guardian</code> o <code>Staff</code>, se devuelve la cadena 
                <code>adult</code>. Si la entidad es algún otro subtipo de <code>Person</code>, se 
                devuelve la cadena <code>unknown</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT p.name
CASE TYPE(p)
    WHEN Student THEN 'kid'
    WHEN Guardian THEN 'adult'
    WHEN Staff THEN 'adult'
    ELSE 'unknown'
END
FROM Person p
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La siguiente consulta establece un descuento para varios tipos de clientes. Los 
                clientes de nivel oro obtienen un 20% de descuento, los clientes de nivel plata 
                obtienen un 15% de descuento, los clientes de nivel bronce obtienen un 10% de 
                descuento y todos los demás obtienen un 5% de descuento:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
UPDATE Customer c
SET c.discount =
    CASE c.level
        WHEN 'Gold' THEN 20
        WHEN 'SILVER' THEN 15
        WHEN 'Bronze' THEN 10
        ELSE 5
    END
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBVR">
            <h4 id="null-values">Valores NULL</h4>
            <div class="paragraph">
              <p>
                Si el destino de una referencia no está en el almacén persistente, el destino es 
                <code>NULL</code>. Para las expresiones condicionales que contienen 
                <code>NULL</code>, el lenguaje de consulta utiliza la semántica definida por SQL92. 
                Brevemente, estas semánticas son las siguientes.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Si una operación aritmética o de comparación tiene un valor desconocido, arroja 
                    un valor <code>NULL</code>.
                  </p>
                </li>
                <li>
                  <p>
                    Dos valores <code>NULL</code> no son iguales. La comparación de dos valores 
                    <code>NULL</code> produce un valor desconocido.
                  </p>
                </li>
                <li>
                  <p>
                    La prueba <code>IS NULL</code> convierte un campo persistente <code>NULL</code> 
                    o un campo de relación de un solo valor en <code>TRUE</code>. La prueba 
                    <code>IS NOT NULL</code> los convierte a <code>FALSE</code>.
                  </p>
                </li>
                <li>
                  <p>
                    Los operadores booleanos y las pruebas condicionales utilizan la lógica de tres 
                    valores definida por la <a href="#BNBVS">Tabla 42-7</a> y la 
                    <a href="#BNBVT">Tabla 42-8</a>. (En estas tablas, T significa 
                    <code>VERDADERO</code>, F <code>FALSO</code> y U desconocido).
                  </p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p><a id="sthref175"></a><a id="BNBVS"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-7 Lógica del operador AND</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 40%;">
              <colgroup>
                <col style="width: 25%;">
                <col style="width: 25%;">
                <col style="width: 25%;">
                <col style="width: 25%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>AND</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>T</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>F</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>U</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p><a id="sthref176"></a><a id="BNBVT"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-8 Lógica del operador OR</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 40%;">
              <colgroup>
                <col style="width: 25%;">
                <col style="width: 25%;">
                <col style="width: 25%;">
                <col style="width: 25%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>OR</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>T</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>F</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>U</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="sect3" id="BNBVU">
            <h4 id="equality-semantics">Semántica de la Igualdad</h4>
            <div class="paragraph">
              <p>
                En el lenguaje de consulta, solo se pueden comparar valores del mismo tipo. Sin 
                embargo, esta regla tiene una excepción: se pueden comparar valores numéricos 
                exactos y aproximados. En tal comparación, la conversión de tipo requerida se 
                adhiere a las reglas de promoción numérica de Java.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El lenguaje de consulta trata los valores comparados como si fueran tipos de Java y 
                no como si representaran tipos en el almacén de datos subyacente. Por ejemplo, un 
                campo persistente que podría ser un número entero o un <code>NULL</code> debe 
                designarse como un objeto <code>Integer</code> y no como un primitivo 
                <code>int</code>. Esta designación es necesaria porque un objeto Java puede ser 
                <code>NULL</code>, pero una primitiva no.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Dos cadenas son iguales solo si contienen la misma secuencia de caracteres. Los 
                espacios en blanco finales son significativos; por ejemplo, las cadenas 
                <code>'abc'</code> y <code>'abc '</code> no son iguales.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Dos entidades del mismo tipo de esquema abstracto son iguales solo si sus claves 
                primarias tienen el mismo valor. La <a href="#BNBVV">tabla 42-9</a> muestra la 
                lógica del operador de una negación y la <a href="#BNBVW">tabla 42-10</a> muestra 
                los valores de verdad de las pruebas condicionales.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref177"></a><a id="BNBVV"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-9 Lógica del operador NOT</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 30%;">
              <colgroup>
                <col style="width: 50%;">
                <col style="width: 50%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>NOT Valor</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Valor</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p><a id="sthref178"></a><a id="BNBVW"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-10 Prueba condicional</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 60%;">
              <colgroup>
                <col style="width: 50%;">
                <col style="width: 16.6666%;">
                <col style="width: 16.6666%;">
                <col style="width: 16.6668%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Prueba Condicional</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>T</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>F</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>U</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Expresión <code>IS TRUE</code></p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Expresión <code>IS FALSE</code></p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Expresión es desconocida</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="sect2" id="BNBVX">
          <h3 id="select-clause">Cláusula SELECT</h3>
          <div class="paragraph">
            <p>
              La cláusula <code>SELECT</code> define los tipos de objetos o valores devueltos por la 
              consulta.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#BNBVY">Tipos de Retorno</a></p>
              </li>
              <li>
                <p><a href="#BNBWB">La palabra clave DISTINCT</a></p>
              </li>
              <li>
                <p><a href="#BNBWC">Expresiones de Constructor</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="BNBVY">
            <h4 id="return-types">Tipos de Retorno</h4>
            <div class="paragraph">
              <p>
                El tipo de retorno de la cláusula <code>SELECT</code> está definido por los tipos de 
                resultados de las expresiones de selección contenidas en ella. Si se utilizan varias 
                expresiones, el resultado de la consulta es un <code>Object[]</code>, y los 
                elementos de la matriz corresponden al orden de las expresiones en la cláusula 
                <code>SELECT</code> y en type a los tipos de resultado de cada expresión.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Una cláusula <code>SELECT</code> no puede especificar una expresión con valor de 
                colección. Por ejemplo, la cláusula <code>SELECT</code> <code>p.teams</code> no es 
                válida porque <code>teams</code> es una colección. Sin embargo, la cláusula de la 
                siguiente consulta es válida porque <code>t</code> es un único elemento de la 
                colección <code>teams</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT t
FROM Player p, IN (p.teams) t
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La siguiente consulta es un ejemplo de una consulta con varias expresiones en la 
                cláusula <code>SELECT</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c.name, c.country.name
FROM customer c
WHERE c.lastname = 'Coss' AND c.firstname = 'Roxane'
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Esta consulta devuelve una lista de elementos <code>Object[]</code>; el primer 
                elemento de la matriz es una cadena que indica el nombre del cliente y el segundo 
                elemento de la matriz es una cadena que indica el nombre del país del cliente.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El resultado de una consulta puede ser el resultado de una función agregada, 
                enumerada en la <a href="#BNBWA">Tabla 42-11</a>.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref179"></a><a id="BNBWA"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 42-11 Funciones de agregado en sentencias Select</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 80%;">
              <colgroup>
                <col style="width: 11.6279%;">
                <col style="width: 38.7596%;">
                <col style="width: 49.6125%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Nombre</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Tipo de devolución</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Descripción</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>AVG</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>Double</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Devuelve el promedio medio de los campos.</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>COUNT</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>Long</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Devuelve el número total de resultados.</p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>MAX</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">El tipo de campo</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Devuelve el valor más alto en el conjunto de resultados
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>MIN</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">El tipo de campo</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Devuelve el valor más bajo en el conjunto de resultados
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>SUM</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph"><p><code>Long</code> (para campos enteros)</p></div>
                      <div class="paragraph">
                        <p><code>Double</code> (para campos de punto flotante)</p>
                      </div>
                      <div class="paragraph">
                        <p><code>BigInteger</code> (para campos <code>BigInteger</code>)</p>
                      </div>
                      <div class="paragraph">
                        <p><code>BigDecimal</code> (para campos <code>BigDecimal</code>)</p>
                      </div>
                    </div>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Devuelve la suma de todos los valores del conjunto de resultados.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>
                Para consultas de métodos seleccionados con una función agregada (<code>AVG</code>, 
                <code>COUNT</code>, <code>MAX</code>, <code>MIN</code> o <code>SUM </code>) en la 
                cláusula <code>SELECT</code>, se aplican las siguientes reglas.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Las funciones <code>AVG</code>, <code>MAX</code>, <code>MIN</code> y 
                    <code>SUM</code> devuelven <code>null</code> si hay no hay valores a los que se 
                    pueda aplicar la función.
                  </p>
                </li>
                <li>
                  <p>
                    La función <code>COUNT</code> devuelve 0 si no hay valores a los que se pueda 
                    aplicar la función.
                  </p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>El siguiente ejemplo devuelve la cantidad de pedido promedio:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT AVG(o.quantity)
FROM CustomerOrder o
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo devuelve el costo total de los artículos pedidos por Roxane 
                Coss:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT SUM(l.price)
FROM CustomerOrder o JOIN o.lineItems l JOIN o.customer c
WHERE c.lastname = 'Coss' AND c.firstname = 'Roxane'
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>El siguiente ejemplo devuelve el número total de pedidos:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT COUNT(o)
FROM CustomerOrder o
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo devuelve el número total de artículos que tienen precios en el 
                pedido de Hal Incandenza:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT COUNT(l.price)
FROM CustomerOrder o JOIN o.lineItems l JOIN o.customer c
WHERE c.lastname = 'Incandenza' AND c.firstname = 'Hal'
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNBWB">
            <h4 id="the-distinct-keyword">La palabra clave DISTINCT</h4>
            <div class="paragraph">
              <p>
                La palabra clave <code>DISTINCT</code> elimina los valores de retorno duplicados. Si 
                una consulta devuelve un <code>java.util.Collection</code>, que permite duplicados, 
                debe especificar la palabra clave <code>DISTINCT</code> para eliminar los 
                duplicados.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNBWC">
            <h4 id="constructor-expressions">Expresiones de Constructor</h4>
            <div class="paragraph">
              <p>
                Las expresiones de constructor le permiten devolver instancias de Java que almacenan 
                un elemento de resultado de consulta en lugar de un <code>Object[]</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La siguiente consulta crea una instancia de <code>CustomerDetail</code> por cada 
                <code>Customer</code> que coincida con la cláusula <code>WHERE</code>. Un 
                <code>CustomerDetail</code> almacena el nombre del cliente y el nombre del país del 
                cliente. Entonces, la consulta devuelve una <code>List</code> de instancias de 
                <code>CustomerDetail</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT NEW com.example.CustomerDetail(c.name, c.country.name)
FROM customer c
WHERE c.lastname = 'Coss' AND c.firstname = 'Roxane'
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNBWD">
          <h3 id="order-by-clause">Cláusula ORDER BY</h3>
          <div class="paragraph">
            <p>
              Como sugiere su nombre, la cláusula <code>ORDER BY</code> ordena los valores u objetos 
              devueltos por la consulta.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la cláusula <code>ORDER BY</code> contiene varios elementos, la secuencia de 
              izquierda a derecha de los elementos determina la precedencia de mayor a menor.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La palabra clave <code>ASC</code> especifica el orden ascendente, el predeterminado, y 
              la palabra clave <code>DESC</code> indica el orden descendente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Cuando se utiliza la cláusula <code>ORDER BY</code>, la cláusula <code>SELECT</code> 
              debe devolver un conjunto ordenable de objetos o valores. No puede ordenar los valores 
              u objetos para valores u objetos no devueltos por la cláusula <code>SELECT</code>. Por 
              ejemplo, la siguiente consulta es válida porque la cláusula <code>ORDER BY</code> usa 
              los objetos devueltos por la cláusula <code>SELECT</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT o
FROM Customer c JOIN c.orders o JOIN c.address a
WHERE a.state = 'CA'
ORDER BY o.quantity, o.totalcost
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El siguiente ejemplo no es válido porque la cláusula <code>ORDER BY</code> utiliza un 
              valor que no devuelve la cláusula <code>SELECT</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT p.product_name
FROM CustomerOrder o, IN(o.lineItems) l JOIN o.customer c
WHERE c.lastname = 'Faehmel' AND c.firstname = 'Robert'
ORDER BY o.quantity
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNBWE">
          <h3 id="group-by-and-having-clauses">Cláusulas GROUP BY y HAVING</h3>
          <div class="paragraph">
            <p>
              La cláusula <code>GROUP BY</code> le permite agrupar valores según un conjunto de 
              propiedades.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La siguiente consulta agrupa a los clientes por su país y devuelve el número de 
              clientes por país:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c.country, COUNT(c)
FROM Customer c GROUP BY c.country
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              La cláusula <code>HAVING</code> se usa con la cláusula <code>GROUP BY</code> para 
              restringir aún más el resultado devuelto de una consulta.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La siguiente consulta agrupa los pedidos por el estado de su cliente y devuelve el 
              estado del cliente más el <code>totalPrice</code> promedio para todos los pedidos en 
              los que los clientes correspondientes tienen el mismo estado. Además, solo considera a 
              los clientes con estado <code>1</code>, <code>2</code> o <code>3</code>, por lo que no 
              se tienen en cuenta los pedidos de otros clientes:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
SELECT c.status, AVG(o.totalPrice)
FROM CustomerOrder o JOIN o.customer c
GROUP BY c.status HAVING c.status IN (1, 2, 3)
                </code>
              </pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="persistence-querylanguage005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="persistence-criteria.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
