<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Endpoints Anotados</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="websocket003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="websocket005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BABFEBGA">
      <h2 id="annotated-endpoints">Endpoints Anotados</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El siguiente ejemplo muestra cómo crear el mismo punto final desde 
            <a href="websocket003.html#BABGJEIG">Endpoints Programáticos</a> usando anotaciones en su lugar:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
@ServerEndpoint("/echo")
public class EchoEndpoint {
   @OnMessage
   public void onMessage(Session session, String msg) {
      try {
         session.getBasicRemote().sendText(msg);
      } catch (IOException e) { ... }
   }
}
            </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            El punto final anotado es más simple que el punto final programático equivalente y se implementa 
            automáticamente con la aplicación en la ruta relativa definida en la anotación 
            <code>ServerEndpoint</code>. En lugar de tener que crear una clase adicional para el controlador 
            de mensajes, este ejemplo usa la anotación <code>OnMessage</code> para designar el método 
            invocado para manejar mensajes.
          </p>
        </div>
        <div class="paragraph">
          <p>
            La <a href="#BABDGEJH">Tabla 19-1</a> enumera las anotaciones disponibles en el paquete 
            <code>javax.websocket</code> para designar los métodos que manejan los eventos del ciclo de vida. 
            Los ejemplos de la tabla muestran los parámetros más comunes para estos métodos. Consulte la 
            referencia de la API para obtener detalles sobre qué combinaciones de parámetros se permiten en 
            cada caso.
          </p>
        </div>
        <div class="paragraph">
          <p><a id="sthref115"></a><a id="BABDGEJH"></a></p>
        </div>
        <div class="paragraph">
          <p><strong>Tabla 19-1 Anotaciones del Ciclo de Vida del Extremo de WebSocket</strong></p>
        </div>
        <table class="tableblock frame-all grid-all" style="width: 80%;">
          <colgroup>
            <col style="width: 20%;">
            <col style="width: 20%;">
            <col style="width: 60%;">
          </colgroup>
          <tbody>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Anotación</strong></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Evento</strong></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Ejemplo</strong></p></td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock"><code>OnOpen</code></p></td>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Conexión abierta</p></td>
              <td class="tableblock halign-left valign-top">
                <div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
@OnOpen
public void open(Session session,
                 EndpointConfig conf) { }
                        </code>
                      </pre>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>OnMessage</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">Mensaje recibido</p></td>
              <td class="tableblock halign-left valign-top">
                <div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
@OnMessage
public void message(Session session,
                    String msg) { }
                        </code>
                      </pre>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>OnError</code></p></td>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Error de conexión</p></td>
              <td class="tableblock halign-left valign-top">
                <div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
@OnError
public void error(Session session,
                  Throwable error) { }
                        </code>
                      </pre>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>OnClose</code></p></td>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Conexión cerrada</p></td>
              <td class="tableblock halign-left valign-top">
                <div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
@OnClose
public void close(Session session,
                  CloseReason reason) { }
                        </code>
                      </pre>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="websocket003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="websocket005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
