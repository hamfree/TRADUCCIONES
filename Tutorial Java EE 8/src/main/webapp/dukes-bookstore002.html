<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>La Interfaz de la Librería de Duke</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="dukes-bookstore001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="dukes-bookstore003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GLQFD">
      <h2 id="the-dukes-bookstore-interface">La Interfaz de la Librería de Duke</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Esta sección proporciona detalles adicionales sobre los componentes del ejemplo de la Librería de 
            Duke y cómo interactúan.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#GLQER">La IPA de la Entidad de Persistencia de Java Book</a></p>
            </li>
            <li>
              <p><a href="#GLQEU">Enterprise Beans Utilizados en la Librería de Duke</a></p>
            </li>
            <li>
              <p>
                <a href="#GLQDP">Páginas de Facelets y Beans Gestionados Usados en la Librería de Duke</a>
              </p>
            </li>
            <li>
              <p>
                <a href="#GLQDX">
                  Componentes Personalizados y Otros Objetos Personalizados Utilizados en la Librería de Duke
                </a>
              </p>
            </li>
            <li>
              <p><a href="#GLQDG">Archivos de Propiedades Utilizados en la Librería de Duke</a></p>
            </li>
            <li>
              <p><a href="#GLQED">Descriptores de Implementación Utilizados en la Librería de Duke</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="GLQER">
          <h3 id="the-book-java-persistence-api-entity">La IPA de la Entidad de Persistencia de Java Book</h3>
          <div class="paragraph">
            <p>
              La entidad <code>Book</code>, ubicada en el paquete <code>dukesbookstore.entity</code>, 
              encapsula los datos del libro almacenados por la Librería de Duke.
            </p>
          </div>
          <div class="paragraph">
            <p>La entidad <code>Book</code> define los atributos utilizados en el ejemplo:</p>
          </div>
          <div class="ulist">
            <ul>
              <li><p>Una identificación de libro</p></li>
              <li><p>El nombre del autor</p></li>
              <li><p>El apellido del autor</p></li>
              <li><p>El título/p></li>
              <li><p>El precio</p></li>
              <li><p>Si el libro está a la venta</p></li>
              <li><p>El año de publicación</p></li>
              <li><p>Una descripción del libro</p></li>
              <li><p>El número de copias en el inventario</p></li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              La entidad <code>Book</code> también define una consulta con nombre simple, 
              <code>findBooks</code>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GLQEU">
          <h3 id="enterprise-beans-used-in-dukes-bookstore">
            Enterprise Beans Utilizados en la Librería de Duke
          </h3>
          <div class="paragraph">
            <p>
              Dos enterprise beans ubicados en el paquete <code>dukesbookstore.ejb</code> proporcionan la 
              lógica de negocio para la Librería de Duke.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>BookRequestBean</code> es un bean de sesión con estado que contiene los métodos de 
                  negocio para la aplicación. Los métodos crean, recuperan y compran libros y actualizan el 
                  inventario de un libro. Para recuperar los libros, el método <code>getBooks</code> llama a 
                  la consulta con nombre <code>findBooks</code> definida en la entidad <code>Book</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>ConfigBean</code> es un bean de sesión singleton que se usa para crear los libros en 
                  el catálogo cuando la aplicación se implementa inicialmente. Llama al método 
                  <code>createBook</code> definido en <code>BookRequestBean</code>.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="GLQDP">
          <h3 id="facelets-pages-and-managed-beans-used-in-dukes-bookstore">
            Páginas de Facelets y Beans Gestionados Usados en la Librería de Duke
          </h3>
          <div class="paragraph">
            <p>
              La aplicación Librería de Duke utiliza Facelets y sus funciones de plantilla para mostrar la 
              interfaz de usuario. Las páginas de Facelets interactúan con un conjunto de beans administrados 
              por CDI que actúan como beans de respaldo y proporcionan las propiedades y los métodos 
              subyacentes para la interfaz de usuario. La página principal también interactúa con los 
              componentes personalizados utilizados por la aplicación.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La aplicación utiliza las siguientes páginas de Facelets, que se encuentran en el directorio 
              <code>_tut-install_/examples/case-studies/dukes-bookstore/src/main/webapp/</code>. directory.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>bookstoreTemplate.xhtml</code>: el archivo de plantilla, que especifica un encabezado 
                  utilizado en cada página, así como la hoja de estilo utilizada por todas las páginas. La 
                  plantilla también recupera el idioma establecido en el navegador web.
                </p>
                <div class="paragraph">
                  <p>Utiliza el bean administrado <code>LocaleBean</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  <code>index.xhtml</code>: página de inicio, que presenta el mapa personalizado y los 
                  componentes del área utilizando beans administrados configurados en el archivo 
                  <code>faces-config.xml</code> y permite al usuario seleccionar un libro y avance a la página 
                  <code>bookstore.xhtml</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>bookstore.xhtml</code>: Página que permite al usuario obtener detalles sobre el libro 
                  seleccionado o el libro destacado, agregar cualquiera de los libros al carrito de compras y 
                  avanzar a la página <code>bookcatalog.xhtml</code>.
                </p>
                <div class="paragraph">
                  <p>Utiliza el bean administrado <code>BookstoreBean</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookdetails.xhtml</code>: Página que muestra detalles sobre un libro seleccionado de 
                  <code>bookstore.xhtml</code> u otras páginas y permite al usuario agregar el libro al 
                  carrito y/o avanzar a la página <code>bookcatalog.xhtml</code>.
                </p>
                <div class="paragraph">
                  <p>Utiliza el bean administrado <code>BookDetailsBean</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookcatalog.xhtml</code>: Página que muestra los libros del catálogo y permite al 
                  usuario agregar libros al carrito de compras, ver los detalles de cualquier libro, ver el 
                  carrito de compras, vaciar el carrito de compras o comprar los libros en el carrito de 
                  compras.
                </p>
                <div class="paragraph">
                  <p>
                    Utiliza los beans administrados <code>BookstoreBean</code>, <code>CatalogBean</code> y 
                    <code>ShoppingCart</code>.
                  </p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookshowcart.xhtml</code>: página que muestra el contenido del carrito de compras y 
                  permite al usuario eliminar artículos, ver los detalles de un artículo, vaciar el carrito de 
                  compras, comprar los libros en el carrito de compras o devolver al catálogo.
                </p>
                <div class="paragraph">
                  <p>
                    Utiliza los beans administrados <code>ShowCartBean</code> y <code>ShoppingCart</code>.
                  </p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookcashier.xhtml</code>: Página que permite al usuario comprar libros, especificar 
                  una opción de envío, suscribirse a boletines o unirse al Duke Fan Club con una compra 
                  superior a un monto determinado.
                </p>
                <div class="paragraph">
                  <p>Utiliza los beans administrados <code>CashierBean</code> y <code>ShoppingCart</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookreceipt.xhtml</code>: Página que confirma la compra del usuario y le permite 
                  volver a la página del catálogo para seguir comprando.
                </p>
                <div class="paragraph">
                  <p>Utiliza el bean gestionado <code>CashierBean</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  <code>bookordererror.xhtml</code>: página representada por <code>CashierBean</code> si la 
                  librería no tiene más copias de un libro que se ordenó.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              La aplicación utiliza los siguientes beans administrados, que se encuentran en el directorio 
              <code>
                _tut-install_/examples/case-studies/dukes-bookstore/src/main/java/javaeetutorial/
                dukesbookstore/web/managedbeans/
              </code>.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>AbstractBean</code>: contiene métodos de utilidad llamados por otros beans 
                  administrados.
                </p>
              </li>
              <li>
                <p>
                  <code>BookDetailsBean</code>: Bean de respaldo para la página 
                  <code>bookdetails.xhtml</code>. Especifica el nombre <code>details</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>BookstoreBean</code>: Bean de respaldo para la página <code>bookstore.xhtml</code>. 
                  Especifica el nombre <code>store</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>CashierBean</code>: Bean de respaldo para las páginas <code>bookcashier.xhtml</code> y 
                  <code>bookreceipt.xhtml</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>CatalogBean</code>: Bean de respaldo para la página <code>bookcatalog.xhtml</code>. 
                  Especifica el nombre <code>catalog</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>LocaleBean</code>: bean administrado que recupera la configuración regional actual; 
                  utilizado en cada página.
                </p>
              </li>
              <li>
                <p>
                  <code>ShoppingCart</code>: bean de respaldo utilizado por las páginas 
                  <code>bookcashier.xhtml</code>, <code>bookcatalog.xhtml</code> y 
                  <code>bookshowcart.xhtml</code>. Especifica el nombre <code>cart</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>ShoppingCartItem</code>: contiene métodos llamados por <code>ShoppingCart</code>, 
                  <code>CatalogBean</code> y <code>ShowCartBean</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>ShowCartBean</code>: Bean de respaldo para la página <code>bookshowcart.xhtml</code>. 
                  Especifica el nombre <code>showcart</code>.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="GLQDX">
          <h3 id="custom-components-and-other-custom-objects-used-in-dukes-bookstore">
            Componentes Personalizados y Otros Objetos Personalizados Utilizados en la Librería de Duke
          </h3>
          <div class="paragraph">
            <p>
              Los componentes personalizados de mapa y área para la Librería de Duke, junto con las clases 
              asociadas de renderizador, listener y modelo, se definen en los siguientes paquetes en el 
              <code>
                _tut-install_/examples/case-studies/dukes-bookstore/src/main directorio /java/
                javaeetutorial/dukesbookstore/
              </code>.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>components</code>: Contiene las clases <code>MapComponent</code> y 
                  <code>AreaComponent</code>. Ver 
                  <a href="jsf-custom005.html#BNAVU">Creando Clases de Componentes Personalizados</a>.
                </p>
              </li>
              <li>
                <p>
                  <code>listeners</code>: Contiene la clase <code>AreaSelectedEvent</code>, junto con otras 
                  clases de listeners. Ver 
                  <a href="jsf-custom008.html#BNAWD">Gestionando Eventos para Componentes Personalizados</a>.
                </p>
              </li>
              <li>
                <p>
                  <code>model</code>: contiene la clase <code>ImageArea</code>. Consulte 
                  <a href="jsf-custom003.html#GLPBO">Configurando el Modelo de Datos</a> para obtener más 
                  información.
                </p>
              </li>
              <li>
                <p>
                  <code>renderers</code>: Contiene las clases <code>MapRenderer</code> y 
                  <code>AreaRenderer</code>. Ver 
                  <a href="jsf-custom006.html#BNAWA">Delegación de Renderizado a un Renderizador</a>.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              El directorio 
              <code>_tut-install_/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/</code> 
              también contiene un convertidor personalizado y otros listeners personalizados que no están 
              vinculados específicamente a los componentes personalizados.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>converters</code>: contiene la clase <code>CreditCardConverter</code>. Ver 
                  <a href="jsf-custom011.html#BNAUS">Creando y Usando un Convertidor Personalizado</a>.
                </p>
              </li>
              <li>
                <p>
                  <code>listeners</code>: contiene las clases <code>LinkBookChangeListener</code>, 
                  <code>MapBookChangeListener</code> y <code>NameChanged</code>. Consulte 
                  <a href="jsf-custom007.html#BNAUT">Implementando un Oyente de Evento</a>.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="GLQDG">
          <h3 id="properties-files-used-in-dukes-bookstore">
            Archivos de Propiedades Utilizados en la Librería de Duke
          </h3>
          <div class="paragraph">
            <p>
              Las cadenas utilizadas en la aplicación Librería de Duke están encapsuladas en paquetes de 
              recursos para permitir la visualización de cadenas localizadas en múltiples lugares. Los 
              archivos de propiedades, ubicados en el directorio 
              <code>_tut-install_/examples/case-studies/dukes-bookstore/src/main/java/
                javaeetutorial/dukesbookstore/web/messages/
              </code>, consisten en un archivo predeterminado que contiene cadenas en inglés y tres archivos 
              adicionales para otras configuraciones regionales. Los archivos son los siguientes:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>Messages.properties</code>: archivo predeterminado, que contiene cadenas en inglés
                </p>
              </li>
              <li>
                <p><code>Messages_de.properties</code>: Archivo que contiene cadenas alemanas</p>
              </li>
              <li>
                <p><code>Messages_es.properties</code>: Archivo que contiene cadenas en español</p>
              </li>
              <li>
                <p><code>Messages_fr.properties</code>: archivo que contiene cadenas en francés</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              La configuración de idioma en el navegador web del usuario determina qué configuración regional 
              se utiliza. La etiqueta <code>html</code> en <code>bookstoreTemplate.xhtml</code> recupera la 
              configuración de idioma de la propiedad <code>language</code> de <code>LocaleBean</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;html lang="#{localeBean.language}"
...
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Para obtener más información acerca de los paquetes de recursos, consulte el 
              <a href="webi18n.html#BNAXU">
                Capítulo 22, "Internacionalización y Localización de Aplicaciones Web"
              </a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El paquete de recursos se configura de la siguiente manera en el archivo 
              <code>faces-config.xml</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;application&gt;
    &lt;resource-bundle&gt;
        &lt;base-name&gt;
            javaeetutorial.dukesbookstore.web.messages.Messages
        &lt;/base-name&gt;
        &lt;var&gt;bundle&lt;/var&gt;
    &lt;/resource-bundle&gt;
    &lt;locale-config&gt;
        &lt;default-locale&gt;en&lt;/default-locale&gt;
        &lt;supported-locale&gt;de&lt;/supported-locale&gt;
        &lt;supported-locale&gt;es&lt;/supported-locale&gt;
        &lt;supported-locale&gt;fr&lt;/supported-locale&gt;
    &lt;/locale-config&gt;
&lt;/application&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Esta configuración significa que en las páginas de Facelets, los mensajes se recuperan usando el 
              prefijo <code>bundle</code> con la clave que se encuentra en el archivo 
              <code>Messages_`locale</code>.properties`, como en el siguiente ejemplo de la página 
              <code>index.xhtml</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:outputText style="font-weight:bold"
              value="#{bundle.ChooseBook}" /&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>En <code>Messages.properties</code>, la cadena de clave se define de la siguiente manera:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
ChooseBook=Choose a Book from our Catalog
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="GLQED">
          <h3 id="deployment-descriptors-used-in-dukes-bookstore">
            Descriptores de Implementación Utilizados en la Librería de Duke
          </h3>
          <div class="paragraph">
            <p>En la Librería de Duke se utilizan los siguientes descriptores de despliegue:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <code>src/main/resources/META-INF/persistence.xml</code>: el archivo de configuración de la 
                  IPA de Persistencia de Java
                </p>
              </li>
              <li>
                <p>
                  <code>src/main/webapp/WEB-INF/bookstore.taglib.xml</code>: el archivo descriptor de la 
                  biblioteca de etiquetas para los componentes personalizados
                </p>
              </li>
              <li>
                <p>
                  <code>src/main/webapp/WEB-INF/faces-config.xml</code>: el archivo de configuración de 
                  JavaServer Faces, que configura los beans administrados para el componente de mapa, así como 
                  los paquetes de recursos para la aplicación
                </p>
              </li>
              <li>
                <p>
                  <code>src/main/webapp/WEB-INF/web.xml</code>: El archivo de configuración de la aplicación 
                  web
                </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="dukes-bookstore001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="dukes-bookstore003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
