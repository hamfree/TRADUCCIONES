<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Usando un Componente Personalizado</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-custom009.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-custom011.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNATT">
      <h2 id="using-a-custom-component">Usando un Componente Personalizado</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Para usar un componente personalizado en una página, agregue la etiqueta personalizada asociada 
            con el componente a la página.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Como se explica en 
            <a href="jsf-custom009.html#BNAWN">
              Definiendo la Etiqueta del Componente Personalizado en una Librería de Descripción de Etiquetas
            </a>, debe asegurarse de que el TLD que define las etiquetas personalizadas esté empaquetado en la 
            aplicación si tiene la intención de utilizar las etiquetas en sus páginas. Los archivos TLD se 
            almacenan en el directorio o subdirectorio <code>WEB-INF/</code> del archivo WAR o en el 
            directorio o subdirectorio <code>META-INF/</code> de una biblioteca de etiquetas empaquetada en un 
            archivo JAR.
          </p>
        </div>
        <div class="paragraph">
          <p>
            También debe incluir una declaración de espacio de nombres en la página para que la página tenga 
            acceso a las etiquetas. Las etiquetas personalizadas para el estudio de caso de la librería 
            Duke's Bookstore se definen en <code>bookstore.taglib.xml</code>. La etiqueta 
            <code>ui:composition</code> en la página <code>index.xhtml</code> declara el espacio de nombres 
            definido en la biblioteca de etiquetas:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:bookstore="http://dukesbookstore"
                template="./bookstoreTemplate.xhtml"&gt;
            </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Finalmente, para usar un componente personalizado en una página, agregue la etiqueta del 
            componente a la página.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El estudio de caso de la librería Duke's Bookstore incluye un componente de mapa de imágenes 
            personalizado en la página <code>index.xhtml</code>. Este componente le permite seleccionar un 
            libro haciendo clic en una región del mapa de imágenes:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
...
&lt;h:graphicImage id="mapImage"
                name="book_all.jpg"
                library="images
                alt="#{bundle.chooseLocale}"
                usemap="#bookMap" /&gt;
&lt;bookstore:map id="bookMap"
               current="map1"
               immediate="true"
               action="bookstore"&gt;
    &lt;f:actionListener
        type="javaeetutorial.dukesbookstore.listeners.MapBookChangeListener" /&gt;
    &lt;bookstore:area id="map1" value="#{Book201}"
                    onmouseover="resources/images/book_201.jpg"
                    onmouseout="resources/images/book_all.jpg"
                    targetImage="mapImage" /&gt;
    ...
    &lt;bookstore:area id="map6" value="#{Book207}"
                    onmouseover="resources/images/book_207.jpg"
                    onmouseout="resources/images//book_all.jpg"
                    targetImage="mapImage" /&gt;
&lt;/bookstore:map&gt;
            </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            La etiqueta estándar <code>h:graphicImage</code> asocia una imagen (<code>book_all.jpg</code>) con 
            un mapa de imagen al que se hace referencia en el valor del atributo <code>usemap</code>.
          </p>
        </div>
        <div class="paragraph">
          <p>
            La etiqueta personalizada <code>bookstore:map</code> que representa el componente personalizado, 
            <code>MapComponent</code>, especifica el mapa de imagen y contiene un conjunto de etiquetas 
            <code>bookstore:area</code>. Cada etiqueta personalizada <code>bookstore:area</code> representa un 
            <code>AreaComponent</code> personalizado y especifica una región del mapa de imagen.
          </p>
        </div>
        <div class="paragraph">
          <p>
            En la página, los atributos <code>onmouseover</code> y <code>onmouseout</code> especifican la 
            imagen que se muestra cuando el usuario realiza las acciones descritas por los atributos. El 
            renderizador personalizado también representa un atributo <code>onclick</code>.
          </p>
        </div>
        <div class="paragraph">
          <p>
            En la página HTML renderizada, los atributos <code>onmouseover</code>, <code>onmouseout</code> y 
            <code>onclick</code> definen qué código JavaScript se ejecuta cuando ocurren estos eventos. Cuando 
            el usuario mueve el mouse sobre una región, la función <code>onmouseover</code> asociada con la 
            región muestra el mapa con esa región resaltada. Cuando el usuario mueve el mouse fuera de una 
            región, la función <code>onmouseout</code> vuelve a mostrar la imagen original. Cuando el usuario 
            hace clic en una región, la función <code>onclick</code> establece el valor de una etiqueta 
            <code>input</code> oculta en el ID del área seleccionada y envía la página.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Cuando el renderizador personalizado renderiza estos atributos en HTML, también renderiza el 
            código JavaScript. El renderizador personalizado también representa todo el atributo 
            <code>onclick</code> en lugar de permitir que el autor de la página lo establezca.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El renderizador personalizado que renderiza la etiqueta HTML <code>map</code> también renderiza un 
            componente <code>input</code> oculto que contiene el área actual. Los objetos del lado del 
            servidor recuperan el valor del campo oculto <code>input</code> y establecen la configuración 
            regional en la instancia de <code>FacesContext</code> según la región que se seleccionó.
          </p>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-custom009.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-custom011.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
