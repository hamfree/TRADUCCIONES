<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Protección de Recursos HTTP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="security-advanced003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="security-advanced005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BABGEJJJ">
      <h2 id="securing-http-resources">Protección de Recursos HTTP</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Cuando un URI de solicitud coincide con varios patrones de URL restringidos, las restricciones que 
            se aplican a la solicitud son aquellas que están asociadas con el patrón de URL que mejor 
            coincide. Las reglas de coincidencia de servlet definidas en el Capítulo 12, "Asignación de 
            solicitudes a servlets", en la Especificación Java Servlet 4.0, se utilizan para determinar el 
            patrón de URL que mejor coincide con el URI de la solicitud. No se aplican requisitos de 
            protección a un URI de solicitud que no coincide con un patrón de URL restringido. El método HTTP 
            de la solicitud no juega ningún papel en la selección del mejor patrón de URL coincidente para una 
            solicitud.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Cuando los métodos HTTP se enumeran dentro de una definición de restricción, las protecciones 
            definidas por la restricción se aplican solo a los métodos enumerados.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Cuando los métodos HTTP no se enumeran dentro de una definición de restricción, las protecciones 
            definidas por la restricción se aplican al conjunto completo de métodos HTTP, incluidos los 
            métodos de extensión HTTP.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Cuando se aplican restricciones con diferentes requisitos de protección a la misma combinación de 
            patrones de URL y métodos HTTP, las reglas para combinar los requisitos de protección se definen 
            en la Sección 13.8.1, "Combinación de restricciones", en la especificación Java Servlet 4.0.
          </p>
        </div>
        <div class="paragraph">
          <p>Siga estas pautas para asegurar adecuadamente una aplicación web.</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>
                No enumere los métodos HTTP dentro de las definiciones de restricciones. Esta es la forma más 
                sencilla de asegurarse de no dejar desprotegidos los métodos HTTP. Por ejemplo:
              </p>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #1 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Do not enumerate Http Methods&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  Si enumera métodos en una restricción, todos los métodos no enumerados del conjunto 
                  efectivamente infinito de posibles métodos HTTP, incluidos los métodos de extensión, estarán 
                  desprotegidos. Use tal restricción solo si está seguro de que este es el esquema de 
                  protección que pretende definir. El siguiente ejemplo muestra una restricción que enumera el 
                  método GET y, por lo tanto, no define ninguna protección en ninguno de los otros métodos 
                  HTTP posibles:
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #2 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;
        Protect GET only, leave all other methods unprotected
    &lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;GET&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
            </li>
            <li>
              <p>
                Si necesita aplicar tipos específicos de protección a métodos HTTP específicos, asegúrese de 
                definir restricciones para cubrir todos los métodos que desee permitir, con o sin 
                restricciones, en los patrones de URL correspondientes. Si hay algún método que no desea 
                permitir, también debe crear una restricción que niegue el acceso a esos métodos en los mismos 
                patrones; para ver un ejemplo, vea la restricción de seguridad #5 en la siguiente viñeta.
              </p>
              <div class="paragraph">
                <p>
                  Por ejemplo, para permitir GET y POST, donde POST requiere autenticación y GET está 
                  permitido sin restricciones, puede definir las siguientes restricciones:
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #3 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Allow unprotected GET&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;GET&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
&lt;/security-constraint&gt;
&lt;!-- SECURITY CONSTRAINT #4 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Require authentication for POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method&gt;POST&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;sales&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
            </li>
            <li>
              <p>
                La forma más sencilla de asegurarse de negar todos los métodos HTTP, excepto aquellos que 
                desea que se permitan, es usar elementos <code>http-method-omission</code> para omitir esos 
                métodos HTTP de la restricción de seguridad y también para definir un 
                <code>auth-constraint</code> que no nombra roles. La restricción de seguridad se aplicará a 
                todos los métodos, excepto a los que se mencionaron en las omisiones, y la restricción se 
                aplicará solo a los recursos que coincidan con los patrones de la restricción.
              </p>
              <div class="paragraph">
                <p>
                  Por ejemplo, la siguiente restricción excluye el acceso a todos los métodos excepto GET y 
                  POST en los recursos que coinciden con el patrón <code>/company/*</code>:
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #5 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Deny all HTTP methods except GET and POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;http-method-omission&gt;GET&lt;/http-method-omission&gt;
        &lt;http-method-omission&gt;POST&lt;/http-method-omission&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  Si desea extender estas exclusiones a las partes no restringidas de su aplicación, incluya 
                  también el patrón de URL <code>/</code> (barra inclinada):
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #6 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;Deny all HTTP methods except GET and POST&lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/company/*&lt;/url-pattern&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
        &lt;http-method-omission&gt;GET&lt;/http-method-omission&gt;
        &lt;http-method-omission&gt;POST&lt;/http-method-omission&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
            </li>
            <li>
              <p>
                Si, para su aplicación web, no desea que se pueda acceder a ningún recurso a menos que defina 
                explícitamente una restricción que permita el acceso a él, puede definir una 
                <code>auth-constraint</code> que no nombre roles y la asocie con el patrón de URL 
                <code>/</code>. El patrón de URL <code>/</code> es el patrón de coincidencia más débil. No 
                incluya ningún método HTTP en esta restricción:
              </p>
              <div class="listingblock">
                <div class="content">
                  <pre class="prettyprint highlight">
                    <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #7 --&gt;
&lt;security-constraint&gt;
    &lt;display-name&gt;
        Switch from Constraint to Permission model
        (where everything is denied by default)
    &lt;/display-name&gt;
    &lt;web-resource-collection&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint/&gt;
&lt;/security-constraint&gt;
                    </code>
                  </pre>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="security-advanced003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="security-advanced005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
