<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Uso del Lenguaje de Especificación de Trabajos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="batch-processing003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="batch-processing005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BCGDDBBG">
      <h2 id="using-the-job-specification-language">Uso del Lenguaje de Especificación de Trabajos</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El Lenguaje de Especificación de Trabajos (JSL) le permite definir los pasos de un trabajo y su 
            orden de ejecución mediante un archivo XML. El siguiente ejemplo muestra cómo definir un trabajo 
            simple que contiene un paso de fragmento y un paso de tarea:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;job id="loganalysis" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
                      version="1.0"&gt;
  &lt;properties&gt;
    &lt;property name="input_file" value="input1.txt"/&gt;
    &lt;property name="output_file" value="output2.txt"/&gt;
  &lt;/properties&gt;
  &lt;step id="logprocessor" next="cleanup"&gt;
    &lt;chunk checkpoint-policy="item" item-count="10"&gt;
      &lt;reader ref="com.example.pkg.LogItemReader"&gt;&lt;/reader&gt;
      &lt;processor ref="com.example.pkg.LogItemProcessor"&gt;&lt;/processor&gt;
      &lt;writer ref="com.example.pkg.LogItemWriter"&gt;&lt;/writer&gt;
    &lt;/chunk&gt;
  &lt;/step&gt;
  &lt;step id="cleanup"&gt;
    &lt;batchlet ref="com.example.pkg.CleanUp"&gt;&lt;/batchlet&gt;
    &lt;end on="COMPLETED"/&gt;
  &lt;/step&gt;
&lt;/job&gt;
              </code>
            </pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Este ejemplo define el trabajo por lotes <code>loganalysis</code>, que consiste en el paso de 
            fragmento <code>logprocessor</code> y el paso de tarea <code>cleanup</code>. El paso 
            <code>logprocessor</code> pasa al paso <code>cleanup</code>, que finaliza el trabajo cuando se 
            completa.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El elemento <code>job</code> define dos propiedades, <code>input_file</code> y 
            <code>output_file</code>. Especificar propiedades de esta manera le permite ejecutar un trabajo 
            por lotes con diferentes parámetros de configuración sin tener que volver a compilar sus 
            artefactos por lotes de Java. Los artefactos por lotes pueden acceder a estas propiedades 
            utilizando los objetos de contexto del tiempo de ejecución por lotes.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El paso <code>logprocessor</code> es un paso de fragmento que especifica artefactos por lotes 
            para el lector (<code>LogItemReader</code>), el procesador (<code>LogItemProcessor</code>) y el 
            escritor (<code>LogItemWriter</code>). Este paso crea un punto de control por cada diez elementos 
            procesados.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El paso <code>cleanup</code> es un paso de tarea que especifica la clase <code>CleanUp</code> como 
            su artefacto por lotes. El trabajo finaliza cuando se completa este paso.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Las siguientes secciones describen los elementos del lenguaje de especificación de trabajo (JSL) 
            con más detalle y muestran los atributos y elementos secundarios más comunes.
          </p>
        </div>
        <div class="sect2" id="sthref270">
          <h3 id="the-job-element">El Elemento job</h3>
          <div class="paragraph">
            <p>
              El elemento <code>job</code> es siempre el elemento de nivel superior en un archivo de 
              definición de trabajo. Sus principales atributos son <code>id</code> y <code>restartable</code>. 
              El elemento <code>job</code> puede contener un elemento <code>properties</code> y cero o más de 
              cada uno de los siguientes elementos: <code>listener</code>, <code>step</code> , 
              <code>flow</code> y <code>split</code>. Por ejemplo:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;job id="jobname" restartable="true"&gt;
  &lt;listeners&gt;
    &lt;listener ref="com.example.pkg.ListenerBatchArtifact"/&gt;
  &lt;/listeners&gt;
  &lt;properties&gt;
    &lt;property name="propertyName1" value="propertyValue1"/&gt;
    &lt;property name="propertyName2" value="propertyValue2"/&gt;
  &lt;/properties&gt;
  &lt;step ...&gt; ... &lt;/step&gt;
  &lt;step ...&gt; ... &lt;/step&gt;
  &lt;decision ...&gt; ... &lt;/decision&gt;
  &lt;flow ...&gt; ... &lt;/flow&gt;
  &lt;split ...&gt; ... &lt;/split&gt;
&lt;/job&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El elemento <code>listener</code> especifica un artefacto por lotes cuyos métodos se invocan 
              antes y después de la ejecución del trabajo. El artefacto por lotes es una implementación de la 
              interfaz <code>javax.batch.api.listener.JobListener</code>. Consulte 
              <a href="batch-processing008.html#BCGCCFAC">Los Artefactos del Lote de Oyentes</a> para ver un 
              ejemplo de implementación de escucha de trabajo.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El primer elemento <code>step</code>, <code>flow</code> o <code>split</code> dentro del elemento 
              <code>job</code> se ejecuta primero.
            </p>
          </div>
        </div>
        <div class="sect2" id="sthref271">
          <h3 id="the-step-element">El Elemento step</h3>
          <div class="paragraph">
            <p>
              El elemento <code>step</code> puede ser un hijo de los elementos <code>job</code> y 
              <code>flow</code>. Sus principales atributos son <code>id</code> y <code>next</code>. El 
              elemento <code>step</code> puede contener los siguientes elementos.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Un elemento <code>chunk</code> para pasos orientados a fragmentos o un elemento 
                  <code>batchlet</code> para pasos orientados a tareas.
                </p>
              </li>
              <li>
                <p>Un elemento <code>properties</code> (opcional).</p>
                <div class="paragraph">
                  <p>
                    Este elemento especifica un conjunto de propiedades a las que pueden acceder los 
                    artefactos por lotes mediante objetos de contexto por lotes.
                  </p>
                </div>
              </li>
              <li>
                <p>
                  Un elemento <code>listener</code> (opcional); un elemento <code>listeners</code> si se 
                  especifica más de un listener.
                </p>
                <div class="paragraph">
                  <p>
                    Este elemento especifica artefactos de escucha que interceptan varias fases de ejecución 
                    de pasos.
                  </p>
                </div>
                <div class="paragraph">
                  <p>
                    Para pasos de fragmentos, los artefactos por lotes para estos listeners pueden ser 
                    implementaciones de las siguientes interfaces: <code>StepListener</code>, 
                    <code>ItemReadListener</code>, <code>ItemProcessListener</code>, 
                    <code>ItemWriteListener</code>, <code>ChunkListener</code>, 
                    <code>RetryReadListener</code>, <code>RetryProcessListener</code>, 
                    <code>RetryWriteListener</code>, <code>SkipReadListener</code>, 
                    <code>SkipProcessListener</code> y <code>SkipWriteListener</code>.
                  </p>
                </div>
                <div class="paragraph">
                  <p>
                    Para los pasos de la tarea, el artefacto por lotes para estos listeners debe ser una 
                    implementación de la interfaz <code>StepListener</code>.
                  </p>
                </div>
                <div class="paragraph">
                  <p>
                    Consulte 
                    <a href="batch-processing008.html#BCGCCFAC">Los Artefactos del Lote de Oyentes</a> para 
                    ver un ejemplo de una implementación de escucha del procesador de elementos.
                  </p>
                </div>
              </li>
              <li>
                <p>Un elemento <code>partition</code> (opcional).</p>
                <div class="paragraph">
                  <p>Este elemento se usa en pasos particionados que se ejecutan en más de un subproceso.</p>
                </div>
              </li>
              <li>
                <p>Un elemento <code>end</code> si este es el último paso en un trabajo.</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>COMPLETED</code>.</p>
                </div>
              </li>
              <li>
                <p>Un elemento <code>stop</code> (opcional) para detener un trabajo en este paso.</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>STOPPED</code>.</p>
                </div>
              </li>
              <li>
                <p>Un elemento <code>fail</code> (opcional) para finalizar un trabajo en este paso.</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>FAILED</code>.</p>
                </div>
              </li>
              <li>
                <p>
                  Uno o más elementos <code>next</code> si no se especifica el atributo <code>next</code>.
                </p>
                <div class="paragraph">
                  <p>
                    Este elemento está asociado con un estado de salida y hace referencia a otro paso, un 
                    flujo, una división o un elemento de decisión.
                  </p>
                </div>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>El siguiente es un ejemplo de un paso de fragmento:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepA" next="stepB"&gt;
  &lt;properties&gt; ... &lt;/properties&gt;
  &lt;listeners&gt;
    &lt;listener ref="MyItemReadListenerImpl"/&gt;
    ...
  &lt;/listeners&gt;
  &lt;chunk ...&gt; ... &lt;/chunk&gt;
  &lt;partition&gt; ... &lt;/partition&gt;
  &lt;end on="COMPLETED" exit-status="MY_COMPLETED_EXIT_STATUS"/&gt;
  &lt;stop on="MY_TEMP_ISSUE_EXIST_STATUS" restart="step0"/&gt;
  &lt;fail on="MY_ERROR_EXIT_STATUS" exit-status="MY_ERROR_EXIT_STATUS"/&gt;
&lt;/step&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>El siguiente es un ejemplo de un paso de tarea:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepB" next="stepC"&gt;
  &lt;batchlet ...&gt; ... &lt;/batchlet&gt;
  &lt;properties&gt; ... &lt;/properties&gt;
  &lt;listener ref="MyStepListenerImpl"/&gt;
&lt;/step&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="sect3" id="sthref272">
            <h4 id="the-chunk-element">El Elemento chunk</h4>
            <div class="paragraph">
              <p>
                El elemento <code>chunk</code> es un hijo del elemento <code>step</code> para pasos orientados 
                a fragmentos. Los atributos de este elemento se enumeran en la 
                <a href="#BCGJCIEI">Tabla 58-2</a>.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref273"></a><a id="BCGJCIEI"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 58-2 Atributos del elemento chunk</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 99%;">
              <colgroup>
                <col style="width: 15%;">
                <col style="width: 75%;">
                <col style="width: 10%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Nombre de Atributo</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Descripción</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Valor por Defecto</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>checkpoint-policy</code></p></td>
                  <td class="tableblock halign-left valign-top"><div><div class="paragraph">
                        <p>Especifica cómo confirmar los resultados del procesamiento de cada fragmento:</p>
                      </div>
                      <div class="ulist">
                        <ul>
                          <li>
                            <p>
                              <code>"item"</code>: el fragmento se confirma después de procesar los elementos 
                              <code>item-count</code>
                            </p>
                          </li>
                          <li>
                            <p>
                              <code>"custom"</code>: el fragmento se confirma de acuerdo con un algoritmo de 
                              punto de control especificado con el elemento <code>checkpoint-algorithm</code>
                            </p>
                          </li>
                        </ul>
                      </div>
                      <div class="paragraph">
                        <p>
                          El punto de control se actualiza cuando se confirman los resultados de un fragmento.
                        </p>
                      </div>
                      <div class="paragraph">
                        <p>
                          Cada fragmento se procesa en una transacción Java EE global. Si falla el 
                          procesamiento de un elemento en el fragmento, la transacción se retrotrae y no se 
                          almacena ningún elemento procesado de este fragmento.
                        </p>
                      </div>
                    </div>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>"item"</code></p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>item-count</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Especifica la cantidad de elementos a procesar antes de confirmar el fragmento y tomar 
                      un punto de control.
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>time-limit</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph">
                        <p>
                          Especifica la cantidad de segundos antes de confirmar el fragmento y tomar un punto 
                          de control cuando <code>checkpoint-policy="item"</code>.
                        </p>
                      </div>
                      <div class="paragraph">
                        <p>
                          Si los elementos de <code>item-count</code> no han sido procesados por 
                          <code>time-limit</code> segundos, el fragmento se confirma y se toma un punto de 
                          control.
                        </p>
                      </div>
                    </div>
                  </td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">0 (sin límite)</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>buffer-items</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Especifica si los elementos procesados se almacenan en el búfer hasta que sea el momento 
                      de tomar un punto de control. Si es verdadero, se realiza una sola llamada al escritor 
                      de elementos con una lista de los elementos almacenados en el búfer antes de confirmar 
                      el fragmento y tomar un punto de control.
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>skip-limit</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Especifica el número de excepciones que se pueden omitir en este paso durante el 
                      procesamiento de fragmentos. Las clases de excepción saltables se especifican con el 
                      elemento <code>skippable-exception-classes</code>.
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Sin límite</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>retry-limit</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Especifica el número de intentos para ejecutar este paso si se producen excepciones que 
                      se pueden volver a intentar. Las clases de excepción que se pueden volver a intentar se 
                      especifican con el elemento <code>retryable-exception-classes</code>.
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Sin límite</p></td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>El elemento <code>chunk</code> puede contener los siguientes elementos.</p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>Un elemento <code>reader</code>.</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que implementa la interfaz 
                      <code>ItemReader</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>processor</code>.</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que implementa la interfaz 
                      <code>ItemProcessor</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>writer</code>.</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que implementa la interfaz 
                      <code>ItemWriter</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>checkpoint-algorithm</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que implementa la interfaz 
                      <code>CheckpointAlgorithm</code> y proporciona una política de punto de control 
                      personalizada.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>skippable-exception-classes</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un conjunto de excepciones generadas por los artefactos por 
                      lotes del lector, el escritor y el procesador que debe omitir el procesamiento de 
                      fragmentos. El atributo <code>skip-limit</code> del elemento <code>chunk</code> 
                      especifica el número máximo de excepciones omitidas.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>retryable-exception-classes</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un conjunto de excepciones generadas por los artefactos por 
                      lotes del lector, el escritor y el procesador que el procesamiento de fragmentos volverá 
                      a intentar. El atributo <code>retry-limit</code> del elemento <code>chunk</code> 
                      especifica el número máximo de intentos.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>no-rollback-exception-classes</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un conjunto de excepciones generadas por los artefactos por 
                      lotes del lector, el escritor y el procesador que no deberían hacer que el tiempo de 
                      ejecución del lote revierta el fragmento actual, sino que vuelva a intentar la operación 
                      actual sin una reversión en su lugar.
                    </p>
                  </div>
                  <div class="paragraph">
                    <p>
                      Para los tipos de excepción no especificados en este elemento, el fragmento actual se 
                      retrotrae de forma predeterminada cuando se produce una excepción.
                    </p>
                  </div>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>El siguiente es un ejemplo de un paso orientado a fragmentos:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepC" next="stepD"&gt;
  &lt;chunk checkpoint-policy="item" item-count="5" time-limit="180"
         buffer-items="true" skip-limit="10" retry-limit="3"&gt;
    &lt;reader ref="pkg.MyItemReaderImpl"&gt;&lt;/reader&gt;
    &lt;processor ref="pkg.MyItemProcessorImpl"&gt;&lt;/processor&gt;
    &lt;writer ref="pkg.MyItemWriterImpl"&gt;&lt;/writer&gt;
    &lt;skippable-exception-classes&gt;
      &lt;include class="pkg.MyItemException"/&gt;
      &lt;exclude class="pkg.MyItemSeriousSubException"/&gt;
    &lt;/skippable-exception-classes&gt;
    &lt;retryable-exception-classes&gt;
      &lt;include class="pkg.MyResourceTempUnavailable"/&gt;
    &lt;/retryable-exception-classes&gt;
  &lt;/chunk&gt;
&lt;/step&gt;
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Este ejemplo define un paso de fragmento y especifica sus artefactos de lector, procesador y 
                escritor. El paso actualiza un punto de control y confirma cada fragmento después de procesar 
                cinco elementos. Omite todas las excepciones <code>MyItemException</code> y todos sus 
                subtipos, excepto <code>MyItemSeriousSubException</code>, hasta un máximo de diez excepciones 
                omitidas. El paso vuelve a intentar un fragmento cuando se produce una excepción 
                <code>MyResourceTempUnavailable</code>, hasta un máximo de tres intentos.
              </p>
            </div>
          </div>
          <div class="sect3" id="sthref274">
            <h4 id="the-batchlet-element">El Elemento batchlet</h4>
            <div class="paragraph">
              <p>
                El elemento <code>batchlet</code> es un elemento secundario del elemento <code>step</code> 
                para pasos orientados a tareas. Este elemento solo tiene el atributo <code>ref</code>, que 
                especifica un artefacto por lotes que implementa la interfaz <code>Batchlet</code>. El 
                elemento <code>batch</code> puede contener un elemento <code>properties</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>El siguiente es un ejemplo de un paso orientado a la tarea:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepD" next="stepE"&gt;
  &lt;batchlet ref="pkg.MyBatchletImpl"&gt;
    &lt;properties&gt;
      &lt;property name="pname" value="pvalue"/&gt;
    &lt;/properties&gt;
  &lt;/batchlet&gt;
&lt;/step&gt;
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>Este ejemplo define un paso por lotes y especifica su artefacto por lotes.</p>
            </div>
          </div>
          <div class="sect3" id="sthref275">
            <h4 id="the-partition-element">El Elemento partition</h4>
            <div class="paragraph">
              <p>
                El elemento <code>partition</code> es un elemento secundario del elemento <code>step</code>. 
                Indica que un paso está particionado. La mayoría de los pasos particionados son pasos de 
                fragmentos en los que el procesamiento de cada elemento no depende de los resultados del 
                procesamiento de elementos anteriores. Especifique el número de particiones en un paso y 
                proporcione a cada partición información específica sobre qué elementos procesar, como los 
                siguientes.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Una gama de artículos. Por ejemplo, la partición 1 procesa los elementos del 1 al 500 y la 
                    partición 2 procesa los elementos del 501 al 1000.
                  </p>
                </li>
                <li>
                  <p>
                    Una fuente de entrada. Por ejemplo, la partición 1 procesa los elementos en 
                    <code>input1.txt</code> y la partición 2 procesa los elementos en <code>input2.txt</code>.
                  </p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>
                Cuando la cantidad de particiones, la cantidad de elementos y las fuentes de entrada para un 
                paso con particiones se conocen en el momento del desarrollo o la implementación, puede usar 
                las propiedades de la partición en el archivo de definición del trabajo para especificar 
                información específica de la partición y acceder a estas propiedades desde el paso. artefactos 
                por lotes. El tiempo de ejecución crea tantas instancias de los artefactos de lote de pasos 
                (lector, procesador y escritor) como particiones, y cada instancia de artefacto recibe las 
                propiedades específicas de su partición.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En la mayoría de los casos, la cantidad de particiones, la cantidad de elementos o las fuentes 
                de entrada para un paso particionado solo se pueden determinar en tiempo de ejecución. En 
                lugar de especificar propiedades específicas de la partición de forma estática en el archivo 
                de definición de trabajo, proporciona un artefacto por lotes que puede acceder a sus fuentes 
                de datos en tiempo de ejecución y determinar cuántas particiones se necesitan y qué rango de 
                elementos debe procesar cada partición. Este artefacto por lotes es una implementación de la 
                interfaz <code>PartitionMapper</code>. El tiempo de ejecución por lotes invoca este artefacto 
                y luego usa la información que proporciona para instanciar los artefactos por lotes de pasos 
                (lector, escritor y procesador) para cada partición y pasarles datos específicos de la 
                partición como parámetros.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El resto de esta sección describe el elemento <code>partition</code> en detalle y muestra dos 
                ejemplos de archivos de definición de trabajo: uno que utiliza propiedades de partición para 
                especificar un rango de elementos para cada partición y otro que se basa en una Implementación 
                de <code>PartitionMapper</code> para determinar información específica de la partición.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Consulte 
                <a href="batch-processing009.html#BCGGGAHB">
                  El Paso de Fragmento de la Facturación de Llamada</a> en 
                <a href="batch-processing009.html#BCGFCACD">
                  La aplicación de ejemplo de facturación telefónica
                </a> para un ejemplo completo de un paso de fragmento particionado.
              </p>
            </div>
            <div class="paragraph">
              <p>El elemento <code>partition</code> puede contener los siguientes elementos.</p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>Un elemento <code>plan</code>, si no se especifica el elemento <code>mapper</code>.</p>
                  <div class="paragraph">
                    <p>
                      Este elemento define el número de particiones, el número de subprocesos y las 
                      propiedades de cada partición en el archivo de definición de trabajo. El elemento 
                      <code>plan</code> es útil cuando esta información se conoce en el momento del desarrollo 
                      o la implementación.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>mapper</code>, si no se especifica el elemento <code>plan</code>.</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que proporciona el número de 
                      particiones, el número de subprocesos y las propiedades de cada partición. El artefacto 
                      por lotes es una implementación de la interfaz <code>PartitionMapper</code>. Utilice 
                      esta opción cuando la información requerida para cada partición solo se conoce en tiempo 
                      de ejecución.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>reducer</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que recibe el control cuando un paso con 
                      particiones comienza, finaliza o revierte. El artefacto por lotes le permite fusionar 
                      resultados de diferentes particiones y realizar otras operaciones relacionadas. El 
                      artefacto por lotes es una implementación de la interfaz <code>PartitionReducer</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>collector</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que envía resultados intermedios de cada 
                      partición a un analizador de particiones. El artefacto por lotes envía los resultados 
                      intermedios después de cada punto de control para pasos de fragmentos y al final del 
                      paso para pasos de tareas. El artefacto por lotes es una implementación de la interfaz 
                      <code>PartitionCollector</code>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Un elemento <code>analyzer</code> (opcional).</p>
                  <div class="paragraph">
                    <p>
                      Este elemento especifica un artefacto por lotes que analiza los resultados intermedios 
                      de las instancias del recopilador de particiones. El artefacto por lotes es una 
                      implementación de la interfaz <code>PartitionAnalyzer</code>.
                    </p>
                  </div>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>El siguiente es un ejemplo de un paso particionado usando el elemento <code>plan</code>:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepE" next="stepF"&gt;
  &lt;chunk&gt;
    &lt;reader ...&gt;&lt;/reader&gt;
    &lt;processor ...&gt;&lt;/processor&gt;
    &lt;writer ...&gt;&lt;/writer&gt;
  &lt;/chunk&gt;
  &lt;partition&gt;
    &lt;plan partitions="2" threads="2"&gt;
      &lt;properties partition="0"&gt;
        &lt;property name="firstItem" value="0"/&gt;
        &lt;property name="lastItem" value="500"/&gt;
      &lt;/properties&gt;
      &lt;properties partition="1"&gt;
        &lt;property name="firstItem" value="501"/&gt;
        &lt;property name="lastItem" value="999"/&gt;
      &lt;/properties&gt;
    &lt;/plan&gt;
  &lt;/partition&gt;
  &lt;reducer ref="MyPartitionReducerImpl"/&gt;
  &lt;collector ref="MyPartitionCollectorImpl"/&gt;
  &lt;analyzer ref="MyPartitionAnalyzerImpl"/&gt;
&lt;/step&gt;
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                En este ejemplo, el elemento <code>plan</code> especifica las propiedades de cada partición en 
                el archivo de definición de trabajo.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo utiliza un elemento <code>mapper</code> en lugar de un elemento 
                <code>plan</code>. La implementación de <code>PartitionMapper</code> proporciona dinámicamente 
                la misma información que el elemento <code>plan</code> proporciona en el archivo de definición 
                de trabajo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;step id="stepE" next="stepF"&gt;
  &lt;chunk&gt;
    &lt;reader ...&gt;&lt;/reader&gt;
    &lt;processor ...&gt;&lt;/processor&gt;
    &lt;writer ...&gt;&lt;/writer&gt;
  &lt;/chunk&gt;
  &lt;partition&gt;
    &lt;mapper ref="MyPartitionMapperImpl"/&gt;
    &lt;reducer ref="MyPartitionReducerImpl"/&gt;
    &lt;collector ref="MyPartitionCollectorImpl"/&gt;
    &lt;analyzer ref="MyPartitionAnalyzerImpl"/&gt;
  &lt;/partition&gt;
&lt;/step&gt;
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Consulte <a href="batch-processing009.html#BCGFCACD">La Aplicación de Ejemplo phonebilling</a> 
                para ver un ejemplo de implementación de la interfaz <code>PartitionMapper</code>.
              </p>
            </div>
          </div>
        </div>
        <div class="sect2" id="sthref276">
          <h3 id="the-flow-element">El Elemento flow</h3>
          <div class="paragraph">
            <p>
              El elemento <code>flow</code> puede ser un elemento secundario de los elementos 
              <code>job</code>, <code>flow</code> y <code>split</code>. Sus atributos son <code>id</code> y 
              <code>next</code>. Los flujos pueden pasar a flujos, pasos, divisiones y elementos de decisión. 
              El elemento <code>flow</code> puede contener los siguientes elementos:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Uno o más elementos <code>step</code></p>
              </li>
              <li>
                <p>Uno o más elementos <code>flow</code> (opcional)</p>
              </li>
              <li>
                <p>Uno o más elementos <code>split</code> (opcional)</p>
              </li>
              <li>
                <p>Uno o más elementos <code>decision</code> (opcional)</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              El último <code>step</code> en un flujo es el que no tiene el atributo <code>next</code> ni el 
              elemento <code>next</code>. Los pasos y otros elementos de un flujo no pueden pasar a elementos 
              fuera del flujo.
            </p>
          </div>
          <div class="paragraph">
            <p>El siguiente es un ejemplo del elemento <code>flow</code>:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;flow id="flowA" next="stepE"&gt;
  &lt;step id="flowAstepA" next="flowAstepB"&gt;...&lt;/step&gt;
  &lt;step id="flowAstepB" next="flowAflowC"&gt;...&lt;/step&gt;
  &lt;flow id="flowAflowC" next="flowAsplitD"&gt;...&lt;/flow&gt;
  &lt;split id="flowAsplitD" next="flowAstepE"&gt;...&lt;/split&gt;
  &lt;step id="flowAstepE"&gt;...&lt;/step&gt;
&lt;/flow&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Este flujo de ejemplo contiene tres pasos, un flujo y una división. El último paso no tiene el 
              atributo <code>next</code>. El flujo pasa a <code>stepE</code> cuando se completa su último 
              paso.
            </p>
          </div>
        </div>
        <div class="sect2" id="sthref277">
          <h3 id="the-split-element">El Elemento split</h3>
          <div class="paragraph">
            <p>
              El elemento <code>split</code> puede ser un hijo de los elementos <code>job</code> y 
              <code>flow</code>. Sus atributos son <code>id</code> y <code>next</code>. Las divisiones pueden 
              hacer la transición a divisiones, pasos, flujos y elementos de decisión. El elemento 
              <code>split</code> solo puede contener uno o más elementos <code>flow</code> que solo pueden 
              pasar a otros elementos <code>flow</code> en la división.
            </p>
          </div>
          <div class="paragraph">
            <p>El siguiente es un ejemplo de una división con tres flujos que se ejecutan simultáneamente:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;split id="splitA" next="stepB"&gt;
  &lt;flow id="splitAflowA"&gt;...&lt;/flow&gt;
  &lt;flow id="splitAflowB"&gt;...&lt;/flow&gt;
  &lt;flow id="splitAflowC"&gt;...&lt;/flow&gt;
&lt;/split&gt;
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="sthref278">
          <h3 id="the-decision-element">El Elemento decision</h3>
          <div class="paragraph">
            <p>
              El elemento <code>decision</code> puede ser un hijo de los elementos <code>job</code> y 
              <code>flow</code>. Sus atributos son <code>id</code> y <code>next</code>. Los pasos, flujos y 
              divisiones pueden pasar a un elemento <code>decision</code>. Este elemento especifica un 
              artefacto por lotes que decide el siguiente paso, flujo o división a ejecutar en función de la 
              información de la ejecución del paso, flujo o división anterior. El artefacto por lotes 
              implementa la interfaz <code>Decider</code>. El elemento <code>decision</code> puede contener 
              los siguientes elementos.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Uno o más elementos <code>end</code> (opcional).</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>COMPLETED</code>.</p>
                </div>
              </li>
              <li>
                <p>Uno o más elementos <code>stop</code> (opcional).</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>STOPPED</code>.</p>
                </div>
              </li>
              <li>
                <p>Uno o más elementos <code>fail</code> (opcional).</p>
                <div class="paragraph">
                  <p>Este elemento establece el estado del lote en <code>FAILED</code>.</p>
                </div>
              </li>
              <li>
                <p>Uno o más elementos <code>next</code> (opcional).</p>
              </li>
              <li>
                <p>Un elemento <code>properties</code> (opcional).</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>El siguiente es un ejemplo del elemento <code>decider</code>:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;decision id="decisionA" ref="MyDeciderImpl"&gt;
  &lt;fail on="FAILED" exit-status="FAILED_AT_DECIDER"/&gt;
  &lt;end on="COMPLETED" exit-status="COMPLETED_AT_DECIDER"/&gt;
  &lt;stop on="MY_TEMP_ISSUE_EXIST_STATUS" restart="step2"/&gt;
&lt;/decision&gt;
                </code>
              </pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="batch-processing003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="batch-processing005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
