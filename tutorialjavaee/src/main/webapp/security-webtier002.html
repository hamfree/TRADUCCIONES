<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Protección de Aplicaciones Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="security-webtier001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="security-webtier003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GKBAA">
      <h2 id="securing-web-applications">Protección de Aplicaciones Web</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Las aplicaciones web son creadas por desarrolladores de aplicaciones que dan, venden o transfieren 
            la aplicación a un implementador de aplicaciones para su instalación en un entorno de tiempo de 
            ejecución.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#CHDBIBHI">Descripción General de la Protección de Aplicaciones Web</a></p>
            </li>
            <li>
              <p><a href="#BNCBK">Especificación de Restricciones de Seguridad</a></p>
            </li>
            <li>
              <p><a href="#GKBSA">Especificación de Mecanismos de Autenticación</a></p>
            </li>
            <li>
              <p>
                <a href="#BNCBN">
                  Especificación de un Mecanismo de Autenticación en el Descriptor de Implementación
                </a>
              </p>
            </li>
            <li>
              <p><a href="#BNCAV">Declaración de Roles de Seguridad</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="CHDBIBHI">
          <h3 id="overview-of-securing-web-applications">
            Descripción General de la Protección de Aplicaciones Web
          </h3>
          <div class="paragraph">
            <p>
              Los desarrolladores de aplicaciones comunican cómo configurar la seguridad para la aplicación 
              implementada mediante anotaciones o descriptores de implementación. Esta información se pasa al 
              implementador, que la usa para definir permisos de métodos para roles de seguridad, configurar 
              la autenticación de usuarios y configurar el mecanismo de transporte apropiado. Si el 
              desarrollador de la aplicación no define los requisitos de seguridad, el implementador deberá 
              determinar los requisitos de seguridad de forma independiente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Algunos elementos necesarios para la seguridad en una aplicación web no se pueden especificar 
              como anotaciones para todos los tipos de aplicaciones web. Este capítulo explica cómo proteger 
              las aplicaciones web utilizando anotaciones siempre que sea posible. Explica cómo usar 
              descriptores de implementación donde no se pueden usar anotaciones.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNCBK">
          <h3 id="specifying-security-constraints">Especificación de Restricciones de Seguridad</h3>
          <div class="paragraph">
            <p>
              Se utiliza una restricción de seguridad para definir los privilegios de acceso a una colección 
              de recursos utilizando su asignación de URL.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si su aplicación web utiliza un servlet, puede expresar la información de restricción de 
              seguridad mediante anotaciones. Específicamente, usa las anotaciones 
              <code>@HttpConstraint</code> y, opcionalmente, las anotaciones 
              <code>@HttpMethodConstraint</code> dentro de la anotación <code>@ServletSecurity</code> para 
              especificar una restricción de seguridad.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Sin embargo, si su aplicación web no utiliza un servlet, debe especificar un elemento 
              <code>security-constraint</code> en el archivo descriptor de implementación. El mecanismo de 
              autenticación no se puede expresar mediante anotaciones, por lo que si utiliza cualquier 
              método de autenticación que no sea <code>BASIC</code> (el predeterminado), requiere un 
              descriptor de implementación.
            </p>
          </div>
          <div class="paragraph">
            <p>Los siguientes subelementos pueden formar parte de una <code>security-constraint</code>.</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Recopilación de recursos web (<code>web-resource-collection</code>): una lista de patrones 
                  de URL (la parte de una URL después del nombre de host y el puerto que desea restringir) y 
                  operaciones HTTP (los métodos dentro de los archivos que coincida con el patrón de URL que 
                  desea restringir) que describen un conjunto de recursos que deben protegerse. Las 
                  colecciones de recursos web se analizan en 
                  <a href="#GJJCD">Especificación de una Colección de Recursos Web</a>.
                </p>
              </li>
              <li>
                <p>
                  Restricción de autorización (<code>auth-constraint</code>): especifica si se utilizará la 
                  autenticación y nombra los roles autorizados para realizar las solicitudes restringidas. 
                  Para obtener más información sobre las restricciones de autorización, consulte 
                  <a href="#GJJCG">Especificación de una Restricción de Autorización</a>.
                </p>
              </li>
              <li>
                <p>
                  Restricción de datos de usuario (<code>restricción de datos de usuario</code>): especifica 
                  cómo se protegen los datos cuando se transportan entre un cliente y un servidor. Las 
                  restricciones de datos de usuario se analizan en 
                  <a href="#BNCBM">Especificación de una Conexión Segura</a>.
                </p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="GJJCD">
            <h4 id="specifying-a-web-resource-collection">Especificación de una Colección de Recursos Web</h4>
            <div class="paragraph">
              <p>Una colección de recursos web consta de los siguientes subelementos.</p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    <code>web-resource-name</code> es el nombre que usa para este recurso. Su uso es opcional.
                  </p>
                </li>
                <li>
                  <p>
                    <code>url-pattern</code> se utiliza para enumerar el URI de solicitud que se protegerá. 
                    Muchas aplicaciones tienen recursos tanto desprotegidos como protegidos. Para proporcionar 
                    acceso sin restricciones a un recurso, no configure una restricción de seguridad para ese 
                    URI de solicitud en particular.
                  </p>
                  <div class="paragraph">
                    <p>
                      El URI de solicitud es la parte de una URL después del nombre de host y el puerto. Por 
                      ejemplo, supongamos que tiene un sitio de comercio electrónico con un catálogo al que le 
                      gustaría que cualquiera pudiera acceder y navegar, y un área de carrito de compras solo 
                      para clientes. Puede configurar las rutas para su aplicación web de modo que el patrón 
                      <code>/cart/*</code> esté protegido pero nada más esté protegido. Suponiendo que la 
                      aplicación está instalada en la ruta de contexto <code>/myapp</code>, lo siguiente es 
                      cierto.
                    </p>
                  </div>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          <code>http://localhost:8080/myapp/index.xhtml</code> no está protegido.
                        </p>
                      </li>
                      <li>
                        <p>
                          <code>http://localhost:8080/myapp/cart/index.xhtml</code> está protegido.
                        </p>
                        <div class="paragraph">
                          <p>
                            Se le pedirá a un usuario que inicie sesión la primera vez que acceda a un recurso 
                            en el subdirectorio <code>cart/</code>.
                          </p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
                    <code>http-method</code> o <code>http-method-omission</code> se utiliza para especificar 
                    qué métodos deben protegerse o qué métodos deben omitirse de la protección. Un método 
                    HTTP está protegido por una <code>web-resource-collection</code> en cualquiera de las 
                    siguientes circunstancias:
                  </p>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Si no se nombra ningún método HTTP en la colección (lo que significa que todos están 
                          protegidos)
                        </p>
                      </li>
                      <li>
                        <p>
                          Si la colección nombra específicamente el método HTTP en un subelemento 
                          <code>http-method</code>
                        </p>
                      </li>
                      <li>
                        <p>
                          Si la colección contiene uno o más elementos <code>http-method-omission</code>, 
                          ninguno de los cuales nombra el método HTTP
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="sect3" id="GJJCG">
            <h4 id="specifying-an-authorization-constraint">
              Especificación de una Restricción de Autorización
            </h4>
            <div class="paragraph">
              <p>
                Una restricción de autorización (<code>auth-constraint</code>) contiene el elemento 
                <code>role-name</code>. Puede usar tantos elementos <code>role-name</code> como necesite aquí.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Una restricción de autorización establece un requisito de autenticación y nombra los roles 
                autorizados para acceder a los patrones de URL y los métodos HTTP declarados por esta 
                restricción de seguridad. Si no hay restricción de autorización, el contenedor debe aceptar la 
                solicitud sin requerir la autenticación del usuario. Si hay una restricción de autorización 
                pero no se especifican roles dentro de ella, el contenedor no permitirá el acceso a las 
                solicitudes restringidas bajo ninguna circunstancia. Cada nombre de rol especificado aquí debe 
                corresponder al nombre de rol de uno de los elementos <code>security-role</code> definidos 
                para esta aplicación web o ser el nombre de rol especialmente reservado <code>*</code>, que 
                indica todos los roles en la aplicación web. Los nombres de roles distinguen entre mayúsculas 
                y minúsculas. Los roles definidos para la aplicación deben asignarse a los usuarios y grupos 
                definidos en el servidor, excepto cuando se utiliza el mapeo predeterminado de principal a 
                rol.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para obtener más información sobre los roles de seguridad, consulte la 
                <a href="#BNCAV">Declaración de Roles de Seguridad</a>. Para obtener información sobre la 
                asignación de roles de seguridad, consulte 
                <a href="security-intro005.html#BNBXV">Asignación de roles a usuarios y grupos</a>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para un servlet, las anotaciones <code>@HttpConstraint</code> y 
                <code>@HttpMethodConstraint</code> aceptan un elemento <code>rolesAllowed</code> que 
                especifica los roles autorizados.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNCBM">
            <h4 id="specifying-a-secure-connection">Especificación de una Conexión Segura</h4>
            <div class="paragraph">
              <p>
                Una restricción de datos de usuario (<code>user-data-constraint</code> en el descriptor de 
                implementación) contiene el subelemento <code>transport-guarantee</code>. Se puede usar una 
                restricción de datos de usuario para exigir que se use una conexión de capa de transporte 
                protegida, como HTTPS, para todos los patrones de URL restringidos y métodos HTTP 
                especificados en la restricción de seguridad. Las opciones para la garantía de transporte son 
                <code>CONFIDENTIAL</code>, <code>INTEGRAL</code> o <code>NONE</code>. Si especifica 
                <code>CONFIDENTIAL</code> o <code>INTEGRAL</code> como restricción de seguridad, generalmente 
                significa que se requiere el uso de SSL y se aplica a todas las solicitudes que coincidan con 
                los patrones de URL en la colección de recursos web. , no solo al cuadro de diálogo de inicio 
                de sesión.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La fuerza de la protección requerida se define por el valor de la garantía de transporte, como 
                sigue.
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p>
                    Especifique <code>CONFIDENTIAL</code> cuando la aplicación requiera que los datos se 
                    transmitan para evitar que otras entidades observen el contenido de la transmisión.
                  </p>
                </li>
                <li>
                  <p>
                    Especifique <code>INTEGRAL</code> cuando la aplicación requiera que los datos se envíen 
                    entre el cliente y el servidor de tal manera que no se puedan cambiar en tránsito.
                  </p>
                </li>
                <li>
                  <p>
                    Especifique <code>NONE</code> para indicar que el contenedor debe aceptar las solicitudes 
                    restringidas en cualquier conexión, incluidas las desprotegidas.
                  </p>
                </li>
              </ul>
            </div>
            <table class="tableblock frame-all grid-all spread">
              <colgroup>
                <col style="width: 100%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph">
                        <p><strong>Nota</strong>:</p>
                      </div>
                      <div class="paragraph">
                        <p>
                          En la práctica, los servidores Java EE tratan los valores de garantía de transporte 
                          <code>CONFIDENTIAL</code> e <code>INTEGRAL</code> de forma idéntica.
                        </p>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>
                La restricción de datos de usuario es útil para usar junto con la autenticación de usuario 
                básica y basada en formularios. Cuando el método de autenticación de inicio de sesión se 
                establece en <code>BASIC</code> o <code>FORM</code>, las contraseñas no están protegidas, lo 
                que significa que las contraseñas enviadas entre un cliente y un servidor en una sesión 
                desprotegida se pueden ver e interceptar por terceros. El uso de una restricción de datos de 
                usuario con el mecanismo de autenticación de usuario puede aliviar esta preocupación. La 
                configuración de un mecanismo de autenticación de usuario se describe en 
                <a href="#BNCBN">
                  Especificación de un Mecanismo de Autenticación en el Descriptor de Implementación
                </a>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para garantizar que los datos se transporten a través de una conexión segura, asegúrese de que 
                la compatibilidad con SSL esté configurada para su servidor. La compatibilidad con SSL ya está 
                configurada para el servidor GlassFish.
              </p>
            </div>
            <table class="tableblock frame-all grid-all spread">
              <colgroup>
                <col style="width: 100%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <div>
                      <div class="paragraph">
                        <p><strong>Nota</strong>:</p>
                      </div>
                      <div class="paragraph">
                        <p>
                          Después de cambiar a SSL para una sesión, nunca debe aceptar ninguna solicitud que 
                          no sea SSL para el resto de esa sesión. Por ejemplo, es posible que un sitio de 
                          compras no use SSL hasta la página de pago y luego cambie a usar SSL para aceptar su 
                          número de tarjeta. Después de cambiar a SSL, debe dejar de escuchar solicitudes que 
                          no sean SSL para esta sesión. El motivo de esta práctica es que el propio ID de 
                          sesión no estaba cifrado en las comunicaciones anteriores. Esto no es tan malo 
                          cuando solo está haciendo sus compras, pero después de que la información de la 
                          tarjeta de crédito se almacena en la sesión, no desea que nadie use esa información 
                          para falsificar la transacción de compra contra su tarjeta de crédito. Esta práctica 
                          podría implementarse fácilmente mediante el uso de un filtro.
                        </p>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="sect3" id="BNCBL">
            <h4 id="specifying-security-constraints-for-resources">
              Especificación de Restricciones de Seguridad para Recursos
            </h4>
            <div class="paragraph">
              <p>
                Puede crear restricciones de seguridad para los recursos dentro de su aplicación. Por ejemplo, 
                podría permitir a los usuarios con el rol de <code>PARTNER</code> acceso total a todos los 
                recursos en el patrón de URL <code>/acme/wholesale/*</code> y permitir a los usuarios con el 
                rol de <code>CLIENT</code> acceso completo a todos los recursos en el patrón de URL 
                <code>/acme/retail/*</code>. Esta es la forma recomendada de proteger los recursos si no desea 
                proteger algunos métodos HTTP y dejar otros métodos HTTP desprotegidos. Un ejemplo de un 
                descriptor de implementación que demostraría esta funcionalidad es el siguiente:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;!-- SECURITY CONSTRAINT #1 --&gt;
&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
        &lt;web-resource-name&gt;wholesale&lt;/web-resource-name&gt;
        &lt;url-pattern&gt;/acme/wholesale/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;PARTNER&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
    &lt;user-data-constraint&gt;
        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;
    &lt;/user-data-constraint&gt;
&lt;/security-constraint&gt;
&lt;!-- SECURITY CONSTRAINT #2 --&gt;
&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
        &lt;web-resource-name&gt;retail&lt;/web-resource-name&gt;
        &lt;url-pattern&gt;/acme/retail/*&lt;/url-pattern&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;CLIENT&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
    &lt;user-data-constraint&gt;
        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;
    &lt;/user-data-constraint&gt;
&lt;/security-constraint&gt;
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="GKBSA">
          <h3 id="specifying-authentication-mechanisms">Especificación de Mecanismos de Autenticación</h3>
          <div class="paragraph">
            <p>Un mecanismo de autenticación de usuario especifica</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>La forma en que un usuario obtiene acceso al contenido web</p>
              </li>
              <li>
                <p>Con la autenticación básica, el ámbito en el que se autenticará al usuario</p>
              </li>
              <li>
                <p>Con autenticación basada en formularios, atributos adicionales</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Cuando se especifica un mecanismo de autenticación, el usuario debe autenticarse antes de que se 
              conceda acceso a cualquier recurso que esté restringido por una restricción de seguridad. Puede 
              haber múltiples restricciones de seguridad que se apliquen a múltiples recursos, pero el mismo 
              método de autenticación se aplicará a todos los recursos restringidos en una aplicación.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Antes de poder autenticar a un usuario, debe tener una base de datos de nombres de usuario, 
              contraseñas y funciones configurada en su servidor web o de aplicaciones. Para obtener 
              información sobre cómo configurar la base de datos de usuarios, consulte 
              <a href="security-intro005.html#BNBXR">
                Administrar Usuarios y Grupos en el Servidor GlassFish
              </a>.
            </p>
          </div>
          <div class="paragraph">
            <p>La plataforma Java EE admite los siguientes mecanismos de autenticación:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Autenticación básica</p>
              </li>
              <li>
                <p>Autenticación basada en formularios</p>
              </li>
              <li>
                <p>Autenticación implícita</p>
              </li>
              <li>
                <p>Autenticación del cliente</p>
              </li>
              <li>
                <p>Autenticacion mutua</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              En esta sección se analiza la autenticación básica, basada en formularios y implícita. El 
              cliente y la autenticación mutua se tratan en el 
              <a href="security-advanced.html#GJJWX">Capítulo 53, "Seguridad Java EE: Temas Avanzados"</a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La autenticación básica HTTP y la autenticación basada en formularios no son mecanismos de 
              autenticación muy seguros. La autenticación básica envía nombres de usuario y contraseñas a 
              través de Internet como texto codificado en Base64. La autenticación basada en formularios envía 
              estos datos como texto sin formato. En ambos casos, el servidor de destino no está autenticado. 
              Por lo tanto, estas formas de autenticación dejan los datos de los usuarios expuestos y 
              vulnerables. Si alguien puede interceptar la transmisión, la información del nombre de usuario y 
              la contraseña se puede decodificar fácilmente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Sin embargo, cuando se utiliza un mecanismo de transporte seguro, como SSL, o seguridad a nivel 
              de red, como el protocolo Internet Protocol Seguridad (IPsec) o las estrategias de red privada 
              virtual (VPN), junto con la autenticación básica o basada en formularios, algunas de estas 
              preocupaciones pueden aliviarse. Para especificar un mecanismo de transporte seguro, utilice los 
              elementos descritos en <a href="#BNCBM">Especificación de una Conexión Segura</a>.
            </p>
          </div>
          <div class="sect3" id="BNCBO">
            <h4 id="http-basic-authentication">Autenticación Básica de HTTP</h4>
            <div class="paragraph">
              <p>
                Especificar la autenticación básica HTTP requiere que el servidor solicite un nombre de 
                usuario y una contraseña del cliente web y verifique que el nombre de usuario y la contraseña 
                sean válidos comparándolos con una base de datos de usuarios autorizados en el dominio 
                especificado o predeterminado.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La autenticación básica es la predeterminada cuando no especifica un mecanismo de 
                autenticación.
              </p>
            </div>
            <div class="paragraph">
              <p>Cuando se utiliza la autenticación básica, se producen las siguientes acciones.</p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>Un cliente solicita acceso a un recurso protegido.</p>
                </li>
                <li>
                  <p>
                    El servidor web devuelve un cuadro de diálogo que solicita el nombre de usuario y la 
                    contraseña.
                  </p>
                </li>
                <li>
                  <p>El cliente envía el nombre de usuario y la contraseña al servidor.</p>
                </li>
                <li>
                  <p>
                    El servidor autentica al usuario en el dominio especificado y, si tiene éxito, devuelve el 
                    recurso solicitado.
                  </p>
                </li>
              </ol>
            </div>
            <div class="paragraph">
              <p>
                La <a href="#BNCBP">Figura 51-1</a> muestra lo que sucede cuando especifica la autenticación 
                básica HTTP.
              </p>
            </div>
            <div id="BNCBP" class="paragraph">
              <div class="title"><strong>Figure 51-1 Autenticación Básica de HTTP</strong></div>
              <p>
                <span class="image">
                  <img src="img/javaeett_dt_045.png" 
                       alt="Diagrama de cuatro pasos en la autenticación básica HTTP entre cliente y 
                       servidor">
                </span>
              </p>
            </div>
          </div>
          <div class="sect3" id="BNCBQ">
            <h4 id="form-based-authentication">Autenticación Basada en Formularios</h4>
            <div class="paragraph">
              <p>
                La autenticación basada en formularios permite al desarrollador controlar la apariencia de las 
                pantallas de autenticación de inicio de sesión al personalizar la pantalla de inicio de sesión 
                y las páginas de error que un navegador HTTP presenta al usuario final. Cuando se declara la 
                autenticación basada en formularios, se producen las siguientes acciones.
              </p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>Un cliente solicita acceso a un recurso protegido.</p>
                </li>
                <li>
                  <p>
                    Si el cliente no está autenticado, el servidor redirige al cliente a una página de inicio 
                    de sesión.
                  </p>
                </li>
                <li>
                  <p>El cliente envía el formulario de inicio de sesión al servidor.</p>
                </li>
                <li>
                  <p>El servidor intenta autenticar al usuario.</p>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Si la autenticación se realiza correctamente, se comprueba la entidad de seguridad 
                          del usuario autenticado para asegurarse de que tiene una función autorizada para 
                          acceder al recurso. Si el usuario está autorizado, el servidor redirige al cliente 
                          al recurso utilizando la ruta URL almacenada.
                        </p>
                      </li>
                      <li>
                        <p>
                          Si la autenticación falla, el cliente es reenviado o redirigido a una página de 
                          error.
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
            <div class="paragraph">
              <p>
                La <a href="#GEXFA">Figura 51-2</a> muestra lo que sucede cuando especifica la autenticación 
                basada en formularios.
              </p>
            </div>
            <div id="GEXFA" class="paragraph">
              <div class="title"><strong>Figura 51-2 Autenticación Basada en Formularios</strong></div>
              <p>
                <span class="image">
                  <img src="img/javaeett_dt_046.png" 
                       alt="Diagrama de cuatro pasos en la autenticación basada en formularios entre cliente y 
                       servidor">
                </span>
              </p>
            </div>
            <div class="paragraph">
              <p>
                La sección 
                <a href="security-webtier004.html#BNCBY">
                  El Ejemplo hello1-formauth: Autenticación Basada en Formularios con una Aplicación 
                  JavaServer Faces
                </a> es una aplicación de ejemplo que utiliza autenticación basada en formularios.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Cuando cree un inicio de sesión basado en un formulario, asegúrese de mantener las sesiones 
                usando cookies o información de sesión SSL.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para que la autenticación proceda correctamente, la acción del formulario de inicio de sesión 
                siempre debe ser <code>j_security_check</code>. Esta restricción se realiza para que el 
                formulario de inicio de sesión funcione sin importar para qué recurso sea y para evitar que el 
                servidor especifique el campo de acción del formulario de salida. El siguiente fragmento de 
                código muestra cómo se debe codificar el formulario en la página HTML:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;form method="POST" action="j_security_check"&gt;
&lt;input type="text" name="j_username"&gt;
&lt;input type="password" name="j_password"&gt;
&lt;/form&gt;
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="BNCBW">
            <h4 id="digest-authentication">Autenticación de Resumen (Digest)</h4>
            <div class="paragraph">
              <p>
                Al igual que la autenticación básica, la autenticación implícita autentica a un usuario en 
                función de un nombre de usuario y una contraseña. Sin embargo, a diferencia de la 
                autenticación básica, la autenticación implícita no envía contraseñas de usuario a través de 
                la red. En su lugar, el cliente envía un hash criptográfico unidireccional de la contraseña y 
                datos adicionales. Aunque las contraseñas no se envían por cable, la autenticación de resumen 
                requiere que los equivalentes de contraseñas en texto claro estén disponibles para el 
                contenedor de autenticación para que pueda validar los autenticadores recibidos mediante el 
                cálculo del resumen esperado.
              </p>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNCBN">
          <h3 id="specifying-an-authentication-mechanism-in-the-deployment-descriptor">
            Especificación de un Mecanismo de Autenticación en el Descriptor de Implementación
          </h3>
          <div class="paragraph">
            <p>
              Para especificar un mecanismo de autenticación, utilice el elemento <code>login-config</code>. 
              Puede contener los siguientes subelementos.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  El subelemento <code>auth-method</code> configura el mecanismo de autenticación para la 
                  aplicación web. El contenido del elemento debe ser <code>NONE</code>, <code>BASIC</code>, 
                  <code>DIGEST</code>, <code>FORM</code> o <code>CLIENT-CERT</code>.
                </p>
              </li>
              <li>
                <p>
                  El subelemento <code>realm-name</code> indica el nombre de dominio que se utilizará cuando 
                  se elija el esquema de autenticación básico para la aplicación web.
                </p>
              </li>
              <li>
                <p>
                  El subelemento <code>form-login-config</code> especifica el inicio de sesión y las páginas 
                  de error que deben usarse cuando se especifica el inicio de sesión basado en formulario.
                </p>
              </li>
            </ul>
          </div>
          <table class="tableblock frame-all grid-all spread">
            <colgroup>
              <col style="width: 100%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <div>
                    <div class="paragraph">
                      <p><strong>Nota</strong>:</p>
                    </div>
                    <div class="paragraph">
                      <p>
                        Otra forma de especificar la autenticación basada en formularios es utilizar los 
                        métodos <code>authenticate</code>, <code>login</code> y <code>logout</code> de 
                        <code>HttpServletRequest</code>, como se explica en 
                        <a href="security-webtier003.html#GIRCJ">
                          Autenticación de Usuarios mediante Programación
                        </a>.
                      </p>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="paragraph">
            <p>
              Cuando intenta acceder a un recurso web que está restringido por un elemento 
              <code>security-constraint</code>, el contenedor web activa el mecanismo de autenticación que se 
              ha configurado para ese recurso. El mecanismo de autenticación especifica cómo se solicitará al 
              usuario que inicie sesión. Si el elemento <code>login-config</code> está presente y el elemento 
              <code>auth-method</code> contiene un valor distinto de <code>NONE</code>, el usuario debe estar 
              autenticado para acceder al recurso. Si no especifica un mecanismo de autenticación, no se 
              requiere la autenticación del usuario.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El siguiente ejemplo muestra cómo declarar la autenticación basada en formularios en su 
              descriptor de implementación:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;login-config&gt;
    &lt;auth-method&gt;FORM&lt;/auth-method&gt;
    &lt;realm-name&gt;file&lt;/realm-name&gt;
    &lt;form-login-config&gt;
        &lt;form-login-page&gt;/login.xhtml&lt;/form-login-page&gt;
        &lt;form-error-page&gt;/error.xhtml&lt;/form-error-page&gt;
    &lt;/form-login-config&gt;
&lt;/login-config&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Las ubicaciones de las páginas de error e inicio de sesión se especifican en relación con la 
              ubicación del descriptor de implementación. Se muestran ejemplos de páginas de inicio de sesión 
              y error en 
              <a href="security-webtier004.html#BNCCA">
                Crear el Formulario de Inicio de Sesión y la Página de Error
              </a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El siguiente ejemplo muestra cómo declarar la autenticación implícita en su descriptor de 
              implementación:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;login-config&gt;
    &lt;auth-method&gt;DIGEST&lt;/auth-method&gt;
&lt;/login-config&gt;
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNCAV">
          <h3 id="declaring-security-roles">Declaración de Roles de Seguridad</h3>
          <div class="paragraph">
            <p>
              Puede declarar nombres de roles de seguridad usados en aplicaciones web usando el elemento 
              <code>security-role</code> del descriptor de implementación. Utilice este elemento para enumerar 
              todos los roles de seguridad a los que ha hecho referencia en su aplicación.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El siguiente fragmento de un descriptor de implementación declara los roles que se usarán en una 
              aplicación usando el elemento <code>security-role</code> y especifica cuál de estos roles está 
              autorizado para acceder a los recursos protegidos usando el elemento 
              <code>auth-constraint</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;security-constraint&gt;
    &lt;web-resource-collection&gt;
        &lt;web-resource-name&gt;Protected Area&lt;/web-resource-name&gt;
        &lt;url-pattern&gt;/security/protected/*&lt;/url-pattern&gt;
        &lt;http-method&gt;PUT&lt;/http-method&gt;
        &lt;http-method&gt;DELETE&lt;/http-method&gt;
        &lt;http-method&gt;GET&lt;/http-method&gt;
        &lt;http-method&gt;POST&lt;/http-method&gt;
    &lt;/web-resource-collection&gt;
    &lt;auth-constraint&gt;
        &lt;role-name&gt;manager&lt;/role-name&gt;
    &lt;/auth-constraint&gt;
&lt;/security-constraint&gt;
 &lt;!-- Security roles used by this web application --&gt;
&lt;security-role&gt;
    &lt;role-name&gt;manager&lt;/role-name&gt;
&lt;/security-role&gt;
&lt;security-role&gt;
    &lt;role-name&gt;employee&lt;/role-name&gt;
&lt;/security-role&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En este ejemplo, el elemento <code>security-role</code> enumera todos los roles de seguridad 
              utilizados en la aplicación: <code>manager</code> y <code>employee</code>. Esto permite que el 
              implementador asigne todos los roles definidos en la aplicación a los usuarios y grupos 
              definidos en el servidor GlassFish.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El elemento <code>auth-constraint</code> especifica el rol, <code>manager</code>, que puede 
              acceder a los métodos HTTP PUT, DELETE, GET y POST ubicados en el directorio especificado por el
              elemento <code>url-pattern</code> (<code>/security/protected/*</code>).
            </p>
          </div>
          <div class="paragraph">
            <p>
              La anotación <code>@ServletSecurity</code> no se puede utilizar en esta situación porque sus 
              restricciones se aplican a todos los patrones de URL especificados por la anotación 
              <code>@WebServlet</code>.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="security-webtier001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="security-webtier003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
