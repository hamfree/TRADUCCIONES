<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Configurando Aplicaciones Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="webapp004.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="webapp006.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="CHDHGJIA">
      <h2 id="configuring-web-applications">Configurando Aplicaciones Web</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Esta sección describe las siguientes tareas relacionadas con la configuración de aplicaciones 
            web:
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>Establecer parámetros de contexto</p>
            </li>
            <li>
              <p>Declarar archivos de bienvenida</p>
            </li>
            <li>
              <p>Asignación de errores a pantallas de error</p>
            </li>
            <li>
              <p>Declaración de referencias de recursos</p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="BNAES">
          <h3 id="setting-context-parameters">Estableciendo los Parámetros de Contexto</h3>
          <div class="paragraph">
            <p>
              Los componentes web de un módulo web comparten un objeto que representa el contexto de su 
              aplicación. Puede pasar parámetros de contexto al contexto o puede pasar parámetros de 
              inicialización a un servlet. Los parámetros de contexto están disponibles para toda la 
              aplicación. Para obtener información sobre los parámetros de inicialización, consulte 
              <a href="servlets004.html#BNAFU">Creación e inicialización de un servlet</a>.
            </p>
          </div>
          <div class="sect3" id="GJSFJ">
            <h4 id="to-add-a-context-parameter-using-netbeans-ide">
              Para Agregar un Parámetro de Contexto Usando el EID Netbeans
            </h4>
            <div class="paragraph">
              <p>
                Estos pasos se aplican generalmente a las aplicaciones web, pero no se aplican específicamente 
                a los ejemplos de este capítulo.
              </p>
            </div>
            <div class="paragraph">
              <p>Para agregar un parámetro de contexto usando el EID NetBeans:</p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>Abra el proyecto.</p>
                </li>
                <li>
                  <p>Expanda el nodo del proyecto en el árbol Proyectos.</p>
                </li>
                <li>
                  <p>Expanda el nodo Páginas web y luego el nodo WEB-INF.</p>
                </li>
                <li>
                  <p>Haga doble clic en <code>web.xml</code>.</p>
                  <div class="paragraph">
                    <p>
                      Si el proyecto no tiene un archivo <code>web.xml</code>, cree uno siguiendo los pasos de 
                      <a href="#GKIHH">Para crear un archivo web.xml usando NetBeans IDE</a>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Haga clic en General en la parte superior de la ventana del editor.</p>
                </li>
                <li>
                  <p>Expanda el nodo Parámetros de contexto.</p>
                </li>
                <li>
                  <p>Haga clic en Agregar.</p>
                </li>
                <li>
                  <p>
                    En el cuadro de diálogo Agregar parámetro de contexto, en el campo Nombre del parámetro, 
                    ingrese el nombre que especifica el objeto de contexto.
                  </p>
                </li>
                <li>
                  <p>
                    En el campo Valor del parámetro, ingrese el parámetro para pasar al objeto de contexto.
                  </p>
                </li>
                <li>
                  <p>Haga clic en Aceptar.</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="GKIHH">
            <h4 id="to-create-a-web.xml-file-using-netbeans-ide">
              Para Crear un Archivo web.xml Usando el EID Netbeans
            </h4>
            <div class="paragraph">
              <p>Para crear un archivo <code>web.xml</code> usando el EID Netbeans:</p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>En el menú Archivo, elija Archivo nuevo.</p>
                </li>
                <li>
                  <p>
                    En el asistente de Nuevo archivo, seleccione la categoría Web, luego seleccione Descriptor 
                    de implementación estándar en Tipos de archivo.
                  </p>
                </li>
                <li>
                  <p>Haga clic en Siguiente.</p>
                </li>
                <li>
                  <p>Haga clic en Finalizar.</p>
                  <div class="paragraph">
                    <p>Un archivo básico <code>web.xml</code> aparece en <code>web/WEB-INF/</code>.</p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNAER">
          <h3 id="declaring-welcome-files">Declarando Archivos de Bienvenida</h3>
          <div class="paragraph">
            <p>
              El mecanismo de archivos de bienvenida le permite especificar una lista de archivos que el 
              contenedor web puede adjuntar a una solicitud de una URL (llamada solicitud parcial válida) que 
              no está asignada a un componente web. Por ejemplo, suponga que define un archivo de bienvenida 
              <code>welcome.html</code>. Cuando un cliente solicita una URL como 
              <code><em>host:port/webapp/directory</em></code>, donde <code><em>directory</em> </code> no se 
              asigna a un servlet o una página XHTML, el archivo 
              <code><em>host:port/webapp/directory/</em>`welcome.html</code> se devuelve al cliente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si un contenedor web recibe una solicitud parcial válida, el contenedor web examina la lista de 
              archivos de bienvenida, agrega a la solicitud parcial cada archivo de bienvenida en el orden 
              especificado y verifica si un recurso estático o servlet en el WAR está asignado a esa URL de 
              solicitud. Luego, el contenedor web envía la solicitud al primer recurso que coincide en el WAR.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si no se especifica ningún archivo de bienvenida, el Servidor GlassFish utilizará un archivo 
              llamado <code>index.html</code> como archivo de bienvenida predeterminado. Si no hay un archivo 
              de bienvenida ni un archivo llamado <code>index.html</code>, el Servidor GlassFish devuelve una 
              lista de directorios.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Usted especifica archivos de bienvenida en el archivo <code>web.xml</code>. La especificación 
              del archivo de bienvenida para el ejemplo <code>hello1</code> se ve así:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.xhtml&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;
                </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Un archivo de bienvenida especificado no debe tener una barra inclinada al principio o al 
              final (<code>/</code>).
            </p>
          </div>
          <div class="paragraph">
            <p>
              El ejemplo <code>hello2</code> no especifica un archivo de bienvenida, porque la solicitud de 
              URL se asigna al componente web <code>GreetingServlet</code> a través del patrón de URL 
              <code>/greeting</code>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKBKW">
          <h3 id="mapping-errors-to-error-screens">Asociando Errores a Pantallas de Error</h3>
          <div class="paragraph">
            <p>
              Cuando ocurre un error durante la ejecución de una aplicación web, puede hacer que la aplicación 
              muestre una pantalla de error específica según el tipo de error. En particular, puede 
              especificar una asignación entre el código de estado devuelto en una respuesta HTTP o una 
              excepción del lenguaje de programación Java devuelta por cualquier componente web y cualquier 
              tipo de pantalla de error.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Puede tener varios elementos <code>error-page</code> en su descriptor de implementación. Cada 
              elemento identifica un error diferente que hace que se abra una página de error. Esta página de 
              error puede ser la misma para cualquier número de elementos <code>error-page</code>.
            </p>
          </div>
          <div class="sect3" id="BNAET">
            <h4 id="to-set-up-error-mapping-using-netbeans-ide">
              Para Configurar la Asociación de Errores Usando el EID Netbeans
            </h4>
            <div class="paragraph">
              <p>
                Estos pasos se aplican generalmente a las aplicaciones web, pero no se aplican específicamente 
                a los ejemplos de este capítulo.
              </p>
            </div>
            <div class="paragraph">
              <p>Para configurar el mapeo de errores usando el EID NetBeans:</p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>Abra el proyecto.</p>
                </li>
                <li>
                  <p>Expanda el nodo del proyecto en la pestaña Proyectos.</p>
                </li>
                <li>
                  <p>Expanda el nodo Páginas web y luego el nodo WEB-INF.</p>
                </li>
                <li>
                  <p>Haga doble clic en <code> web.xml </code>.</p>
                  <div class="paragraph">
                    <p>
                      Si el proyecto no tiene un archivo <code>web.xml</code>, cree uno siguiendo los pasos de 
                      <a href="#GKIHH">Para crear un archivo web.xml usando el EID NetBeans</a>.
                    </p>
                  </div>
                </li>
                <li>
                  <p>Haga clic en Páginas en la parte superior de la ventana del editor.</p>
                </li>
                <li>
                  <p>Expanda el nodo Páginas de error.</p>
                </li>
                <li>
                  <p>Haga clic en Agregar.</p>
                </li>
                <li>
                  <p>
                    En el cuadro de diálogo Agregar página de error, haga clic en Examinar para ubicar la 
                    página que desea que actúe como página de error.
                  </p>
                </li>
                <li>
                  <p>Especifique un código de error o un tipo de excepción.</p>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Para especificar un código de error, en el campo Código de error ingrese el código 
                          de estado HTTP que hará que se abra la página de error, o deje el campo en blanco 
                          para incluir todos los códigos de error.
                        </p>
                      </li>
                      <li>
                        <p>
                          Para especificar un tipo de excepción, en el campo Tipo de excepción ingrese la 
                          excepción que hará que se cargue la página de error. Para especificar todos los 
                          errores y excepciones que se pueden lanzar, ingrese <code>java.lang.Throwable</code>.
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>Haga clic en Aceptar.</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNAEU">
          <h3 id="declaring-resource-references">Declarando Referencias de Recurso</h3>
          <div class="paragraph">
            <p>
              Si su componente web utiliza objetos como beans de empresa, fuentes de datos o servicios web, 
              utilice anotaciones Java EE para inyectar estos recursos en su aplicación. Las anotaciones 
              eliminan gran parte del código de búsqueda estándar y los elementos de configuración que 
              requerían las versiones anteriores de Java EE.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Aunque la inyección de recursos mediante anotaciones puede ser más conveniente para el 
              desarrollador, existen algunas restricciones para su uso en aplicaciones web. Primero, puede 
              inyectar recursos solo en objetos administrados por contenedores, porque un contenedor debe 
              tener control sobre la creación de un componente para que pueda realizar la inyección en un 
              componente. Como resultado, no puede inyectar recursos en objetos tales como componentes simples 
              de JavaBeans. Sin embargo, los beans gestionados son gestionados por el contenedor; por lo 
              tanto, pueden aceptar inyecciones de recursos.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los componentes que pueden aceptar inyecciones de recursos se enumeran en 
              <a href="#BNAEV">Tabla 6-1</a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Esta sección explica cómo usar un par de anotaciones compatibles con un contenedor web para 
              inyectar recursos.
              <a href="persistence-basicexamples.html#GIJST">
                Capítulo 41, "Ejecución de los ejemplos de persistencia"</a>, explica cómo las aplicaciones 
                web utilizan anotaciones compatibles con la IPA de Java Persistence.
              <a href="security-webtier.html#BNCAS">
                Capítulo 51, "Introducción a la protección de aplicaciones web"</a>, explica cómo utilizar las 
                anotaciones para especificar información sobre cómo proteger las aplicaciones web. Ver
              <a href="resources.html#BNCJH">Capítulo 55, "Contratos y adaptadores de recursos"</a>, para 
              obtener más información sobre los recursos.
            </p>
          </div>
          <div class="paragraph">
            <p><a id="sthref25"></a><a id="BNAEV"></a></p>
          </div>
          <div class="paragraph">
            <p><strong>Tabla 6-1 Componentes Web que aceptan inyecciones de recursos</strong></p>
          </div>
          <table class="tableblock frame-all grid-all" style="width: 50%;">
            <colgroup>
              <col style="width: 40%;">
              <col style="width: 60%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Componente</strong></p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Interfaz/Clase</strong></p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock">Servlets</p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>javax.servlet.Servlet</code></p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock">Filtros de Servlet</p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>javax.servlet.ServletFilter</code></p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock">Oyentes de Eventos</p></td>
                <td class="tableblock halign-left valign-top">
                  <div>
                    <div class="paragraph">
                      <p><code>javax.servlet.ServletContextListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.ServletContextAttributeListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.ServletRequestListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.ServletRequestAttributeListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.http.HttpSessionListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.http.HttpSessionAttributeListener</code></p>
                    </div>
                    <div class="paragraph">
                      <p><code>javax.servlet.http.HttpSessionBindingListener</code></p>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock">Beans Gestionados</p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">Objetos Java antiguos sencillos</p></td>
              </tr>
            </tbody>
          </table>
          <div class="sect3" id="BNAEW">
            <h4 id="declaring-a-reference-to-a-resource">Declarando una Referencia a un Recurso</h4>
            <div class="paragraph">
              <p>
                La anotación <code>@Resource</code> se utiliza para declarar una referencia a un recurso, como 
                una fuente de datos, un enterprise bean o una entrada de entorno.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La anotación <code>@Resource</code> se especifica en una clase, un método o un campo. El 
                contenedor es responsable de inyectar referencias a los recursos declarados por la anotación 
                <code>@Resource</code> y mapearlo con los recursos JNDI adecuados.
              </p>
            </div>
            <div class="paragraph">
              <p>
                En el siguiente ejemplo, la anotación <code>@Resource</code> se usa para inyectar una fuente 
                de datos en un componente que necesita hacer una conexión con la fuente de datos, como se hace 
                cuando se usa la tecnología JDBC para acceder a una base de datos relacional:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Resource javax.sql.DataSource catalogDS;
public getProductsByCategory() {
    // obtiene una conexión y ejecuta una consulta
    Connection conn = catalogDS.getConnection();
    ...
}
                  </code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El contenedor inyecta esta fuente de datos antes de que el componente esté disponible para la 
                aplicación. La asignación JNDI de la fuente de datos se infiere del nombre del campo, 
                <code>catalogDS</code> y del tipo, <code>javax.sql.DataSource</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si tiene varios recursos que necesita inyectar en un componente, debe usar la anotación 
                <code>@Resources</code> para contenerlos, como se muestra en el siguiente ejemplo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Resources ({
    @Resource(name="myDB" type=javax.sql.DataSource.class),
    @Resource(name="myMQ" type=javax.jms.ConnectionFactory.class)
})
                  </code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Los ejemplos de aplicaciones web de este tutorial utilizan la API de persistencia de Java para 
                acceder a bases de datos relacionales. Esta IPA no requiere que cree explícitamente una 
                conexión a una fuente de datos. Por lo tanto, los ejemplos no utilizan la anotación 
                <code>@Resource</code> para inyectar una fuente de datos. Sin embargo, esta API admite las 
                anotaciones <code>@PersistenceUnit</code> y <code>@PersistenceContext</code> para inyectar 
                instancias de <code>EntityManagerFactory</code> y <code>EntityManager</code>, respectivamente. 
                El <a href="persistence-basicexamples.html#GIJST">
                  Capítulo 41, "Ejecución de los ejemplos de persistencia"
                </a> describe estas anotaciones y el uso de IPA de Java Persistence en aplicaciones web.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNAEX">
            <h4 id="declaring-a-reference-to-a-web-service">Declarando una Referencia a un Servicio Web</h4>
            <div class="paragraph">
              <p>
                La anotación <code>@WebServiceRef</code> proporciona una referencia a un servicio web. El 
                siguiente ejemplo muestra el uso de la anotación <code>@WebServiceRef</code> para declarar una 
                referencia a un servicio web. <code>WebServiceRef</code> usa el elemento 
                <code>wsdlLocation</code> para especificar el URI del archivo WSDL del servicio implementado:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
...
import javax.xml.ws.WebServiceRef;
...
public class ResponseServlet extends HTTPServlet {
@WebServiceRef(wsdlLocation="http://localhost:8080/helloservice/hello?wsdl")
static HelloService service;
                  </code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="webapp004.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="webapp006.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
