<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>El Ciclo de Vida de una Aplicación JavaServer Faces</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-intro006.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-intro008.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1">
      <h2 id="the-lifecycle-of-a-javaserver-faces-application">
        El Ciclo de Vida de una Aplicación JavaServer Faces
      </h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El ciclo de vida de una aplicación se refiere a las diversas etapas de procesamiento de esa 
            aplicación, desde su inicio hasta su conclusión. Todas las aplicaciones tienen ciclos de vida. 
            Durante el ciclo de vida de una aplicación web, se realizan tareas comunes, incluidas las 
            siguientes.
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li><p>Manejo de solicitudes entrantes</p></li>
            <li><p>Decodificación de parámetros</p></li>
            <li><p>Modificar y guardar el estado</p></li>
            <li><p>Representación de páginas web en el navegador</p></li>
          </ul>
        </div>
        <div class="paragraph">
          <p>
            El marco de la aplicación web JavaServer Faces administra las fases del ciclo de vida 
            automáticamente para aplicaciones simples o le permite administrarlas manualmente para 
            aplicaciones más complejas según sea necesario.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Las aplicaciones JavaServer Faces que utilizan funciones avanzadas pueden requerir interacción con 
            el ciclo de vida en determinadas fases. Por ejemplo, las aplicaciones Ajax utilizan funciones de 
            procesamiento parcial del ciclo de vida (consulte 
            <a href="jsf-intro008.html#GKNOJ">Procesamiento parcial y procesamiento parcial</a>). Una 
            comprensión más clara de las fases del ciclo de vida es clave para crear componentes bien 
            diseñados.
          </p>
        </div>
        <div class="paragraph">
          <p>
            En <a href="jsf-intro004.html#GJAAM">Una Aplicación JavaServer Faces Simple</a> se presenta una 
            vista simplificada del ciclo de vida de JavaServer Faces, que consta de las dos fases principales 
            de una aplicación web JavaServer Faces. Esta sección examina el ciclo de vida de JavaServer Faces 
            con más detalle.
          </p>
        </div>
        <div class="sect2" id="GLPRC">
          <h3 id="overview-of-the-javaserver-faces-lifecycle">
            Descripción General del Ciclo de Vida de JavaServer Faces
          </h3>
          <div class="paragraph">
            <p>
              El ciclo de vida de una aplicación JavaServer Faces comienza cuando el cliente realiza una 
              solicitud HTTP para una página y finaliza cuando el servidor responde con la página, traducida a 
              HTML.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El ciclo de vida se puede dividir en dos fases principales: Ejecutar y Renderizar. La fase de 
              ejecución se divide en subfases para respaldar el sofisticado árbol de componentes. Esta 
              estructura requiere que los datos de los componentes se conviertan y validen, que se manejen los 
              eventos de los componentes y que los datos de los componentes se propaguen a los beans de manera 
              ordenada.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Una página de JavaServer Faces está representada por un árbol de componentes, llamado vista. 
              Durante el ciclo de vida, la implementación de JavaServer Faces debe construir la vista 
              considerando el estado guardado de un envío anterior de la página. Cuando el cliente solicita 
              una página, la implementación de JavaServer Faces realiza varias tareas, como validar la entrada 
              de datos de los componentes en la vista y convertir los datos de entrada a los tipos 
              especificados en el lado del servidor.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La implementación de JavaServer Faces realiza todas estas tareas como una serie de pasos en el 
              ciclo de vida de solicitud-respuesta de JavaServer Faces. 
              <a href="#BNAQR">La Figura 7-3</a> ilustra estos pasos.
            </p>
          </div>
          <div id="BNAQR" class="paragraph">
            <div class="title">
              <strong>Figura 7-3 Ciclo de vida estándar de solicitud-respuesta de JavaServer Faces</strong>
            </div>
            <p>
              <span class="image">
                <img src="img/javaeett_dt_016.png" 
                     alt="Diagrama de flujo de la solicitud de Faces y la respuesta de Faces, incluido el 
                     procesamiento de eventos y validación, manejo de errores, actualización de modelos, 
                     invocación de aplicaciones.">
              </span>
            </p>
          </div>
          <div class="paragraph">
            <p>
              El ciclo de vida de solicitud-respuesta maneja dos tipos de solicitudes: solicitudes iniciales y 
              devoluciones de datos. Una solicitud inicial ocurre cuando un usuario realiza una solicitud de 
              una página por primera vez. Una solicitud de devolución de datos se produce cuando un usuario 
              envía el formulario contenido en una página que se cargó previamente en el navegador como 
              resultado de la ejecución de una solicitud inicial.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Cuando el ciclo de vida maneja una solicitud inicial, solo ejecuta las fases Restaurar Vista y 
              Renderizar Respuesta, porque no hay ninguna entrada o acción del usuario para procesar. Por el 
              contrario, cuando el ciclo de vida maneja una devolución, ejecuta todas las fases.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Por lo general, la primera solicitud de una página de JavaServer Faces proviene de un cliente, 
              como resultado de hacer clic en un enlace o componente de botón en una página de JavaServer 
              Faces. Para representar una respuesta que es otra página de JavaServer Faces, la aplicación crea 
              una nueva vista y la almacena en la instancia <code>javax.faces.context.FacesContext</code>, que 
              representa toda la información asociada con el procesamiento de una solicitud entrante. y 
              la creación de una respuesta. Luego, la aplicación adquiere las referencias de objeto que 
              necesita la vista y llama al método <code>FacesContext.renderResponse</code>, que fuerza la 
              representación inmediata de la vista saltando a la 
              <a href="#BNAQX">Fase de respuesta de procesamiento</a> del ciclo de vida, como se muestra en 
              las flechas etiquetadas como Render Response en la <a href="#BNAQR">Figura 7-3</a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              A veces, es posible que una aplicación necesite redirigir a un recurso de aplicación web 
              diferente, como un servicio web, o generar una respuesta que no contenga componentes JavaServer 
              Faces. En estas situaciones, el desarrollador debe omitir la fase Render Response llamando al 
              método <code>FacesContext.responseComplete</code>. Esta situación también se muestra, con las 
              flechas etiquetadas como Complete Response.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La situación más común es que un componente JavaServer Faces envía una solicitud para otra 
              página JavaServer Faces. En este caso, la implementación de JavaServer Faces maneja la solicitud 
              y pasa automáticamente por las fases del ciclo de vida para realizar las conversiones, 
              validaciones y actualizaciones del modelo necesarias y generar la respuesta.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Hay una excepción al ciclo de vida que se describe en esta sección. Cuando el atributo 
              <code>immediate</code> de un componente se establece en <code>true</code>, la validación, la 
              conversión y los eventos asociados con estos componentes se procesan durante la 
              <a href="#BNAQT">Fase Aplicar Valores de Solicitud</a> en lugar de una fase posterior.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los detalles del ciclo de vida que se explican en las siguientes secciones están destinados 
              principalmente a los desarrolladores que necesitan conocer información, como cuándo se manejan 
              generalmente las validaciones, conversiones y eventos y las formas de cambiar cómo y cuándo se 
              manejan. Para obtener más información sobre cada una de las fases del ciclo de vida, descargue 
              la última documentación de la especificación JavaServer Faces de
              <code>
                <a href="https://jcp.org/en/jsr/detail?id=372" class="bare">
                  https://jcp.org/en/jsr/detail?id=372
                </a>
              </code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La fase Ejecutar del ciclo de vida de la aplicación JavaServer Faces contiene las siguientes 
              subfases:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li><p><a href="#BNAQS">Restaurar la Fase de Vista</a></p></li>
              <li><p><a href="#BNAQT">Fase Aplicar Valores de Solicitud</a></p></li>
              <li><p><a href="#GJSBP">Fase de Validaciones de Procesos</a></p></li>
              <li><p><a href="#BNAQV">Fase de Actualización de Valores del Modelo</a></p></li>
              <li><p><a href="#BNAQW">Fase de Solicitud de Invocación</a></p></li>
              <li><p><a href="#BNAQX">Fase de Respuesta de Procesamiento</a></p></li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="BNAQS">
          <h3 id="restore-view-phase">Restaurar la Fase de Vista</h3>
          <div class="paragraph">
            <p>
              Cuando se realiza una solicitud de una página de JavaServer Faces, generalmente mediante una 
              acción, como cuando se hace clic en un enlace o en un componente de botón, la implementación de 
              JavaServer Faces comienza la fase Restaurar Vista.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Durante esta fase, la implementación de JavaServer Faces crea la vista de la página, conecta los 
              controladores de eventos y los validadores a los componentes de la vista y guarda la vista en la 
              instancia <code>FacesContext</code>, que contiene toda la información necesaria para procesar 
              una sola solicitud. Todos los componentes, controladores de eventos, convertidores y validadores 
              de la aplicación tienen acceso a la instancia <code>FacesContext</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud de la página es una solicitud inicial, la implementación de JavaServer Faces 
              crea una vista vacía durante esta fase y el ciclo de vida avanza a la fase Respuesta de 
              Procesamiento, durante la cual la vista vacía se completa con los componentes a los que hacen 
              referencia las etiquetas en la página.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud de la página es una devolución de datos, ya existe una vista correspondiente a 
              esta página en la instancia <code>FacesContext</code>. Durante esta fase, la implementación de 
              JavaServer Faces restaura la vista utilizando la información de estado guardada en el cliente o 
              en el servidor.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNAQT">
          <h3 id="apply-request-values-phase">Fase Aplicar Valores de Solicitud</h3>
          <div class="paragraph">
            <p>
              Después de que el árbol de componentes se restaura durante una solicitud de devolución, cada 
              componente del árbol extrae su nuevo valor de los parámetros de la solicitud utilizando su 
              método <code>decode</code> (<code>processDecodes()</code>). Luego, el valor se almacena 
              localmente en cada componente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algún método <code>decode</code> o detector de eventos ha llamado al método 
              <code>renderResponse</code> en la instancia actual de <code>FacesContext</code>, la 
              implementación de JavaServer Faces salta a la fase Respuesta de Procesamiento.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algún evento se ha puesto en cola durante esta fase, la implementación de JavaServer Faces 
              transmite los eventos a los oyentes interesados.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algunos componentes de la página tienen sus atributos <code>inmediatos</code> 
              (consulte <a href="jsf-page002.html#BNARI">El atributo inmediato</a>) establecidos en 
              <code>true </code>, las validaciones, conversiones y eventos asociados con estos componentes se 
              procesarán durante esta fase. Si falla alguna conversión, se genera un mensaje de error asociado 
              con el componente y se pone en cola en <code>FacesContext</code>. Este mensaje se mostrará 
              durante la fase de respuesta de procesamiento, junto con cualquier error de validación 
              resultante de la fase de validación del proceso.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En este punto, si la aplicación necesita redirigir a un recurso de aplicación web diferente o 
              generar una respuesta que no contenga ningún componente de JavaServer Faces, puede llamar al 
              método <code>FacesContext.responseComplete</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Al final de esta fase, los componentes se configuran con sus nuevos valores y los mensajes y 
              eventos se ponen en cola.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud actual se identifica como una solicitud parcial, el contexto parcial se recupera 
              del <code>FacesContext</code> y se aplica el método de procesamiento parcial.
            </p>
          </div>
        </div>
        <div class="sect2" id="GJSBP">
          <h3 id="process-validations-phase">Fase de Validaciones de Procesos</h3>
          <div class="paragraph">
            <p>
              Durante esta fase, la implementación de JavaServer Faces procesa todos los validadores 
              registrados en los componentes en el árbol usando su método <code>validate</code> 
              (<code>processValidators</code>). Examina los atributos del componente que especifican las 
              reglas para la validación y compara estas reglas con el valor local almacenado para el 
              componente. La implementación de JavaServer Faces también completa las conversiones para los 
              componentes de entrada que no tienen el atributo <code>inmediato</code> establecido en 
              verdadero.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si el valor local no es válido, o si falla alguna conversión, la implementación de JavaServer 
              Faces agrega un mensaje de error a la instancia de <code>FacesContext</code>, y el ciclo de vida 
              avanza directamente a la fase Respuesta de Procesamiento para que la página se muestre 
              nuevamente con los mensajes de error mostrados. Si hubo errores de conversión de la fase Aplicar 
              Valores de Solicitud, también se muestran los mensajes para estos errores.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algún método <code>validate</code> o detector de eventos ha llamado al método 
              <code>renderResponse</code> en el <code>FacesContext</code> actual, la implementación de 
              JavaServer Faces salta a la fase Respuesta de Procesamiento.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En este punto, si la aplicación necesita redirigir a un recurso de aplicación web diferente o 
              generar una respuesta que no contenga ningún componente de JavaServer Faces, puede llamar al 
              método <code>FacesContext.responseComplete</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si los eventos se han puesto en cola durante esta fase, la implementación de JavaServer Faces 
              los transmite a los oyentes interesados.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud actual se identifica como una solicitud parcial, el contexto parcial se recupera 
              del <code>FacesContext</code> y se aplica el método de procesamiento parcial.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNAQV">
          <h3 id="update-model-values-phase">Fase de Actualización de Valores del Modelo</h3>
          <div class="paragraph">
            <p>
              Una vez que la implementación de JavaServer Faces determina que los datos son válidos, atraviesa 
              el árbol de componentes y establece las propiedades del objeto del lado del servidor 
              correspondientes a los valores locales de los componentes. La implementación de JavaServer Faces 
              actualiza solo las propiedades del bean señaladas por el atributo <code>value</code> de un 
              componente de entrada. Si los datos locales no se pueden convertir a los tipos especificados por 
              las propiedades del bean, el ciclo de vida avanza directamente a la fase de Respuesta de 
              Procesamiento para que la página se vuelva a representar con los errores mostrados. Esto es 
              similar a lo que sucede con los errores de validación.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algún método <code>updateModels</code> o cualquier oyente ha llamado al método 
              <code>renderResponse</code> en la instancia actual de <code>FacesContext</code>, la 
              implementación de JavaServer Faces salta a la fase Respuesta de Procesamiento.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En este punto, si la aplicación necesita redirigir a un recurso de aplicación web diferente o 
              generar una respuesta que no contenga ningún componente de JavaServer Faces, puede llamar al 
              método <code>FacesContext.responseComplete</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si algún evento se ha puesto en cola durante esta fase, la implementación de JavaServer Faces lo 
              transmite a los oyentes interesados.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud actual se identifica como una solicitud parcial, el contexto parcial se recupera 
              del <code>FacesContext</code> y se aplica el método de procesamiento parcial.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNAQW">
          <h3 id="invoke-application-phase">Fase de Solicitud de Invocación</h3>
          <div class="paragraph">
            <p>
              Durante esta fase, la implementación de JavaServer Faces maneja cualquier evento a nivel de 
              aplicación, como enviar un formulario o vincular a otra página.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En este punto, si la aplicación necesita redirigir a un recurso de aplicación web diferente o 
              generar una respuesta que no contenga ningún componente de JavaServer Faces, puede llamar al 
              método <code>FacesContext.responseComplete</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la vista que se está procesando se reconstruyó a partir de la información de estado de una 
              solicitud anterior y si un componente ha disparado un evento, estos eventos se transmiten a los 
              oyentes interesados.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Finalmente, la implementación de JavaServer Faces transfiere el control a la fase Respuesta de 
              Procesamiento.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNAQX">
          <h3 id="render-response-phase">Fase de Respuesta de Procesamiento</h3>
          <div class="paragraph">
            <p>
              Durante esta fase, JavaServer Faces crea la vista y delega la autoridad al recurso apropiado 
              para representar las páginas.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si se trata de una solicitud inicial, los componentes que están representados en la página se 
              agregarán al árbol de componentes. Si esta no es una solicitud inicial, los componentes ya se 
              agregaron al árbol y no es necesario agregarlos nuevamente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la solicitud es una devolución de datos y se encontraron errores durante la fase Aplicar 
              Valores de Solicitud, la fase Procesar Validaciones o la fase Actualizar Valores del Modelo, 
              la página original se vuelve a representar durante esta fase. Si las páginas contienen etiquetas 
              <code>h:message</code> o <code>h:messages</code>, cualquier mensaje de error en cola se muestra 
              en la página.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Una vez que se representa el contenido de la vista, el estado de la respuesta se guarda para que 
              las solicitudes posteriores puedan acceder a él. El estado guardado está disponible para la 
              fase Restaurar Vista.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-intro006.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-intro008.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
