<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Usando Ámbitos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="cdi-basic007.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="cdi-basic009.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GJBBK">
      <h2 id="using-scopes">Usando Ámbitos</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Para que una aplicación web use un bean que inyecte otra clase de bean, el bean debe poder 
            mantener el estado durante la interacción del usuario con la aplicación. La forma de definir este 
            estado es darle un alcance al bean. Puede dar a un objeto cualquiera de los ámbitos descritos en 
            la <a href="#GJDBG">Tabla 25-1</a>, dependiendo de cómo lo esté usando.
          </p>
        </div>
        <div class="paragraph">
          <p><a id="sthref126"></a><a id="GJDBG"></a></p>
        </div>
        <div class="paragraph">
          <p>Tabla 25-1 Alcances</p>
        </div>
        <table class="tableblock frame-all grid-all" style="width: 99%;">
          <colgroup>
            <col style="width: 25%;">
            <col style="width: 25%;">
            <col style="width: 50%;">
          </colgroup>
          <tbody>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Alcance</strong></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Anotación</strong></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Duración</strong></p></td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Petición/Solicitud</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>@RequestScoped</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  La interacción de un usuario con una aplicación web en una sola solicitud HTTP.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Sesión</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>@SessionScoped</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  La interacción de un usuario con una aplicación web a través de múltiples solicitudes HTTP.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Aplicación</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>@ApplicationScoped</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  Estado compartido en todas las interacciones de los usuarios con una aplicación web.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Dependiente</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>@Dependent</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  El ámbito predeterminado si no se especifica ninguno; significa que un objeto existe para 
                  servir exactamente a un cliente (bean) y tiene el mismo ciclo de vida que ese cliente 
                  (bean).
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Conversación</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><code>@ConversationScoped</code></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  La interacción de un usuario con un servlet, incluidas las aplicaciones JavaServer Faces. El 
                  alcance de la conversación existe dentro de los límites controlados por el desarrollador que 
                  se extienden a través de múltiples solicitudes para conversaciones de larga duración. Todas 
                  las conversaciones de larga duración se limitan a una sesión de servlet HTTP en particular y 
                  es posible que no crucen los límites de la sesión.
                </p>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="paragraph">
          <p>
            Los tres primeros ámbitos están definidos tanto por JSR 365 como por la especificación JavaServer 
            Faces. Los dos últimos están definidos por JSR 365.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Todos los ámbitos predefinidos excepto <code>@Dependent</code> son ámbitos contextuales. CDI 
            coloca beans de ámbito contextual en el contexto cuyo ciclo de vida está definido por las 
            especificaciones de Java EE. Por ejemplo, un contexto de sesión y sus beans existen durante el 
            tiempo de vida de una sesión HTTP. Las referencias inyectadas a los beans son conscientes del 
            contexto. Las referencias siempre se aplican al bean que está asociado con el contexto del 
            subproceso que hace la referencia. El contenedor CDI garantiza que los objetos se creen e inyecten 
            en el momento correcto según lo determine el ámbito especificado para estos objetos.
          </p>
        </div>
        <div class="paragraph">
          <p>
            También puede definir e implementar ámbitos personalizados, pero ese es un tema avanzado. Es 
            probable que aquellos que implementan y amplían la especificación CDI utilicen ámbitos 
            personalizados.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Un alcance le da a un objeto un contexto de ciclo de vida bien definido. Un objeto con ámbito se 
            puede crear automáticamente cuando se necesita y se puede destruir automáticamente cuando finaliza 
            el contexto en el que se creó. Además, su estado es compartido automáticamente por cualquier 
            cliente que se ejecute en el mismo contexto.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Los componentes Java EE, como servlets y beans empresariales, y los componentes JavaBeans, por 
            definición, no tienen un alcance bien definido. Estos componentes son uno de los siguientes:
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>
                Singletons, como los beans singleton Enterprise JavaBeans beans, cuyo estado se comparte entre 
                todos los clientes
              </p>
            </li>
            <li>
              <p>
                Objetos sin estado, como servlets y beans de sesión sin estado, que no contienen estado 
                visible para el cliente
              </p>
            </li>
            <li>
              <p>
                Objetos que deben ser creados y destruidos explícitamente por su cliente, como componentes 
                JavaBeans y beans de sesión con estado, cuyo estado se comparte mediante el paso de referencia 
                explícita entre clientes
              </p>
            </li>
          </ul>
        </div>
        <div class="paragraph">
          <p>
            Sin embargo, si crea un componente Java EE que es un bean administrado, se convierte en un objeto 
            con ámbito, que existe en un contexto de ciclo de vida bien definido.
          </p>
        </div>
        <div class="paragraph">
          <p>
            La aplicación web para el bean <code>Printer</code> utilizará un mecanismo simple de solicitud y 
            respuesta, por lo que el bean administrado se puede anotar de la siguiente manera:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
import javax.enterprise.context.RequestScoped;
import javax.inject.Inject;
@RequestScoped
public class Printer {
    @Inject @Informal Greeting greeting;
    ...
}
              </code>
            </pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Los beans que utilizan el ámbito de sesión, aplicación o conversación deben ser serializables, 
            pero los beans que utilizan el ámbito de solicitud no tienen que ser serializables.
          </p>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="cdi-basic007.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="cdi-basic009.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
