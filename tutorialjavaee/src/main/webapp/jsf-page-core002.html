<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Registrando Oyentes en Componentes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-page-core001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-page-core003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNASZ">
      <h2 id="registering-listeners-on-components">Registrando Oyentes en Componentes</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Un desarrollador de aplicaciones puede implementar oyentes como clases o como métodos de bean 
            gestionados. Si un oyente es un método de bean gestionado, el autor de la página hace referencia 
            al método desde el atributo <code>valueChangeListener</code> del componente o su atributo 
            <code>actionListener</code>. Si el oyente es una clase, el autor de la página puede hacer 
            referencia al oyente desde una etiqueta <code>f:valueChangeListener</code> o una etiqueta 
            <code>f:actionListener</code> y anidar la etiqueta dentro de la etiqueta del componente para 
            registrar el oyente en el componente.
          </p>
        </div>
        <div class="paragraph">
          <p>
            <a href="jsf-page-core004.html#BNATQ">Referenciando un Método Que Maneja un Evento Action</a> y 
            <a href="jsf-page-core004.html#BNATS">Referenciando un Método Que Maneja un Evento Value-Change</a> 
            explica cómo el autor de una página usa los atributos <code>valueChangeListener</code> y 
            <code>actionListener</code> para hacer referencia a métodos de bean administrados que manejan 
            eventos.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Esta sección explica cómo registrar un oyente de cambio de valor <code>NameChanged</code> y una 
            implementación de oyente de acción <code>BookChange</code> en componentes. El estudio de caso de 
            la librería Duke's Bookstore incluye a ambos oyentes.
          </p>
        </div>
        <div class="sect2" id="BNATA">
          <h3 id="registering-a-value-change-listener-on-a-component">
            Registrando un Oyente Value-Change en un Componente
          </h3>
          <div class="paragraph">
            <p>
              El autor de una página puede registrar una implementación de <code>ValueChangeListener</code> en 
              un componente que implementa <code>EditableValueHolder</code> anidando una etiqueta 
              <code>f:valueChangeListener</code> dentro de la etiqueta del componente en la página. La 
              etiqueta <code>f:valueChangeListener</code> admite los atributos que se muestran en la 
              <a href="#GKCLY">Tabla 11-5</a>, uno de los cuales debe usarse.
            </p>
          </div>
          <div class="paragraph">
            <p><a id="sthref64"></a><a id="GKCLY"></a></p>
          </div>
          <div class="paragraph">
            <p><strong>Tabla 11-5 Atributos de la etiqueta f:valueChangeListener</strong></p>
          </div>
          <table class="tableblock frame-all grid-all" style="width: 60%;">
            <colgroup>
              <col style="width: 16.6666%;">
              <col style="width: 83.3334%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Atributo</strong></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Descripción</strong></p></td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    Hace referencia al nombre de clase completo de una implementación de 
                    <code>ValueChangeListener</code>. Puede aceptar una expresión literal o de valor.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>binding</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    Hace referencia a un objeto que implementa <code>ValueChangeListener</code>. Solo puede 
                    aceptar una expresión de valor, que debe apuntar a una propiedad de bean gestionada que 
                    acepta y devuelve una implementación de <code>ValueChangeListener</code>.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="paragraph">
            <p>
              El siguiente ejemplo muestra un oyente de cambio de valor registrado en un componente:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:inputText id="name"
             size="30"
             value="#{cashierBean.name}"
             required="true"
             requiredMessage="#{bundle.ReqCustomerName}"&gt;
    &lt;f:valueChangeListener
        type="javaeetutorial.dukesbookstore.listeners.NameChanged" /&gt;
&lt;/h:inputText&gt;
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En el ejemplo, el atributo <code>type</code> de la etiqueta principal especifica el oyente 
              <code>NameChanged</code> personalizado como la implementación de 
              <code>ValueChangeListener</code> registrada en el <code>name</code> componente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Una vez que se procesa esta etiqueta de componente y se han validado los valores locales, su 
              instancia de componente correspondiente pondrá en cola el <code>ValueChangeEvent</code> asociado 
              con el <code>ValueChangeListener</code> especificado para el componente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El atributo <code>binding</code> se utiliza para vincular una implementación de 
              <code>ValueChangeListener</code> a una propiedad de bean gestionado. Este atributo funciona de 
              manera similar al atributo <code>binding</code> admitido por las etiquetas de conversión 
              estándar. Consulte 
              <a href="jsf-custom013.html#BNATG">
                Vinculación de instancias y valores de componentes a propiedades de bean administradas
              </a> para obtener más información.
            </p>
          </div>
        </div>
        <div class="sect2" id="BNATB">
          <h3 id="registering-an-action-listener-on-a-component">Registrando un Oyente Action en un Componente</h3>
          <div class="paragraph">
            <p>
              El autor de una página puede registrar una implementación de <code>ActionListener</code> en un 
              componente de comando anidando una etiqueta <code>f:actionListener</code> dentro de la etiqueta 
              del componente en la página. De manera similar a la etiqueta <code>f:valueChangeListener</code>, 
              la etiqueta <code>f:actionListener</code> admite los atributos <code>type</code> y 
              <code>binding</code>. Se debe utilizar uno de estos atributos para hacer referencia al oyente 
              de acciones.
            </p>
          </div>
          <div class="paragraph">
            <p>
              A continuación, se muestra un ejemplo de una etiqueta <code>h:commandLink</code> que hace 
              referencia a una implementación de <code>ActionListener</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:commandLink id="Duke" action="bookstore"&gt;
    &lt;f:actionListener
        type="javaeetutorial.dukesbookstore.listeners.LinkBookChangeListener" /&gt;
    &lt;h:outputText value="#{bundle.Book201}"/&gt;
&lt;/h:commandLink&gt;
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El atributo <code>type</code> de la etiqueta <code>f:actionListener</code> especifica el nombre 
              de clase completo de la implementación de <code>ActionListener</code>. De manera similar a la 
              etiqueta <code>f:valueChangeListener</code>, la etiqueta <code>f:actionListener</code> también 
              admite el atributo <code>binding</code>. Consulte 
              <a href="jsf-custom014.html#BNATM">
                Enlazando Convertidores, Oyentes, y Validadores a Propiedades de un Bean Gestionado
              </a> para obtener más información sobre cómo vincular escuchas a propiedades de bean 
              gestionados.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Además de la etiqueta <code>actionListener</code> que le permite registrar un oyente 
              personalizado en un componente, la biblioteca de etiquetas principal incluye la etiqueta 
              <code>f:setPropertyActionListener</code>. Utilice esta etiqueta para registrar un oyente de 
              acción especial en la instancia <code>ActionSource</code> asociada con un componente. Cuando el 
              componente está activado, el oyente almacenará el objeto al que hace referencia el atributo 
              <code>value</code> de la etiqueta en el objeto al que hace referencia el atributo 
              <code>target</code> de la etiqueta.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La página <code>bookcatalog.xhtml</code> de la aplicación Duke's Bookstore utiliza 
              <code>f:setPropertyActionListener</code> con dos componentes: el componente 
              <code>h:commandLink</code> utilizado para vincular a <code>bookdetails.xhtml</code> y el 
              componente <code>h:commandButton</code> utilizado para agregar un libro al carrito:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:dataTable id="books"
    value="#{store.books}"
    var="book"
    headerClass="list-header"
    styleClass="list-background"
    rowClasses="list-row-even, list-row-odd"
    border="1"
    summary="#{bundle.BookCatalog}" &gt;
    ...
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;
            &lt;h:outputText value="#{bundle.ItemTitle}"/&gt;
        &lt;/f:facet&gt;
        &lt;h:commandLink action="#{catalog.details}"
                       value="#{book.title}"&gt;
            &lt;f:setPropertyActionListener target="#{requestScope.book}"
                                         value="#{book}"/&gt;
        &lt;/h:commandLink&gt;
    &lt;/h:column&gt;
    ...
    &lt;h:column&gt;
        &lt;f:facet name="header"&gt;
            &lt;h:outputText value="#{bundle.CartAdd}"/&gt;
        &lt;/f:facet&gt;
        &lt;h:commandButton id="add"
                         action="#{catalog.add}"
                         value="#{bundle.CartAdd}"&gt;
            &lt;f:setPropertyActionListener target="#{requestScope.book}"
                                         value="#{book}"/&gt;
        &lt;/h:commandButton&gt;
    &lt;/h:column&gt;
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Las etiquetas <code>h:commandLink</code> y <code>h:commandButton</code> están dentro de una 
              etiqueta <code>h:dataTable</code>, que itera sobre la lista de libros. El atributo 
              <code>var</code> se refiere a un solo libro en la lista de libros.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El objeto al que hace referencia el atributo <code>var</code> de una etiqueta 
              <code>h:dataTable</code> está en el ámbito de la página. Sin embargo, en este caso, debe poner 
              este objeto en el alcance de la solicitud para que cuando el usuario active el componente 
              <code>commandLink</code> para ir a <code>bookdetails.xhtml</code> o active el 
              <code>commandButton</code> para ir a <code>bookcatalog.xhtml</code>, los datos del libro estén 
              disponibles para esas páginas. Por lo tanto, la etiqueta 
              <code>f:setPropertyActionListener</code> se usa para establecer el objeto de libro actual en el 
              alcance de la solicitud cuando el componente <code>commandLink</code> o 
              <code>commandButton</code> está activado.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En el ejemplo anterior, el atributo <code>value</code> de la etiqueta 
              <code>f:setPropertyActionListener</code> hace referencia al objeto <code>book</code>. El 
              atributo <code>target</code> de la etiqueta <code>f:setPropertyActionListener</code> hace 
              referencia a la expresión de valor <code>requestScope.book</code>, que es donde se hace 
              referencia al objeto <code>book</code> por el atributo <code>value</code> que se almacena cuando 
              se activa el componente <code>commandLink</code> o <code>commandButton</code>.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-page-core001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-page-core003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
