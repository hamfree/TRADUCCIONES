<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Desarrollando Aplicaciones de Enterprise Beans Integrables</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="ejb-embedded001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="ejb-embedded003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GKCRR">
      <h2 id="developing-embeddable-enterprise-bean-applications">
        Desarrollando Aplicaciones de Enterprise Beans Integrables
      </h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Todos los contenedores de enterprise beans integrados admiten las funciones enumeradas 
            en la <a href="#GKCQC">Tabla 38-1</a>.
          </p>
        </div>
        <div class="paragraph">
          <p><a id="sthref157"></a><a id="GKCQC"></a></p>
        </div>
        <div class="paragraph">
          <p>
            <strong>
              Tabla 38-1 Funciones de Enterprise Bean Requeridas en el Contenedor Integrable
            </strong>
          </p>
        </div>
        <table class="tableblock frame-all grid-all" style="width: 50%;">
          <colgroup>
            <col style="width: 37.5%;">
            <col style="width: 62.5%;">
          </colgroup>
          <tbody>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">
                  <strong>Función Enterprise Bean</strong></p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock"><strong>Descripción</strong></p></td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">Beans de sesión locales</p>
              </td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  Beans de sesión sin estado, con estado y singleton de vista local y sin interfaz. 
                  Todo el acceso a los métodos es síncrono. Los beans de sesión no deben ser puntos 
                  finales de servicios web.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Transacciones</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  Transacciones gestionadas por contenedores y gestionadas por beans.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">Seguridad declarativa y programática.</p></td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top"><p class="tableblock">Interceptores</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  Interceptores de nivel de clase y nivel de método para beans de sesión.
                </p>
              </td>
            </tr>
            <tr>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">Deployment descriptor</p></td>
              <td class="tableblock halign-left valign-top">
                <p class="tableblock">
                  El descriptor de implementación opcional <code>ejb-jar.xml</code>, con las mismas 
                  reglas de reemplazo para el contenedor de enterprise bean en servidores Java EE.
                </p>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="paragraph">
          <p>
            Los proveedores de contenedores pueden admitir el conjunto completo de funciones en 
            enterprise beans, pero las aplicaciones que usan el contenedor incorporado no serán 
            portátiles si usan funciones de enterprise beans que no se enumeran en la 
            <a href="#GKCQC">Tabla 38-1</a>, como el servicio de temporizador, beans de sesión como 
            puntos finales de servicios web o interfaces de negocio remotas.
          </p>
        </div>
        <div class="sect2" id="GKCQI">
          <h3 id="running-embedded-applications">Ejecutando Aplicaciones Embebidas</h3>
          <div class="paragraph">
            <p>
              El contenedor incrustado, los componentes del enterprise bean y el cliente se ejecutan 
              en la misma máquina virtual utilizando el mismo classpath. Como resultado, los 
              desarrolladores pueden ejecutar una aplicación que usa el contenedor incrustado como 
              una aplicación típica de Java SE, de la siguiente manera:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
java -classpath mySessionBean.jar:containerProviderRuntime.jar:myClient.jar \
com.example.ejb.client.Main
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En el ejemplo anterior, <code>mySessionBean.jar</code> es un archivo JAR EJB que 
              contiene un bean de sesión sin estado local, <code>containerProviderRuntime.jar</code> 
              es un archivo JAR proporcionado por el proveedor de enterprise bean que contiene la 
              información necesaria de clases de tiempo de ejecución para el contenedor incrustado, 
              y <code>myClient.jar</code> es un archivo JAR que contiene una aplicación Java SE que 
              llama a los métodos de negocio en el bean de sesión a través del contenedor 
              incrustado.
            </p>
          </div>
          <div class="paragraph">
            <p>
              En el servidor GlassFish, el JAR de tiempo de ejecución que incluye las clases para el 
              contenedor incrustado es <code>glassfish-embedded-all.jar</code>.
            </p>
          </div>
        </div>
        <div class="sect2" id="GKCOV">
          <h3 id="creating-the-enterprise-bean-container">
            Creando el Contenedor de Enterprise Bean
          </h3>
          <div class="paragraph">
            <p>
              La clase abstracta <code>javax.ejb.embedded.EJBContainer</code> representa una 
              instancia del contenedor de enterprise bean e incluye métodos de fábrica para crear 
              una instancia de contenedor. El método <code>EJBContainer.createEJBContainer</code> se 
              utiliza para crear e inicializar una instancia de contenedor integrada.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El siguiente fragmento de código muestra cómo crear un contenedor incrustado que se 
              inicializa con la configuración predeterminada del proveedor del contenedor:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
EJBContainer ec = EJBContainer.createEJBContainer();
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              De forma predeterminada, el contenedor incrustado buscará en la classpath de la 
              máquina virtual módulos de enterprise bean: directorios que contengan un descriptor de 
              implementación <code>META-INF/ejb-jar.xml</code>, directorios que contengan un archivo 
              de clase con uno de las anotaciones de componentes enterprise bean (como 
              <code>@Stateless</code>), o archivos JAR que contienen un descriptor de despliegue o 
              archivo de clase <code>ejb-jar.xml</code> con una anotación de enterprise bean. Todas 
              las entradas coincidentes se consideran módulos de enterprise beans dentro de la misma 
              aplicación. Una vez que se hayan encontrado todos los módulos Enterprise Bean válidos 
              en el classpath, el contenedor comenzará a inicializar los módulos. Cuando el método 
              <code>createEJBContainer</code> regresa satisfactoriamente, la aplicación cliente 
              puede obtener referencias a la vista de cliente de cualquier módulo de enterprise bean 
              que encuentre el contenedor integrado.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Una versión alternativa del método <code>EJBContainer.createEJBContainer</code> toma 
              un <code>Map</code> de propiedades y configuraciones para personalizar la instancia 
              del contenedor integrable:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
Properties props = new Properties();
props.setProperty(...);
...
EJBContainer ec = EJBContainer.createEJBContainer(props);
                </code>
              </pre>
            </div>
          </div>
          <div class="sect3" id="GKCRP">
            <h4 id="explicitly-specifying-enterprise-bean-modules-to-be-initialized">
              Especificar Explícitamente los Módulos de Enterprise Bean que se Inicializarán
            </h4>
            <div class="paragraph">
              <p>
                Los desarrolladores pueden especificar exactamente qué módulos de enterprise bean 
                se inicializarán en el contenedor integrado. Para especificar explícitamente los 
                módulos de enterprise bean inicializados por el contenedor integrado, establezca la 
                propiedad <code>EJBContainer.MODULES</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Los módulos pueden estar ubicados en la ruta de clases de la máquina virtual en la 
                que se ejecutan el contenedor integrado y el código del cliente, o alternativamente 
                fuera de la ruta de clases de la máquina virtual.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para especificar módulos en el classpath de la máquina virtual, establezca 
                <code>EJBContainer.MODULES</code> en <code>String</code> para especificar un solo 
                nombre de módulo, o una matriz <code>String</code> que contiene el nombres de 
                módulos. El contenedor incrustado busca en la vía de acceso de clases de la máquina 
                virtual módulos de enterprise bean que coincidan con los nombres especificados:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
Properties props = new Properties();
props.setProperty(EJBContainer.MODULES, "mySessionBean");
EJBContainer ec = EJBContainer.createEJBContainer(props);
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Para especificar módulos de enterprise bean fuera de la ruta de clases de la máquina 
                virtual, establezca <code>EJBContainer.MODULES</code> en un objeto 
                <code>java.io.File</code> o una matriz de objetos <code>File</code> . Cada objeto 
                <code>File</code> hace referencia a un archivo JAR EJB o a un directorio que 
                contiene un archivo JAR EJB expandido:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
Properties props = new Properties();
File ejbJarFile = new File(...);
props.setProperty(EJBContainer.MODULES, ejbJarFile);
EJBContainer ec = EJBContainer.createEJBContainer(props);
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="GLHUR">
          <h3 id="looking-up-session-bean-references">
            Búsqueda de Referencias de Beans de Sesión
          </h3>
          <div class="paragraph">
            <p>
              Para buscar referencias de beans de sesión en una aplicación utilizando el contenedor 
              incrustado:
            </p>
          </div>
          <div class="olist arabic">
            <ol class="arabic">
              <li>
                <p>
                  Utilice una instancia de <code>EJBContainer</code> para recuperar un objeto 
                  <code>javax.naming.Context</code>.
                </p>
                <div class="paragraph">
                  <p>
                    Llame al método <code>EJBContainer.getContext</code> para recuperar el objeto 
                    <code>Context</code>:
                  </p>
                </div>
                <div class="listingblock">
                  <div class="content">
                    <pre class="prettyprint highlight">
                      <code class="language-oac_no_warn" data-lang="oac_no_warn">
EJBContainer ec = EJBContainer.createEJBContainer();
Context ctx = ec.getContext();
                      </code>
                    </pre>
                  </div>
                </div>
                <div class="paragraph">
                  <p>
                    Las referencias a los beans de sesión se pueden obtener utilizando la sintaxis 
                    JNDI portable detallada en 
                    <a href="ejb-intro004.html#GIRGN">Sintaxis JNDI Portable</a>. Por ejemplo, para 
                    obtener una referencia a <code>MySessionBean</code>, un bean de sesión local con 
                    una vista sin interfaz, use el siguiente código:
                  </p>
                </div>
                <div class="listingblock">
                  <div class="content">
                    <pre class="prettyprint highlight">
                      <code class="language-oac_no_warn" data-lang="oac_no_warn">
MySessionBean msb = (MySessionBean) ctx.lookup("java:global/mySessionBean/MySessionBean");
                      </code>
                    </pre>
                  </div>
                </div>
              </li>
            </ol>
          </div>
        </div>
        <div class="sect2" id="GKCRE">
          <h3 id="shutting-down-the-enterprise-bean-container">
            Cerrar el Contenedor de Enterprise Beans
          </h3>
          <div class="paragraph">
            <p>Para cerrar el contenedor integrado:</p>
          </div>
          <div class="olist arabic">
            <ol class="arabic">
              <li>
                <p>
                  Desde el cliente, llame al método <code>close</code> de la instancia de 
                  <code>EJBContainer</code>.
                </p>
                <div class="listingblock">
                  <div class="content">
                    <pre class="prettyprint highlight">
                      <code class="language-oac_no_warn" data-lang="oac_no_warn">
EJBContainer ec = EJBContainer.createEJBContainer();
...
ec.close();
                      </code>
                    </pre>
                  </div>
                </div>
                <div class="paragraph">
                  <p>
                    Si bien no es necesario que los clientes apaguen las instancias de 
                    <code>EJBContainer</code>, al hacerlo se liberan los recursos consumidos por el 
                    contenedor integrado. Esto es especialmente importante cuando la máquina virtual 
                    en la que se ejecuta la aplicación cliente tiene una vida útil más larga que la 
                    aplicación cliente.
                  </p>
                </div>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="ejb-embedded001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="ejb-embedded003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
