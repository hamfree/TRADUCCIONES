<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Creando Una Clase Recurso Raiz RESTful</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jaxrs001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jaxrs003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GILIK">
      <h2 id="creating-a-restful-root-resource-class">Creando Una Clase Recurso Raiz RESTful</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Las clases de recursos raíz son "objetos Java simples y antiguos" (POJO) que se anotan con 
            <code>@Path</code> o tienen al menos un método anotado con <code>@Path</code> o un designador de 
            método de solicitud, como <code>@GET</code>, <code>@PUT</code>, <code>@POST</code> o 
            <code>@DELETE</code>. Los métodos de recursos son métodos de una clase de recursos anotados con un 
            designador de método de solicitud. Esta sección explica cómo usar JAX-RS para anotar clases de 
            Java para crear servicios web RESTful.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#GILRU">Desarrollando Servicios Web RESTful con JAX-RS</a></p>
            </li>
            <li>
              <p><a href="#GILQB">Descripción General de una Aplicación JAX-RS</a></p>
            </li>
            <li>
              <p><a href="#GINPW">La Anotación @Path y las Plantillas de Ruta URI</a></p>
            </li>
            <li>
              <p><a href="#GIPYS">Respondiendo a los Métodos HTTP y Peticiones</a></p>
            </li>
            <li>
              <p><a href="#GIPZH">Usando @Consumes y @Produces para Personalizar Peticiones y Respuestas</a></p>
            </li>
            <li>
              <p><a href="#GIPYW">Extrayendo Parámetros de Petición</a></p>
            </li>
            <li>
              <p><a href="#CIHEGAGI">Configurando Aplicaciones JAX-RS</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="GILRU">
          <h3 id="developing-restful-web-services-with-jax-rs">
            Desarrollando Servicios Web RESTful con JAX-RS
          </h3>
          <div class="paragraph">
            <p>
              JAX-RS es una IPA de lenguaje de programación Java diseñada para facilitar el desarrollo de 
              aplicaciones que utilizan la arquitectura REST.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La IPA JAX-RS utiliza anotaciones del lenguaje de programación Java para simplificar el 
              desarrollo de servicios web RESTful. Los desarrolladores decoran los archivos de clase del 
              lenguaje de programación Java con anotaciones JAX-RS para definir los recursos y las acciones 
              que se pueden realizar en esos recursos. Las anotaciones JAX-RS son anotaciones en tiempo de 
              ejecución; por lo tanto, la reflexión en tiempo de ejecución generará las clases auxiliares y 
              los artefactos para el recurso. Un archivo de aplicación Java EE que contenga clases de recursos 
              JAX-RS tendrá los recursos configurados, las clases auxiliares y los artefactos generados y el 
              recurso expuesto a los clientes mediante la implementación del archivo en un servidor Java EE.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La <a href="#GINNA">Tabla 30-1</a> enumera algunas de las anotaciones de programación de Java 
              definidas por JAX-RS, con una breve descripción de cómo se usa cada una. Se puede ver más 
              información sobre las API de JAX-RS en 
              <code><a href="http://docs.oracle.com/javaee/7/api/" class="bare">
                  http://docs.oracle .com/javaee/7/api/</a></code>.
            </p>
          </div>
          <div class="paragraph">
            <p><a id="sthref137"></a><a id="GINNA"></a></p>
          </div>
          <div class="paragraph">
            <p><strong>Tabla 30-1 Resumen de anotaciones JAX-RS</strong></p>
          </div>
          <table class="tableblock frame-all grid-all" style="width: 99%;">
            <colgroup>
              <col style="width: 50%;">
              <col style="width: 50%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Anotación</strong></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Descripción</strong></p></td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@Path</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    El valor de la anotación <code>@Path</code> es una ruta URI relativa que indica dónde se 
                    alojará la clase Java: por ejemplo, <code>/helloworld</code>. También puede incrustar 
                    variables en los URI para crear una plantilla de ruta de URI. Por ejemplo, podría 
                    solicitar el nombre de un usuario y pasarlo a la aplicación como una variable en la URI: 
                    <code>/holamundo/{nombre de usuario}</code>.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@GET</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@GET</code> es un designador de método de solicitud y corresponde al 
                    método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes HTTP GET. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@POST</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@POST</code> es un designador de método de solicitud y del método HTTP 
                    de nombre similar. El método Java anotado con este designador de método de solicitud 
                    procesará las solicitudes HTTP POST. El comportamiento de un recurso está determinado por 
                    el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top"><p class="tableblock"><code>@PUT</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@PUT</code> es un designador de método de solicitud y corresponde al 
                    método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes HTTP PUT. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@DELETE</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@DELETE</code> es un designador de método de solicitud y corresponde al 
                    método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes HTTP DELETE. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@HEAD</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@HEAD</code> es un designador de método de solicitud y corresponde al 
                    método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes HTTP HEAD. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@OPTIONS</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@OPTIONS</code> es un designador de método de solicitud y corresponde 
                    al método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes de OPCIONES HTTP. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@PATCH</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@PATCH</code> es un designador de método de solicitud y corresponde al 
                    método HTTP de nombre similar. El método Java anotado con este designador de método de 
                    solicitud procesará las solicitudes HTTP PATCH. El comportamiento de un recurso está 
                    determinado por el método HTTP al que responde el recurso.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@PathParam</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@PathParam</code> es un tipo de parámetro que puede extraer para usar 
                    en su clase de recurso. Los parámetros de ruta de URI se extraen del URI de solicitud y 
                    los nombres de los parámetros corresponden a los nombres de variables de la plantilla de 
                    ruta de URI especificados en la anotación de nivel de clase <code>@Path</code>.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@QueryParam</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@QueryParam</code> es un tipo de parámetro que puede extraer para usar 
                    en su clase de recurso. Los parámetros de consulta se extraen de los parámetros de 
                    consulta del URI de solicitud.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@Consumes</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@Consumes</code> se usa para especificar los tipos de medios MIME de 
                    representaciones que un recurso puede consumir que fueron enviados por el cliente.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@Produces</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@Produces</code> se usa para especificar los tipos de representaciones 
                    de medios MIME que un recurso puede producir y enviar al cliente: por ejemplo, 
                    <code>"text/plain"</code>.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@Provider</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@Provider</code> se utiliza para cualquier cosa que sea de interés para 
                    el tiempo de ejecución de JAX-RS, como <code>MessageBodyReader</code> y 
                    <code>MessageBodyWriter</code>. Para las solicitudes HTTP, el 
                    <code>MessageBodyReader</code> se utiliza para asignar un cuerpo de entidad de solicitud 
                    HTTP a los parámetros del método. En el lado de la respuesta, un valor de retorno se 
                    asigna a un cuerpo de entidad de respuesta HTTP mediante un 
                    <code>MessageBodyWriter</code>. Si la aplicación necesita proporcionar metadatos 
                    adicionales, como encabezados HTTP o un código de estado diferente, un método puede 
                    devolver una <code>Response</code> que envuelve la entidad y que se puede construir usando 
                    <code>Response.ResponseBuilder</code>.
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><code>@ApplicationPath</code></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    La anotación <code>@ApplicationPath</code> se utiliza para definir la asignación de URL 
                    para la aplicación. La ruta especificada por <code>@ApplicationPath</code> es el URI base 
                    para todos los URI de recursos especificados por las anotaciones <code>@Path</code> en la 
                    clase de recurso. Solo puede aplicar <code>@ApplicationPath</code> a una subclase de 
                    <code>javax.ws.rs.core.Application</code>.
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="sect2" id="GILQB">
          <h3 id="overview-of-a-jax-rs-application">Descripción General de una Aplicación JAX-RS</h3>
          <div class="paragraph">
            <p>
              El siguiente ejemplo de código es un ejemplo muy simple de una clase de recurso raíz que usa 
              anotaciones JAX-RS:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
package javaeetutorial.hello;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.UriInfo;
/**
 * Recurso raíz (expuesto en la ruta "helloworld")
 */
@Path("helloworld")
public class HelloWorld {
    @Context
    private UriInfo context;
    /** Crea una nueva instancia de HelloWorld */
    public HelloWorld() {
    }
    /**
     * Recupera la representación de una instancia de helloWorld.HelloWorld
     * @return una instancia de java.lang.String
     */
    @GET
    @Produces("text/html")
    public String getHtml() {
        return "&lt;html lang=\"en\"&gt;&lt;body&gt;&lt;h1&gt;&iexcl;&iexcl;Hola, Mundo!!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;";
    }
}
              </code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Las siguientes secciones describen las anotaciones utilizadas en este ejemplo.</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  El valor de la anotación <code>@Path</code> es una ruta URI relativa. En el ejemplo 
                  anterior, la clase Java se alojará en la ruta URI <code>/helloworld</code>. Este es un uso 
                  extremadamente simple de la anotación <code>@Path</code>, con una ruta URI estática. Las 
                  variables se pueden incrustar en los URI. Las plantillas de ruta de URI son URI con 
                  variables incrustadas dentro de la sintaxis de URI.
                </p>
              </li>
              <li>
                <p>
                  La anotación <code>@GET</code> es un designador de método de solicitud, junto con 
                  <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code> y <code>@HEAD</code>, definido 
                  por JAX-RS y correspondiente a los métodos HTTP con nombres similares. En el ejemplo, el 
                  método Java anotado procesará solicitudes HTTP GET. El comportamiento de un recurso está 
                  determinado por el método HTTP al que responde el recurso.
                </p>
              </li>
              <li>
                <p>
                  La anotación <code>@Produces</code> se usa para especificar los tipos de medios MIME que un 
                  recurso puede producir y enviar al cliente. En este ejemplo, el método Java producirá 
                  representaciones identificadas por el tipo de medio MIME <code>"text/html"</code>.
                </p>
              </li>
              <li>
                <p>
                  La anotación <code>@Consumes</code> se usa para especificar los tipos de medios MIME que 
                  puede consumir un recurso que envió el cliente. El ejemplo podría modificarse para 
                  establecer el mensaje devuelto por el método <code>getHtml</code>, como se muestra en este 
                  ejemplo de código:
                </p>
                <div class="listingblock">
                  <div class="content">
                    <pre class="prettyprint highlight">
                      <code class="language-oac_no_warn" data-lang="oac_no_warn">
@POST
@Consumes("text/plain")
public void postHtml(String message) {
    // Guarda el mensaje
}
                      </code>
                    </pre>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect2" id="GINPW">
          <h3 id="the-path-annotation-and-uri-path-templates">
            La Anotación @Path y las Plantillas de Ruta URI
          </h3>
          <div class="paragraph">
            <p>
              La anotación <code>@Path</code> identifica la plantilla de ruta URI a la que responde el recurso 
              y se especifica en el nivel de clase o método de un recurso. El valor de la anotación 
              <code>@Path</code> es una plantilla de ruta de URI parcial relativa al URI base del servidor en 
              el que se implementa el recurso, la raíz de contexto de la aplicación y el patrón de URL al que 
              JAX-RS el tiempo de ejecución responde.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Las plantillas de ruta de URI son URI con variables incrustadas dentro de la sintaxis de URI. 
              Estas variables se sustituyen en tiempo de ejecución para que un recurso responda a una 
              solicitud basada en el URI sustituido. Las variables se indican con llaves 
              (<code>{</code> y <code>}</code>). Por ejemplo, observe la siguiente anotación 
              <code>@Path</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/users/{username}")
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En este tipo de ejemplo, se solicita a un usuario que escriba su nombre y luego responde un 
              servicio web JAX-RS configurado para responder a las solicitudes a esta plantilla de ruta de 
              URI. Por ejemplo, si el usuario escribe el nombre de usuario "Galileo", el servicio web responde 
              a la siguiente URL:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
http://example.com/users/Galileo
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Para obtener el valor del nombre de usuario, se puede usar la anotación <code>@PathParam</code> 
              en el parámetro de método de un método de solicitud, como se muestra en el siguiente ejemplo de 
              código:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/users/{username}")
public class UserResource {
    @GET
    @Produces("text/xml")
    public String getUser(@PathParam("username") String userName) {
        ...
    }
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              De forma predeterminada, la variable URI debe coincidir con la expresión regular 
              <code>"[^/]+?"</code>. Esta variable se puede personalizar especificando una expresión regular 
              diferente después del nombre de la variable. Por ejemplo, si un nombre de usuario debe constar 
              únicamente de caracteres alfanuméricos en mayúsculas y minúsculas, anule la expresión regular 
              predeterminada en la definición de la variable:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("users/{username: [a-zA-Z][a-zA-Z_0-9]*}")
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En este ejemplo, la variable <code>username</code> solo coincidirá con los nombres de usuario 
              que comienzan con una letra mayúscula o minúscula y cero o más caracteres alfanuméricos y el 
              carácter de subrayado. Si un nombre de usuario no coincide con esa plantilla, se enviará una 
              respuesta 404 (No encontrado) al cliente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              No es necesario que un valor de <code>@Path</code> tenga barras inclinadas (/) al principio o al 
              final. El tiempo de ejecución de JAX-RS analiza las plantillas de ruta de URI de la misma 
              manera, ya sea que tengan o no barras inclinadas al principio o al final.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Una plantilla de ruta de URI tiene una o más variables, con cada nombre de variable entre llaves: <code>{</code> para comenzar el nombre de la variable y <code>}</code> para terminarlo. En el ejemplo anterior, <code>username</code> es el nombre de la variable. En tiempo de ejecución, un recurso configurado para responder a la plantilla de ruta de URI anterior intentará procesar los datos de URI que corresponden a la ubicación de <code>{username}</code> en el URI como datos variables para <code>username</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Por ejemplo, si desea implementar un recurso que responda a la plantilla de ruta URI
              <code>
                <a href="http://example.com/myContextRoot/resources/{name1}/{name2}/" class="bare">
                  http://example.com/myContextRoot/resources/{name1}/{name2}/
                </a>
              </code>, primero debe implementar la aplicación en un servidor Java EE que responda a las 
              solicitudes al URI 
              <code>
                <a href="http://example.com/myContextRoot" class="bare">http://example.com/myContextRoot</a>
              </code> y luego decore su recurso con la siguiente anotación <code>@Path</code>:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/{name1}/{name2}/")
public class SomeResource {
    ...
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En este ejemplo, el patrón de URL para el servlet auxiliar JAX-RS, especificado en 
              <code>web.xml</code>, es el predeterminado:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;servlet-mapping&gt;
      &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/resources/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Un nombre de variable se puede utilizar más de una vez en la plantilla de ruta de URI.</p>
          </div>
          <div class="paragraph">
            <p>
              Si un carácter en el valor de una variable entra en conflicto con los caracteres reservados de 
              un URI, el carácter en conflicto debe sustituirse por la codificación de porcentaje. Por 
              ejemplo, los espacios en el valor de una variable deben sustituirse por <code>%20</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Al definir plantillas de ruta de URI, tenga cuidado de que el URI resultante después de la 
              sustitución sea válido.
            </p>
          </div>
          <div class="paragraph">
            <p>
              La <a href="#GIPYM">Tabla 32-2</a> enumera algunos ejemplos de variables de plantilla de ruta de 
              URI y cómo se resuelven los URI después de la sustitución. En los ejemplos se utilizan los 
              siguientes nombres y valores de variables:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><code>name1</code>: <code>james</code></p>
              </li>
              <li>
                <p><code>name2</code>: <code>gatz</code></p>
              </li>
              <li>
                <p><code>name3</code>:</p>
              </li>
              <li>
                <p><code>location</code>: <code>Main%20Street</code></p>
              </li>
              <li>
                <p><code>question</code>: <code>why</code></p>
              </li>
            </ul>
          </div>
          <table class="tableblock frame-all grid-all spread">
            <colgroup>
              <col style="width: 100%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <div>
                    <div class="paragraph">
                      <p><strong>Nota</strong>:</p>
                    </div>
                    <div class="paragraph">
                      <p>El valor de la variable <code>name3</code> es una cadena vacía.</p>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="paragraph">
            <p><a id="sthref138"></a><a id="GIPYM"></a></p>
          </div>
          <div class="paragraph">
            <p><strong>Tabla 32-2 Ejemplos de plantillas de ruta de URI</strong></p>
          </div>
          <table class="tableblock frame-all grid-all" style="width: 80%;">
            <colgroup>
              <col style="width: 50%;">
              <col style="width: 50%;">
            </colgroup>
            <tbody>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>Plantilla de ruta URI</strong></p></td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock"><strong>URI después de la sustitución</strong></p></td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/{name1}/{name2}/" class="bare">
                        http://example.com/{name1}/{name2}/
                      </a>
                    </code>
                  </p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/james/gatz/" class="bare">http://example.com/james/gatz/</a>
                    </code>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/{question}/{question}/{question}/" class="bare">
                        http://example.com/{question}/{question}/{question}/
                      </a>
                    </code>
                  </p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/why/why/why/" class="bare">
                        http://example.com/why/why/why/
                      </a>
                    </code>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/maps/{location}" class="bare">
                        http://example.com/maps/{location}
                      </a>
                    </code>
                  </p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/maps/Main%20Street" class="bare">
                        http://example.com/maps/Main%20Street
                      </a>
                    </code>
                  </p>
                </td>
              </tr>
              <tr>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com/{name3}/home/" class="bare">
                        http://example.com/{name3}/home/
                      </a>
                    </code>
                  </p>
                </td>
                <td class="tableblock halign-left valign-top">
                  <p class="tableblock">
                    <code>
                      <a href="http://example.com//home/" class="bare">http://example.com//home/
                      </a>
                    </code>
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="sect2" id="GIPYS">
          <h3 id="responding-to-http-methods-and-requests">Respondiendo a los Métodos HTTP y Peticiones</h3>
          <div class="paragraph">
            <p>
              El comportamiento de un recurso está determinado por los métodos HTTP (normalmente, GET, POST, 
              PUT o DELETE) a los que responde el recurso.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#GIPXS">Anotaciones del Designador del Método de Solicitud</a></p>
              </li>
              <li>
                <p>
                  <a href="#GIPZE">
                    Usando Proveedores de Entidad para Asociar Respuestas HTTP y Cuerpos de Entidades de 
                    Petición
                  </a>
                </p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="GIPXS">
            <h4 id="the-request-method-designator-annotations">
              Anotaciones del Designador del Método de Solicitud
            </h4>
            <div class="paragraph">
              <p>
                Las anotaciones de designador de método de solicitud son anotaciones en tiempo de ejecución, 
                definidas por JAX-RS, que corresponden a los métodos HTTP con nombres similares. Dentro de un 
                archivo de clase de recursos, los métodos HTTP se asignan a los métodos del lenguaje de 
                programación Java utilizando las anotaciones del designador de método de solicitud. El 
                comportamiento de un recurso está determinado por el método HTTP al que responde el recurso. 
                JAX-RS define un conjunto de designadores de métodos de solicitud para los métodos HTTP 
                comunes GET, POST, PUT, DELETE y HEAD; también puede crear sus propios designadores de métodos 
                de solicitud personalizados. La creación de designadores de métodos de solicitud 
                personalizados está fuera del alcance de este documento.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo muestra el uso del método PUT para crear o actualizar un contenedor de 
                almacenamiento:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@PUT
public Response putContainer() {
    System.out.println("PUT CONTAINER " + container);
    URI uri =  uriInfo.getAbsolutePath();
    Container c = new Container(container, uri.toString());
    Response r;
    if (!MemoryStore.MS.hasContainer(c)) {
        r = Response.created(uri).build();
    } else {
        r = Response.noContent().build();
    }
    MemoryStore.MS.createContainer(c);
    return r;
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                De forma predeterminada, el tiempo de ejecución de JAX-RS admitirá automáticamente los métodos 
                HEAD y OPTIONS si no se implementan explícitamente. Para HEAD, el tiempo de ejecución invocará 
                el método GET implementado, si está presente, e ignorará la entidad de respuesta, si está 
                configurada. Para OPTIONS, el encabezado de respuesta <code>Allow</code> se establecerá en el 
                conjunto de métodos HTTP admitidos por el recurso. Además, el tiempo de ejecución de JAX-RS 
                devolverá un Documento de Lenguaje de Definición de Aplicaciones Web (WADL) que describe el 
                recurso; ver 
                <code>
                  <a href="http://www.w3.org/Submission/wadl/" class="bare">
                    http://www.w3.org/Submission/wadl/
                  </a>
                </code> para más información.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Los métodos decorados con designadores de métodos de solicitud deben devolver 
                <code>void</code>, un tipo de lenguaje de programación Java o un objeto 
                <code>javax.ws.rs.core.Response</code>. Se pueden extraer múltiples parámetros del URI usando 
                las anotaciones <code>@PathParam</code> o <code>@QueryParam</code>, como se describe en 
                <a href="#GIPYW">Extrayendo Parámetros de Petición</a>. La conversión entre los tipos Java y 
                el cuerpo de una entidad es responsabilidad de un proveedor de entidades, como 
                <code>MessageBodyReader</code> o <code>MessageBodyWriter</code>. Los métodos que necesitan 
                proporcionar metadatos adicionales con una respuesta deben devolver una instancia de la clase 
                <code>Response</code>. La clase <code>ResponseBuilder</code> proporciona una manera 
                conveniente de crear una instancia de <code>Response</code> utilizando un patrón de 
                construcción. Los métodos HTTP PUT y POST esperan un cuerpo de solicitud HTTP, por lo que debe 
                usar un <code>MessageBodyReader</code> para los métodos que responden a las solicitudes PUT y 
                POST.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Tanto <code>@PUT</code> como <code>@POST</code> se pueden usar para crear o actualizar un 
                recurso. POST puede significar cualquier cosa, por lo que al usar POST, depende de la 
                aplicación definir la semántica. PUT tiene una semántica bien definida. Al usar PUT para la 
                creación, el cliente declara el URI para el recurso recién creado.
              </p>
            </div>
            <div class="paragraph">
              <p>
                PUT tiene una semántica muy clara para crear y actualizar un recurso. La representación que 
                envía el cliente debe ser la misma representación que se recibe mediante un GET, dado el mismo 
                tipo de medio. PUT no permite que un recurso se actualice parcialmente, un error común al 
                intentar usar el método PUT. Un patrón de aplicación común es usar POST para crear un recurso 
                y devolver una respuesta <code>201</code> con un encabezado de ubicación cuyo valor es el URI 
                del recurso recién creado. En este patrón, el servicio web declara el URI para el recurso 
                recién creado.
              </p> 
            </div>
          </div>
          <div class="sect3" id="GIPZE">
            <h4 id="using-entity-providers-to-map-http-response-and-request-entity-bodies">
              Usando Proveedores de Entidad para Asociar Respuestas HTTP y Cuerpos de Entidades de Petición
            </h4>
            <div class="paragraph">
              <p>
                Los proveedores de entidades proporcionan servicios de mapeo entre representaciones y sus 
                tipos Java asociados. Los dos tipos de proveedores de entidades son 
                <code>MessageBodyReader</code> y <code>MessageBodyWriter</code>. Para las solicitudes HTTP, el 
                <code>MessageBodyReader</code> se utiliza para asignar un cuerpo de entidad de solicitud HTTP 
                a los parámetros del método. En el lado de la respuesta, un valor de retorno se asigna a un 
                cuerpo de entidad de respuesta HTTP mediante un <code>MessageBodyWriter</code>. Si la 
                aplicación necesita proporcionar metadatos adicionales, como encabezados HTTP o un código de 
                estado diferente, un método puede devolver una <code>Response</code> que envuelve la entidad y 
                que se puede construir usando <code>Response.ResponseBuilder</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La <a href="#GKCCG">Tabla 32-3</a> muestra los tipos estándar que se admiten automáticamente 
                para cuerpos de entidad de solicitud y respuesta HTTP. Debe escribir un proveedor de entidad 
                solo si no elige uno de estos tipos estándar.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref139"></a><a id="GKCCG"></a></p>
            </div>
            <div class="paragraph">
              <p>Tabla 32-3 Tipos admitidos para cuerpos de entidad de solicitud y respuesta HTTP</p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 50%;">
              <colgroup>
                <col style="width: 0.99%;">
                <col style="width: 99.01%;">
              </colgroup>
              <thead>
                <tr>
                  <th class="tableblock halign-left valign-top">Tipo Java</th>
                  <th class="tableblock halign-left valign-top">Tipos de Medios Admitidos</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>byte[]</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>)</p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.lang.String</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios de texto (<code>text/*</code>)</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.io.InputStream</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>)</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.io.Reader</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>)</p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>java.io.File</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>)</p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>javax.activation.DataSource</code></p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>)</p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>javax.xml.transform.Source</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      tipos de medios XML (<code>text/xml</code>, <code>application/xml</code>, y 
                      <code>application/*+xml</code>)
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.xml.bind.JAXBElement</code> y clases JAXB proporcionadas por la aplicación
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      tipos de medios XML (<code>text/xml</code>, <code>application/xml</code>, y 
                      <code>application/*+xml</code>)
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>MultivaluedMap&lt;String, String&gt;</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Contenido del formulario (<code>application/x-www-form-urlencoded</code>)
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><code>StreamingOutput</code></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Todos los tipos de medios (<code><strong>/</strong></code>), 
                      <code>MessageBodyWriter</code> solo
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>
                El siguiente ejemplo muestra cómo usar <code>MessageBodyReader</code> con las anotaciones 
                <code>@Consumes</code> y <code>@Provider</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Consumes("application/x-www-form-urlencoded")
@Provider
public class FormReader implements MessageBodyReader&lt;NameValuePair&gt; {
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo muestra cómo usar <code>MessageBodyWriter</code> con las anotaciones 
                <code>@Produces</code> y <code>@Provider</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Produces("text/html")
@Provider
public class FormWriter implements
        MessageBodyWriter&lt;Hashtable&lt;String, String&gt;&gt; {
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>El siguiente ejemplo muestra cómo usar <code>ResponseBuilder</code>:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@GET
public Response getItem() {
    System.out.println("OBTIENE EL OBJETO " + container + " " + item);
    Item i = MemoryStore.MS.getItem(container, item);
    if (i == null)
        throw new NotFoundException("Objeto no encontrado");
    Date lastModified = i.getLastModified().getTime();
    EntityTag et = new EntityTag(i.getDigest());
    ResponseBuilder rb = request.evaluatePreconditions(lastModified, et);
    if (rb != null)
        return rb.build();
    byte[] b = MemoryStore.MS.getItemData(container, item);
    return Response.ok(b, i.getMimeType()).
            lastModified(lastModified).tag(et).build();
}
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="GIPZH">
          <h3 id="using-consumes-and-produces-to-customize-requests-and-responses">
            Usando @Consumes y @Produces para Personalizar Peticiones y Respuestas
          </h3>
          <div class="paragraph">
            <p>
              La información enviada a un recurso y luego devuelta al cliente se especifica como un tipo de 
              medio MIME en los encabezados de una solicitud o respuesta HTTP. Puede especificar a qué tipos 
              de representaciones de medios MIME puede responder o producir un recurso utilizando las 
              siguientes anotaciones:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><code>javax.ws.rs.Consumes</code></p>
              </li>
              <li>
                <p><code>javax.ws.rs.Produces</code></p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              De forma predeterminada, una clase de recurso puede responder y producir todos los tipos de 
              representaciones de medios MIME especificados en los encabezados de respuesta y solicitud HTTP.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#GIPXF">La Anotación @Produces</a></p>
              </li>
              <li>
                <p><a href="#GIPYT">La Anotación @Consumes</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="GIPXF">
            <h4 id="the-produces-annotation">La Anotación @Produces</h4>
            <div class="paragraph">
              <p>
                La anotación <code>@Produces</code> se usa para especificar los tipos de medios MIME o las 
                representaciones que un recurso puede producir y devolver al cliente. Si se aplica 
                <code>@Produces</code> a nivel de clase, todos los métodos en un recurso pueden producir los 
                tipos MIME especificados de forma predeterminada. Si se aplica a nivel de método, la anotación 
                anula cualquier anotación <code>@Produces</code> aplicada a nivel de clase.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si ningún método en un recurso puede producir el tipo MIME en una solicitud de cliente, el 
                tiempo de ejecución de JAX-RS devuelve un error HTTP "406 No aceptable".
              </p>
            </div>
            <div class="paragraph">
              <p>
                El valor de <code>@Produces</code> es una matriz de <code>String</code> de tipos MIME o una 
                lista separada por comas de constantes <code>MediaType</code>. Por ejemplo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Produces({"image/jpeg,image/png"})
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo muestra cómo aplicar <code>@Produces</code> tanto a nivel de clase como 
                de método:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/myResource")
@Produces("text/plain")
public class SomeResource {
    @GET
    public String doGetAsPlainText() {
        ...
    }
    @GET
    @Produces("text/html")
    public String doGetAsHtml() {
        ...
    }
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El método <code>doGetAsPlainText</code> tiene como valor predeterminado el tipo de medio MIME 
                de la anotación <code>@Produces</code> en el nivel de clase. La anotación 
                <code>@Produces</code> del método <code>doGetAsHtml</code> anula la configuración 
                <code>@Produces</code> de nivel de clase y especifica que el método puede producir HTML en 
                lugar de texto sin formato.
              </p>
            </div>
            <div class="paragraph">
              <p>
                <code>@Produces</code> también puede usar las constantes definidas en la clase 
                <code>javax.ws.rs.core.MediaType</code> para especificar el tipo de medio. Por ejemplo, 
                especificar <code>MediaType.APPLICATION_XML</code> es equivalente a especificar 
                <code>"application/xml"</code>.
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Produces(MediaType.APPLICATION_XML)
@GET
public Customer getCustomer() { ... }
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Si una clase de recurso es capaz de producir más de un tipo de medio MIME, el método de 
                recurso elegido corresponderá al tipo de medio más aceptable según lo declarado por el 
                cliente. Más específicamente, el encabezado <code>Accept</code> de la solicitud HTTP declara 
                lo que es más aceptable. Por ejemplo, si el encabezado <code>Accept</code> es 
                <code>Accept: text/plain</code>, se invocará el método <code>doGetAsPlainText</code>. 
                Alternativamente, si el encabezado <code>Accept</code> es 
                <code>Accept: text/plain;q=0.9, text/html</code>, que declara que el cliente puede aceptar 
                tipos de medios de <code>text/plain</code> y <code>text/html</code> pero prefiere este último, 
                se invocará el método <code>doGetAsHtml</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Se puede declarar más de un tipo de medio en la misma declaración <code>@Produces</code>. El 
                siguiente ejemplo de código muestra cómo se hace esto:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Produces({"application/xml", "application/json"})
public String doGetAsXmlOrJson() {
    ...
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El método <code>doGetAsXmlOrJson</code> se invocará si alguno de los tipos de medios 
                <code>application/xml</code> o <code>application/json</code> es aceptable. Si ambos son 
                igualmente aceptables, se elegirá el primero porque ocurre primero. Los ejemplos anteriores se 
                refieren explícitamente a los tipos de medios MIME para mayor claridad. Es posible hacer 
                referencia a valores constantes, lo que puede reducir los errores tipográficos. Para obtener 
                más información, consulte la documentación de la API para los valores de campo constantes de 
                <code>javax.ws.rs.core.MediaType</code>.
              </p>
            </div>
          </div>
          <div class="sect3" id="GIPYT">
            <h4 id="the-consumes-annotation">La Anotación @Consumes</h4>
            <div class="paragraph">
              <p>
                La anotación <code>@Consumes</code> se utiliza para especificar qué tipos de representaciones 
                de medios MIME puede aceptar o consumir un recurso del cliente. Si <code>@Consumes</code> se 
                aplica a nivel de clase, todos los métodos de respuesta aceptan los tipos MIME especificados 
                de forma predeterminada. Si se aplica a nivel de método, <code>@Consumes</code> anula 
                cualquier anotación <code>@Consumes</code> aplicada a nivel de clase.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si un recurso no puede consumir el tipo MIME de una solicitud de cliente, el tiempo de 
                ejecución de JAX-RS devuelve un error HTTP 415 ("Tipo de medio no compatible").
              </p>
            </div>
            <div class="paragraph">
              <p>
                El valor de <code>@Consumes</code> es una matriz de <code>String</code> de tipos MIME 
                aceptables, o una lista separada por comas de constantes <code>MediaType</code>. Por ejemplo:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Consumes({"text/plain,text/html"})
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>Este es el equivalente de:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Consumes({MediaType.TEXT_PLAIN,MediaType.TEXT_HTML})
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El siguiente ejemplo muestra cómo aplicar <code>@Consumes</code> tanto a nivel de clase como 
                de método:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/myResource")
@Consumes("multipart/related")
public class SomeResource {
    @POST
    public String doPost(MimeMultipart mimeMultipartData) {
        ...
    }
    @POST
    @Consumes("application/x-www-form-urlencoded")
    public String doPost2(FormURLEncodedProperties formData) {
        ...
    }
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El método <code>doPost</code> tiene como valor predeterminado el tipo de medio MIME de la 
                anotación <code>@Consumes</code> en el nivel de clase. El método <code>doPost2</code> anula la 
                anotación de nivel de clase <code>@Consumes</code> para especificar que puede aceptar datos de 
                formulario codificados en URL.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Si ningún método de recurso puede responder al tipo MIME solicitado, se devuelve al cliente un 
                error HTTP 415 ("Tipo de medio no admitido").
              </p>
            </div>
            <div class="paragraph">
              <p>
                El ejemplo de <code>HelloWorld</code> discutido anteriormente en esta sección se puede 
                modificar para configurar el mensaje usando <code>@Consumes</code>, como se muestra en el 
                siguiente ejemplo de código:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@POST
@Consumes("text/html")
public void postHtml(String message) {
    // Guarda el mensaje
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                En este ejemplo, el método Java consumirá representaciones identificadas por el tipo de medio 
                MIME <code>text/plain</code>. Tenga en cuenta que el método de recursos devuelve 
                <code>void</code>. Esto significa que no se devuelve ninguna representación y que se devolverá 
                una respuesta con un código de estado de HTTP 204 ("Sin contenido").
              </p>
            </div>
          </div>
        </div>
        <div class="sect2" id="GIPYW">
          <h3 id="extracting-request-parameters">Extrayendo Parámetros de Petición</h3>
          <div class="paragraph">
            <p>
              Los parámetros de un método de recursos se pueden anotar con anotaciones basadas en parámetros 
              para extraer información de una solicitud. Un ejemplo anterior presentó el uso del parámetro 
              <code>@PathParam</code> para extraer un parámetro de ruta del componente de ruta de la URL de 
              solicitud que coincidía con la ruta declarada en <code>@Path</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>Puede extraer los siguientes tipos de parámetros para usarlos en su clase de recurso:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Query</p>
              </li>
              <li>
                <p>URI path</p>
              </li>
              <li>
                <p>Form</p>
              </li>
              <li>
                <p>Cookie</p>
              </li>
              <li>
                <p>Header</p>
              </li>
              <li>
                <p>Matrix</p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Los parámetros de consulta se extraen de los parámetros de consulta de URI de solicitud y se 
              especifican mediante la anotación <code>javax.ws.rs.QueryParam</code> en los argumentos de 
              parámetro de método. El siguiente ejemplo demuestra el uso de <code>@QueryParam</code> para 
              extraer parámetros de consulta del componente <code>Query</code> de la URL de solicitud:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("smooth")
@GET
public Response smooth(
        @DefaultValue("2") @QueryParam("step") int step,
        @DefaultValue("true") @QueryParam("min-m") boolean hasMin,
        @DefaultValue("true") @QueryParam("max-m") boolean hasMax,
        @DefaultValue("true") @QueryParam("last-m") boolean hasLast,
        @DefaultValue("blue") @QueryParam("min-color") ColorParam minColor,
        @DefaultValue("green") @QueryParam("max-color") ColorParam maxColor,
        @DefaultValue("red") @QueryParam("last-color") ColorParam lastColor
        ) { ... }
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Si el parámetro de consulta <code>step</code> existe en el componente de consulta del URI de 
              solicitud, el valor de <code>step</code> se extraerá y analizará como un entero de 32 bits con 
              signo y se asignará al parámetro del método <code>step</code>. Si <code>step</code> no existe, 
              se asignará un valor predeterminado de 2, como se declara en la anotación 
              <code>@DefaultValue</code>, al parámetro del método <code>step</code>. Si el valor de 
              <code>step</code> no se puede analizar como un entero con signo de 32 bits, se devuelve una 
              respuesta HTTP 400 ("Error de cliente").
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los tipos de lenguaje de programación Java definidos por el usuario se pueden utilizar como 
              parámetros de consulta. El siguiente ejemplo de código muestra la clase <code>ColorParam</code> 
              utilizada en el ejemplo de parámetro de consulta anterior:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
public class ColorParam extends Color {
    public ColorParam(String s) {
        super(getRGB(s));
    }
    private static int getRGB(String s) {
        if (s.charAt(0) == '#') {
            try {
                Color c = Color.decode("0x" + s.substring(1));
                return c.getRGB();
            } catch (NumberFormatException e) {
                throw new WebApplicationException(400);
            }
        } else {
            try {
                Field f = Color.class.getField(s);
                return ((Color)f.get(null)).getRGB();
            } catch (Exception e) {
                throw new WebApplicationException(400);
            }
        }
    }
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>El constructor de <code>ColorParam</code> toma un solo parámetro <code>String</code>.</p>
          </div>
          <div class="paragraph">
            <p>
              Tanto <code>@QueryParam</code> como <code>@PathParam</code> solo se pueden usar en los 
              siguientes tipos de Java.
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Todos los tipos primitivos excepto <code>char</code>.</p>
              </li>
              <li>
                <p>Todas las clases contenedoras de tipos primitivos excepto <code>Character</code>.</p>
              </li>
              <li>
                <p>Cualquier clase con un constructor que acepte un único argumento <code>String</code>.</p>
              </li>
              <li>
                <p>
                  Cualquier clase con el método estático llamado <code>valueOf(String)</code> que acepta un 
                  único argumento <code>String</code>.
                </p>
              </li>
              <li>
                <p>
                  <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code> o <code>SortedSet&lt;T&gt;</code>, 
                  donde T coincide con los criterios ya enumerados. A veces, los parámetros pueden contener 
                  más de un valor para el mismo nombre. Si este es el caso, estos tipos pueden usarse para 
                  obtener todos los valores.
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>
              Si <code>@DefaultValue</code> no se usa junto con <code>@QueryParam</code> y el parámetro de 
              consulta no está presente en la solicitud, el valor será una colección vacía para 
              <code>List</code>, <code>Set</code>, o <code>SortedSet</code>; nulo para otros tipos de objetos; 
              y el predeterminado para los tipos primitivos.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los parámetros de ruta de URI se extraen del URI de solicitud y los nombres de los parámetros 
              corresponden a los nombres de variables de la plantilla de ruta de URI especificados en la 
              anotación de nivel de clase <code>@Path</code>. Los parámetros de URI se especifican mediante la 
              anotación <code>javax.ws.rs.PathParam</code> en los argumentos de los parámetros del método. El 
              siguiente ejemplo muestra cómo usar las variables <code>@Path</code> y la anotación 
              <code>@PathParam</code> en un método:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Path("/{username}")
public class MyResourceBean {
    ...
    @GET
    public String printUsername(@PathParam("username") String userId) {
        ...
    }
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En el fragmento anterior, el nombre de variable de plantilla de ruta de URI 
              <code>username</code> se especifica como un parámetro para el método <code>printUsername</code>. 
              La anotación <code>@PathParam</code> se establece en el nombre de variable 
              <code>username</code>. En tiempo de ejecución, antes de llamar a <code>printUsername</code>, el 
              valor de <code>username</code> se extrae del URI y se convierte en una <code>String</code>. El 
              <code>String</code> resultante está disponible para el método como la variable 
              <code>userId</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Si la variable de plantilla de ruta de URI no se puede convertir al tipo especificado, el tiempo 
              de ejecución de JAX-RS devuelve un error HTTP 400 ("Solicitud incorrecta") al cliente. Si la 
              anotación <code>@PathParam</code> no se puede convertir al tipo especificado, el tiempo de 
              ejecución de JAX-RS devuelve un error HTTP 404 ("No encontrado") al cliente.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El parámetro <code>@PathParam</code> y las demás anotaciones basadas en parámetros 
              (<code>@MatrixParam</code>, <code>@HeaderParam</code>, <code>@CookieParam</code> y 
              <code>@FormParam</code>) obedecen las mismas reglas que <code>@QueryParam</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los parámetros de las cookies, indicados decorando el parámetro con 
              <code>javax.ws.rs.CookieParam</code>, extraen información de las cookies declaradas en los 
              encabezados HTTP relacionados con las cookies. Los parámetros de encabezado, indicados decorando 
              el parámetro con <code>javax.ws.rs.HeaderParam</code>, extraen información de los encabezados 
              HTTP. Los parámetros de matriz, indicados decorando el parámetro con 
              <code>javax.ws.rs.MatrixParam</code>, extraen información de los segmentos de ruta de URL.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Los parámetros de formulario, indicados decorando el parámetro con 
              <code>javax.ws.rs.FormParam</code>, extraen información de una representación de solicitud que 
              es del tipo de medio MIME <code>application/x-www-form-urlencoded</code> y se ajusta a la 
              codificación especificada por los formularios HTML, como se describe en 
              <code>
                <a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1" class="bare">
                  http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1
                </a>
              </code>. Este parámetro es muy útil para extraer información enviada por POST en formularios 
              HTML.
            </p>
          </div>
          <div class="paragraph">
            <p>
              El siguiente ejemplo extrae el parámetro de formulario <code>name</code> de los datos del 
              formulario POST:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@POST
@Consumes("application/x-www-form-urlencoded")
public void post(@FormParam("name") String name) {
    // Guarda el mensaje
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Para obtener un mapa general de los nombres y valores de los parámetros para los parámetros de 
              consulta y ruta, use el siguiente código:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@GET
public String get(@Context UriInfo ui) {
    MultivaluedMap&lt;String, String&gt; queryParams = ui.getQueryParameters();
    MultivaluedMap&lt;String, String&gt; pathParams = ui.getPathParameters();
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              El siguiente método extrae los nombres y valores de los parámetros de encabezado y cookie en un 
              mapa:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@GET
public String get(@Context HttpHeaders hh) {
    MultivaluedMap&lt;String, String&gt; headerParams = hh.getRequestHeaders();
    Map&lt;String, Cookie&gt; pathParams = hh.getCookies();
}
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              En general, <code>@Context</code> se puede utilizar para obtener tipos contextuales de Java 
              relacionados con la solicitud o respuesta.
            </p>
          </div>
          <div class="paragraph">
            <p>Para los parámetros de formulario, es posible hacer lo siguiente:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
@POST
@Consumes("application/x-www-form-urlencoded")
public void post(MultivaluedMap&lt;String, String&gt; formParams) {
    // Guarda el mensaje
}
                </code>
              </pre>
            </div>
          </div>
        </div>
        <div class="sect2" id="CIHEGAGI">
          <h3 id="configuring-jax-rs-applications">Configurando Aplicaciones JAX-RS</h3>
          <div class="paragraph">
            <p>
              Una aplicación JAX-RS consta de al menos una clase de recurso empaquetada dentro de un archivo 
              WAR. El URI base desde el que los recursos de una aplicación responden a las solicitudes se 
              puede establecer de dos maneras:
            </p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  Usar la anotación <code>@ApplicationPath</code> en una subclase de 
                  <code>javax.ws.rs.core.Application</code> empaquetada dentro de WAR
                </p>
              </li>
              <li>
                <p>
                  Uso de la etiqueta <code>servlet-mapping</code> dentro del descriptor de implementación 
                  <code>web.xml</code> de WAR
                </p>
              </li>
            </ul>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <a href="#CIHFEBJF">Configurando una Aplicación JAX-RS Usando una Subclase de Aplicación</a>
                </p>
              </li>
              <li>
                <p><a href="#CIHDHAIJ">Configurando la URI Base en web.xml</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="CIHFEBJF">
            <h4 id="configuring-a-jax-rs-application-using-a-subclass-of-application">
              Configurando una Aplicación JAX-RS Usando una Subclase de Aplicación
            </h4>
            <div class="paragraph">
              <p>
                Cree una subclase de <code>javax.ws.rs.core.Application</code> para configurar manualmente el 
                entorno en el que se ejecutan los recursos REST definidos en sus clases de recursos, incluido 
                el URI base. Agregue una anotación de nivel de clase <code>@ApplicationPath</code> para 
                establecer el URI base.
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@ApplicationPath("/webapi")
public class MyApplication extends Application { ... }
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                En el ejemplo anterior, el URI base se establece en <code>/webapi</code>, lo que significa que 
                todos los recursos definidos dentro de la aplicación son relativos a <code>/webapi</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                De forma predeterminada, todos los recursos de un archivo se procesarán para obtener recursos. 
                Anule el método <code>getClasses</code> para registrar manualmente las clases de recursos en 
                la aplicación con el tiempo de ejecución de JAX-RS.
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Override
public Set&lt;Class&lt;?&gt;&gt; getClasses() {
    final Set&lt;Class&lt;?&gt;&gt; classes = new HashSet&lt;&gt;();
    // registrar recurso raíz
    classes.add(MyResource.class);
    return classes;
}
                  </code>
                </pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="CIHDHAIJ">
            <h4 id="configuring-the-base-uri-in-web.xml">Configurando la URI Base en web.xml</h4>
            <div class="paragraph">
              <p>
                El URI base para una aplicación JAX-RS se puede configurar mediante una etiqueta 
                <code>servlet-mapping</code> en el descriptor de despliegue <code>web.xml</code>, utilizando 
                el nombre de clase <code>Application</code> como el servlet.
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/webapi/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Esta configuración también anulará la ruta establecida por <code>@ApplicationPath</code> 
                cuando se usa una subclase <code>Application</code>.
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;servlet-mapping&gt;
   &lt;servlet-name&gt;com.example.rest.MyApplication&lt;/servlet-name&gt;
   &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jaxrs001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jaxrs003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
