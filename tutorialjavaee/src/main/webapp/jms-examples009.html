<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Uso de una Entidad para Unir Mensajes de Dos MDB</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jms-examples008.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jms-examples010.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNCHF">
      <h2 id="using-an-entity-to-join-messages-from-two-mdbs">
        Uso de una Entidad para Unir Mensajes de Dos MDB
      </h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Esta sección explica cómo escribir, compilar, empaquetar, implementar y ejecutar una aplicación 
            que usa la IPA de JMS con una entidad. La aplicación utiliza los siguientes componentes:
          </p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>Un aplicación cliente que envía y recibe mensajes</p>
            </li>
            <li>
              <p>Dos beans controlados por mensajes</p>
            </li>
            <li>
              <p>Una clase de entidad</p>
            </li>
          </ul>
        </div>
        <div class="paragraph">
          <p>
            Encontrará los archivos fuente para esta sección en el directorio 
            tut-install`/examples/jms/clientmdbentity/`. Los nombres de ruta en esta sección son relativos a 
            este directorio.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#BNCHG">Descripción General de la Aplicación de Ejemplo clientmdbentity</a></p>
            </li>
            <li>
              <p>
                <a href="#BNCHI">
                  Escribir los Componentes de la Aplicación para el Ejemplo de clientmdbentity
                </a>
              </p>
            </li>
            <li>
              <p><a href="#CHDEEDJH">Ejecutando el Ejemplo clientmdbentity</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="BNCHG">
          <h3 id="overview-of-the-clientmdbentity-example-application">
            Descripción General de la Aplicación de Ejemplo clientmdbentity
          </h3>
          <div class="paragraph">
            <p>
              Esta aplicación simula, de forma simplificada, el flujo de trabajo del departamento de recursos 
              humanos (HR) de una empresa cuando procesa una nueva contratación. Esta aplicación también 
              demuestra cómo usar la plataforma Java EE para realizar una tarea que muchas aplicaciones JMS 
              necesitan realizar.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Un cliente de mensajería a menudo debe esperar varios mensajes de varias fuentes. Luego usa la 
              información en todos estos mensajes para ensamblar un mensaje que luego envía a otro destino. El 
              término común para este patrón de diseño (que no es específico de JMS) es unir mensajes. Tal 
              tarea debe ser transaccional, con todas las recepciones y envíos como una sola transacción. Si 
              no todos los mensajes se reciben correctamente, la transacción puede revertirse. Para ver un 
              ejemplo de cliente de aplicación que ilustra esta tarea, consulte 
              <a href="jms-examples004.html#BNCGJ">Uso de Transacciones Locales</a>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Un bean controlado por mensajes puede procesar solo un mensaje a la vez en una transacción. Para 
              proporcionar la capacidad de unir mensajes, una aplicación puede hacer que el bean controlado 
              por mensajes almacene la información provisional en una entidad de la IPA de persistencia de 
              Java. La entidad puede entonces determinar si se ha recibido toda la información; cuando lo ha 
              hecho, la entidad puede informar esto a uno de los beans controlados por mensajes, que luego 
              crea y envía el mensaje al otro destino. Una vez que ha completado su tarea, la entidad puede 
              eliminarse.
            </p>
          </div>
          <div class="paragraph">
            <p>Los pasos básicos de la aplicación son los siguientes.</p>
          </div>
          <div class="olist arabic">
            <ol class="arabic">
              <li>
                <p>
                  La aplicación cliente del departamento de recursos humanos genera una identificación 
                  de empleado para cada nueva contratación y luego publica un mensaje (M1) que contiene el 
                  nombre de la nueva contratación, la identificación del empleado y la posición. Publica el 
                  mensaje en un tema porque el mensaje debe ser consumido por dos beans controlados por 
                  mensajes. Luego, el cliente crea una cola temporal, <code>ReplyQueue</code>, con un detector 
                  de mensajes que espera una respuesta al mensaje. (Consulte 
                  <a href="jms-concepts004.html#BNCGB">Creación de Destinos Temporales</a> para obtener más 
                  información).
                </p>
              </li>
              <li>
                <p>
                  Dos beans controlados por mensajes procesan cada mensaje: un bean, <code>OfficeMDB</code>, 
                  asigna el número de oficina del nuevo empleado, y el otro bean, <code>EquipmentMDB</code>, 
                  asigna el equipo del nuevo empleado. El primer bean que procesa el mensaje crea y persiste 
                  en una entidad llamada <code>SetupOffice</code>, luego llama a un método de negocio de la 
                  entidad para almacenar la información que ha generado. El segundo bean localiza la entidad 
                  existente y llama a otro método de negocio para agregar su información.
                </p>
              </li>
              <li>
                <p>
                  Cuando tanto la oficina como el equipo han sido asignados, el método de negocio de la 
                  entidad devuelve un valor de <code>true</code> al bean controlado por mensajes que llamó al 
                  método. El bean controlado por mensajes luego envía a la cola de respuesta un mensaje (M2) 
                  que describe las asignaciones. Luego elimina la entidad. El detector de mensajes del cliente 
                  de la aplicación recupera la información.
                </p>
              </li>
            </ol>
          </div>
          <div class="paragraph">
            <p>
              <a href="#BNCHH">Figura 49-5</a> ilustra la estructura de esta aplicación. Por supuesto, una 
              aplicación de recursos humanos real tendría más componentes; otros beans podrían configurar 
              registros de nómina y beneficios, orientación de horarios, etc.
            </p>
          </div>
          <div class="paragraph">
            <p>
              <a href="#BNCHH">Figura 49-5</a> asume que <code>OfficeMDB</code> es el primer bean controlado 
              por mensajes que consume el mensaje del cliente. <code>OfficeMDB</code> luego crea y conserva la 
              entidad <code>SetupOffice</code> y almacena la información de la oficina. 
              <code>EquipmentMDB</code> luego encuentra la entidad, almacena la información del equipo y se 
              entera de que la entidad ha completado su trabajo. <code>EquipmentMDB</code> luego envía el 
              mensaje a la cola de respuesta y elimina la entidad.
            </p>
          </div>
          <div id="BNCHH" class="paragraph">
            <div class="title">
              <strong>
                Figura 49-5 Una aplicación Enterprise Bean: Cliente a Beans Controlados por Mensajes a Entidad
              </strong>
            </div>
            <p>
              <span class="image">
                <img src="img/javaeett_dt_038.png" 
                     alt="Diagrama de aplicación que muestra una aplicación cliente, dos beans controlados por 
                     mensajes y una entidad, así como el tema y la cola asociados">
              </span>
            </p>
          </div>
        </div>
        <div class="sect2" id="BNCHI">
          <h3 id="writing-the-application-components-for-the-clientmdbentity-example">
            Escribir los Componentes de la Aplicación para el Ejemplo de clientmdbentity
          </h3>
          <div class="paragraph">
            <p>
              Escribir los componentes de la aplicación implica codificar el cliente de la aplicación, los 
              beans controlados por mensajes y la clase de entidad.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <a href="#BNCHJ">Codificación del Cliente de la Aplicación: HumanResourceClient.java</a>
                </p>
              </li>
              <li>
                <p>
                  <a href="#BNCHK">
                    Codificación de Beans Controlados por Mensajes para el Ejemplo clientmdbentity
                  </a>
                </p>
              </li>
              <li>
                <p><a href="#BNCHL">Codificación de la Clase Entity para el Ejemplo clientmdbentity</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="BNCHJ">
            <h4 id="coding-the-application-client-humanresourceclient.java">
              Codificación del Cliente de la Aplicación: HumanResourceClient.java
            </h4>
            <div class="paragraph">
              <p>
                La aplicación cliente, <code>HumanResourceClient.java</code>, que se encuentra en 
                <code>clientmdbentity-app-client</code>, realiza los siguientes pasos:
              </p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Define un tema para la aplicación, usando el espacio de nombres <code>java:app</code> 
                    porque el tema se usa tanto en el cliente de la aplicación como en el módulo EJB
                  </p>
                </li>
                <li>
                  <p>Inyecta recursos <code>ConnectionFactory</code> y <code>Topic</code></p>
                </li>
                <li>
                  <p>
                    Crea una <code>TemporaryQueue</code> para recibir notificaciones del procesamiento que se 
                    produce, en función de los eventos de nuevas contrataciones que ha publicado.
                  </p>
                </li>
                <li>
                  <p>
                    Crea un <code>JMSConsumer</code> para <code>TemporaryQueue</code>, establece el detector 
                    de mensajes de `JMSConsumer e inicia la conexión
                  </p>
                </li>
                <li>
                  <p>Crea un <code>MapMessage</code></p>
                </li>
                <li>
                  <p>
                    Crea cinco nuevos empleados con nombres, puestos y números de identificación generados 
                    aleatoriamente (en secuencia) y publica cinco mensajes que contienen esta información
                  </p>
                </li>
              </ol>
            </div>
            <div class="paragraph">
              <p>
                El detector de mensajes, <code>HRListener</code>, espera los mensajes que contienen la oficina 
                y el equipo asignados a cada empleado. Cuando llega un mensaje, el detector de mensajes 
                muestra la información recibida y determina si los cinco mensajes han llegado. Cuando lo han 
                hecho, el detector de mensajes notifica al método <code>main</code>, que luego sale.
              </p>
            </div>
          </div>
          <div class="sect3" id="BNCHK">
            <h4 id="coding-the-message-driven-beans-for-the-clientmdbentity-example">
              Codificación de Beans Controlados por Mensajes para el Ejemplo clientmdbentity
            </h4>
            <div class="paragraph">
              <p>
                Este ejemplo utiliza dos beans controlados por mensajes, ambos bajo 
                <code>clientmdbentity-ejb</code>:
              </p>
            </div>
            <div class="ulist">
              <ul>
                <li>
                  <p><code>EquipmentMDB.java</code></p>
                </li>
                <li>
                  <p><code>OfficeMDB.java</code></p>
                </li>
              </ul>
            </div>
            <div class="paragraph">
              <p>Los beans siguen los siguientes pasos.</p>
            </div>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Inyectan un recurso <code>MessageDrivenContext</code>, un <code>EntityManager</code> y un 
                    <code>JMSContext</code>.
                  </p>
                </li>
                <li>
                  <p>
                    El método <code>onMessage</code> recupera la información del mensaje. El método 
                    <code>`onMessage de EquipmentMDB</code> elige el equipo, basado en la posición del nuevo 
                    empleado; el método <code>`onMessage de OfficeMDB</code> genera aleatoriamente un número 
                    de oficina.
                  </p>
                </li>
                <li>
                  <p>
                    Después de un ligero retraso para simular problemas de procesamiento del mundo real, el 
                    método <code>onMessage</code> llama a un método auxiliar, <code>compose</code>.
                  </p>
                </li>
                <li>
                  <p>El método <code>compose</code> sigue los siguientes pasos.</p>
                </li>
                <li>
                  <p>
                    Crea y persiste la entidad <code>SetupOffice</code> o la encuentra por clave principal.
                  </p>
                </li>
                <li>
                  <p>
                    Utiliza la entidad para almacenar el equipo o la información de la oficina en la base de 
                    datos, llamando al método comercial <code>doEquipmentList</code> o 
                    <code>doOfficeNumber</code>.
                  </p>
                </li>
                <li>
                  <p>
                    Si el método comercial devuelve <code>true</code>, lo que significa que se ha almacenado 
                    toda la información, recupera la información de destino de la respuesta del mensaje, crea 
                    un <code>JMSProducer</code> y envía un mensaje de respuesta. que contiene la información 
                    almacenada en la entidad.
                  </p>
                </li>
                <li>
                  <p>Elimina la entidad.</p>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="BNCHL">
            <h4 id="coding-the-entity-class-for-the-clientmdbentity-example">
              Codificación de la Clase Entity para el Ejemplo clientmdbentity
            </h4>
            <div class="paragraph">
              <p>
                La clase <code>SetupOffice.java</code>, también bajo <code>clientmdbentity-ejb</code>, es una 
                clase de entidad. La entidad y los beans controlados por mensajes se empaquetan juntos en un 
                archivo JAR EJB. La clase de entidad se declara de la siguiente manera:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Entity
public class SetupOffice implements Serializable {
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La clase contiene un constructor sin argumentos y un constructor que toma dos argumentos, el 
                ID y el nombre del empleado. También contiene métodos getter y setter para la identificación 
                del empleado, el nombre, el número de oficina y la lista de equipos. El método getter para el 
                ID de empleado tiene la anotación <code>@Id</code> para indicar que este campo es la clave 
                principal:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
@Id
public String getEmployeeId() {
    return id;
}
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La clase también implementa los dos métodos comerciales, <code>doEquipmentList</code> y 
                <code>doOfficeNumber</code>, y su método auxiliar, <code>checkIfSetupComplete</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Los beans controlados por mensajes llaman a los métodos comerciales y a los métodos 
                captadores.
              </p>
            </div>
            <div class="paragraph">
              <p>
                El archivo <code>persistence.xml</code> para la entidad especifica la configuración más 
                básica:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence version="2.1"
             xmlns="http://xmlns.jcp.org/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence
               http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"&gt;
  &lt;persistence-unit name="clientmdbentity-ejbPU" transaction-type="JTA"&gt;
    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;
    &lt;jta-data-source&gt;java:comp/DefaultDataSource&lt;/jta-data-source&gt;
    &lt;properties&gt;
      &lt;property name="eclipselink.ddl-generation"
                value="drop-and-create-tables"/&gt;
    &lt;/properties&gt;
  &lt;/persistence-unit&gt;
&lt;/persistence&gt;
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="CHDEEDJH">
          <h3 id="running-the-clientmdbentity-example">Ejecutando el Ejemplo clientmdbentity</h3>
          <div class="paragraph">
            <p>
              Puede usar el EID de NetBeans o Maven para compilar, implementar y ejecutar el ejemplo de 
              <code>clientmdbentity</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>
              Dado que el ejemplo define su propio tema privado de aplicación y utiliza la fábrica de 
              conexiones predeterminada preconfigurada <code>java:comp/DefaultJMSConnectionFactory</code> y el 
              recurso JDBC predeterminado preconfigurado <code>java:comp/DefaultDataSource</code>, no es 
              necesario crear recursos para ello.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#CHDIJDEE">Para Ejecutar clientmdbentity Usando el EID NetBeans</a></p>
              </li>
              <li>
                <p><a href="#CHDICHGH">Para Ejecutar clientmdbentity Usando Maven</a></p>
              </li>
              <li>
                <p><a href="#CHDCDEEF">Ver el Resultado de la Aplicación</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="CHDIJDEE">
            <h4 id="to-run-clientmdbentity-using-netbeans-ide">
              Para Ejecutar clientmdbentity Usando el EID NetBeans
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que se haya iniciado el servidor GlassFish (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>), así 
                    como el servidor de la base de datos (consulte 
                    <a href="usingexamples004.html #BNADK">Arrancando y Parando Apache Derby</a>).
                  </p>
                </li>
                <li>
                  <p>En el menú Archivo, elija Abrir proyecto.</p>
                </li>
                <li>
                  <p>En el cuadro de diálogo Abrir proyecto, vaya a:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/jms/clientmdbentity
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Seleccione la carpeta <code>clientmdbentity</code>.</p>
                </li>
                <li>
                  <p>Haga clic en Abrir proyecto.</p>
                </li>
                <li>
                  <p>
                    En la pestaña Proyectos, haga clic con el botón derecho en el proyecto 
                    <code>clientmdbentity</code> y seleccione Generar.
                  </p>
                  <div class="paragraph">
                    <p>Este comando crea lo siguiente:</p>
                  </div>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Un archivo JAR de cliente de aplicación que contiene los archivos de clase de 
                          cliente y de clase de escucha, junto con un archivo de manifiesto que especifica la 
                          clase principal
                        </p>
                      </li>
                      <li>
                        <p>
                          Un archivo JAR EJB que contiene los beans controlados por mensajes y la clase de 
                          entidad, junto con el archivo <code>persistence.xml</code>
                        </p>
                      </li>
                      <li>
                        <p>
                          Un archivo EAR de la aplicación que contiene los dos archivos JAR junto con un 
                          archivo <code>application.xml</code>
                        </p>
                        <div class="paragraph">
                          <p>
                            El archivo <code>clientmdbentity.ear</code> se crea en el directorio 
                            <code>clientmdbentity-ear/target/</code>.
                          </p>
                        </div>
                        <div class="paragraph">
                          <p>
                            Luego, el comando implementa el archivo EAR, recupera los apéndices del cliente y 
                            ejecuta el cliente de la aplicación.
                          </p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="CHDICHGH">
            <h4 id="to-run-clientmdbentity-using-maven">Para Ejecutar clientmdbentity Usando Maven</h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que se haya iniciado el servidor GlassFish (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>), así 
                    como el servidor de la base de datos (consulte 
                    <a href="usingexamples004.html #BNADK">Arrancando y Parando Apache Derby</a>).
                  </p>
                </li>
                <li>
                  <p>Vaya al siguiente directorio:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/jms/clientmdbentity/
                        </code>
                      </pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>
                    Para compilar los archivos de origen y empaquetar, implementar y ejecutar la aplicación, 
                    ingrese el siguiente comando:
                  </p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight">
                        <code class="language-oac_no_warn" data-lang="oac_no_warn">
mvn install
                        </code>
                      </pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>Este comando crea lo siguiente:</p>
                  </div>
                  <div class="ulist">
                    <ul>
                      <li>
                        <p>
                          Un archivo JAR de cliente de aplicación que contiene los archivos de clase de 
                          cliente y de clase de escucha, junto con un archivo de manifiesto que especifica la 
                          clase principal
                        </p>
                      </li>
                      <li>
                        <p>
                          Un archivo JAR EJB que contiene los beans controlados por mensajes y la clase de 
                          entidad, junto con el archivo <code>persistence.xml</code>
                        </p>
                      </li>
                      <li>
                        <p>
                          Un archivo EAR de la aplicación que contiene los dos archivos JAR junto con un 
                          archivo <code>application.xml</code>
                        </p>
                        <div class="paragraph">
                          <p>
                            Luego, el comando implementa la aplicación, recupera los apéndices del cliente y 
                            ejecuta el cliente de la aplicación.
                          </p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="CHDCDEEF">
            <h4 id="viewing-the-application-output">Ver el Resultado de la Aplicación</h4>
            <div class="paragraph">
              <p>
                La salida en la ventana de salida del EID de NetBeans o en la ventana de la terminal se ve así 
                (precedida por la salida del contenedor del cliente de la aplicación y la salida de Maven):
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
SENDER: Setting hire ID to 50, name Bill Tudor, position Programmer
SENDER: Setting hire ID to 51, name Carol Jones, position Senior Programmer
SENDER: Setting hire ID to 52, name Mark Wilson, position Manager
SENDER: Setting hire ID to 53, name Polly Wren, position Senior Programmer
SENDER: Setting hire ID to 54, name Joe Lawrence, position Director
Waiting for 5 message(s)
New hire event processed:
  Employee ID: 52
  Name: Mark Wilson
  Equipment: Tablet
  Office number: 294
Waiting for 4 message(s)
New hire event processed:
  Employee ID: 53
  Name: Polly Wren
  Equipment: Laptop
  Office number: 186
Waiting for 3 message(s)
New hire event processed:
  Employee ID: 54
  Name: Joe Lawrence
  Equipment: Mobile Phone
  Office number: 135
Waiting for 2 message(s)
New hire event processed:
  Employee ID: 50
  Name: Bill Tudor
  Equipment: Desktop System
  Office number: 200
Waiting for 1 message(s)
New hire event processed:
  Employee ID: 51
  Name: Carol Jones
  Equipment: Laptop
  Office number: 262
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                La salida de los beans controlados por mensajes y la clase de entidad aparece en el registro 
                del servidor.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para cada empleado, la aplicación primero crea la entidad y luego la encuentra. Es posible 
                que vea errores de tiempo de ejecución en el registro del servidor y que se produzcan 
                reversiones de transacciones. Los errores ocurren si ambos beans controlados por mensajes 
                descubren al mismo tiempo que la entidad aún no existe, por lo que ambos intentan crearla. El 
                primer intento tiene éxito, pero el segundo falla porque el bean ya existe. Después de la 
                reversión, el segundo bean controlado por mensajes vuelve a intentarlo y logra encontrar la 
                entidad. Las transacciones administradas por contenedores permiten que la aplicación se 
                ejecute correctamente, a pesar de estos errores, sin programación especial.
              </p>
            </div>
            <div class="paragraph">
              <p>
                Para cancelar la implementación de la aplicación una vez que haya terminado de ejecutarla, use 
                la pestaña Servicios o emita el comando <code>mvn cargo:undeploy</code>.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jms-examples008.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jms-examples010.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
