<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Modelo de Navegación</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-intro005.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-intro007.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNAQL">
      <h2 id="navigation-model">Modelo de Navegación</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El modelo de navegación de JavaServer Faces facilita la definición de la navegación de la página y 
            el manejo de cualquier procesamiento adicional que sea necesario para elegir la secuencia en la 
            que se cargan las páginas.
          </p>
        </div>
        <div class="paragraph">
          <p>
            En la tecnología JavaServer Faces, la navegación es un conjunto de reglas para elegir la siguiente 
            página o vista que se mostrará después de una acción de aplicación, como cuando se hace clic en un 
            botón o enlace.
          </p>
        </div>
        <div class="paragraph">
          <p>
            La navegación puede ser implícita o definida por el usuario. La navegación implícita entra en 
            juego cuando las reglas de navegación definidas por el usuario no están configuradas en los 
            archivos de recursos de configuración de la aplicación.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Cuando agrega un componente como un <code>commandButton</code> a una página de Facelets, y 
            asigna otra página como valor para su propiedad <code>action</code>, el controlador de navegación 
            predeterminado intentará hacer coincidir un página dentro de la aplicación implícitamente. En el 
            siguiente ejemplo, el controlador de navegación predeterminado intentará ubicar una página llamada 
            <code>response.xhtml</code> dentro de la aplicación y navegar hasta ella:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:commandButton value="submit" action="response"&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Las reglas de navegación definidas por el usuario se declaran en cero o más archivos de recursos 
            de configuración de aplicaciones, como <code>faces-config.xml</code>, mediante el uso de un 
            conjunto de elementos XML. La estructura predeterminada de una regla de navegación es la 
            siguiente:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;navigation-rule&gt;
    &lt;description&gt;&lt;/description
    &lt;from-view-id&gt;&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
        &lt;from-action&gt;&lt;/from-action&gt;
        &lt;from-outcome&gt;&lt;/from-outcome&gt;
        &lt;if&gt;&lt;/if&gt;
        &lt;to-view-id&gt;&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>La navegación definida por el usuario se maneja de la siguiente manera.</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p>Defina las reglas en el archivo de recursos de configuración de la aplicación.</p>
            </li>
            <li>
              <p>
                Consulte un <code>String</code> de resultado del atributo <code>action</code> del botón o del 
                componente de enlace. Este resultado <code>String</code> es utilizado por la implementación de 
                JavaServer Faces para seleccionar la regla de navegación.
              </p>
            </li>
          </ul>
        </div>
        <div class="paragraph">
          <p>Aquí hay una regla de navegación de ejemplo:</p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;navigation-rule&gt;
    &lt;from-view-id&gt;/greeting.xhtml&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
        &lt;from-outcome&gt;success&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/response.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Esta regla establece que cuando se activa un componente de comando (como un 
            <code>h:commandButton</code> o un <code>h:commandLink</code>) en <code>greeting.xhtml</code>, la 
            aplicación navegará desde la página <code>greeting.xhtml</code> a la página 
            <code>response.xhtml</code> si el resultado al que hace referencia la etiqueta del componente del 
            botón es <code>success</code>. Aquí hay una etiqueta <code>h:commandButton</code> de 
            <code>greeting.xhtml</code> que especificaría un resultado lógico de <code>success</code>:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:commandButton id="submit" value="Submit" action="success"/&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Como demuestra el ejemplo, cada elemento <code>navigation-rule</code> define cómo ir de una página 
            (especificada en el elemento <code>from-view-id</code>) a las otras páginas de la aplicación. Los 
            elementos <code> navigation-rule </code> pueden contener cualquier número de elementos 
            <code>navigation-case</code>, cada uno de los cuales define la página que se abrirá a continuación 
            (definida por <code>to-view-id</code>) basado en un resultado lógico (definido por 
            <code>from-result</code>).
          </p>
        </div>
        <div class="paragraph">
          <p>
            En aplicaciones más complicadas, el resultado lógico también puede provenir del valor de retorno 
            de un método de acción en un bean administrado. Este método realiza algún procesamiento para 
            determinar el resultado. Por ejemplo, el método puede verificar si la contraseña que el usuario 
            ingresó en la página coincide con la del archivo. Si es así, el método puede devolver 
            <code>success</code>; de lo contrario, podría devolver <code>failure</code>. Un resultado de 
            <code>failure</code> puede resultar en la recarga de la página de inicio de sesión. Un resultado 
            de <code>success</code> puede hacer que se abra la página que muestra la actividad de la tarjeta 
            de crédito del usuario. Si desea que el resultado sea devuelto por un método en un bean, debe 
            hacer referencia al método utilizando una expresión de método con el atributo <code>action</code>, 
            como se muestra en este ejemplo:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:commandButton id="submit" value="Submit"
                 action="#{cashierBean.submit}" /&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            Cuando el usuario hace clic en el botón representado por esta etiqueta, el componente 
            correspondiente genera un evento de acción. Este evento es manejado por la instancia 
            predeterminada <code>javax.faces.event.ActionListener</code>, que llama al método de acción al que 
            hace referencia el componente que desencadenó el evento. El método de acción devuelve un resultado 
            lógico al oyente de la acción.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El oyente pasa el resultado lógico y una referencia al método de acción que produjo el resultado 
            al <code>javax.faces.application.NavigationHandler</code> predeterminado. 
            <code>NavigationHandler</code> selecciona la página que se mostrará a continuación haciendo 
            coincidir el resultado o la referencia del método de acción con las reglas de navegación en el 
            archivo de recursos de configuración de la aplicación mediante el siguiente proceso.
          </p>
        </div>
        <div class="olist arabic">
          <ol class="arabic">
            <li>
              <p>
                <code>NavigationHandler</code> selecciona la regla de navegación que coincide con la página 
                que se muestra actualmente.
              </p>
            </li>
            <li>
              <p>
                Hace coincidir el resultado o la referencia del método de acción que recibió del 
                <code>javax.faces.event.ActionListener</code> predeterminado con los definidos por los casos 
                de navegación.
              </p>
            </li>
            <li>
              <p>
                Intenta hacer coincidir la referencia del método y el resultado con el mismo caso de 
                navegación.
              </p>
            </li>
            <li>
              <p>
                Si el paso anterior falla, el controlador de navegación intenta hacer coincidir el resultado.
              </p>
            </li>
            <li>
              <p>
                Finalmente, el controlador de navegación intenta hacer coincidir la referencia del método de 
                acción si los dos intentos anteriores fallaron.
              </p>
            </li>
            <li>
              <p>Si ningún caso de navegación coincide, vuelve a mostrar la misma vista.</p>
            </li>
          </ol>
        </div>
        <div class="paragraph">
          <p>
            Cuando <code>NavigationHandler</code> logra una coincidencia, comienza la fase de respuesta de 
            procesamiento. Durante esta fase, se renderizará la página seleccionada por 
            <code>NavigationHandler</code>.
          </p>
        </div>
        <div class="paragraph">
          <p>
            La aplicación de ejemplo de estudio de caso de tutoría de Duke utiliza reglas de navegación en los 
            métodos comerciales que manejan la creación, edición y eliminación de los usuarios de la 
            aplicación. Por ejemplo, el formulario para crear un alumno tiene la siguiente etiqueta 
            <code>h:commandButton</code>:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:commandButton id="submit"
        action="#{adminBean.createStudent(studentManager.newStudent)}"
        value="#{bundle['action.submit']}"/&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            El evento de acción llama al método <code>dukestutoring.ejb.AdminBean.createStudent</code>:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
public String createStudent(Student student) {
    em.persist(student);
    return "createdStudent";
}
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>
            El valor de retorno de <code>createdStudent</code> tiene un caso de navegación correspondiente en 
            el archivo de configuración <code>faces-config.xml</code>:
          </p>
        </div>
        <div class="listingblock">
          <div class="content">
            <pre class="prettyprint highlight">
              <code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;navigation-rule&gt;
    &lt;from-view-id&gt;/admin/student/createStudent.xhtml&lt;/from-view-id&gt;
    &lt;navigation-case&gt;
        &lt;from-outcome&gt;createdStudent&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/admin/index.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;
              </code></pre>
          </div>
        </div>
        <div class="paragraph">
          <p>Una vez creado el alumno, el usuario vuelve a la página de índice de Administración.</p>
        </div>
        <div class="paragraph">
          <p>
            Para obtener más información sobre cómo definir reglas de navegación, consulte 
            <a href="jsf-configure010.html#BNAXF">Configuración de reglas de navegación</a>.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Para obtener más información sobre cómo implementar métodos de acción para manejar la navegación, 
            consulte <a href="jsf-develop003.html#BNAVD">
              Cómo escribir un método para manejar un evento de acción
            </a>.
          </p>
        </div>
        <div class="paragraph">
          <p>
            Para obtener más información sobre cómo hacer referencia a resultados o métodos de acción desde 
            etiquetas de componentes, consulte 
            <a href="jsf-page-core004.html#BNATP">Referencia a un método que realiza navegación</a>.
          </p>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-intro005.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-intro007.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
