<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>La Aplicación de Ejemplo ajaxguessnumber</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="jsf-ajax010.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-ajax012.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="GKOKB">
      <h2 id="the-ajaxguessnumber-example-application">La Aplicación de Ejemplo ajaxguessnumber</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            Para demostrar las ventajas de usar Ajax, revise el ejemplo de <code>guessnumber</code> del 
            <a href="jsf-facelets.html#GIEPX">Capítulo 8, "Introducción a los Facelets"</a>. Si modifica este 
            ejemplo para usar Ajax, no es necesario que la respuesta se muestre en la página 
            <code>response.xhtml</code>. En su lugar, se realiza una llamada asincrónica al bean en el lado 
            del servidor, y la respuesta se muestra en la página de origen ejecutando solo el componente de 
            entrada en lugar de mediante el envío del formulario.
          </p>
        </div>
        <div class="paragraph">
          <p>
            El código fuente de esta aplicación se encuentra en el directorio 
            tut-install`/examples/web/jsf/ajaxguessnumber/`.
          </p>
        </div>
        <div class="paragraph">
          <p>Aquí se tratan los siguientes temas:</p>
        </div>
        <div class="ulist">
          <ul>
            <li>
              <p><a href="#GKOIJ">Los Archivos Fuente de ajaxguessnumber</a></p>
            </li>
            <li>
              <p><a href="#GKOKE">Ejecutando el Ejemplo ajaxguessnumber</a></p>
            </li>
          </ul>
        </div>
        <div class="sect2" id="GKOIJ">
          <h3 id="the-ajaxguessnumber-source-files">Los Archivos Fuente de ajaxguessnumber</h3>
          <div class="paragraph">
            <p>Los cambios en la aplicación <code> guessnumber </code> ocurren en dos archivos fuente.</p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><a href="#GKOFW">La Página Facelets ajaxgreeting.xhtml</a></p>
              </li>
              <li>
                <p><a href="#GKOHN">El Bean de Respaldo UserNumberBean</a></p>
              </li>
              <li>
                <p><a href="#CHDGAIGJ">El Bean Gestionado CDI DukesNumberBean</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="GKOFW">
            <h4 id="the-ajaxgreeting.xhtml-facelets-page">La Página Facelets ajaxgreeting.xhtml</h4>
            <div class="paragraph">
              <p>
                La página de Facelets para <code>ajaxguessnumber</code>, <code>ajaxgreeting.xhtml</code>, es 
                casi la misma que la página <code>greeting.xhtml</code> para la aplicación 
                <code>guessnumber</code>:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
&lt;h:head&gt;
    &lt;h:outputStylesheet library="css" name="default.css"/&gt;
    &lt;title&gt;Ajax Guess Number Facelets Application&lt;/title&gt;
&lt;/h:head&gt;
&lt;h:body&gt;
    &lt;h:form id="AjaxGuess"&gt;
        &lt;h:graphicImage value="#{resource['images:wave.med.gif']}"
                        alt="Duke waving his hand"/&gt;
        &lt;h2&gt;
            Hi, my name is Duke. I am thinking of a number from
            #{dukesNumberBean.minimum} to #{dukesNumberBean.maximum}.
            Can you guess it?
        &lt;/h2&gt;
        &lt;p&gt;
            &lt;h:inputText id="userNo"
                         title="Enter a number from 0 to 10:"
                         value="#{userNumberBean.userNumber}"&gt;
                &lt;f:validateLongRange minimum="#{dukesNumberBean.minimum}"
                                     maximum="#{dukesNumberBean.maximum}"/&gt;
            &lt;/h:inputText&gt;

            &lt;h:commandButton id="submit" value="Submit"&gt;
                &lt;f:ajax execute="userNo" render="outputGroup" /&gt;
            &lt;/h:commandButton&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;h:panelGroup layout="block" id="outputGroup"&gt;
                &lt;h:outputText id="result" style="color:blue"
                              value="#{userNumberBean.response}"
                              rendered="#{!facesContext.validationFailed}"/&gt;
                &lt;h:message id="errors1"
                           showSummary="true"
                           showDetail="false"
                           style="color: #d20005;
                           font-family: 'New Century Schoolbook', serif;
                           font-style: oblique;
                           text-decoration: overline"
                           for="userNo"/&gt;
            &lt;/h:panelGroup&gt;
        &lt;/p&gt;
    &lt;/h:form&gt;
&lt;/h:body&gt;
                </code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                El cambio más importante está en la etiqueta <code>h:commandButton</code>. El atributo 
                <code>action</code> se elimina de la etiqueta y se agrega una etiqueta <code>f:ajax</code>.
              </p>
            </div>
            <div class="paragraph">
              <p>
                La etiqueta <code>f:ajax</code> especifica que cuando se hace clic en el botón, el 
                componente <code>h:inputText</code> con el valor <code>id</code> <code>userNo</code> es 
                ejecutado. A continuación, se renderizan los componentes dentro del grupo de paneles 
                <code>outputGroup</code>. Si se produce un error de validación, el bean gestionado no se 
                ejecuta y el mensaje de error de validación se muestra en el panel de mensajes. De lo 
                contrario, el resultado de la conjetura se representa en el componente <code>result</code>.
              </p>
            </div>
          </div>
          <div class="sect3" id="GKOHN">
            <h4 id="the-usernumberbean-backing-bean">El Bean de Respaldo UserNumberBean</h4>
            <div class="paragraph">
              <p>
                También se realiza un pequeño cambio en el código <code>UserNumberBean</code> para que el 
                componente de salida no muestre ningún mensaje para el valor predeterminado (nulo) de la 
                propiedad <code>response</code>. Aquí está el código del bean modificado:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
public String getResponse() {
    if ((userNumber != null)
            &amp;&amp; (userNumber.compareTo(dukesNumberBean.getRandomInt()) == 0)) {
        return "Yay! You got it!";
    }
    if (userNumber == null) {
        return null;
    } else {
        return "Sorry, " + userNumber + " is incorrect.";
    }
}
                </code></pre>
              </div>
            </div>
          </div>
          <div class="sect3" id="CHDGAIGJ">
            <h4 id="the-dukesnumberbean-cdi-managed-bean">El Bean Gestionado CDI DukesNumberBean</h4>
            <div class="paragraph">
              <p>
                El bean administrado CDI de ámbito de sesión <code>DukesNumberBean</code> almacena el rango de 
                números adivinables y el número elegido al azar de ese rango. Se inyecta en 
                <code>UserNumberBean</code> con la anotación CDI <code>@Inject</code> para que el valor del 
                número aleatorio se pueda comparar con el número que envió el usuario:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
@Inject
DukesNumberBean dukesNumberBean;
                </code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Aprenderá más sobre CDI en 
                <a href="cdi-basic.html#GIWHB">
                  Capítulo 25, "Introducción a los Contextos e Inyección de Dependencias para Java EE"
                </a>.
              </p>
            </div>
          </div>
        </div>
        <div class="sect2" id="GKOKE">
          <h3 id="running-the-ajaxguessnumber-example">Ejecutando el Ejemplo ajaxguessnumber</h3>
          <div class="paragraph">
            <p>
              Puede usar el EID NetBeans o Maven para construir, empaquetar, implementar y ejecutar la 
              aplicación <code>ajaxguessnumber</code>.
            </p>
          </div>
          <div class="paragraph">
            <p>Aquí se tratan los siguientes temas:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>
                  <a href="#GLHVU">Para Construir, Empaquetar, y Desplegar el Ejemplo ajaxguessnumber Usando el EID NetBeans</a>
                </p>
              </li>
              <li>
                <p>
                  <a href="#GLHVQ">Para Construir, Empaquetar, y Desplegar el Ejemplo ajaxguessnumber Usando Maven</a>
                </p>
              </li>
              <li>
                <p><a href="#GLHWE">Para Ejecutar el Ejemplo ajaxguessnumber</a></p>
              </li>
            </ul>
          </div>
          <div class="sect3" id="GLHVU">
            <h4 id="to-build-package-and-deploy-the-ajaxguessnumber-example-using-netbeans-ide">
              Para Construir, Empaquetar, y Desplegar el Ejemplo ajaxguessnumber Usando el EID NetBeans
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que GlassFish Server se haya iniciado (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>).
                  </p>
                </li>
                <li>
                  <p>En el menú Archivo, elija Abrir proyecto.</p>
                </li>
                <li>
                  <p>En el cuadro de diálogo Abrir proyecto, navegue hasta:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/web/jsf
                      </code></pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Seleccione la carpeta <code>ajaxguessnumber</code>.</p>
                </li>
                <li>
                  <p>Haga clic en Abrir Proyecto.</p>
                </li>
                <li>
                  <p>
                    En la pestaña Proyectos, haga clic con el botón derecho en el proyecto 
                    <code>ajaxguessnumber</code> y seleccione Construir.
                  </p>
                  <div class="paragraph">
                    <p>Este comando construye e implementa el proyecto.</p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="GLHVQ">
            <h4 id="to-build-package-and-deploy-the-ajaxguessnumber-example-using-maven">
              Para Construir, Empaquetar, y Desplegar el Ejemplo ajaxguessnumber Usando Maven
            </h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>
                    Asegúrese de que GlassFish Server se haya iniciado (consulte 
                    <a href="usingexamples002.html#BNADI">Arrancando y Parando el Servidor GlassFish</a>).
                  </p>
                </li>
                <li>
                  <p>En una ventana de terminal, vaya a:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
tut-install/examples/web/jsf/ajaxguessnumber/
                      </code></pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Ingrese el siguiente comando:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
mvn install
                      </code></pre>
                    </div>
                  </div>
                  <div class="paragraph">
                    <p>
                      Este comando compila y empaqueta la aplicación en un archivo WAR, 
                      <code>ajaxguessnumber.war</code>, ubicado en el directorio <code>target</code>. Luego 
                      implementa la aplicación.
                    </p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
          <div class="sect3" id="GLHWE">
            <h4 id="to-run-the-ajaxguessnumber-example">Para Ejecutar el Ejemplo ajaxguessnumber</h4>
            <div class="olist arabic">
              <ol class="arabic">
                <li>
                  <p>En un navegador web, ingrese la siguiente URL:</p>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="prettyprint highlight"><code class="language-oac_no_warn" data-lang="oac_no_warn">
http://localhost:8080/ajaxguessnumber
                      </code></pre>
                    </div>
                  </div>
                </li>
                <li>
                  <p>Ingrese un valor en el campo y haga clic en Enviar.</p>
                  <div class="paragraph">
                    <p>
                      Si el valor está en el rango de 0 a 10, un mensaje indica si la suposición es correcta o 
                      incorrecta. Si el valor está fuera de ese rango o si el valor no es un número, aparece 
                      un mensaje de error en rojo.
                    </p>
                  </div>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="jsf-ajax010.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="jsf-ajax012.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
