<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <title>Ciclo de Vida de un Servlet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://use.fontawesome.com/96c4d89611.js"></script>
  </head>
  <body>
    <table id="doc-title" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left" valign="top">
          <b>Plataforma Java, Edición Empresarial (Java EE) 8</b><br />
          <b>El Tutorial de Java EE</b>
        </td>
      </tr>
    </table>
    <hr />
    <table width="90%" id="top-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>
        <td align="left">
          <a href="servlets001.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="servlets003.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class=" vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <div class="sect1" id="BNAFI">
      <h2 id="servlet-lifecycle">Ciclo de Vida de un Servlet</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>
            El ciclo de vida de un servlet está controlado por el contenedor en el que se ha implementado el 
            servlet. Cuando una solicitud se asigna a un servlet, el contenedor realiza los siguientes pasos.
          </p>
        </div>
        <div class="olist arabic">
          <ol class="arabic">
            <li>
              <p>Si no existe una instancia del servlet, el contenedor web:</p>
            </li>
            <li>
              <p>Carga la clase de servlet.</p>
            </li>
            <li>
              <p>Crea una instancia de la clase servlet.</p>
            </li>
            <li>
              <p>
                Inicializa la instancia del servlet llamando al método <code>init</code> (la inicialización se 
                trata en <a href="servlets004.html#BNAFU">Creando e Inicializando un Servlet</a>).
              </p>
            </li>
            <li>
              <p>
                El contenedor invoca el método <code>service</code>, pasando objetos de solicitud y respuesta. 
                Los métodos de servicio se discuten en 
                <a href="servlets005.html#BNAFV">Escribiendo Métodos de Servicio</a>.
              </p>
            </li>
          </ol>
        </div>
        <div class="paragraph">
          <p>
            Si necesita eliminar el servlet, el contenedor finaliza el servlet llamando al método 
            <code>destroy</code> del servlet. Para más información, ver 
            <a href="servlets010.html#BNAGS">Finalizando un Servlet</a>.
          </p>
        </div>
        <div class="sect2" id="BNAFJ">
          <h3 id="handling-servlet-lifecycle-events">Gestionando los Eventos del Ciclo de Vida de un Servlet</h3>
          <div class="paragraph">
            <p>
              Puede monitorear y reaccionar ante eventos en el ciclo de vida de un servlet definiendo objetos 
              de escucha cuyos métodos se invocan cuando ocurren eventos del ciclo de vida. Para utilizar 
              estos objetos de escucha, debe definir y especificar la clase de escucha.
            </p>
          </div>
          <div class="sect3" id="BNAFK">
            <h4 id="defining-the-listener-class">Definiendo la Clase Listener</h4>
            <div class="paragraph">
              <p>
                Una clase de escucha se define como una implementación de una interfaz de escucha. La 
                <a href="#BNAFL">Tabla 18-1</a> enumera los eventos que se pueden monitorear y la interfaz 
                correspondiente que se debe implementar. Cuando se invoca un método de escucha, se le pasa un 
                evento que contiene información apropiada para el evento. Por ejemplo, a los métodos de la 
                interfaz <code>HttpSessionListener</code> se les pasa un <code>HttpSessionEvent</code>, que 
                contiene un <code>HttpSession</code>.
              </p>
            </div>
            <div class="paragraph">
              <p><a id="sthref97"></a><a id="BNAFL"></a></p>
            </div>
            <div class="paragraph">
              <p><strong>Tabla 18-1 Eventos del Ciclo de Vida de un Servlet</strong></p>
            </div>
            <table class="tableblock frame-all grid-all" style="width: 90%;">
              <colgroup>
                <col style="width: 16.6666%;">
                <col style="width: 33.3333%;">
                <col style="width: 50.0001%;">
              </colgroup>
              <tbody>
                <tr>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Objeto</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Evento</strong></p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock"><strong>Interfaz de Escucha y Clase de Evento</strong></p></td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Web context</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Inicialización y destrucción</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.ServletContextListener</code> y <code>ServletContextEvent</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Web context</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Atributo agregado, eliminado o reemplazado</p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.ServletContextAttributeListener</code> y
                      <code>ServletContextAttributeEvent</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Creación, invalidación, activación, pasivación y tiempo de espera
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.http.HttpSessionListener</code>, 
                      <code>javax.servlet.http.HttpSessionActivationListener</code>, y 
                      <code>HttpSessionEvent</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Atributo agregado, eliminado o reemplazado</p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.http.HttpSessionAttributeListener</code> y <code>HttpSessionBindingEvent</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Request</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      Una solicitud de servlet ha comenzado a ser procesada por componentes web
                    </p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.ServletRequestListener</code> y <code>ServletRequestEvent</code>
                    </p>
                  </td>
                </tr>
                <tr>
                  <td class="tableblock halign-left valign-top"><p class="tableblock">Request</p></td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">Atributo agregado, eliminado o reemplazado</p>
                  </td>
                  <td class="tableblock halign-left valign-top">
                    <p class="tableblock">
                      <code>javax.servlet.ServletRequestAttributeListener</code> y 
                      <code>ServletRequestAttributeEvent</code>
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="paragraph">
              <p>
                Use la anotación <code>@WebListener</code> para definir un oyente para obtener eventos para 
                varias operaciones en el contexto de la aplicación web en particular. Las clases anotadas con 
                <code>@WebListener</code> deben implementar una de las siguientes interfaces:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
javax.servlet.ServletContextListener
javax.servlet.ServletContextAttributeListener
javax.servlet.ServletRequestListener
javax.servlet.ServletRequestAttributeListener
javax.servlet..http.HttpSessionListener
javax.servlet..http.HttpSessionAttributeListener
                  </code>
                </pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Por ejemplo, el siguiente fragmento de código define un oyente que implementa dos de estas 
                interfaces:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="prettyprint highlight">
                  <code class="language-oac_no_warn" data-lang="oac_no_warn">
import javax.servlet.ServletContextAttributeListener;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;
@WebListener()
public class SimpleServletListener implements ServletContextListener,
        ServletContextAttributeListener {
    ...
                  </code>
                </pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2" id="BNAFN">
          <h3 id="handling-servlet-errors">Manejando Errores del Servlet</h3>
          <div class="paragraph">
            <p>
              Cualquier número de excepciones puede ocurrir cuando se ejecuta un servlet. Cuando ocurre una 
              excepción, el contenedor web genera una página predeterminada que contiene el siguiente mensaje:
            </p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="prettyprint highlight">
                <code class="language-oac_no_warn" data-lang="oac_no_warn">
A Servlet Exception Has Occurred (En español: Ha ocurrido una excepción de servlet)
                </code>
              </pre>
            </div>
          </div>
          <div class="paragraph">
            <p>
              Pero también puede especificar que el contenedor debe devolver una página de error específica 
              para una excepción determinada.
            </p>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <table width="90%" id="bottom-nav" cellspacing="0" cellpadding="0">
      <colgroup>
        <col width="12%"/>
        <col width="12%"/>
        <col width="*"/>
      </colgroup>
      <tr>		
        <td align="left">
          <a href="servlets001.html">
            <span class=" vector-font"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Anterior</span>
          </a>
        </td>
        <td align="left">
          <a href="servlets003.html">
            <span class="vector-font"><i class="fa fa-arrow-circle-right vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Siguiente</span>
          </a>
        </td>
        <td align="right">
          <a href="toc.html">
            <span class="vector-font"><i class="fa fa-list vector-font" aria-hidden="true"></i></span>
            <span style="position:relative;top:-2px;">Contenidos</span>
          </a>
        </td>
      </tr>
    </table>
    <span id="copyright">
      <a href="img/cpyr.adoc">
        <img src="img/oracle.gif" height="10" alt="Logo de Oracle" />&nbsp;			
        <span>
          Copyright&nbsp;&copy;&nbsp;2017,&nbsp;Oracle&nbsp;y/o&nbsp;sus&nbsp;afiliados.&nbsp;Todos&nbsp;los&nbsp;
          derechos&nbsp;reservados.
        </span>
      </a>
    </span>
  </body>
</html>
