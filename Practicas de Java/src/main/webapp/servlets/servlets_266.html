<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Enlaces de versión a CSS y JS</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Búsqueda" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Enlaces de versión a CSS y JS</div>
    <br /> 
    La mayoría de las aplicaciones web usan hojas de estilo en cascada (archivos .css) y javascript (archivos .js). Existe un error 
    con respecto a estos archivos que se produce cuando actualiza su aplicación.
    <p>
      La mayoría de los navegadores almacenarán en caché los archivos .css/.js. Cuando actualiza su aplicación, el navegador 
      probablemente usará las versiones viejas y cacheadas de estos archivos, y no las nuevas. Esto habitualmente no es deseable, 
      ya que usualmente tiene actualizaciones que necesita que sus usuarios vean. Si no hace nada, entonces, en el mundo nuevo, los 
      usuarios verán una mezcla de nuevas páginas web comno viejo css/js. Eso es malo.
    </p>
    <p>
      Como un programador, sabe que puede pulsar Control + F5 (o similar) para refrescar todo, y la aplicación ser verá bien. Pero 
      eso es peligroso, porque ahora ve una cosa, pero la mayoría de los usuarios verán aún páginas rotas. Nunca quiera el forzar a 
      sus usuarios a pulsar Control + F5.
    </p> 
    <p>
      Hay una forma simple de solucionar este problema. Simplemente agregue un parámetro de versión a cada enlace a un archivo 
      css/js:
    </p>
    <pre>&lt;link rel="stylesheet" href="../css/styles.css<b>?ver=27</b>" media="all"&gt;</pre>
    Cada vez que publique una nueva versión de su aplicación, incremente el valor de este parámetro de versión. 
    <em>El parámetro de versión no tiene otro rol que hacer que la URL sea diferente entre varias versiones.</em> Esto forzará al 
    navegador a obtener la versión más nueva del archivo css/js cuando se haga una versión, y evitar la caché del navegador.
    <p>
      Por supuesto, necesita definir el valor de este parámetro de versión en un lugar. Una ubicación natural para esto es 
      <code>web.xml</code>:
    </p>
    <pre>  
  &lt;context-param&gt;
   &lt;param-name&gt;ver&lt;/param-name&gt;
   &lt;param-value&gt;27&lt;/param-value&gt;
  &lt;/context-param&gt;
    </pre>
    <p>
      Puede referirse a dicho dato en un JSP como sigue:
    </p>
    <pre>&lt;link rel="stylesheet" href="../css/styles.css<b>?ver=${initParam.ver}</b>" media="all"&gt;</pre>
    <p>
      Puede querer centralizar esta política en un archivo .tag:
    </p>
    <pre>&lt;link rel="stylesheet" href="../css/styles.css&lt;tags:ver/&gt;" media="all"&gt;</pre>
    ver.tag:
    <pre>&lt;%@ include file="/WEB-INF/TagHeader.jspf" %&gt;&lt;%@ tag pageEncoding="UTF-8" trimDirectiveWhitespaces="true" %&gt;?ver=${initParam.ver}</pre>
    <p></p>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>