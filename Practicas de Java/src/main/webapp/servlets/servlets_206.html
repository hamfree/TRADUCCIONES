<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Prefiera UTF 8 en todas las capas</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Búsqueda" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Prefiera UTF 8 en todas las capas</div> 
    <br />
    Si una aplicación visualiza texto con caracteres no esperados y extraños, la causa probable es una codificación de caracteres 
    incorrecta.
    <p>
      Las codificaciones de caracteres controlan cómo las herramientas traducen los bytes crudos en texto. La mejor 
      codificación de caracteres es probablemente UTF-8. Puede representar caracteres en casi todos los idiomas, y de una manera 
      eficiente. Así, parece tener sentido adoptar UTF-8 como una excelente codificación de caracteres predeterminada. El mismo 
      W3C <a href="https://www.w3.org/International/questions/qa-choosing-encodings">recomienda</a> tal práctica.
    </p>
    <p>
      Se debe evitar habitualmente la codificación ASCII, ya que es demasiado limitada. Además, la codificación predeterminada 
      utilizada por la especificación de Servlet es ISO-8859-1, que está restringida a los idiomas de Europa occidental.
    </p>
    <p>
      En una aplicación web, las codificaciones de caracteres se usan en tres áreas separadas - el navegador, el servidor y la 
      base de datos. <b>Para trabajar juntas correctamente, se debe usar la misma codificación de caracteres en cada una de esas 
      áreas</b>. Vea este 
        <a href="http://www.oracle.com/technetwork/articles/javase/httpcharset-142283.html?">excelente artículo</a> de John O'Connor 
        para una descripción posterior.
    </p>
    <p>
      <b>Navegador</b> <br />
      El navegador usa una codificación para presentar el texto al usuario, y para enviar las peticiones (a menudo con parámetros) 
      al servidor. La codificación del parámetro de petición será la misma que la de la codificación de la página, a menos que se 
      indique otra cosa. Un JSP puede instruir al navegador sobre la codificación deseada usando una directiva <code>page</code>, 
      tal como:
    </p>
    <p>
      <code>&lt;%@ page contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8" %&gt;</code>
    </p>
    <p>
      Se pueden usar etiquetas META en su lugar:
    </p>
    <p>
      <code>&lt;meta http-equiv="Content-Type"&nbsp;
        content="text/html; charset=UTF-8"&gt;</code>
    </p>
    <p>
      Como es habitual, dicha política debe definirse en un lugar, si es posible (por ejemplo, en una página de plantilla).
    </p>
    <p>
      <b>Servidor</b> <br />
      En principio, el navegador debería responder al servidor incluyendo la codificación de caracteres qye ya ha recibido del 
      servidor. En la práctica, sin embargo, los navegadores no hacen un buen trabajo con esto. Por lo tanto, incluso aunque un 
      JSP ha indicado la codificación de caracteres, es probablemente una buena práctica "restablecer" la codificación de 
      caracteres de la petición, usando, por ejemplo:
    </p>
    <p>
      <code>request.setCharacterEncoding("UTF-8");</code>
    </p>
    <p>
      Un <code>Controller</code> podría realizar esto para cada petición entrante, quizás usando un valor configurado en 
      <code>web.xml</code>. Se debe llamar este método al principio del procesamiento, antes de que se recuperen los valores de los 
      parámetros.
    </p>
    <p>
      Como referencia, la IPA de Servlet tiene estos métodos para administrar la codificación de caracteres:
    </p>
    <ul>
      <li>
        <code>ServletRequest.<a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getCharacterEncoding--">getCharacterEncoding</a></code>
      </li>
      <li>
        <code>ServletRequest.<a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#setCharacterEncoding-java.lang.String-">setCharacterEncoding</a></code>
      </li>
      <li>
        <code>ServletResponse.<a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletResponse.html#setLocale-java.util.Locale-">setLocale</a></code>
      </li>
      <li>
        <code>ServletResponse.<a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletResponse.html#setContentType-java.lang.String-">setContentType</a></code>
      </li>
    </ul>
    <b>Base de datos</b>
    <br />
    La base de datos tiene una codificación de caracteres también. Por favor consulte la documentación de la base de datos para más 
    información.
    <p>
      <b>La codificación declarada debe coincidir con la codificación real</b> <br />
      Es importante tener en cuenta que tales configuraciones de codificación no <em>definen</em> la codificación como tal, en el 
      sentido de que no definen o cambian cómo se representa el texto realmente como bytes. <b>Más bien, actúan simplemente como un 
        <em>consejo</em> para las herramientas, indicando cuál <em>se supone</em> es la codificación.</b> Por supuesto, es un error 
        aconsejar a una herramienta que la codificación es <em>X</em> cuando es en realidad <em>Y</em>.
    </p>
    <p>
      Un buen ejemplo de esto es la codificación de las Java Server Pages. Si se salva un JSP como ISO-8859-1, y su directiva 
      <code>page</code>  indica que su codificación es UTF-8, entonces eso es un error. Tales errores son muy fáciles de cometer, 
      ya que no se detecta el error hasta que ya es tarde, cuando ve caracteres extraños en su página web. Por lo tanto, 
      <b>necesita prestar atención a qué codificación está en vigor cuando guarda archivos en su sistema.</b> Desafortunadamente, 
      muchos sistemas no están configurados para usar UTF-8 como predeterminado.<br />
    </p>
    <p></p>
    <div class="topic-section" id="see-also-title">Vea También:</div>
    <div id="see-also" class="main-body">
      <a href="..\practicascomunes\practicascomunes_257.html">Tenga cuidado de las Marcas de Orden de Byte</a><br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>