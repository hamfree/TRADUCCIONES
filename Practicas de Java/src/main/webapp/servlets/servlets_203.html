<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Tenga cuidado de los botones de envío multilenguaje</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Búsqueda" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Tenga cuidado de los botones de envío multilenguaje</div>
    <br />
    Cuando los controles múltiples de <code>SUBMIT</code> se usan en un formulario HTML, es natural usar este estilo:
    <p>
      <code>
        &lt;input type='submit' name='operacion' value='Agregar'&gt; <br />&lt;input
        type='submit' name='operacion' value='Cambiar'&gt; <br />&lt;input
        type='submit' name='operacion' value='Eliminar'&gt;
      </code>
    </p>
    <p>
      Aquí, el servidor detecta la operación deseada examinando simplemente el valor del parámetro <code>operacion</code>.
    </p>
    <p>
      Sin embargo, este estilo no funciona bien cuando la aplicación es multilingüe, ya que el <code>valor</code> del atributo 
      varía de acuerdo al idioma.
    </p>
    <p>
      Una solución sencilla para este problema es utilizar un nombre diferente para cada control <code>SUBMIT</code>:
    </p>
    <p>
      <code>
        &lt;input type='submit' name='operacion_Agregar' value='Agregar'&gt;<br />
        &lt;input type='submit' name='operacion_Cambiar'
        value='Cambiar'&gt; <br />
        &lt;input type='submit' name='operacion_Eliminar' value='Eliminar'&gt;
      </code>
    </p>
    <p>
      Aquí, el servidor detectará la operación deseada buscando la <i>presencia</i> de ciertos nombres de parámetro, y no 
      examinando el valor de un único parámetro <code>operacion</code>.
    </p>
    <p>
      Una aplicación podría definir una convención de nombrado para facilitar la extracción de la operación deseada. Aquí tiene un 
      método de ejemplo donde los parámetros de la petición cuyos nombres empiezan con <code>operacion_</code> son tratados como 
      indicadores de operación. Este método puede ser colocado en una clase base de acción, o en una clase de utilidad:<br />
    </p>
    <pre>
<span class="keyword">import</span> java.util.*;
<span class="keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="keyword">import</span> java.util.logging.*;

<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> SubmitOperation {

 <span class="comment">/**
  * Determina la operación deseada.
  *
  * Devuelve el nombre del parámetro único enviado operacion_X, sin 
  * el prefijo 'operacion_'. Por ejemplo, si un parámetro único llamado 
  * operacion_Agregar está presente en aRequest, entonces este método devolverá
  * 'Agregar'.
  *
  * Este método depende de dos convenciones:
  * &lt;ul&gt;
  * &lt;li&gt;una convención de nombrado, donde los nombres de los parámetros de petición que 
  * denotan una operación están en el estilo: 'operacion_bla', 'operacion_XYZ',  
  * y así. Es decir, el nombre del parámetro empieza con 'operacion_'
  * 
  * &lt;li&gt;como máximo, un parámetro operación_X puede aparecer en aRequest
  * (puede que no tenga ninguno; en ese caso, este método devolverá nulo).
  * &lt;/ul&gt;
  *
  * Este método se necesita solo cuando la aplicación es plurilingüe, y 
  * los múltiples botones SUBMIT aparecen en una única página.
  */</span>
  String getOperation(HttpServletRequest aRequest){
    String result = <span class="keyword">null</span>;
    String OPERATION = <span class="literal">"operation_"</span>;
    List&lt;String&gt; operationParamNames = <span class="keyword">new</span> ArrayList&lt;&gt;();
    Enumeration&lt;String&gt; allParamNamesEnum = aRequest.getParameterNames();
    <span class="keyword">while</span> (allParamNamesEnum.hasMoreElements()) {
      String paramName = allParamNamesEnum.nextElement();
      <span class="keyword">if</span> (paramName.startsWith(OPERATION)) {
        operationParamNames.add(paramName);
      }
    }
    <span class="keyword">if</span> (! operationParamNames.isEmpty()) {
      <span class="keyword">if</span> (operationParamNames.size() &gt; <span
            class="literal">1</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(
          <span class="literal">"Esperando como máximo un parámetro que comience con '"</span> + OPERATION +
          <span class="literal">"'. Encontrado realmente : "</span> + operationParamNames
        );
      }
      String operationParamName = operationParamNames.get(<span
            class="literal">0</span>);
      result = operationParamName.substring(OPERATION.length());
    }
    fLogger.fine(<span class="literal">"Operación : "</span> + result);
    <span class="keyword">return</span> result;
  }

  <span class="comment">// PRIVADO
</span>  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> Logger fLogger = Logger.getLogger(
    SubmitOperation.<span class="keyword">class</span>.getName()
  );
} 
    </pre>
    <br />
    <p></p>
    <p></p>
    <div class="topic-section" id="see-also-title">Vea También:</div>
    <div id="see-also" class="main-body">
      <a href="..\servlets\servlets_218.html">Entender los detalles de las etiquetas FORM</a><br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>