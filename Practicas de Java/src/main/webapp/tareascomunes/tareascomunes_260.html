<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Abrir un fichero en un directorio nativo</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Búsqueda" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Abrir un fichero en un directorio nativo</div>
    <br />
    Un directorio que contiene archivos <code>.class</code> Java puede también contener otra clase de archivos también. Si un 
    archivo de texto o un archivo binario es usado solo por un único paquete, entonces el hogar más natural para este es a menudo el 
    mismo directorio/paquete que lo usa. Esto tenderá a incrementar la modularización y coherencia. (Vea el tema 
    <a href="../practicascomunes/practicascomunes_205.html">Empaquete por funcionalidad, no por capa</a> también).
    <p>
      Dichso archivos podrían ser utilizados para:
    </p>
    <ul>
      <li>información de configuración</li>
      <li>imágenes o iconos de la pantalla de presentación</li>
      <li>sentencias SQL</li>
      <li>documentación o archivos de ayuda</li>
    </ul>
    <p>
      En tiempo de ejecució, la forma más conveniente de acceder a tales archivos es con estos métodos:
    </p>
    <ul>
      <li>
        <code>
          Class.<a href="https://docs.oracle.com/javase/10/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)">getResoureAsStream</a></code>
      </li>
      <li>
        <code>
          Class.<a href="https://docs.oracle.com/javase/10/docs/api/java/lang/Class.html#getResource(java.lang.String)">getResource</a></code>
      </li>
    </ul>
    Estos métodos utilizan el cargador de clases actual para encontrar archivos, por lo que tienen la mayor flexibilidad. El 
    siguiente ejemplo se lee en un archivo de texto ubicado en el mismo directorio que la clase en ejecución. Tenga en cuenta que el 
    código hace referencia al archivo de la manera más simple posible, utilizando su nombre de archivo simple, sin ninguna 
    calificación. Siempre que el archivo de texto conserve el mismo nombre y esté en el mismo directorio que la clase, este código 
    funcionará.
    <br />
    <pre>
<span class="keyword">import</span> java.io.BufferedReader;
<span class="keyword">import</span> java.io.IOException;
<span class="keyword">import</span> java.io.InputStream;
<span class="keyword">import</span> java.io.InputStreamReader;
<span class="keyword">import</span> java.net.URI;
<span class="keyword">import</span> java.net.URISyntaxException;
<span class="keyword">import</span> java.net.URL;
<span class="keyword">import</span> java.nio.charset.Charset;
<span class="keyword">import</span> java.nio.charset.StandardCharsets;
<span class="keyword">import</span> java.nio.file.Files;
<span class="keyword">import</span> java.nio.file.Path;
<span class="keyword">import</span> java.nio.file.Paths;
<span class="keyword">import</span> java.util.List;
<span class="keyword">import</span> java.util.Objects;
<span class="keyword">import</span> java.util.Scanner;

<span class="comment">/** Lea un archivo de texto que esté en el mismo directorio que este archivo (.class). */</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> ReadNeighbouringTextFile {

  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">void</span> main(String... aArgs) <span
            class="keyword">throws</span> IOException {
    log(<span class="literal">"Classpath: "</span> + System.getProperty(<span
            class="literal">"java.class.path"</span>));
    log(<span class="literal">"user.dir: "</span> + System.getProperty(<span
            class="literal">"user.dir"</span>));
    ReadNeighbouringTextFile read = <span class="keyword">new</span> ReadNeighbouringTextFile();
    read.readFileViaStream();
    read.readFileasViaUrl();
    <span class="comment">//read.readFileViaPath();
</span>  }

  <span class="keyword">void</span> readFileViaStream() <span
            class="keyword">throws</span> IOException {
    log(<span class="literal">"Via stream..."</span>);
    <span class="keyword">try</span> (
      <span class="comment">//usa el mecanismo de búsqueda del cargador de clases:
</span>      InputStream input = <span class="keyword">this</span>.getClass().getResourceAsStream(<span
            class="literal">"test.txt"</span>);
      InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(input, ENCODING);
      BufferedReader reader = <span class="keyword">new</span> BufferedReader(isr);
    ){
      String line = <span class="keyword">null</span>;
      <span class="keyword">while</span> ((line = reader.readLine()) != <span
            class="keyword">null</span>) {
        <span class="comment">//procesa la línea de alguna manera
</span>        log(line);
      }      
    }
  }
  
  <span class="keyword">void</span> readFileasViaUrl() <span
            class="keyword">throws</span> IOException{
    log(<span class="literal">"Via URL..."</span>);
    <span class="comment">//esto no funciona en un contexto de Java Web Start
</span>    <span class="comment">//la URL apunta al servidor; no es local
</span>    <span class="comment">//usa el mecanismo de búsqueda del cargador de clases:
</span>    URL url = <span class="keyword">this</span>.getClass().getResource(<span
            class="literal">"test.txt"</span>);
    URI uri = <span class="keyword">null</span>;
    <span class="keyword">try</span> {
      uri = url.toURI();
    }
    <span class="keyword">catch</span>(URISyntaxException ex){
      <span class="comment">//en la práctica esto será muy raro
</span>      ex.printStackTrace();
    }
    Path path = Paths.get(uri);    
    
    <span class="comment">//ahora que tiene la ruta, es solo el procesamiento normal de archivos de texto
</span>    
    <span class="comment">//esto obtiene todo el contenido a la vez:
</span>    List&lt;String&gt; lines = Files.readAllLines(path, ENCODING);
    log(<span class="literal">"Número de líneas en el archivo: "</span>  + lines.size());
    
    <span class="comment">//O, use este estilo, para procesar cada línea una a la vez
</span>    <span class="keyword">try</span> (Scanner scanner =  <span
            class="keyword">new</span> Scanner(path, ENCODING.name())){
      <span class="keyword">while</span> (scanner.hasNextLine()){
        <span class="comment">//procesa la línea de alguna manera
</span>        log(scanner.nextLine());
      }      
    }    
  }
  
  <span class="comment">/**
   Aquí, los objetos de ruta relativa no conocen el sistema de archivos de la misma manera que lo hace un cargador de clases. Solo 
   conoce el directorio 'user.dir', el directorio base del tiempo de ejecución; este estilo es mucho menos flexible y no se 
   recomienda.
  */</span>
  <span class="keyword">void</span> readFileViaPath() <span
            class="keyword">throws</span> IOException{
    log(<span class="literal">"Via path (no recomendado)..."</span>);
    <span class="comment">//Succeeds: absolute reference
</span>    <span class="comment">//Path path = Paths.get("C:/\myproj\\test-api\\bin\\test.txt"); 
</span>    
    <span class="comment">/*
    * Referencia relativa.
    * 
    * Falla cuando el archivo está al lado del archivo .class.
    * Tiene éxito solo cuando el archivo test.txt está en el directorio 'user.dir'.
    * 
    * Esto significa que las rutas relativas no usan la ruta de clases; estas
    * solo usan la propiedad del Sistema 'user.dir'.
    */</span>
    Path path = Paths.get(<span class="literal">"test.txt"</span>); 
    
    log(<span class="literal">"Ruta: "</span> + path);
    log(<span class="literal">"¿Es absoluta?: "</span> + path.isAbsolute());
    List&lt;String&gt; lines = Files.readAllLines(path, ENCODING);
    log(<span class="literal">"Número de líneas en el archivo: "</span>  + lines.size());
  }
  
  <span class="keyword">private</span> <span class="keyword">final</span> <span
            class="keyword">static</span> Charset ENCODING = StandardCharsets.UTF_8;
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> log(Object aMsg){
    System.out.println(Objects.toString(aMsg));
  }
} 
    </pre>
    <p></p>
    <div class="topic-section" id="see-also-title">
      Vea También :
    </div>
    <div id="see-also" class="main-body">
      <a href="../entradasalida/entradasalida_42.html">Leer y escribir ficheros de texto</a><br /> 
      <a href="../practicascomunes/practicascomunes_205.html">Empaquete por funcionalidad, no por capa</a><br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>