<!DOCTYPE html>
<html lang="es">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description"
    content="Prácticas y técnicas de programación en Java.">
<meta name="keywords"
    content="java,programación java,Prácticas de Java,idioma 
        java,estilo java,patrones de diseño java,convenciones de codigo java">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prácticas de Java-&gt;Abrir un fichero en un directorio
    nativo</title>
<link id="stylesheet" rel="stylesheet" type="text/css"
    href="../css/stylesheet9.css" media="all">
<link rel="icon" type="image/png" href="../img/favicon.png">
</head>
<body>
    <nav class="menu-bar" id="menu-bar">
        <a href="../index.html" title="Table of Contents"
            style="float: left;">Inicio</a> &nbsp;&nbsp;
        <form method="GET" action="https://www.google.com/search"
            class="search-form" style="float: right;">
            <input name="q" size="15" maxlength="255" placeholder=""
                type="text"> <input name="btnG" value="Search"
                type="submit"> <input name="sitesearch"
                value="www.javapractices.com" type="hidden">
        </form>
    </nav>
    <div class="page-title">Abrir un fichero en un directorio
        nativo</div>
    <br>A directory containing Java
    <code>.class</code>
    files can also contain any other kind of file as well. If a text
    file or a binary file is only used by a single package, then the
    most natural home for it is often the very same directory/package
    that uses it. This will tend to increase modularization and
    coherence. (See the
    <a href="http://www.javapractices.com/topic/TopicAction.do?Id=205">package-by-feature</a>
    topic as well.)
    <p>Such files might be used for:</p>
    <ul>
        <li>configuration information</li>
        <li>splash screen images or icons</li>
        <li>SQL statements</li>
        <li>documentation or help files</li>
    </ul>
    <p>At runtime, the most convenient way of accessing such files
        is with these methods:</p>
    <ul>
        <li><code>
                Class.<a
                    href="https://docs.oracle.com/javase/10/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String)">getResoureAsStream</a>
            </code></li>
        <li><code>
                Class.<a
                    href="https://docs.oracle.com/javase/10/docs/api/java/lang/Class.html#getResource(java.lang.String)">getResource</a>
            </code></li>
    </ul>
    These methods use the current classloader in order to find files, so
    they have the most flexibility. The following example reads in a
    text file placed in the same directory as the running class. Note
    that the code references the file in the simplest possible way,
    using its simple file name, without any qualification. As long as
    the text file retains the same name, and is in the same directory as
    the class, this code will work.
    <br>
    <pre>
		<span class="keyword">import</span> java.io.BufferedReader;
<span class="keyword">import</span> java.io.IOException;
<span class="keyword">import</span> java.io.InputStream;
<span class="keyword">import</span> java.io.InputStreamReader;
<span class="keyword">import</span> java.net.URI;
<span class="keyword">import</span> java.net.URISyntaxException;
<span class="keyword">import</span> java.net.URL;
<span class="keyword">import</span> java.nio.charset.Charset;
<span class="keyword">import</span> java.nio.charset.StandardCharsets;
<span class="keyword">import</span> java.nio.file.Files;
<span class="keyword">import</span> java.nio.file.Path;
<span class="keyword">import</span> java.nio.file.Paths;
<span class="keyword">import</span> java.util.List;
<span class="keyword">import</span> java.util.Objects;
<span class="keyword">import</span> java.util.Scanner;

<span class="comment">/** Read a text file that's in the same directory as this (.class) file. */</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> ReadNeighbouringTextFile {

  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">void</span> main(String... aArgs) <span
            class="keyword">throws</span> IOException {
    log(<span class="literal">"Classpath: "</span> + System.getProperty(<span
            class="literal">"java.class.path"</span>));
    log(<span class="literal">"user.dir: "</span> + System.getProperty(<span
            class="literal">"user.dir"</span>));
    ReadNeighbouringTextFile read = <span class="keyword">new</span> ReadNeighbouringTextFile();
    read.readFileViaStream();
    read.readFileasViaUrl();
    <span class="comment">//read.readFileViaPath();
</span>  }

  <span class="keyword">void</span> readFileViaStream() <span
            class="keyword">throws</span> IOException {
    log(<span class="literal">"Via stream..."</span>);
    <span class="keyword">try</span> (
      <span class="comment">//uses the class loader search mechanism:
</span>      InputStream input = <span class="keyword">this</span>.getClass().getResourceAsStream(<span
            class="literal">"test.txt"</span>);
      InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(input, ENCODING);
      BufferedReader reader = <span class="keyword">new</span> BufferedReader(isr);
    ){
      String line = <span class="keyword">null</span>;
      <span class="keyword">while</span> ((line = reader.readLine()) != <span
            class="keyword">null</span>) {
        <span class="comment">//process the line in some way
</span>        log(line);
      }      
    }
  }
  
  <span class="keyword">void</span> readFileasViaUrl() <span
            class="keyword">throws</span> IOException{
    log(<span class="literal">"Via URL..."</span>);
    <span class="comment">//this doesn't work in a Java Web Start context
</span>    <span class="comment">//the URL points back to the server; it's not local
</span>    <span class="comment">//uses the class loader search mechanism:
</span>    URL url = <span class="keyword">this</span>.getClass().getResource(<span
            class="literal">"test.txt"</span>);
    URI uri = <span class="keyword">null</span>;
    <span class="keyword">try</span> {
      uri = url.toURI();
    }
    <span class="keyword">catch</span>(URISyntaxException ex){
      <span class="comment">//in practice this will be very rare
</span>      ex.printStackTrace();
    }
    Path path = Paths.get(uri);    
    
    <span class="comment">//now that you have the path, it's just regular text file processing
</span>    
    <span class="comment">//this gets the whole content at once:
</span>    List&lt;String&gt; lines = Files.readAllLines(path, ENCODING);
    log(<span class="literal">"Number of lines in the file: "</span>  + lines.size());
    
    <span class="comment">//OR, use this style, to process each line one at a time
</span>    <span class="keyword">try</span> (Scanner scanner =  <span
            class="keyword">new</span> Scanner(path, ENCODING.name())){
      <span class="keyword">while</span> (scanner.hasNextLine()){
        <span class="comment">//process each line in some way
</span>        log(scanner.nextLine());
      }      
    }    
  }
  
  <span class="comment">/**
   Here, relative Path objects don't know about the file system in the same way that a 
   classloader does. It only knows about the 'user.dir' directory, the base 
   directory of the runtime; this style is much less flexible, and is not 
   recommended.
  */</span>
  <span class="keyword">void</span> readFileViaPath() <span
            class="keyword">throws</span> IOException{
    log(<span class="literal">"Via path (not recommended)..."</span>);
    <span class="comment">//Succeeds: absolute reference
</span>    <span class="comment">//Path path = Paths.get("C:\\myproj\\test-api\\bin\\test.txt"); 
</span>    
    <span class="comment">/*
    * Relative reference.
    * 
    * Fails when the file is beside the .class file.
    * Succeeds only when the test.txt file is in the 'user.dir' directory.
    * 
    * This means that relative paths don't use the classpath; they 
    * only use the 'user.dir' System property.
    */</span>
    Path path = Paths.get(<span class="literal">"test.txt"</span>); 
    
    log(<span class="literal">"Path: "</span> + path);
    log(<span class="literal">"Absolute: "</span> + path.isAbsolute());
    List&lt;String&gt; lines = Files.readAllLines(path, ENCODING);
    log(<span class="literal">"Number of lines in the file: "</span>  + lines.size());
  }
  
  <span class="keyword">private</span> <span class="keyword">final</span> <span
            class="keyword">static</span> Charset ENCODING = StandardCharsets.UTF_8;
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> log(Object aMsg){
    System.out.println(Objects.toString(aMsg));
  }
} 
</pre>
    <p></p>
    <div class="topic-section" id="see-also-title">See Also :</div>
    <div id="see-also" class="main-body">
        <a href="..\entradasalida\entradasalida_42.html">Leer y
            escribir ficheros de texto</a> <br> <a
            href="..\practicascomunes\practicascomunes_205.html">Empaquete
            por funcionalidad, no por capa</a> <br>
    </div>
    <footer id="footer" class="legalese">
        <span id="app_name">Prácticas de Java</span> <span
            id="app_version_number">3.001</span><br> © <span
            id="copyright">2018 Hirondelle Systems</span><br> <a
            href="http://www.javapractices.com/source/SourceAction.do">Código
            Fuente</a> | <a href="mailto:webmaster@javapractices.com"
            rel="author">Contacto</a> | <a
            href="http://creativecommons.org/licenses/by-nc-sa/1.0/"
            rel="license">Licencia</a> | <a
            href="http://www.javapractices.com/apps/cjp.rss"
            rel="alternate" type="application/rss+xml">RSS</a>
        <!-- ukey="2AC36CD2" -->
        <!-- ckey="16DF3D87" -->
        <br> Los trozos de código individual tienen una <a
            href="http://www.javapractices.com/LICENSE.txt"
            rel="license">licencia BSD</a><br> Sobre 1,000,000 de
        IPs únicas el último año<br> Última actualización
        <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time>
        <br> - In Memoriam : Bill Dirani -
    </footer>
</body>
</html>