<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Compare y ordene Strings</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Search" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Compare y ordene Strings</div>
    <br /> 
    Comparar y ordenar Stringg es un poco complicado, y debe hacerse con cierto cuidado. Esto es particularmente verdad cuando el 
    texto se visualiza al usuario final, o cuando se trabaja con texto traducido.
    <p>
      <span class="highlight">Hay <em>dos</em> formas fundamentalmente diferentes de comparar cadenas</span>:
    </p>
    <ul>
      <li>
        ordenación simple <em>Unicode</em> - usada por 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/lang/String.html">String</a></code>
      </li>
      <li>
        ordenación <em>con características regionales</em> (la clase esperada por un usuario final) - usada por 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/text/Collator.html">Collator</a></code>
      </li>
    </ul>
    Esto causa problemas, porque:
    <ul>
      <li>solo hay discrepancias ocasionales entre los dos estilos</li>
      <li>es fácil olvidarse de aplicar la distinción, cuando sea necesario</li>
    </ul>
    Métodos de <code>String</code> de uso común, como:
    <ul>
      <li>
        <code>
          String.<a href="https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#equalsIgnoreCase(java.lang.String)">equalsIgnoreCase</a>(String)
        </code>
      </li>
      <li>
        <code>
          String.<a href="https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#compareTo(java.lang.String)">compareTo</a>(String)
        </code>
      </li>
    </ul>
    pueden ser peligrosos usarlos, dependiendo del contexto. La razón es que los programadores tienden a aplicarlos a tareas para 
    las que realmente no están destinados, simplemente por hábito.
    <p>
      <span class="highlight">La diferencia fundamental es que la comparación <em>con características regionales</em> depende de 
        <code>Locale</code>, mientras que <code>String</code> es en gran parte <em>ignorante</em> de <code>Locale</code>.</span> 
      Aquí hay una cita de <em>El Lenguaje de Programación Java</em> de Arnold, Gosling, y Holmes:
    </p>
    <p>
      <em>
        "Debe tener en cuenta que los problemas de internacionalización y localización de las cadenas Unicode completas no se 
        tratan con los métodos [String]. Por ejemplo, cuando se comparan dos cadenas para determinar cuál es 'mayor', los caracteres
        de las cadenas se comparan numéricamente por su Unicode valores, no por su noción localizada de orden".
      </em>
    </p>
    <p>
      La única manera robusta de hacer comparación <em>con características regionales</em> u ordenación de <code>String</code>s, en 
      la manera esperada por el usuario final, es usar un 
      <code><a href="https://docs.oracle.com/javase/10/docs/api/java/text/Collator.html">Collator</a></code>, no los métodos de la 
      clase <code>String</code>.
    </p>
    <p>
      <b>Ejemplo 1 - Ordenación Unicode</b>
    </p>
    <p>
      Aquí tiene un ejemplo de la ordenación simple Unicde de Strings. Tenga en cuenta el uso de 
      <code><a href="https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER">
          String.CASE_INSENSITIVE_ORDER</a></code>
      , una implementación de 
      <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/Comparator.html">Comparator</a></code>.
    </p>
    <p>
      Recuerde - Los siguientes elementos son importantes con <em>cualquier</em> forma de comparación u ordenación:
    </p>
    <ul>
      <li>
        las interfaces <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/Comparator.html">Comparator</a></code> y 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/lang/Comparable.html">Comparable</a></code>
      </li>
      <li>
        los diversos métodos <code>sort</code> de 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/Collections.html">Collections</a></code> y 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/Arrays.html">Arrays</a></code>
      </li>
    </ul>
    <br />
    <pre>
<span class="keyword">import</span> java.util.*;

<span class="comment">/** Ordenando Strings en orden Unicode. */</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> SortStringsNoLocale {

  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">void</span> main(String... aArgs){
    List&lt;String&gt; insects = Arrays.asList(<span class="literal">"Avispa"</span>, <span
            class="literal">"Hormiga"</span>, <span class="literal">""</span>, <span
            class="literal">"Abeja"</span>);
    log(<span class="literal">"Original:"</span>);
    log(insects);
    log(<span class="literal">"Ordenado:"</span>);
    sortList(insects);
    log(insects);
    log(<span class="literal">""</span>);

    Map&lt;String,String&gt; capitals = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();
    capitals.put(<span class="literal">"Finlandia"</span>, <span
            class="literal">"Helsinki"</span>);
    capitals.put(<span class="literal">"Estados Unidos de América"</span>, <span
            class="literal">"Washington"</span>);
    capitals.put(<span class="literal">"Mongolia"</span>, <span
            class="literal">"Ulan Bator"</span>);
    capitals.put(<span class="literal">"Canadá"</span>, <span
            class="literal">"Ottawa"</span>);
    log(<span class="literal">"Original:"</span>);
    log(capitals);
    log(<span class="literal">"Ordenado:"</span>);
    log(sortMapByKey(capitals));
  }

  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> sortList(List&lt;String&gt; aItems){
    Collections.sort(aItems, String.CASE_INSENSITIVE_ORDER);
  }

  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> log(Object aObject){
    System.out.println(Objects.toString(aObject)); 
  }

  <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; sortMapByKey(Map&lt;String, String&gt; aItems){
    TreeMap&lt;String, String&gt; result = 
      <span class="keyword">new</span> TreeMap&lt;&gt;(String.CASE_INSENSITIVE_ORDER)
    ;
    result.putAll(aItems);
    <span class="keyword">return</span> result;
  }
} 
    </pre>
    La clases genera lo siguiente:
    <pre>
Original:
[Avispa, Hormiga, , Abeja]
Ordenado:
[, Abeja, Avispa, Hormiga]

Original:
{Finlandia=Helsinki, Estados Unidos de América=Washington, Mongolia=Ulan Bator, Canadá=Ottawa}
Ordenado:
{Canadá=Ottawa, Estados Unidos de América=Washington, Finlandia=Helsinki, Mongolia=Ulan Bator}
    </pre>
    <p>
      <b>Ejemplo 2 - Ordenación con características regionales</b>
    </p>
    <p>
      Aquí tiene un ejemplo de usar un 
      <code><a href="https://docs.oracle.com/javase/10/docs/api/java/text/Collator.html">Collator</a></code> para realizar una 
      ordenación <em>con configuración regional</em> y comparación de Strings. Tenga en cuenta la importancia de la 'fuerza' de 
      <code>Collator</code> para ajustar la comparación. Para ignorar las mayúsculas y minúsculas, por ejemplo, se puede usar la 
      fuerza <code> PRIMARY </code> o <code> SECONDARY </code>.
    </p>
    <pre>
<span class="keyword">package</span> hirondelle.jp.util;

<span class="keyword">import</span> java.text.Collator;
<span class="keyword">import</span> java.util.*;

<span class="comment">/** 
 Usa Collator para ordenar y comparar texto..
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> SimpleCollator {

  <span class="comment">/** Ejemplo simple para ejercitar el código.  */</span>
  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">void</span> main (String... aArguments) {
    <span class="comment">//Estos datos se basan en un ejemplo en las bibliotecas de clases de Java,, 
</span>    <span class="comment">//por Chan, Lee y Kramer
</span>    List&lt;String&gt; words = Arrays.asList(
      <span class="literal">"Äbc"</span>, <span class="literal">"äbc"</span>, <span
            class="literal">"Àbc"</span>, <span class="literal">"àbc"</span>, <span
            class="literal">"Abc"</span>, <span class="literal">"abc"</span>, <span
            class="literal">"ABC"</span>
    );
    
    log(<span class="literal">"Diferentes valores de 'Intensidad de clasificación' dan diferentes resultados de clasificación"</span>);
    log(words + <span class="literal">" - Datos originales"</span>);
    sort(words, Strength.Primary);
    sort(words, Strength.Secondary);
    sort(words, Strength.Tertiary);
    
    log(EMPTY_LINE);
    log(<span class="literal">"El caso se activa solo con la fuerza de colación terciaria: "</span>);
    List&lt;String&gt; wordsForCase = Arrays.asList(<span
            class="literal">"cache"</span>, <span class="literal">"CACHE"</span>, <span
            class="literal">"Cache"</span>);
    log(wordsForCase + <span class="literal">" - Datos originales"</span>);
    sort(wordsForCase, Strength.Primary);
    sort(wordsForCase, Strength.Secondary);
    sort(wordsForCase, Strength.Tertiary);
    
    log(EMPTY_LINE);
    log(<span class="literal">"Los acentos se activan con la fuerza de colación secundaria."</span>);
    log(<span class="literal">"Comparar sin acentos presentes: "</span>);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ABC"</span>, Strength.Primary);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ABC"</span>, Strength.Secondary);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ABC"</span>, Strength.Tertiary);
    
    log(EMPTY_LINE);
    log(<span class="literal">"Comparar con los acentos presentes: "</span>);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ÀBC"</span>, Strength.Primary);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ÀBC"</span>, Strength.Secondary);
    compare(<span class="literal">"abc"</span>, <span class="literal">"ÀBC"</span>, Strength.Tertiary);
  }

  <span class="comment">// PRIVADO //
</span>  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String EMPTY_LINE = <span
            class="literal">""</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> Locale TEST_LOCALE = Locale.FRANCE;
  
  <span class="comment">/** Transforma algunas constantes 'int' de Collator en una enumeración equivalente. */</span>
  <span class="keyword">private</span> <span class="keyword">enum</span> Strength {
    Primary(Collator.PRIMARY), <span class="comment">//carácter base
</span>    Secondary(Collator.SECONDARY), <span class="comment">//carácter base + acento
</span>    Tertiary(Collator.TERTIARY), <span class="comment">// carácter base + acento + distinguir mayúsculas y minúsculas
</span>    Identical(Collator.IDENTICAL); <span class="comment">//carácter base + acento + distinguir mayúsculas y minúsculas + bits
</span>    
    <span class="keyword">int</span> getStrength() { <span
            class="keyword">return</span> fStrength; }
    
    <span class="keyword">private</span> <span class="keyword">int</span> fStrength;
    <span class="keyword">private</span> Strength(<span class="keyword">int</span> aStrength){
      fStrength = aStrength;
    }
  }
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> sort(List&lt;String&gt; aWords, Strength aStrength){
    Collator collator = Collator.getInstance(TEST_LOCALE);
    collator.setStrength(aStrength.getStrength());
    Collections.sort(aWords, collator);
    log(aWords.toString() + <span class="literal">" "</span> + aStrength);
  }
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> compare(String aThis, String aThat, Strength aStrength){
    Collator collator = Collator.getInstance(TEST_LOCALE);
    collator.setStrength(aStrength.getStrength());
    <span class="keyword">int</span> comparison = collator.compare(aThis, aThat);
    <span class="keyword">if</span> ( comparison == <span
            class="literal">0</span> ) {
      log(<span class="literal">"Collator los ve como lo mismo : "</span> + aThis + <span
            class="literal">", "</span> + aThat + <span class="literal">" - "</span> + aStrength);
    }
    <span class="keyword">else</span> {
      log(<span class="literal">"Collator los ve como DIFERENTES  "</span> + aThis + <span
            class="literal">", "</span> + aThat + <span class="literal">" - "</span> + aStrength);
    }
  }
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">void</span> log(String aMessage){
    System.out.println(aMessage);
  }
}  
    </pre>
    Esta clase genera lo siguiente:
    <pre>
Diferentes valores de 'Intensidad de clasificación' dan diferentes resultados de clasificación: 
[Äbc, äbc, Àbc, àbc, Abc, abc, ABC] - Datos originales
[Äbc, äbc, Àbc, àbc, Abc, abc, ABC] Primary
[Abc, abc, ABC, Àbc, àbc, Äbc, äbc] Secondary
[abc, Abc, ABC, àbc, Àbc, äbc, Äbc] Tertiary

El caso se activa solo con la fuerza de colación terciaria:
[cache, CACHE, Cache] - Datos originales
[cache, CACHE, Cache] Primary
[cache, CACHE, Cache] Secondary
[cache, Cache, CACHE] Tertiary

Los acentos se activan con la fuerza de colación secundaria.
Comparar sin acentos presentes: 
Collator los ve como lo mismo : abc, ABC - Primary
Collator los ve como lo mismo : abc, ABC - Secondary
Collator los ve como DIFERENTES  : abc, ABC - Tertiary

Comparar con los acentos presentes: 
Collator los ve como lo mismo : abc, ÀBC - Primary
Collator los ve como DIFERENTES  : abc, ÀBC - Secondary
Collator los ve como DIFERENTES  : abc, ÀBC - Tertiary
    </pre>
    <br />
    <p></p>
    <div class="topic-section" id="see-also-title">
      Vea También :
    </div>
    <div id="see-also" class="main-body">
      <a href="..\objetos\objects_10.html">Implementar compareTo</a> <br />
      <a href="..\tareascomunes\tareascomunes_18.html">Determinar si las Strings son iguales</a> <br /> 
      <a href="..\colecciones\colecciones_65.html">Elegir la Colección adecuada</a> <br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>