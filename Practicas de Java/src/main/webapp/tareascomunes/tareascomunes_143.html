<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Mensajes de trazado</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input name="q" size="15" maxlength="255" placeholder="" type="text" />
        <input name="btnG" value="Search" type="submit" /> 
        <input name="sitesearch" value="www.javapractices.com" type="hidden" />
      </form>
    </nav>
    <div class="page-title">Mensajes de trazado</div>
    <br />
    La función de registro de Java (consulte la
    <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html">introducción</a> y la 
    <a href="https://docs.oracle.com/javase/10/docs/api/java/util/logging/package-summary.html">IPA</a>) de Oracle que tiene dos 
    partes: un archivo de configuración, y una IPA para usar servicios de registro. Es una buena herramienta, y es perfectamente 
    adecuado para unas necesidades de regisgro simples y moderados. (Para las necesidades de registro <em>complejas</em>, podría 
    considerar <a href="https://logging.apache.org/">log4j</a> o alguna herramienta similar como una alternativa).
    <p>
      Las entradas de registro se pueden enviar a estos destinos, ya sea como texto simple o como XML:
    </p>
    <ul>
      <li>la consola</li>
      <li>un archivo</li>
      <li>un flujo</li>
      <li>memoria</li>
      <li>un socket TCP en un host remoto</li>
    </ul>
    La clase <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/logging/Level.html">Level</a></code> define siete 
    niveles de detallado de registro:
    <ul>
      <li><code>FINEST, FINER, FINE, CONFIG, INFO, WARNING, SEVERE</code></li>
      <li><code>ALL</code> y <code>OFF</code> son valores definidos también</li>
    </ul>
    Aquí tiene una forma de usar este <code>Level</code>s en el código, que puede ser modificado como se desee:
    <ul>
      <li>al iniciar, use <code>CONFIG</code> para registrar los parámetros de configuración</li>
      <li>durante la operación normal, use <code>INFO</code>para registrar información de "latidos" de alto nivel</li>
      <li>cuando ocurren errores o condiciones críticas, use <code>SEVERE</code></li>
      <li>
        la información de depuración puede ser predeterminada <code>FINE</code>, con <code>FINER</code> y <code>FINEST</code> usados 
        ocasionalmente, según gusto.
      </li>
    </ul>
    Hay flexibilidad en cómo se pueden cambiar los niveles de registro en tiempo de ejecución, sin la necesidad de reiniciar:
    <ul>
      <li>
        simplemente cambie el archivo de configuración y llame a 
        <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/logging/LogManager.html#readConfiguration()">
            LogManager.readConfiguration</a></code>.
      </li>
      <li>
        o, cambie el nivel en el cuerpo de su código, usando la IPA de registro; por ejemplo, uno podría automáticamente 
        incrementar el nivel de trazado en respuesta a eventos no esperados.
      </li>
    </ul>
    Los niveles se adjuntan a estos elementos:
    <ul>
      <li>una solicitud de registro de origen (de una sola línea de código)</li>
      <li>un <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/logging/Logger.html">Logger</a></code> (usualmente 
        adjuntado al paquete que contiene la línea de código anterior)
      </li>
      <li>
        un <code><a href="https://docs.oracle.com/javase/10/docs/api/java/util/logging/Handler.html">Handler</a></code> (adjuntando 
        a una aplicación)
      </li>
    </ul>
    El flujo de ejecución para una petición particular de registro generalmente procede de la siguiente manera:
    <p>
      <code>La solicitud de registro de algún nivel se realiza al registrador adjunto al paquete actual</code><br />
      <code>si el nivel de solicitud es demasiado bajo para el registrador de ese paquete {</code><br />
      <code>&nbsp;&nbsp; descártalo</code><br />
      <code>}</code><br />
      <code>de otra forma {</code><br />
      <code>&nbsp;&nbsp; recorrer todos los controladores {</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; si el nivel de solicitud es demasiado bajo para ese controlador {</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; descártalo</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; de otra forma {</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; registre la petición</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</code><br />
      <code>&nbsp;&nbsp; }</code><br />
      <code>}</code>
    </p>
    <p>
      Aquí tiene un ejemplo del archivo de configuración de registro:
    </p>
    <p>
      <code># Archivo de propiedades que configura el funcionamiento de la función de registro </code><br />
      <code># del KDJ.</code>
    </p>
    <p>
      <code># El sistema buscará este archivo de configuración, primero usando</code><br />
      <code># una propiedad del Sistema especificada en el inicio:</code><br />
      <code>#</code><br />
      <code># &gt;java -Djava.util.logging.config.file=myLoggingConfigFilePath</code><br />
      <code>#</code><br />
      <code># Si esta propiedad no se especifica, entonces el archivo de configuración se</code><br />
      <code># recupere desde la ubicación recuperada en:</code><br />
      <code>#</code><br />
      <code># JDK_HOME/jre/lib/logging.properties</code>
    </p>
    <p>
      <code># Propiedades de registro global.</code><br />
      <code># ------------------------------------------</code><br />
      <code># El conjunto de controladores que se cargarán en el inicio.</code><br />
      <code># Lista de nombres de clases separados por comas.</code><br />
      <code># (? Los documentos de LogManager dicen que no hay coma aquí, pero el ejemplo de JDK tiene una coma).</code><br />
      <code>handlers=java.util.logging.FileHandler, java.util.logging.ConsoleHandler</code></p>
    <p>
      <code># Nivel de registro global predeterminado.</code><br />
      <code># Los Registradores (Loggers) y Manipuladores (Handlers) pueden anular este nivel</code><br />
      <code>.level=INFO</code>
    </p>
    <p>
      <code># Loggers</code><br />
      <code># ------------------------------------------</code><br />
      <code># Los Loggers están usualmente asociados a los paquetes.</code><br />
      <code># Aquí se especifica el nivel de cada paquete..</code><br />
      <code># El nivel global se utiliza de forma predeterminada, por lo que los niveles</code><br />
      <code># especificados aquí simplemente actúa como una anulación.</code><br />
      <code>myapp.ui.level=ALL</code><br />
      <code>myapp.business.level=CONFIG</code><br />
      <code>myapp.data.level=SEVERE</code>
    </p>
    <p>
      <code># Handlers</code><br />
      <code># -----------------------------------------</code>
    </p>
    <p>
      <code># --- ConsoleHandler ---</code><br />
      <code># Anulación del nivel de registro global</code><br />
      <code>java.util.logging.ConsoleHandler.level=SEVERE</code><br />
      <code>java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter</code>
    </p>
    <p>
      <code># --- FileHandler ---</code><br />
      <code># Anulación del nivel de registro global</code><br />
      <code>java.util.logging.FileHandler.level=ALL</code>
    </p>
    <p>
      <code># Estilo de nomenclatura para el archivo de salida:</code><br />
      <code># (El archivo de salida se coloca en el directorio</code><br />
      <code># definido por la propiedad del sistema "user.home").</code><br />
      <code>java.util.logging.FileHandler.pattern=%h/java%u.log</code>
    </p>
    <p>
      <code># Limita el tamaño del fichero de salida en bytes:</code><br />
      <code>java.util.logging.FileHandler.limit=50000</code>
    </p>
    <p>
      <code># Número de archivos de salida para recorrer, agregando un</code><br />
      <code># entero al nombre del archivo base:</code><br />
      <code>java.util.logging.FileHandler.count=1</code>
    </p>
    <p>
      <code># Estilo de salida (Simple o XML):</code><br />
      <code>java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter</code>
    </p>
    <p>
      Es probable que una aplicación centralice la política de nomenclatura para los <code>Logger</code>s, ya que cambiar los 
      estilos de nombres se convierte en una simple edición en un método, en lugar de una gran cantidad de ediciones repartidas por 
      toda la aplicación. Las razones para modificar la política de nombres pueden incluir:
    </p>
    <ul>
      <li>
        en un entorno compartido, agregar un nombre de aplicación al nombre de <code>Logger</code> puede ayudar a distinguir las 
        entradas de una aplicación de otras
      </li>
      <li>agregar información de la versión de la aplicación puede ser beneficioso para la depuración</li>
    </ul>
    Existe una queja común con el archivo de configuración de registro JDK: un controlador no puede restringirse a un registrador 
    específico. Es decir, los Handlers definidos en el archivo de configuración son globales, en el sentido de que se adjuntarán a 
    <em>todos</em> los Loggers. Esto es particularmente molesto en un entorno de servidor, ya que diferentes aplicaciones, de forma 
    predeterminada, generarán declaraciones de registro en el mismo archivo. <em>Este comportamiento se puede cambiar fácilmente, 
    pero solo mediante el uso de la API de registro JDK.</em> Muchos preferirían hacer esto directamente en el archivo de 
    configuración.
    <p>
      A continuación, se muestra un ejemplo del uso de la API de registro:<br />
    </p>
    <pre>
<span class="keyword">package</span> myapp.business;

<span class="keyword">import</span> java.util.logging.*;

<span class="comment">/**
* Demuestre las instalaciones de registro de Java, en conjunto
* con un archivo de configuración de registro.
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
			class="keyword">class</span> SimpleLogger {

  <span class="keyword">public</span> <span class="keyword">static</span> <span
			class="keyword">void</span> main(String... args) {
    SimpleLogger thing = <span class="keyword">new</span> SimpleLogger();
    thing.doSomething();
  }

  <span class="keyword">public</span> <span class="keyword">void</span> doSomething() {
    <span class="comment">//Mensajes de registro, uno para cada nivel
</span>    <span class="comment">//La salida de registro real depende de la configuración
</span>    <span class="comment">//de nivel para este paquete. Las llamadas a mensajes 
</span>    <span class="comment">//"inaplicables" no son costosos.
</span>    fLogger.finest(<span class="literal">"esto es lo mejor"</span>);
    fLogger.finer(<span class="literal">"esto es mejor"</span>);
    fLogger.fine(<span class="literal">"esto esta bien"</span>);
    fLogger.config(<span class="literal">"esto es config"</span>);
    fLogger.info(<span class="literal">"esto es información"</span>);
    fLogger.warning(<span class="literal">"est0 es una advertencia"</span>);
    fLogger.severe(<span class="literal">"esto es severo"</span>);

    <span class="comment">//En el estilo de arriba, el nombre de la clase y 
</span>    <span class="comment">//método que genera un mensaje se coloca 
</span>    <span class="comment">//en el resultado únicamente sobre la base de los mejores esfuerzos.
</span>    <span class="comment">//Para asegurarse de que esta información esté siempre
</span>    <span class="comment">//incluida, utilice el siguiente estilo de "registro preciso" 
</span>    <span class="comment">//en su lugar:
</span>    fLogger.logp(Level.INFO, <span class="keyword">this</span>.getClass().toString(), <span
			class="literal">"doSomething"</span>, <span class="literal">"blah"</span>);

    <span class="comment">//Para la tarea muy común de registrar excepciones, existe 
</span>    <span class="comment">//un método que toma un Throwable :
</span>    Throwable ex = <span class="keyword">new</span> IllegalArgumentException(<span
			class="literal">"Algún texto de excepción"</span>);
    fLogger.log(Level.SEVERE, <span class="literal">"Algún método"</span>, ex);

    <span class="comment">//Hay métodos convenientes para entrar y 
</span>    <span class="comment">//salir de un método, que se encuentran en el nivel Level.FINER :
</span>    fLogger.exiting(<span class="keyword">this</span>.getClass().toString(), <span
			class="literal">"hazAlgo"</span>);

    <span class="comment">//Muestra el directorio user.home, si se desea
</span>    <span class="comment">//(Este es el directorio donde se generan los archivos de registro).
</span>    <span class="comment">//System.out.println("directorio user.home: " + System.getProperty("user.home") );
</span>  }

  <span class="comment">// PRIVADO
</span>
  <span class="comment">//Este estilo no tiene literales codificados de forma rígida y requiere que el logger
</span>  <span class="comment">//sea no estático.
</span>  <span class="keyword">private</span> <span class="keyword">final</span> Logger fLogger=Logger.getLogger(<span
			class="keyword">this</span>.getClass().getPackage().getName());

  <span class="comment">//Este estilo permite que el registrador sea estático, pero codifica de forma rígida un literal de clase.
</span>  <span class="comment">//private static final Logger fLogger =
</span>  <span class="comment">//  Logger.getLogger(SimpleLogger.class.getPackage().getName())
</span>  <span class="comment">//;
</span>
  <span class="comment">//Este estilo utiliza un literal codificado de forma rígida y probablemente debería evitarse:
</span>  <span class="comment">//private static final Logger fLogger = Logger.getLogger("myapp.business");
</span>} 
    </pre>
    <br />
    Example Run 1 , using the config file defined above:
    <p></p>
    <p>
      <code>&gt;java -Djava.util.logging.config.file=C:\\Temp\\logging.properties</code><br />
      <code>-cp . myapp.business.SimpleLogger</code>
    </p>
    <p>
      <code>ConsoleHandler</code> is configured to show only <code>SEVERE</code> messages:
    </p>
    <p>
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: this is severe</code><br />
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: Some message</code><br />
      <code>java.lang.IllegalArgumentException: Some exception text</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at myapp.business.SimpleLogger.doSomething(SimpleLogger.java:39)</code>
      <br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at myapp.business.SimpleLogger.main(SimpleLogger.java:13)</code>
    </p>
    <p>
      While the <code>FileHandler</code> shows <code>ALL</code> that is sent to it:
    </p>
    <p>
      <code>Jan 8, 2003 10:43:46 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>CONFIG: this is config</code><br />
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>INFO: this is info</code><br />
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>WARNING: this is a warning</code><br />
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: this is severe</code><br />
      <code>Jan 8, 2003 10:43:47 AM class myapp.business.SimpleLogger doSomething</code><br />
      <code>INFO: blah</code><br />
      <code>Jan 8, 2003 10:43:47 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: Some message</code><br />
      <code>java.lang.IllegalArgumentException: Some exception text</code><br />
      <code>&nbsp;at myapp.business.SimpleLogger.doSomething(SimpleLogger.java:39)</code><br />
      <code>&nbsp;at myapp.business.SimpleLogger.main(SimpleLogger.java:13)</code><br />
    </p>
    <p>
      Example Run 2, showing the <code>ConsoleHandler</code> output, using the <code>logging.properties</code> file which ships 
       with the JDK, and which logs only <code>INFO</code> level and above:
    </p>
    <p>
      <code>&gt;java -cp . myapp.business.SimpleLogger</code>
    </p>
    <p>
      <code>Jan 8, 2003 10:52:31 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>INFO: this is info</code><br />
      <code>Jan 8, 2003 10:52:31 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>WARNING: this is a warning</code><br />
      <code>Jan 8, 2003 10:52:31 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: this is severe</code><br />
      <code>Jan 8, 2003 10:52:31 AM class myapp.business.SimpleLogger doSomething</code><br />
      <code>INFO: blah</code><br />
      <code>Jan 8, 2003 10:52:31 AM myapp.business.SimpleLogger doSomething</code><br />
      <code>SEVERE: Some message</code><br />
      <code>java.lang.IllegalArgumentException: Some exception text</code><br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at myapp.business.SimpleLogger.doSomething(SimpleLogger.java:39)</code>
      <br />
      <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at myapp.business.SimpleLogger.main(SimpleLogger.java:13)</code><br />
    </p>
    <p></p>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>