<!DOCTYPE html>
<!-- saved from url=(0056)http://www.javapractices.com/topic/TopicAction.do?Id=216 -->
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Las contraseñas nunca en texto claro</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input type="text" name="q" size="15" maxlength="255" value="" placeholder=""/> 
        <input type="submit" name="btnG" value="Búsqueda" /> 
        <input type="hidden" name="sitesearch" value="www.javapractices.com" />
      </form>
    </nav>
    <div class="page-title">Las contraseñas nunca en texto claro</div>
    <br /> 
    Las aplicaciones no deben referirse a versiones en texto sin cifrar de las contraseñas - ni en la base de datos, ni cuando se 
    inicia sesión, ni en ninguna otra área. La versión de texto sin cifrar de la contraseña debe ser el secreto del usuario final. 
    Nunca debe ser repetida o almacenada directamente por una aplicación.
    <p>
      <b>Texto Sin Cifrar Contra Resumen (Hash)</b><br /> Un usuario introduce una contraseña en su forma original, inalterada - es 
      decir, en "texto claro". Sin embargo, una base de datos nunca debe almacenar las contraseñas en texto claro (sin cifrar). En 
      su lugar, el valor almacenado por la base de datos debe ser calculado como 
    </p>
    <pre>valor-almacenado = funcion-hash(contraseña-texto-sin-cifrar + valor-de-sal)</pre>
    <b>La intención aquí es almacenar texto que no se puede revertir fácilmente a la contraseña original.</b> El 
    <code>valor-de-sal</code> es una cadena aleatoria agregada a la contraseña. Se agrega para evitar la ingeniería inversa al 
    estilo de un diccionario simple del valor hash de la contraseña de texto sin formato.
    <p>
      (Con respecto a Tomcat 5: su implementación de inicio de sesión basado en formularios no permite el valor-de-sal.)
    </p>
    <p>
      <b>Funciones Resumen (Hash)</b><br /> SHA-1, SHA-256, SHA-384, y SHA-512 son todos ejemplos de funciones resumen. Una función 
      resumen (<b>Nota del Traductor:</b> hash function, en inglés) es también llamada una 
      <a href="https://docs.oracle.com/javase/10/docs/api/java/security/MessageDigest.html"><code>MessageDigest</code></a>.
      (Se ha demostrado que la función resumen MD5 es defectuosa y, por lo general, debe evitarse).
    </p>
    <p>
      <i>Una <a href="https://es.wikipedia.org/wiki/Funci%C3%B3n_hash">función resumen</a> no es un cifrado</i>. Los elementos 
      cifrados siempre están destinados a un eventual <em>descifrado</em>. Una función resumen, por otro lado, se entiende solo como 
      una <em>operación unidireccional</em>. La idea general de una función resumen es que debería ser muy difícil calcular el valor de 
      entrada original, dado el valor resumen.
    </p>
    <p>
      Si 
      <code>y = hash(x)</code> es una función resumen, y <code>y</code> e <code>x</code> representan ambas cadenas de texto, 
      entonces
    </p>
    <ul>
      <li>dada la salida <code>y</code>, es muy difícil deducir la entrada original <code>x</code></li>
      <li>entradas similares darán salidas marcadamente diferentes</li>
      <li>la entrada <code>x</code> puede tener una longitud <em>arbitraria</em></li>
      <li>la salida <code>y</code> tendrá longitud <em>fija</em></li>
      <li>solo hay una posibilidad ínfima de "colisiones", donde diferentes entradas dan la misma salida</li>
    </ul>
    <p>
      Las propiedades anteriores permiten contraseñas (o frases de paso) de longitud arbitraria, al mismo tiempo que permiten que la 
      columna de la base de datos subyacente que almacena el valor hash sea de ancho fijo.
    </p>
    <p>
      <b>Ejemplo</b>
    </p>
    <p>
      Este ejemplo usa  
      <a href="https://docs.oracle.com/javase/10/docs/api/java/security/MessageDigest.html"><code>MessageDigest</code></a> y la 
      función resumen SHA-1:<br />
    </p>
    <pre>
<span class="keyword">import</span> java.security.MessageDigest;
<span class="keyword">import</span> java.security.NoSuchAlgorithmException;

<span class="comment">/** Ejemplo de valores de función resumen.*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
			class="keyword">class</span> HashExamples {
  
  <span class="keyword">public</span> <span class="keyword">static</span> <span
			class="keyword">void</span> main(String... aArgs) {
    <span class="keyword">try</span> {
      MessageDigest sha = MessageDigest.getInstance(<span
			class="literal">"SHA-1"</span>);
      <span class="keyword">byte</span>[] hashOne = sha.digest(<span
			class="literal">"color"</span>.getBytes());
      log(<span class="literal">"Resumen de 'color':  "</span> + hexEncode(hashOne));
      sha.reset();
      <span class="keyword">byte</span>[]  hashTwo = sha.digest(<span
			class="literal">"colour"</span>.getBytes());
      log(<span class="literal">"Resumen de 'colour': "</span> + hexEncode(hashTwo));
    }
    <span class="keyword">catch</span> (NoSuchAlgorithmException ex){
      log(<span class="literal">"No se encuentra tal algoritmo en el EEJ."</span>);
    }
  }
  
  <span class="keyword">private</span> <span class="keyword">static</span> <span
			class="keyword">void</span> log(Object aObject) {
    System.out.println(String.valueOf(aObject));
  }

  <span class="comment">/**
  * La matriz de byte[] devuelta por MessageDigest no tiene una representación 
  * textual agradable, por lo que generalmente se realiza alguna forma de codificación.
  *
  * Esta implementación sigue el ejemplo del libro de David Flanagan
  * "Java en Pocas Palabras", y convierte una matriz de bytes en una String 
  * de caracteres hexadecimales.
  */</span>
  <span class="keyword">static</span> <span class="keyword">private</span> String hexEncode( <span
			class="keyword">byte</span>[] aInput){
    StringBuffer result = <span class="keyword">new</span> StringBuffer();
    <span class="keyword">char</span>[] digits = {<span class="literal">'0'</span>, <span
			class="literal">'1'</span>, <span class="literal">'2'</span>, <span
			class="literal">'3'</span>, <span class="literal">'4'</span>,<span
			class="literal">'5'</span>,<span class="literal">'6'</span>,<span
			class="literal">'7'</span>,<span class="literal">'8'</span>,<span
			class="literal">'9'</span>,<span class="literal">'a'</span>,<span
			class="literal">'b'</span>,<span class="literal">'c'</span>,<span
			class="literal">'d'</span>,<span class="literal">'e'</span>,<span
			class="literal">'f'</span>};
    <span class="keyword">for</span> (<span class="keyword">int</span> idx = <span
			class="literal">0</span>; idx &lt; aInput.length; ++idx) {
      <span class="keyword">byte</span> b = aInput[idx];
      result.append( digits[ (b&amp;<span class="literal">0xf0</span>) &gt;&gt; <span
			class="literal">4</span> ] );
      result.append( digits[ b&amp;<span class="literal">0x0f</span>] );
    }
    <span class="keyword">return</span> result.toString();
  }  
}
 
    </pre>
    Ejemplo de ejecución:
    <p></p>
    <pre>
Resumen de 'color':  6dd0fe8001145bec4a12d0e22da711c4970d000b
Resumen de 'colour': 79d41a47e8fec55856a6a6c5ba53c2462be4852e
    </pre>
    <br />
    <p></p>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>