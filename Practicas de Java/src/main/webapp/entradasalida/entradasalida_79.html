<!doctype html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java,
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas de Java-&gt;Entrada en la Consola</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css?3.001" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input type="text" name="q" size="15" maxlength="255" value="" placeholder=""/> 
        <input type="submit" name="btnG" value="Search" /> 
        <input type="hidden" name="sitesearch" value="www.javapractices.com" />
      </form>
    </nav>
    <div class="page-title">Entrada en la Consola</div>
    <br />
    La clase <a href="https://docs.oracle.com/javase/10/docs/api/java/io/Console.html"><code>Console</code></a> permite al usuario 
    interactuar con una aplicación simple de consola, usando comandos textuales que usted define.
    <p>
      Aquí tiene un ejemplo simple de su uso: <br />
    </p>
    <pre>
<span class="keyword">import</span> java.util.Arrays;
<span class="keyword">import</span> java.io.Console;

<span class="comment">/**
* Aplicación de consola interactiva simple.
* Usa la clase java.io.Console de Java 6.
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> Console6 {

  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">final</span> <span class="keyword">void</span> main(String... aArgs){
    Console console = System.console();
    <span class="comment">//lee el nombre del usuario, usando la sintaxis de java.util.Formatter :
</span>    String username = console.readLine(<span class="literal">"¿Nombre del Usuario? "</span>);

    <span class="comment">//lee la contraseña, sin hacer eco en la salida
</span>    <span class="keyword">char</span>[] password = console.readPassword(<span
            class="literal">"¿Contraseña? "</span>);

    <span class="comment">//verifica el nombre de usuario y la contraseña usando algún mecanismo (obviado)
</span>
    <span class="comment">//el javadoc para la clase Console recomienda "borrar con ceros" la contraseña
</span>    <span class="comment">//cuando se finaliza su verificación :
</span>    Arrays.fill(password, <span class="literal">' '</span>);

    console.printf(<span class="literal">"Welcome, %1$s."</span>, username);
    console.printf(fNEW_LINE);

    String className = console.readLine(<span class="literal">"Por favor introduza una nombre de clase cualificado con el paquete:"</span>);
    Class theClass = <span class="keyword">null</span>;
    <span class="keyword">try</span> {
      theClass = Class.forName(className);
      console.printf(<span class="literal">"El árbol de herencia: %1$s"</span>, getInheritanceTree(theClass));
    }
    <span class="keyword">catch</span>(ClassNotFoundException ex){
      console.printf(<span class="literal">"No puedo encontrar esa clase."</span>);
    }

    <span class="comment">//esta versión simplemente sale, sin pedirle al usuario más información
</span>    console.printf(<span class="literal">"Adios."</span>);
  }
  
  <span class="comment">// PRIVADO
</span>  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fNEW_LINE = System.getProperty(<span
            class="literal">"line.separator"</span>);

  <span class="keyword">private</span> <span class="keyword">static</span> String getInheritanceTree(Class aClass){
    StringBuilder superclasses = <span class="keyword">new</span> StringBuilder();
    superclasses.append(fNEW_LINE);
    Class theClass = aClass;
    <span class="keyword">while</span> (theClass != <span
            class="keyword">null</span>) {
      superclasses.append(theClass);
      superclasses.append(fNEW_LINE);
      theClass = theClass.getSuperclass();
    }
    superclasses.append(fNEW_LINE);
    <span class="keyword">return</span> superclasses.toString();
  }
} 
    </pre>
    <p></p>
    <p>
      Un ejemplo de ejecución:
    </p>
    <pre>
&gt;java  Console6
¿Nombre de Usuario? juan
¿Contraseña?
Bienvenido, john.
Por favor introduza una nombre de clase cualificado con el paquete:java.util.ArrayList
El árbol de herencia:
class java.util.ArrayList
class java.util.AbstractList
class java.util.AbstractCollection
class java.lang.Object

Adios.
    </pre>
    <p>
      <b>JDK &lt; 6</b>
    </p>
    <p>
      La clase <code>Console</code> fue agregada en Java 6. Lo siguiente es un ejemplo extendido de usar una versión más antigua del 
      KDJ. Aquí, la entrada se lee de la consola en un bucle continuo. Además, se ha separado el problema en varias partes, de modo 
      que algunas partes se pueden reutilizar en otras aplicaciones de consola.
    </p>
    <p>
      Como en el ejemplo previo, el usuario introduce un nombre de clase cualificado de paquete, y se visualiza el correspondiente 
      árbol de herencia.
    </p>
    <p>
      Un ejemplo de ejecución:
    </p>
    <p>
      <code>&gt;java -cp . Console InheritanceInterpreter</code>
      <br />
      <code>Por favor introduzca un nombre de clase&gt;as;k</code>
      <br />
      <code>No válido.&nbsp;
        Ejemplo:"java.lang.String"&gt;java.lang.String</code>
      <br />
      <code>El árbol de herencia:</code>
      <br />
      <code>class java.lang.String</code>
      <br />
      <code>class java.lang.Object</code>
      <br />
      <code>Por favor introduzca un nombre de clase&gt;</code>
      <br />
      <code>No válido.&nbsp; Ejemplo:"java.lang.String"&gt;</code>
      <br />
      <code>No válido.&nbsp; Ejemplo:"java.lang.String"&gt;....</code>
      <br />
      <code>No válido.&nbsp; Ejemplo:"java.lang.String"&gt;a;lskf</code>
      <br />
      <code>No válido.&nbsp;
        Ejemplo:"java.lang.String"&gt;java.sql.SQLWarning</code>
      <br />
      <code>El árbol de herencia:</code>
      <br />
      <code>class java.sql.SQLWarning</code>
      <br />
      <code>class java.sql.SQLException</code>
      <br />
      <code>class java.lang.Exception</code>
      <br />
      <code>class java.lang.Throwable</code>
      <br />
      <code>class java.lang.Object</code>
      <br />
      <code>Por favor introduzca un nombre de clase&gt;java.util.GregorianCalendar</code>
      <br />
      <code>El árbol de herencia:</code>
      <br />
      <code>class java.util.GregorianCalendar</code>
      <br />
      <code>class java.util.Calendar</code>
      <br />
      <code>class java.lang.Object</code>
      <br />
      <code>Por favor introduzca un nombre de clase&gt;exit</code>
    </p>
    <p>
      <code>Adios.</code>
      <br />
    </p>
    <pre>
<span class="keyword">import</span> java.io.BufferedReader;
<span class="keyword">import</span> java.io.IOException;
<span class="keyword">import</span> java.io.InputStreamReader;
<span class="keyword">import</span> java.io.Reader;
<span class="keyword">import</span> java.util.ArrayList;
<span class="keyword">import</span> java.util.List;

<span class="comment">/**
* Envía el texto de ida y vuelta entra la línea de comandos y un 
* Intérprete. KDJ menor que 6.
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> Console {

  <span class="comment">/**
  * Construye y ejecuta un &lt;code&gt;Interprete&lt;/code&gt; específico, al cual 
  * se le pasa el nombre cualificado de paquete en la línea de comando.
  */</span>
  <span class="keyword">public</span> <span class="keyword">static</span> <span
            class="keyword">void</span> main(String... aArguments) {
    <span class="keyword">try</span> {
      Class theClass = Class.forName(aArguments[<span class="literal">0</span>]);
      Interpreter interpreter = (Interpreter)theClass.newInstance();
      Console console = <span class="keyword">new</span> Console(interpreter);
      console.run();
    }
    <span class="keyword">catch</span> (ClassNotFoundException ex){
      System.err.println(ex + <span class="literal">" La clase Interpreter debe estar en la ruta de clases."</span>);
    }
    <span class="keyword">catch</span>(InstantiationException ex){
      System.err.println(ex + <span class="literal">" La clase Interpreter debe ser concreta."</span>);
    }
    <span class="keyword">catch</span>(IllegalAccessException ex){
      System.err.println(ex + <span class="literal">" La clase Interpreter debe tener un constructor sin argumentos."</span>);
    }
  }

  <span class="keyword">public</span> Console(Interpreter aInterpreter) {
    <span class="keyword">if</span> (aInterpreter == <span
            class="keyword">null</span>) {
      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span
            class="literal">"No puede ser nulo."</span>);
    }
    fInterpreter = aInterpreter;
  }

  <span class="comment">/**
  * Visualiza un mensaje, espera una línea completa de entrada y luego analiza 
  * la entrada usando un Interpreter.
  *
  * Termina cuando &lt;code&gt;Interpreter.parseInput&lt;/code&gt; devuelve true.
  */</span>
  <span class="keyword">public</span> <span class="keyword">void</span> run() {
    display(fInterpreter.getHelloPrompt());

    <span class="comment">//pasa cada línea de entrada a fInterpreter, y visualiza el 
</span>    <span class="comment">//resultado de fInterpreter
</span>    InputStreamReader inputStreamReader = <span class="keyword">new</span> InputStreamReader(System.in);
    BufferedReader stdin = <span class="keyword">new</span> BufferedReader(inputStreamReader);
    <span class="keyword">boolean</span> hasRequestedQuit = <span
            class="keyword">false</span>;
    String line = <span class="keyword">null</span>;
    List&lt;Object&gt; result = <span class="keyword">new</span> ArrayList&lt;Object&gt;();
    <span class="keyword">try</span> {
      <span class="keyword">while</span>(!hasRequestedQuit){
        line = stdin.readLine();
        <span class="comment">//tenga en cuenta que "result" se pasa como un parámetro de "salida"
</span>        hasRequestedQuit = fInterpreter.parseInput(line, result);
        display(result);
        result.clear();
      }
    }
    <span class="keyword">catch</span> (IOException ex) {
      System.err.println(ex);
    }
    <span class="keyword">finally</span> {
      display(fBYE);
      shutdown(stdin);
    }
  }

  <span class="comment">// PRIVADO
</span>  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fBYE = <span
            class="literal">"Adios."</span>;
  <span class="keyword">private</span> Interpreter fInterpreter;

  <span class="comment">/**
  * Visualiza alguno texto a la salida estándar.
  * Se usa el resultado de toString().
  */</span>
  <span class="keyword">private</span> <span class="keyword">void</span> display(Object aText){
    System.out.print(aText.toString());
    System.out.flush();
  }

  <span class="comment">/**
  * Visualiza una Lista de objetos como texto en la salida estándar, en el orden devuelto
  * por el iterador de aText.
  */</span>
  <span class="keyword">private</span> <span class="keyword">void</span> display(List&lt;Object&gt; aText) {
    <span class="keyword">for</span>(Object item : aText){
      display(item);
    }
  }

  <span class="keyword">private</span> <span class="keyword">void</span> shutdown(Reader aStdin){
    <span class="keyword">try</span> {
      aStdin.close();
    }
    <span class="keyword">catch</span> (IOException ex){
      System.err.println(ex);
    }
  }
} 
    </pre>
    <br />
    <pre>
<span class="keyword">import</span> java.util.*;

<span class="comment">/**
* Analiza una línea de texto y devuelve una resultado.
*/</span>
<span class="keyword">public</span> <span class="keyword">interface</span> Interpreter {

  <span class="comment">/**
  * @param aLine es no nulo.
  * @param aResult es una Lista vacía, no nula, que actua como un parámetro de 
  * "salida"; cuando vuelve, aResult debe contener una lista de elementos no hula, no vacía 
  * que todos tendrán un método &lt;code&gt;toString&lt;/code&gt;, para ser usado 
  * para visualizar un resultado al usuario.
  *
  * @return true si el usuario ha solicitado salir del Interpreter.
  * @exception IllegalArgumentException si un parámetro no cumple.
  */</span>
  <span class="keyword">boolean</span> parseInput(String aLine, List&lt;Object&gt; aResult);

  <span class="comment">/**
  * Devuelve el texto a visualizar hasta el arranque del Interpreter.
  */</span>
  String getHelloPrompt();
} 
    </pre>
    <br />
    <pre>
<span class="keyword">import</span> java.util.*;

<span class="comment">/**
* Dado el nombre de una clase cualificada de paquete, devuelve los nombres de las clases 
* en el árbol de herencia.
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">class</span> InheritanceInterpreter <span
            class="keyword">implements</span> Interpreter {

  <span class="comment">/**
  * @param aLine es un nombre no nulo de una clase.
  * @param aResult es una Lista no nula y vacía que actua como parámetro de 
  * "salida'; cuando se devuelve, aResult debe contener una Lista de nombres de clase no nulas y no vacía 
  * que forman el árbol de herencia de la clase de entrada.
  *
  * @return true si el usuario ha solicitado salir del Interpreter.
  * @exception IllegalArgumentException si un parámetro no cumple.
  */</span>
  <span class="keyword">public</span> <span class="keyword">boolean</span> parseInput (String  aLine, <span
            class="keyword">final</span> List aResult) {
    <span class="keyword">if</span> (aResult == <span class="keyword">null</span>) {
      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span
            class="literal">"El parámetro Result no puede ser nulo."</span>);
    }
    <span class="keyword">if</span> (!aResult.isEmpty()){
      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span
            class="literal">"El parámetro Result debe estar vacío."</span>);
    }
    <span class="keyword">if</span> (aLine == <span class="keyword">null</span>) {
      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span
            class="literal">"La Linea no puede ser nula."</span>);
    }

    <span class="keyword">boolean</span> hasRequestedQuit = aLine.trim().equalsIgnoreCase(fQUIT) ||
                               aLine.trim().equalsIgnoreCase(fEXIT);
    <span class="keyword">if</span> (hasRequestedQuit) {
      aResult.add(fNEW_LINE);
    }
    <span class="keyword">else</span> {
      <span class="keyword">try</span> {
        Class theClass = Class.forName(aLine);
        StringBuilder superclasses = <span class="keyword">new</span> StringBuilder();
        superclasses.append(fHEADER);
        superclasses.append(fNEW_LINE);
        <span class="keyword">while</span> (theClass != <span
            class="keyword">null</span>) {
          superclasses.append(theClass);
          superclasses.append(fNEW_LINE);
          theClass = theClass.getSuperclass();
        }
        aResult.add(superclasses);
        aResult.add(fDEFAULT_PROMPT);
      }
      <span class="keyword">catch</span> (ClassNotFoundException ex){
        <span class="comment">//Recuperar pidiendo al usuario entrada corregida
</span>        aResult.clear();
        aResult.add(fERROR_PROMPT);
      }
    }

    assert !aResult.isEmpty(): <span class="literal">"Result no debe estar vacío."</span>;

    <span class="keyword">return</span> hasRequestedQuit;
  }

  <span class="comment">/**
  * Devuelve el texto a visualizar hasta el inicio del Interpreter.
  */</span>
  <span class="keyword">public</span> String getHelloPrompt() {
    <span class="keyword">return</span> fHELLO_PROMPT;
  }

  <span class="comment">// PRIVATE
</span>  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fHELLO_PROMPT = <span
            class="literal">"Por favor introduzca un nombre de clase &gt;"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fDEFAULT_PROMPT = <span
            class="literal">"Por favor introduzca un nombre de clase &gt;"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fERROR_PROMPT = <span
            class="literal">"No válido.  Ejemplo:\"java.lang.String\"&gt;"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fHEADER = <span
            class="literal">"El árbol de herencia:"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fQUIT = <span
            class="literal">"quit"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fEXIT = <span
            class="literal">"exit"</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
            class="keyword">final</span> String fNEW_LINE = System.getProperty(<span
            class="literal">"line.separator"</span>);
} 
    </pre>
    <br />
    <p></p>
    <p></p>
    <div class="topic-section" id="see-also-title">Vea También :</div>
    <div id="see-also" class="main-body">
      <a href="..\tareascomunes\tareascomunes_83.html">Obtener el tamaño de un objeto en memoria</a><br /> 
      <a href="..\constructores\constructors_113.html">Construir un Objeto usando el nombre de la clase</a><br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>
