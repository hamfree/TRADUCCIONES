<!DOCTYPE html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Prácticas y técnicas de programación en Java.">
    <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
          convenciones de codigo java">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prácticas Java-&gt;Diálogos Estandarizados</title>
    <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
    <link rel="icon" type="image/png" href="../img/favicon.png">
  </head>
  <body>
    <nav class="menu-bar" id="menu-bar">
      <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
      <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
        <input type="text" name="q" size="15" maxlength="255" value="" placeholder=""/> 
        <input type="submit" name="btnG" value="Búsqueda" /> 
        <input type="hidden" name="sitesearch" value="www.javapractices.com" />
      </form>
    </nav>
    <div class="page-title">
      Diálogos Estandarizados
    </div>
    <br />
    Las inconsistencias en una interfaz de usuario habitualmente disminuyen la calidad percibida de una aplicación. Así, es 
    probablemente una buena idea estandarizar el diseño, apariencia, y comportamiento de todos los diálogos en su aplicación.
    <p>
      <b>Ejemplo</b>
    </p>
    <p>
      Aquí tiene una clase que actúa como una plantilla para todos los diálogos que tienen botones <code>Aceptar</code> y 
      <code>Cancelar</code>. Estandariza estos elementos:
    </p>
    <ul>
      <li>la forma del título del diálogo</li>
      <li>el icono del diálogo</li>
      <li>el diseño y el espaciado de los elementos principales</li>
      <li>el comportamiento de centrado</li>
      <li>el comportamiento de cambio de tamaño</li>
    </ul>
    Tenga en cuenta que los métodos abstractos deben ser implementados por sus subclases: <code>getEditorUI</code> y 
    <code>okAction</code>. 
    Los otros métodos son <a href="../herencia/inheritance_89.html">declarados como finales</a>.
    <p>
      Las funciones que llamen a esta clase no necesitan usualmente subclasificarla directamente, en el nivel superior. Más bien, 
      una clase privada y anidada <a href="../swing/swing_228.html">puede usarse en su lugar</a>.<br />
    </p>
    <pre>
<span class="keyword">package</span> hirondelle.stocks.util.ui;

<span class="keyword">import</span> java.util.*;
<span class="keyword">import</span> javax.swing.*;
<span class="keyword">import</span> java.awt.event.*;

<span class="keyword">import</span> hirondelle.stocks.util.Args;

<span class="comment">/**
* Clase Base Abstracta para un diálogo con un diseño, botones, y comportamiento estándar.
* (El nombre &lt;tt&gt;StandardEditor&lt;/tt&gt; fue elegido ya que casi todos los diálogos
* no triviales permiten al usuario editar los datos de alguna manera).
* 
* &lt;P&gt;El uso de esta clase aplicarán una apariencia estándar a 
* los diálogos en la aplicación.
* 
* &lt;P&gt;Las subclases implementan el cuerpo del diálogo (donde se manipulan los 
* objetos de negocio), y la acción realizada por el botón &lt;tt&gt;Aceptar&lt;/tt&gt;.
* 
* &lt;P&gt;Los servicios de un &lt;tt&gt;StandardEditor&lt;/tt&gt; incluyen;
* 
*&lt;ul&gt;
* &lt;li&gt;centrar el marco padre
* &lt;li&gt;reusar el icono del padre
* &lt;li&gt;diseño estándar y espacio del borde, basado en las pautas de la Apariencia de Java.
* &lt;li&gt;estilo de nombrado uniforme para el título del diálogo, con el nombre de la aplicación apareciendo primero
* &lt;li&gt; y los botones &lt;tt&gt;Aceptar&lt;/tt&gt; y &lt;tt&gt;Cancelar&lt;/tt&gt; al final del diálogo - 
* &lt;li&gt;el botón &lt;tt&gt;Aceptar&lt;/tt&gt; es el predeterminado, y la tecla &lt;tt&gt;Escape&lt;/tt&gt; activa 
* &lt;tt&gt;Cancelar&lt;/tt&gt; (los últimos trabajos solo si el diálogo recibe la pulsación 
* de escape, y no uno de sus componentes)
* &lt;li&gt;deshabilitación de redimensionar
*&lt;/ul&gt;
*
* &lt;P&gt;La tecla &lt;tt&gt;Escape&lt;/tt&gt; no trabaja siempre (por ejemplo, cuando una fila 
* &lt;tt&gt;JTable&lt;/tt&gt; tiene el foco)
*/</span>
<span class="keyword">public</span> <span class="keyword">abstract</span> <span
            class="keyword">class</span> StandardEditor {
  
  <span class="comment">/**
  * Constructor.
  * @param aTitle el texto que aparece en la barra de título después del nombre de
  * la aplicación; debe tener contenido.
  * @param aParent la ventana a la cual este diálogo se asocia.
  * @param aCloseAction establezca el comportamiento del diálogo al cierre.
  */</span>
  <span class="keyword">protected</span> StandardEditor (String aTitle, JFrame aParent, CloseAction aCloseAction) {
    Args.checkForContent(aTitle);
    Args.checkForNull(aParent);
    fTitle = aTitle;
    fParent = aParent;
    fCloseAction = aCloseAction.getValue();
  }
  
  <span class="comment">/**
  * Obliga a que las llamadas al constructor tengan mayor claridad, usando una 
  * enumeración en vez de los enteros.
  */</span>
  <span class="keyword">protected</span> <span class="keyword">enum</span> CloseAction {
    DISPOSE(JDialog.DISPOSE_ON_CLOSE),
    HIDE(JDialog.HIDE_ON_CLOSE);
    <span class="keyword">int</span> getValue(){
      <span class="keyword">return</span> fAction;
    }
    <span class="keyword">private</span> <span class="keyword">final</span> <span
            class="keyword">int</span> fAction;
    <span class="keyword">private</span> CloseAction(<span
            class="keyword">int</span> aAction){
      fAction = aAction;
    }
  }
  
  <span class="comment">/**
  * Visualiza este &lt;tt&gt;StandardEditor&lt;/tt&gt; al usuario.
  *
  * &lt;P&gt;Sigue las pautas de la Apariencia de Java para el espaciado de los elementos.
  */</span>
  <span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">void</span> showDialog(){
    <span class="keyword">boolean</span> isModal = <span class="keyword">true</span>;
    fDialog = <span class="keyword">new</span> JDialog(fParent, UiUtil.getDialogTitle(fTitle), isModal);
    fDialog.setDefaultCloseOperation(fCloseAction);
    fDialog.setResizable(<span class="keyword">false</span>);
    addCancelByEscapeKey();
    
    JPanel standardLayout = <span class="keyword">new</span> JPanel();
    standardLayout.setLayout(<span class="keyword">new</span> BoxLayout(standardLayout, BoxLayout.Y_AXIS));
    standardLayout.setBorder(UiUtil.getStandardBorder());
    standardLayout.add(getEditorUI());
    standardLayout.add(getCommandRow());
    
    fDialog.getContentPane().add(standardLayout);
    
    UiUtil.centerOnParentAndShow(fDialog);
  }

  <span class="comment">/** Cierra el diálogo del editor.  */</span>
  <span class="keyword">public</span> <span class="keyword">final</span> <span
            class="keyword">void</span> dispose(){
    fDialog.dispose();
  }
  
  <span class="comment">/**
  * Devuelve la GUI que permite al usuario manipular los objetos comerciales 
  * relacionados con este diálogo; esta GUI se colocará encima de 
  * los botones &lt;tt&gt;Aceptar&lt;/tt&gt; y &lt;tt&gt;Cancelar&lt;/tt&gt;, de manera estándar.
  */</span>
  <span class="keyword">protected</span> <span class="keyword">abstract</span> JComponent getEditorUI();
  
  <span class="comment">/**
  * La acción tomada cuando el usuario pulsa el botón &lt;tt&gt;Aceptar&lt;/tt&gt;.
  */</span>
  <span class="keyword">protected</span> <span class="keyword">abstract</span> <span
            class="keyword">void</span> okAction();
  
  <span class="comment">// PRIVADO
</span>  <span class="keyword">private</span> <span class="keyword">final</span> String fTitle;
  <span class="keyword">private</span> <span class="keyword">final</span> JFrame fParent;
  <span class="keyword">private</span> JDialog fDialog;
  <span class="keyword">private</span> <span class="keyword">final</span> <span
            class="keyword">int</span> fCloseAction;
  
  <span class="comment">/**
  * Devuelve una fila estandarizada de botones de comando, justificados a la derecha y 
  * todos del mismo tamaño, con Aceptar como botón predeterminado, y sin usar mnemónicos, 
  * como indican las pautas de Aspecto de Java.
  */</span>
  <span class="keyword">private</span> JComponent getCommandRow() {
    JButton ok = <span class="keyword">new</span> JButton(<span
            class="literal">"OK"</span>);
    ok.addActionListener( <span class="keyword">new</span> ActionListener() {
      <span class="keyword">@Override</span> <span class="keyword">public</span> <span
            class="keyword">void</span> actionPerformed(ActionEvent event) {
        okAction();
      }
    });
    fDialog.getRootPane().setDefaultButton( ok );
    JButton cancel = <span class="keyword">new</span> JButton(<span
            class="literal">"Cancel"</span>);
    cancel.addActionListener( <span class="keyword">new</span> ActionListener() {
      <span class="keyword">public</span> <span class="keyword">void</span> actionPerformed(ActionEvent event) {
        closeDialog();
      }
    });
    List&lt;JComponent&gt; buttons = <span class="keyword">new</span> ArrayList&lt;&gt;();
    buttons.add(ok);
    buttons.add(cancel);
    <span class="keyword">return</span> UiUtil.getCommandRow(buttons);
  }

  <span class="comment">/**
  * Obliga a la tecla de escape a llamar a la misma acción que cuando presiona el botón Cancelar.
  *
  * &lt;P&gt;Esto no siempre funcione. Vea el comentario de la clase.
  */</span>
  <span class="keyword">private</span> <span class="keyword">void</span> addCancelByEscapeKey(){
    String CANCEL_ACTION_KEY = <span class="literal">"CANCEL_ACTION_KEY"</span>;
    <span class="keyword">int</span> noModifiers = <span class="literal">0</span>;
    KeyStroke escapeKey = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, noModifiers, <span
            class="keyword">false</span>);
    InputMap inputMap = 
      fDialog.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
    ;
    inputMap.put(escapeKey, CANCEL_ACTION_KEY);
    AbstractAction cancelAction = <span class="keyword">new</span> AbstractAction(){
      <span class="keyword">@Override</span> <span class="keyword">public</span> <span
            class="keyword">void</span> actionPerformed(ActionEvent e){
        closeDialog();
      }
    }; 
    fDialog.getRootPane().getActionMap().put(CANCEL_ACTION_KEY, cancelAction);
  }
  
  <span class="keyword">private</span> <span class="keyword">void</span> closeDialog(){
    fDialog.dispose();
  }
}
 
    </pre>
    <br />
    <p></p>
    <p></p>
    <div class="topic-section" id="see-also-title">
      Vea También :
    </div>
    <div id="see-also" class="main-body">
      <a href="../herencia/inheritance_89.html">Los métodos sobreescribibles necesitan cuidados especiales</a><br /> 
      <a href="../swing/swing_148.html">Pautas para la Apariencia</a><br /> 
      <a href="../swing/swing_152.html">Tareas de utilidad de Swing</a><br /> 
      <a href="../swing/swing_167.html">Diálogo de entrada</a><br />
      <a href="../swing/swing_228.html">No hacer subclases de JDialog o JFrame</a><br />
    </div>
    <footer id="footer" class="legalese">
      <span id="app_name">Prácticas de Java</span> 
      <span id="app_version_number">3.001</span><br /> © 
      <span id="copyright">2018 Hirondelle Systems</span><br /> 
      <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
      <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
      <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
      <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
      <!-- ukey="2AC36CD2" -->
      <!-- ckey="16DF3D87" -->
      <br /> Los trozos de código individual tienen una 
      <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
      Sobre 1,000,000 de IPs únicas el último año<br /> 
      Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
      - In Memoriam : Bill Dirani -
    </footer>
  </body>
</html>