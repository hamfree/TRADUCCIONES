<!DOCTYPE html>
<html lang="es">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="description" content="Prácticas y técnicas de programación en Java.">
        <meta name="keywords" content="java, programación java, Prácticas de Java, idioma java, estilo java, patrones de diseño java, 
              convenciones de codigo java">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Prácticas Java-&gt;Usar JavaHelp</title>
        <link id="stylesheet" rel="stylesheet" type="text/css" href="../css/stylesheet9.css" media="all">
        <link rel="icon" type="image/png" href="../img/favicon.png">
    </head>
    <body>
        <nav class="menu-bar" id="menu-bar">
            <a href="../index.html" title="Tabla de Contenido" style="float: left;">Inicio</a> &nbsp;&nbsp;
            <form method="GET" action="https://www.google.com/search" class="search-form" style="float: right;">
                <input type="text" name="q" size="15" maxlength="255" value="" placeholder=""/> 
                <input type="submit" name="btnG" value="Búsqueda" /> 
                <input type="hidden" name="sitesearch" value="www.javapractices.com" />
            </form>
        </nav>
        <div class="page-title">
            Usar JavaHelp
        </div>
        <br />
        La herramienta de Oracle <a href="https://javaee.github.io/javahelp/">JavaHelp</a> crea sistemas de ayuda para aplicaciones 
        gráficas, utilizando archivos de temas HTML y XML para definir la jerarquía de temas. Los desarrolladores acceden a sus 
        servicios a través del paquete <code>javax.help</code>.
        <p>
            Aquí tiene un ejemplo de usar <code>javax.help</code> para lanzar un sistema JavaHelp desde un menú estándar de Ayuda.
            <br />
        </p>
        <pre>
<span class="keyword">package</span> hirondelle.stocks.help;

<span class="keyword">import</span> java.awt.event.*;
<span class="keyword">import</span> javax.swing.*;
<span class="keyword">import</span> java.util.logging.*;
<span class="keyword">import</span> javax.help.*;
<span class="keyword">import</span> java.net.URL;
<span class="keyword">import</span> hirondelle.stocks.util.Args;
<span class="keyword">import</span> hirondelle.stocks.util.Util;

<span class="comment">/**
* Muestra el sistema de ayuda de la aplicación.
*
* &lt;P&gt;Muestra la tabla de contenidos, el índice, o la pestaña de búsqueda, de acuerdo a 
* al argumento pasado al constructor. Esta implementación usa la herramienta 
* de Sun &lt;a href=http://java.sun.com/products/javahelp/&gt;JavaHelp&lt;/a&gt;.
*
* &lt;P&gt;Esta acción activa la tecla de Ayuda (a menudo &lt;tt&gt;F1&lt;/tt&gt;) en esta aplicación.
* Cuando se presiona la tecla de ayuda, se visualiza la tabla de contenidos del sistema de ayuda.
* 
* &lt;P&gt;Esta acción es inusual porque corresponde a más de un elemento del menú.
* (Contenidos, Índice, y Búsqueda).
* 
* &lt;P&gt; Nota: la pantalla JavaHelp que se muestra no está centrada; se deja como está, 
* ya que la GUI de JavaHelp a menudo se corta en la parte inferior de todos modos, y el centrado 
* empeoraría este problema.
*/</span>
<span class="keyword">public</span> <span class="keyword">final</span> <span
			class="keyword">class</span> HelpAction <span class="keyword">extends</span> AbstractAction {

  <span class="comment">/**
  * Constructor.
  *  
  * @param aFrame ventana principal a la cual se adjunta la ventana de ayuda 
  * @param aText nombre del elemento de menú para esta acción de ayuda
  * @param aMnemonicKeyEvent mnemónico para &lt;tt&gt;aText&lt;/tt&gt;
  * @param aIcon gráfico posiblemente nulo a ser visualizado junto al texto, o 
  * en una barra de herramientas
  * @param aView determina qué ventana de ayuda va a mostrarse: Contenidos, Índice,
  * o Búsqueda
  */</span>
  <span class="keyword">public</span> HelpAction(
    JFrame aFrame, String aText, <span class="keyword">int</span> aMnemonicKeyEvent, Icon aIcon, View aView
  ) {
    <span class="keyword">super</span>(aText, aIcon);
    Args.checkForNull(aFrame);
    Args.checkForNull(aText);
    Args.checkForNull(aView);
    fFrame = aFrame;
    fView = aView;
    putValue(SHORT_DESCRIPTION, <span class="literal">"Ayuda de StocksMonitor"</span>);
    putValue(LONG_DESCRIPTION, <span class="literal">"Muestra JavaHelp para StocksMonitor."</span>);
    putValue(MNEMONIC_KEY, <span class="keyword">new</span> Integer(aMnemonicKeyEvent) );    
    initHelpSystem(); 
  }

  <span class="keyword">@Override</span> <span class="keyword">public</span> <span
			class="keyword">void</span> actionPerformed(ActionEvent event) {
    fLogger.info(<span class="literal">"Mostrando el sistema de Ayuda."</span>);
    fHelpBroker.setCurrentView( fView.toString() );
    fDisplayHelp.actionPerformed( event );
  }
  
  <span class="comment">/** Enumeración para el estilo de presenteación del sistema de Ayuda. */</span>
  <span class="keyword">public</span> <span class="keyword">enum</span> View {
    SEARCH(<span class="literal">"Búsqueda"</span>), 
    CONTENTS(<span class="literal">"TdC"</span>), 
    INDEX(<span class="literal">"Índice"</span>);
    <span class="keyword">@Override</span> <span class="keyword">public</span> String toString(){
      <span class="keyword">return</span> fName;
    }
    <span class="keyword">private</span> View(String aName){
      fName = aName;
    }
    <span class="keyword">private</span> String fName;
  } 

  <span class="comment">// PRIVADO
</span>  <span class="keyword">private</span> JFrame fFrame;
  <span class="keyword">private</span> View fView;
  <span class="comment">/** Ruta utilizada por un cargador de clases para encontrar los archivos de JavaHelp. */</span>
  <span class="keyword">private</span> <span class="keyword">static</span> <span
			class="keyword">final</span> String PATH_TO_JAVA_HELP =
    <span class="literal">"hirondelle/stocks/help/JavaHelp/HelpSet.hs"</span>
  ;
  <span class="keyword">private</span> ClassLoader DEFAULT_CLASS_LOADER = <span
			class="keyword">null</span>;
  <span class="keyword">private</span> <span class="keyword">static</span> <span
			class="keyword">final</span> Logger fLogger = Util.getLogger(HelpAction.<span
			class="keyword">class</span>); 
  
  <span class="keyword">private</span> HelpBroker fHelpBroker;
  <span class="keyword">private</span> CSH.DisplayHelpFromSource fDisplayHelp;
  
  <span class="comment">/** Inicializa el sistema JavaHelp. */</span>
  <span class="keyword">private</span> <span class="keyword">void</span> initHelpSystem(){
    <span class="comment">//optimización para evitar un init repetido
</span>    <span class="keyword">if</span> ( fHelpBroker != <span
			class="keyword">null</span> &amp;&amp; fDisplayHelp != <span
			class="keyword">null</span>) <span class="keyword">return</span>;
    
    <span class="comment">//(usa el mecanismo del cargador de clases)
</span>    ClassLoader loader = <span class="keyword">this</span>.getClass().getClassLoader();
    URL helpSetURL = HelpSet.findHelpSet(loader, PATH_TO_JAVA_HELP);
    assert helpSetURL != <span class="keyword">null</span> : <span
			class="literal">"No puedo encontrar el sistema de ayuda."</span>;
    <span class="keyword">try</span> {
      HelpSet helpSet = <span class="keyword">new</span> HelpSet(DEFAULT_CLASS_LOADER, helpSetURL);
      fHelpBroker = helpSet.createHelpBroker();
      fHelpBroker.enableHelpKey( fFrame.getRootPane(), <span
			class="literal">"overview"</span>, helpSet );
      fDisplayHelp = <span class="keyword">new</span> CSH.DisplayHelpFromSource(fHelpBroker);
    }
    <span class="keyword">catch</span> (HelpSetException ex) {
      fLogger.severe(<span class="literal">"No puedo crear el sistema de ayuda con: "</span> + helpSetURL);
    }
    assert fHelpBroker != <span class="keyword">null</span> : <span
			class="literal">"HelpBroker es nulo."</span>;
  }
}
 
        </pre>
        <br />
        <p></p>
        <p></p>
        <footer id="footer" class="legalese">
            <span id="app_name">Prácticas de Java</span> 
            <span id="app_version_number">3.001</span><br /> © 
            <span id="copyright">2018 Hirondelle Systems</span><br /> 
            <a href="http://www.javapractices.com/source/SourceAction.do">Código Fuente</a> | 
            <a href="mailto:webmaster@javapractices.com" rel="author">Contacto</a> | 
            <a href="http://creativecommons.org/licenses/by-nc-sa/1.0/" rel="license">Licencia</a> | 
            <a href="http://www.javapractices.com/apps/cjp.rss" rel="alternate" type="application/rss+xml">RSS</a>
            <!-- ukey="2AC36CD2" -->
            <!-- ckey="16DF3D87" -->
            <br /> Los trozos de código individual tienen una 
            <a href="http://www.javapractices.com/LICENSE.txt" rel="license">licencia BSD</a><br /> 
            Sobre 1,000,000 de IPs únicas el último año<br /> 
            Última actualización <time id="last_updated_on" datetime="2018-06-03">2018-06-03</time><br />
            - In Memoriam : Bill Dirani -
        </footer>
    </body>
</html>