<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
         <title>
            La Clase JarRunner (Los Tutoriales de Java&trade; &gt; Implantación &gt; Empaquetando Programas en Ficheros JAR)
        </title>
        <meta name="description"
              content="Este tutorial de implantación de Java describe el desarrollo e implantación de appplets, aplicaciones Java
              Web Star, aplicaciones ricas de Internet, y herramientas JAR relacionadas" />
        <meta name="keywords"
              content="java programming, learn java, java sample code, java applet, java web start, rich internet application,
              RIA, jar, plugin, plug-in" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Empaquetando Programas en Ficheros JAR</a></div>
                <div class="linkAHEAD"><a href="basicsindex.html">Usando Ficheros JAR: Lo Básico</a></div>
                <div class="linkBHEAD"><a href="build.html">Creando un Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="view.html">Viendo el Contenido de un Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="unpack.html">Extrayendo el Contenido de un Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="update.html">Actualizando un Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="run.html">Ejecutando Software Empaquetado en Ficheros JAR</a></div>
                <div class="linkAHEAD"><a href="manifestindex.html">Trabajando con los Ficheros de Manifiesto (Manifest): Lo Básico</a></div>
                <div class="linkBHEAD"><a href="defman.html">Entendiendo el Manifiesto por Defecto</a></div>
                <div class="linkBHEAD"><a href="modman.html">Modificando un Fichero de Manifiesto</a></div>
                <div class="linkBHEAD"><a href="appman.html">Configurando el Punto de Entrada de la Aplicación</a></div>
                <div class="linkBHEAD"><a href="downman.html">Añadiendo Clases al ClassPath del Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="packageman.html">Configurando la Información de la Versión del Paquete</a></div>
                <div class="linkBHEAD"><a href="sealman.html">Sellando Paquetes dentro de un Fichero JAR</a></div>
                <div class="linkBHEAD"><a href="secman.html">Mejorando la Seguridad con los Atributos del Manifiesto</a></div>
                <div class="linkAHEAD"><a href="signindex.html">Firmando y Verificando los Ficheros JAR</a></div>
                <div class="linkBHEAD"><a href="intro.html">Entendiendo el Firmado y la Verificación</a></div>
                <div class="linkBHEAD"><a href="signing.html">Firmando Ficheros JAR</a></div>
                <div class="linkBHEAD"><a href="verify.html">Verificando Ficheros JAR Firmados</a></div>
                <div class="linkAHEAD"><a href="apiindex.html">Usando IPAs relacionadas con el formato JAR</a></div>
                <div class="linkBHEAD"><a href="jarclassloader.html">La Clase JarClassLoader</a></div>
                <div class="nolinkBHEAD">La Clase JarRunner</div>
                <div class="linkQUESTIONS"><a href="QandE/questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Implantación<br />
                <b>Lección:</b> Empaquetando Programas en Ficheros JAR<br />
                <b>Sección:</b> Usando IPAs relacionadas con el formato JAR
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Implantación</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Empaquetando Programas en Ficheros JAR</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="jarclassloader.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle"><h1>La Clase JarRunner</h1></div>
            <div id="PageContent">
                <p>
                    La aplicación JarRunner se lanza con un comando de esta forma:
                </p>
                <div class="codeblock">
                    <pre>
java JarRunner <i>lur [argumentos]</i>
                    </pre>
                </div>
                <p>
                    En la sección previa, hemos visto cómo <code>JarClassLoader</code> es capaz de identificar y cargar la clase 
                    principal de la aplicación empaquetada en JAR desde un LUR (Localizador Uniforme de Recursos, URL en inglés) 
                    dada. Para completar la aplicación JarRunner, por lo tanto, necesitamos ser capaces de tomar un LUR  y otros  
                    argumentos desde la línea de comandos, y pasárselos a una instancia de <code>JarClassLoader</code>. Estas 
                    tareas pertenecen a la clase <code>JarRunner</code>, el punto de entrada de la aplicación JarRunner.
                </p>
                <p>
                    Se empieza creando un objeto <code>java.net.URL</code> a partir del LUR especificado en la línea de comandos:
                </p>
                <div class="codeblock">
                    <pre>
public static void main(String[] args) {
    if (args.length &lt; 1) {
        usage();
    }
    URL url = null;
    try {
        url = new URL(args[0]);
    } catch (MalformedURLException e) {
        fatal("LUR no válido: " + args[0]);
    }
                    </pre>
                </div>
                <p>
                    Si <code>args.length&nbsp;&lt;&nbsp;1</code>, significa que no se especificó ningún LUR en la línea de 
                    comandos, así que se visualiza un mensaje de uso. Si el primer argumento de la línea de comandos es un buen 
                    LUR, se crea un objeto <code>URL</code> nuevo para representarlo.
                </p>
                <p>
                    A continuación, JarRunner crea una instancia nueva de <code>JarClassLoader</code>, pasando al constructor el 
                    LUR que se especificó en la línea de comandos:
                </p>
                <div class="codeblock">
                    <pre>
JarClassLoader cl = new JarClassLoader(url);
                    </pre>
                </div>
                <p>
                    Como vimos en la sección previa, es a través de <code>JarClassLoader</code> que JarRunner aprovecha las IPA de 
                    manejo de archivos JAR.
                </p>
                <p>
                    El objeto URL que se le pasa al constructor de <code>JarClassLoader</code> es el LUR de la aplicación 
                    empaquetada en JAR que usted quiere ejecutar. JarRunner a continuación llama al método 
                    <code>getMainClassName</code> del cargador de clases para identificar la clase que es el punto de entrada para 
                    la aplicación:
                </p>
                <div class="codeblock">
                    <pre>
String name = null;
try {
    <b>name = cl.getMainClassName();</b>
} catch (IOException e) {
    System.err.println("Error de E/S mientras se cargaba el fichero JAR:");
    e.printStackTrace();
    System.exit(1);
}
if (name == null) {
    fatal("El fichero jar especificado no contiene un atributo de manifiesto" +
          " 'Main-Class'");
}
                    </pre>
                </div>
                <p>
                    La sentencia clave es resaltada en negrita. Las otras sentencias son para el manejo de errores.
                </p>
                <p>
                    Una vez <code>JarRunner</code> ha identificado la clase que es el punto de entrada de la aplicación, sólo 
                    quedan dos pasos: pasar el resto de argumentos a la aplicación e iniciar realmente la aplicación. 
                    <code>JarRunner</code> realiza estos pasos con este código:
                </p>
                <div class="codeblock">
                    <pre>
// Toma argumentos para la aplicación
String[] newArgs = new String[args.length - 1];
<b>System.arraycopy(args, 1, newArgs, 0, newArgs.length);</b>
// Invoca la clase principal de la aplicación
try {
    cl.invokeClass(name, newArgs);
} catch (ClassNotFoundException e) {
    fatal("No se encontró la clase: " + name);
} catch (NoSuchMethodException e) {
    fatal("La clase no define un método 'main': " + name);
} catch (InvocationTargetException e) {
    e.getTargetException().printStackTrace();
    System.exit(1);
}
                    </pre>
                </div>
                <p>
                    Recuerde que el primer argumento de la línea de comandos era el LUR de la aplicación empaquetada en JAR. Por lo 
                    tanto el resto de argumentos que se pasan a la aplicación están en el elemento <code>1</code> y siguientes en 
                    la matriz <code>args</code>.  <code>JarRunner</code> toma esos elementos, y crea una matriz nueva llamada 
                    <code>newArgs</code> para pasarla a la aplicación (línea en negrita arriba). A continuación 
                    <code>JarRunner</code> pasa el nombre de la clase de punto de entrada y la nueva matriz de argumentos al método 
                    <code>invokeClass</code> de <code>JarClassLoader</code>. Como vimos en la sección previa, 
                    <code>invokeClass</code> cargará la clase de punto de entrada de la aplicación, pasándole los argumentos, y 
                    lanza la aplicación.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="jarclassloader.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos
                            <a href="../../information/cpyr.html">avisos legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs</a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> La Clase JarClassLoader<br />
            <b>Página siguiente:</b> Questions and Exercises: JAR
        </div>
    </body>
</html> 
