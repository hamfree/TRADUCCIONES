<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Anotaciones de Repetición (Los Tutoriales de Java&trade; &gt; Aprendiendo el Lenguaje Java &gt; Anotaciones)
        </title>
        <meta name="description" content="Este tutorial para principiantes de Java describle los fundamentos de programación en el
              lenguaje de programación Java" />
        <meta name="keywords" content="java programming, learn java, java sample code, java objects, java classes, java inheritance,
              interfaces, variables, arrays, data types, operators, control flow, number, string" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Anotaciones</a></div>
                <div class="linkAHEAD"><a href="basics.html">Lo Básico de las Anotaciones</a></div>
                <div class="linkAHEAD"><a href="declaring.html">Declarando un tipo Anotación</a></div>
                <div class="linkAHEAD"><a href="predefined.html">Tipos de Anotaciones Predefinidos</a></div>
                <div class="linkAHEAD"><a href="type_annotations.html">Tipos de Anotaciones y los Sistemas de Tipos Enchufables</a></div>
                <div class="nolinkAHEAD">Anotaciones de Repetición</div>
                <div class="linkQUESTIONS"><a href="QandE/questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Aprendiendo el Lenguaje Java<br />
                <b>Lección:</b> Anotaciones
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Aprendiendo el Lenguaje Java</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Anotaciones</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="type_annotations.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Anotaciones de Repetición</h1>
            </div>
            <div id="PageContent">
                <p>
                    Hay algunas situaciones donde quiere aplicar la misma anotación a una declaración o a un uso de tipo. A partir
                    de la versión Java SE 8, las <em>anotaciones de repetición</em> le permiten hacer esto.
                </p>
                <p>
                    Por ejemplo, está escribiendo código para usar un servicio de temporizador que le habilita a ejecutar un método
                    en un tiempo dado o con un cierto horario, similar al servicio <code>cron</code> de UNIX. Ahora quiere
                    establecer un temporizador para ejecutar un método, <code>hacerLimpiezaPeriodica</code>, en el último día del
                    mes y cada Viernes a las 23:00 horas. Para establecer el temporizador a ejecutar, crea una anotación 
                    <code>@Schedule</code> y la aplica dos veces al método <code>hacerLimpiezaPeriodica</code>. El primer uso
                    especifica el último día del mes y el segundo especifica el Viernes a las 23:00 horas, como es mostrado en el
                    siguiente código de ejemplo:
                </p>
                <div class="codeblock">
                    <pre>
@Schedule(dayOfMonth="last")
@Schedule(dayOfWeek="Fri", hour="23")
public void hacerLimpiezaPeriodica() { ... }
                    </pre>
                </div>
                <p>
                    El ejemplo anterior aplica una anotación a un método. Puede repetir una anotación en cualquier lugar en el que
                    usted usaría una anotación estándar. Por ejemplo, usted tiene una clase para manejar las excepciones de acceso
                    no autorizado. Usted anota la clase con una anotación <code>@Alert</code> para los gestores y otra para los
                    administradores:
                </p>
                <div class="codeblock">
                    <pre>
@Alert(role="Manager")
@Alert(role="Administrator")
public class UnauthorizedAccessException extends SecurityException { ... }
                    </pre>
                </div>
                <p>
                    Por razones de compatibilidad, las anotaciones de repetición son almacenadas en un 
                    <em>contenendor de anotaciones</em> que es automáticamente generado por el compilador de Java. En orden de que
                    el compilador haga esto, se requieren dos declaraciones en su código.
                </p>
                <h2>Paso 1: Declarar un Tipo de Anotación Repetible</h2>
                <p>
                    El tipo de la anotación debe ser marcado con la meta-anotación <code>@Repeatable</code>. El siguiente ejemplo
                    define un tipo de anotación de repetición personalizada <code>@Schedule</code>:
                </p>
                <div class="codeblock">
                    <pre>
import java.lang.annotation.Repeatable;

<strong>@Repeatable(Schedules.class)</strong>
public @interface Schedule {
  String dayOfMonth() default "first";
  String dayOfWeek() default "Mon";
  int hour() default 12;
}
                    </pre>
                </div>
                <p>
                    El valor de la meta-anotación <code>@Repeatable</code>, entre paréntesis , es el tipo del contenedor de
                    anotaciones que el compilador de Java genera para almacenar las anotaciones de repetición. En este ejemplo,
                    el tipo de anotación contenedor es <code>Schedules</code>, de forma que las anotaciones de repetición
                    <code>@Schedule</code> son almacenadas en una anotación <code>@Schedules</code>.
                </p>
                <p>
                    Aplicar la misma anotación a una declaración sin primero declararla repetible resulta en un error en tiempo de
                    compilación.
                </p>
                <h2>Paso 2: Declarar el Tipo de Anotación Contenedor</h2>
                <p>
                    El tipo de anotación contenedor debe tener un elemento <code>value</code> que sea un tipo matriz. El tipo
                    componente del tipo matriz debe ser el tipo de anotación de repetición. La declaración para el tipo de anotación
                    contenedor <code>Schedules</code> es la siguiente:
                </p>
                <div class="codeblock">
                    <pre>
public @interface Schedules {
    Schedule[] value();
}
                    </pre>
                </div>
                <h2>Recuperando Anotaciones</h2>
                <p>
                    Hay varios métodos disponibles en la IPA Reflection que pueden ser usados para recuperar anotaciones.
                    El comportamiento de los métodos que retorna una anotación simple, tales como
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html#getAnnotationByType-java.lang.Class-">
                        AnnotatedElement.getAnnotationByType(Class&lt;T&gt;)
                    </a>, están sin cambiar en que sólo devuelven una anotación única si <em>una</em> anotación del tipo requerido
                    está presente. Si más de una anotación del tipo requerido está presente, puede obtenerlas obteniendo primero su
                    anotación de contenedor. De esta forma, el código antiguo continúa funcionando. Otros métodos fueron
                    introducidos en Java SE 8 que escudriñan la anotación contenedora para devolver múltiples anotaciones de una
                    vez, tales como
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html#getAnnotations-java.lang.Class-">
                        AnnotatedElement.getAnnotations(Class&lt;T&gt;)
                    </a>. Vea la especificación de la clase
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html">
                        AnnotatedElement
                    </a> para informarse de todos los métodoss disponibles.
                </p>
                <h2>Consideraciones de Diseño</h2>
                <p>
                    Cuando diseña una anotación, debe considerar la <em>cardinalidad</em> de las anotaciones de ese tipo. Es ahora
                    posible usar una anotación cero veces, una, o, si el tipo de anotación es marcado como <code>@Repeatable</code>,
                    más de una vez. Es también posible restringir dónde un tipo de anotación puede ser usado utizando la
                    meta-anotación <code>@Target</code>. Por ejemplo, usted crea un tipo de anotación de repetición que puede ser
                    sólo usado en métodos y campos. Es importante diseñar su tipo de anotación cuidadosamente para asegurarse que
                    el programador que <em>usa</em> la anotación la encuentra tan flexible y poderosa como sea posible.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="type_annotations.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Tipos de Anotaciones y los Sistemas de Tipos Enchufables<br />
            <b>Página siguiente:</b> Preguntas y Ejercicios: Anotaciones
        </div>
    </body>
</html>