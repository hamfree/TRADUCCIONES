<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Clases Anónimas (Los Tutoriales de Java&trade; &gt; Aprendiendo el Lenguaje Java &gt; Clases y Objetos)
        </title>
        <meta name="description" content="Este tutorial de Java para principiantes describe los fundamentos de la programación en el
              lenguaje de programación Java" />
        <meta name="keywords" content="java programming, learn java, java sample code, java objects, java classes, java inheritance,
              interfaces, variables, arrays, data types, operators, control flow, number, string" />
        <link rel="stylesheet" href="../../indice.css" type="text/css" />
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName" >Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Clases y Objetos</a></div>
                <div class="linkAHEAD"><a href="classes.html">Clases</a></div>
                <div class="linkBHEAD"><a href="classdecl.html">Declarando Clases</a></div>
                <div class="linkBHEAD"><a href="variables.html">Declarando Variables Miembro</a></div>
                <div class="linkBHEAD"><a href="methods.html">Definiendo Métodos</a></div>
                <div class="linkBHEAD"><a href="constructors.html">Proporcionando Constructores Para Sus Clases</a></div>
                <div class="linkBHEAD"><a href="arguments.html">Pasando Información a un método o a un constructor</a></div>
                <div class="linkAHEAD"><a href="objects.html">Objetos</a></div>
                <div class="linkBHEAD"><a href="objectcreation.html">Creando Objetos</a></div>
                <div class="linkBHEAD"><a href="usingobject.html">Usando Objetos</a></div>
                <div class="linkAHEAD"><a href="more.html">Más sobre Clases</a></div>
                <div class="linkBHEAD"><a href="returnvalue.html">Devolviendo un Valor de un Método</a></div>
                <div class="linkBHEAD"><a href="thiskey.html">Usando la Palabra Clave this</a></div>
                <div class="linkBHEAD"><a href="accesscontrol.html">Controlando el Acceso a los Miembros de una Clase</a></div>
                <div class="linkBHEAD"><a href="classvars.html">Entendiendo los Miembros de una Clase</a></div>
                <div class="linkBHEAD"><a href="initial.html">Inicializando Campos</a></div>
                <div class="linkBHEAD"><a href="summaryclasses.html">Sumario de Creando y Usando Clases y Objetos</a></div>
                <div class="linkQUESTIONS"><a href="QandE/creating-questions.html">Preguntas y Ejercicios</a></div>
                <div class="linkQUESTIONS"><a href="QandE/objects-questions.html">Preguntas y Ejercicios</a></div>
                <div class="linkAHEAD"><a href="nested.html">Clases Anidadas</a></div>
                <div class="linkBHEAD"><a href="innerclasses.html">Ejemplo de Clase Interior</a></div>
                <div class="linkBHEAD"><a href="localclasses.html">Clases Locales</a></div>
                <div class="nolinkBHEAD">Clases Anónimas</div>
                <div class="linkBHEAD"><a href="lambdaexpressions.html">Expresiones Lambda</a></div>
                <div class="linkCHEAD"><a href="methodreferences.html">Referencias a Métodos</a></div>
                <div class="linkBHEAD"><a href="whentouse.html">Cuándo Usar Clases Anidadas, Clases Locales, Clases Anónimas y Expresiones Lambda</a></div>
                <div class="linkQUESTIONS"><a href="QandE/nested-questions.html">Preguntas y Ejercicios</a></div>
                <div class="linkAHEAD"><a href="enum.html">Tipos Enum</a></div>
                <div class="linkQUESTIONS"><a href="QandE/enum-questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Aprendiendo el Lenguaje Java<br />
                <b>Lección:</b> Clases y Objetos<br />
                <b>Sección:</b> Clases Anidadas
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Aprendiendo el Lenguaje Java</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Clases y Objetos</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="localclasses.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="lambdaexpressions.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Clases Anónimas</h1>
            </div>
            <div id="PageContent">
                <p>
                    Las clases anónimas le habilitan a que su código sea más conciso. Le habilitan a declarar e instanciar una clase
                    al mismo tiempo. Son como las clases locales excepto que no tienen un nombre. Úselas si necesita usar una clase
                    local sólo una vez.
                </p>
                <p>
                    Esta sección cubre los siguientes tópicos:
                </p>
                <ul>
                    <li>
                        <a href="#declaring-anonymous-classes">
                            Declarar Clases Anónimas
                        </a>
                    </li>
                    <li>
                        <a href="#syntax-of-anonymous-classes">
                            Sintaxis de las Clases Anónimas
                        </a>
                    </li>
                    <li>
                        <a href="#accessing">
                            Acceder a las Variables Locales del Alcance Envolvente, y Declarar y Acceder Miembros de la Clase
                            Anónima
                        </a>
                    </li>
                    <li>
                        <a href="#examples-of-anonymous-classes">
                            Ejemplos de Clases Anónimas
                        </a>
                    </li>
                </ul>
                <h2><a id="declaring-anonymous-classes">Declarar Clases Anónimas</a></h2>
                <p>
                    Mientras las clases locales son declaraciones de clases, las clases anónimas son expresiones, lo cual significa
                    que puede definir la clase en otra expresión. El siguiente ejemplo,
                    <a class="SourceLink" target="_blank" href="examples/ClasesAnonimasHolaMundo.java"
                       onclick="showCode('../../displayCode.html', 'examples/ClasesAnonimasHolaMundo.java'); return false;">
                        <code>ClasesAnonimasHolaMundo</code>
                    </a>, usa clases anónimas en las sentencias de inicialización de las variables locales <code>saludaFrances</code>
                    y <code>saludaEspañol</code>, pero usa una clase local para la inicialización de la variable
                    <code>SaludoEnIngles</code> :
                </p>
                <pre class="codeblock">

public class ClasesAnonimasHolaMundo {

    interface HolaMundo {

        public void saluda();

        public void saludaAAlguien(String alguien);
    }

    public void diHola() {

        class SaludoEnIngles implements HolaMundo {

            String nombre = &quot;world&quot;;

            public void saluda() {
                saludaAAlguien(&quot;world&quot;);
            }

            public void saludaAAlguien(String alguien) {
                nombre = alguien;
                System.out.println(&quot;Hello &quot; + nombre);
            }
        }

        HolaMundo saludoIngles = new SaludoEnIngles();

        HolaMundo saludaFrances = new HolaMundo() {
            String nombre = &quot;tout le monde&quot;;

            public void saluda() {
                saludaAAlguien(&quot;tout le monde&quot;);
            }

            public void saludaAAlguien(String alguien) {
                nombre = alguien;
                System.out.println(&quot;Salut &quot; + nombre);
            }
        };

        HolaMundo saludaEspañol = new HolaMundo() {
            String nombre = &quot;mundo&quot;;

            public void saluda() {
                saludaAAlguien(&quot;mundo&quot;);
            }

            public void saludaAAlguien(String alguien) {
                nombre = alguien;
                System.out.println(&quot;Hola, &quot; + nombre);
            }
        };
        saludoIngles.saluda();
        saludaFrances.saludaAAlguien(&quot;Fred&quot;);
        saludaEspañol.saluda();
    }

    public static void main(String... args) {
        ClasesAnonimasHolaMundo miApp
                = new ClasesAnonimasHolaMundo();
        miApp.diHola();
    }
}
                </pre>
                <h2><a id="syntax-of-anonymous-classes">Sintaxis de las Clases Anónimas</a></h2>
                <p>
                    Como se mencionó previamente, una clase anónima es una expresión. La sintaxis de una expresión de clase anónima
                    es como la invocación de un constructor, excepto que hay una definición de clase contenida en un bloque de
                    código.
                </p>
                <p>
                    Considere la instanciación del objeto <code>saludaFrances</code> :
                </p>
                <pre>
        HolaMundo saludaFrances = new HolaMundo() {
            String nombre = &quot;tout le monde&quot;;

            public void saluda() {
                saludaAAlguien(&quot;tout le monde&quot;);
            }

            public void saludaAAlguien(String alguien) {
                nombre = alguien;
                System.out.println(&quot;Salut &quot; + nombre);
            }
        };
                </pre>
                <p>
                    La expresión de la clase anónima consiste de lo siguiente:
                </p>
                <ul>
                    <li>
                        <p>
                            El operador <code>new</code> .
                        </p>
                    </li>
                    <li>
                        <p>
                            El nombre de la interfaz a implementar o de una clase a extender. En este ejemplo, la clase anónima está
                            implementando el interfaz <code>HolaMundo</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Los paréntesis que contienen los argumentos para el constructor, como la expresión de la creación de una 
                            instancia de una clase normal. <strong>Nota</strong>: Cuando implementa un interfaz, no hay un
                            constructor, así que usa un par vacío de paréntesis, como en este ejemplo.
                        </p>
                    </li>
                    <li>
                        <p>
                            Un cuerpo, el cual es una declaración del cuerpo de la clase. Más específicamente, en el cuerpo, las
                            declaraciones de método están permitidas pero las sentencias no lo están.
                        </p>
                    </li>
                </ul>
                <p>
                    Debido a que una definición de clase anónima es una expresión, debe ser parte de una sentencia. En este ejemplo,
                    la expresión de la clase anónima es parte de la sentencia que instancia el objeto <code>saludaFrances</code> .
                    (Esto explica porqué hay un punto y coma después de la llave de cierre).
                </p>
                <h2>
                    <a id="accessing">
                        Acceder a las Variables Locales del Alcance Envolvente, y Declarar y Acceder Miembros de la Clase Anónima
                    </a>
                </h2>
                <p>
                    Como las clases locales, las clases anónimas pueden
                    <a class="TutorialLink" target="_top" 
                       href="localclasses.html#accessing-members-of-an-enclosing-class">
                        capturar variables
                    </a>; ellas tienen el mismo acceso a las variables locaoles del alcance envolvente:
                </p>
                <ul>
                    <li>
                        <p>
                            Una clase anónima tiene acceso a los miembros de su clase envolvente.
                        </p>
                    </li>
                    <li>
                        <p>
                            Una clase anónima no puede acceder a las variables locales en el alcance envolvente que no fueron 
                            declaradas como <code>finales</code> o efectivamente finales.
                        </p>
                    </li>
                    <li>
                        <p>
                            Como una clase anidada, una declaración de un tipo (tal como una variable( en una clase anónima oculta
                            cualquier otra declaración en el alcance envolvente que tenga el mismo nombre. Vea
                            <a class="TutorialLink" target="_top"
                               href="../../java/javaOO/nested.html#shadowing">
                                Ocultación
                            </a> para más información.
                        </p>
                    </li>
                </ul>
                <p>
                    Las clases anónimas tienen también las mismas restricciones que las clases locales con respecto a sus miembros:
                </p>
                <ul>
                    <li>
                        <p>
                            No puede declarar inicializadores estáticos o interfaces miembro en una clase anónima.
                        </p>
                    </li>
                    <li>
                        <p>
                            Una clase anónima puede tener miembros estáticos siempre que ellos sean variables constantes.
                        </p>
                    </li>
                </ul>
                <p>
                    Note que puede declarar lo siguiente en clases anónimas:
                </p>
                <ul>
                    <li>
                        <p>
                            Campos
                        </p>
                    </li>
                    <li>
                        <p>
                            Métodos extra (incluso si ellos no implementan ningún método del supertipo)
                        </p>
                    </li>
                    <li>
                        <p>
                            Inicializadores de la instancia
                        </p>
                    </li>
                    <li>
                        <p>
                            Clases locales
                        </p>
                    </li>
                </ul>
                <p>
                    Sin embargo, no puede declarar constructores en una clase anónima.
                </p>
                <h2><a id="examples-of-anonymous-classes">Ejemplos de Clases Anónimas</a></h2>
                <p>
                    Las clases anónimas son usadas a menudo en las aplicaciones del interfaz gráfico del usuario (GUI en inglés).
                </p>
                <p>
                    Considere el ejemplo de JavaFX
                    <a href="https://docs.oracle.com/javase/8/javafx/get-started-tutorial/hello_world.htm">
                        <code>HelloWorld.java</code>
                    </a> (de la sección
                    <a href="https://docs.oracle.com/javase/8/javafx/get-started-tutorial/hello_world.htm">
                        Hello World, Estilo JavaFX
                    </a> de
                    <a href="https://docs.oracle.com/javase/8/javafx/get-started-tutorial/javafx_get_started.htm">
                        Empezando con JavaFX
                    </a>). Este ejemplo crea un cuadro que contiene un botón <strong>Di 'Hola Mundo'</strong>. La expresión de clase
                    anónima está destacada:
                </p>
                <pre>
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
 
public class HelloWorld extends Application {
    public static void main(String[] args) {
        launch(args);
    }
    
    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Hello World!");
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(<b>new EventHandler&lt;ActionEvent&gt;() {</b>
 
            <b>@Override</b>
            <b>public void handle(ActionEvent event) {</b>
                <b>System.out.println("Hello World!");</b>
            <b>}</b>
        <b>}</b>);
        
        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }
}
                </pre>
                <p>
                    En este ejemplo, la invoación al método <code>btn.setOnAction</code> especifica lo que ocurre cuando usted
                    selecciona el botón <b>Diy 'Hola Mundo'</b> . Este método requiere un objeto del tipo
                    <code>EventHandler&lt;ActionEvent&gt;</code>. El interfaz <code>EventHandler&lt;ActionEvent&gt;</code> contiene
                    sólo un método, o manejador. En vez de implementar éste método con una nueva clase, el ejemplo usa una expresión
                    de clase anónima. Observe que esta expresión es el argumento pasado al método <code>btn.setOnAction</code> .
                </p>
                <p>
                    Debido a que el interfaz <code>EventHandler&lt;ActionEvent&gt;</code> contiene un sólo método, puede usar una
                    expresión lambda en vez de una expresión de clase anónima. Vea la sección
                    <a class="TutorialLink" target="_top" href="lambdaexpressions.html">
                        Expresiones Lambda
                    </a> para más información.
                </p>
                <p>
                    Las clases anónimas son ideales para implementar un interfaz que contiene dos o más métodos. El siguiente
                    ejemplo de JavaFX es de la sección
                    <a href="https://docs.oracle.com/javase/8/javafx/user-interface-tutorial/custom.htm">
                        Personalización de Controles del IU (Customization of UI Controls, en inglés)
                    </a>. El código destacado crea un campo de texto que sólo acepta valores numéricos. Redefine la implementación
                    por de fecto de la clase <code>TextField</code> con una clase anónima sobreescribiendo los métodos
                    <code>replaceText</code>  y <code>replaceSelection</code> heredados desde la clase
                    <code>TextInputControl</code>.
                </p>
                <pre class="codeblock">
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

public class CustomTextFieldSample extends Application {
    
    final static Label label = new Label();
 
    @Override
    public void start(Stage stage) {
        Group root = new Group();
        Scene scene = new Scene(root, 300, 150);
        stage.setScene(scene);
        stage.setTitle("Text Field Sample");
 
        GridPane grid = new GridPane();
        grid.setPadding(new Insets(10, 10, 10, 10));
        grid.setVgap(5);
        grid.setHgap(5);
 
        scene.setRoot(grid);
        final Label dollar = new Label("$");
        GridPane.setConstraints(dollar, 0, 0);
        grid.getChildren().add(dollar);
        
        final TextField sum = <b>new TextField() {</b>
            <b>@Override</b>
            <b>public void replaceText(int start, int end, String text) {</b>
                <b>if (!text.matches("[a-z, A-Z]")) {</b>
                    <b>super.replaceText(start, end, text);                     </b>
                <b>}</b>
                <b>label.setText("Enter a numeric value");</b>
            <b>}</b>
 
            <b>@Override</b>
            <b>public void replaceSelection(String text) {</b>
                <b>if (!text.matches("[a-z, A-Z]")) {</b>
                    <b>super.replaceSelection(text);</b>
                <b>}</b>
            <b>}</b>
        <b>};</b>
 
        sum.setPromptText("Enter the total");
        sum.setPrefColumnCount(10);
        GridPane.setConstraints(sum, 1, 0);
        grid.getChildren().add(sum);
        
        Button submit = new Button("Submit");
        GridPane.setConstraints(submit, 2, 0);
        grid.getChildren().add(submit);
        
        submit.setOnAction(new EventHandler&lt;ActionEvent&gt;() {
            @Override
            public void handle(ActionEvent e) {
                label.setText(null);
            }
        });
        
        GridPane.setConstraints(label, 0, 1);
        GridPane.setColumnSpan(label, 3);
        grid.getChildren().add(label);
        
        scene.setRoot(grid);
        stage.show();
    }
 
    public static void main(String[] args) {
        launch(args);
    }
}
                </pre>
            </div>
            <div class="NavBit">
                <a target="_top" href="localclasses.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="lambdaexpressions.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank"
                               href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank"
                               href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Clases Locales<br />
            <b>Página siguiente:</b> Expresiones Lambda
        </div>
    </body>
</html> 