<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Restricciones de los Genéricos (Los Tutoriales de Java&trade; &gt; Aprendiendo el Lenguaje Java &gt; Genéricos
            (Actualizado))
        </title>
        <meta name="description" content="Este tutorial para principiantes de Java describle los fundamentos de programación en el
              lenguaje de programación Java" />
        <meta name="keywords" content="java programming, learn java, java sample code, java objects, java classes, java inheritance,
              interfaces, variables, arrays, data types, operators, control flow, number, string" />
        <link rel="stylesheet" href="../../indice.css" type="text/css">
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Genéricos (Actualizado)</a></div>
                <div class="linkAHEAD"><a href="why.html">¿Porqué usar Genéricos?</a></div>
                <div class="linkAHEAD"><a href="types.html">Tipos Genéricos</a></div>
                <div class="linkBHEAD"><a href="rawTypes.html">Tipos Crudos</a></div>
                <div class="linkAHEAD"><a href="methods.html">Métodos Genéricos</a></div>
                <div class="linkAHEAD"><a href="bounded.html">Parámetros de Tipos Acotados</a></div>
                <div class="linkBHEAD"><a href="boundedTypeParams.html">Métodos Genéricos y Parámetros de Tipos Acotados</a></div>
                <div class="linkAHEAD"><a href="inheritance.html">Genéricos, Herencia, y Subtipos</a></div>
                <div class="linkAHEAD"><a href="genTypeInference.html">Inferencia de Tipos</a></div>
                <div class="linkAHEAD"><a href="wildcards.html">Comodines</a></div>
                <div class="linkBHEAD"><a href="upperBounded.html">Comodines Acotados Superiormente</a></div>
                <div class="linkBHEAD"><a href="unboundedWildcards.html">Comodines no Acotados</a></div>
                <div class="linkBHEAD"><a href="lowerBounded.html">Comodines Acotados Inferiormente</a></div>
                <div class="linkBHEAD"><a href="subtyping.html">Comodines y Subtipado</a></div>
                <div class="linkBHEAD"><a href="capture.html">Captura de Comodines y Métodos de Ayuda</a></div>
                <div class="linkBHEAD"><a href="wildcardGuidelines.html">Directrices para el Uso de Comodines</a></div>
                <div class="linkAHEAD"><a href="erasure.html">Borrado de Tipos</a></div>
                <div class="linkBHEAD"><a href="genTypes.html">Borrado de Tipos Genéricos</a></div>
                <div class="linkBHEAD"><a href="genMethods.html">Borrado de Métodos Genéricos</a></div>
                <div class="linkBHEAD"><a href="bridgeMethods.html">Efectos del Borrado de Tipos y Métodos Puente</a></div>
                <div class="linkBHEAD"><a href="nonReifiableVarargsType.html">Tipos No-Cosificables</a></div>
                <div class="nolinkAHEAD">Restricciones de los Genéricos</div>
                <div class="linkQUESTIONS"><a href="QandE/generics-questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Aprendiendo el Lenguaje Java<br />
                <b>Lección:</b> Genéricos (Actualizado)
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Aprendiendo el Lenguaje Java</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Genéricos (Actualizado)</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="nonReifiableVarargsType.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/generics-questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Restricciones de los Genéricos</h1>
            </div>
            <div id="PageContent">
                <p>
                    Para usar los genéricos de Java efectivamente, debe considerar las siguientes restricciones:
                </p>
                <ul>
                    <li>
                        <a class="TutorialLink" target="_top" href="#instantiate">
                            No Puede Instanciar Tipos Genéricos con Tipos Primitivos
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#createObjects">
                            No Puede Crear Instancias de los Parámetros Tipo
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#createStatic">
                            No Puede Declarar Campos Estáticos Cuyos Tipos sean Parámetros Tipo
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#cannotCast">
                            No Puede Usar Moldeos o <code>instanceof</code> Con los Tipos Parametrizados
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#createArrays">
                            No Puede Crear Matrices de Tipos Parametrizados
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#cannotCatch">
                            No Puede Crear, Capturar, o Lanzar Objetos de Tipos Parametrizados
                        </a>
                    </li>
                    <li>
                        <a class="TutorialLink" target="_top" href="#cannotOverload">
                            No Puede Sobrecargar un Método donde Los Tipos de los Parámetros Formales de Cada Sobrecarga Borra el
                            Mismo Tipo Crudo
                        </a>
                    </li>
                </ul>
                <h2>
                    <a id="instantiate">No puede Instanciar Tipos Genéricos con Tipos Primitivos</a>
                </h2>
                <p>
                    Considere el siguiente tipo parametrizado:
                </p>
                <div class="codeblock">
                    <pre>
class Pair&lt;K, V&gt; {

    private K key;
    private V value;

    public Pair(K key, V value) {
        this.key = key;
        this.value = value;
    }

    // ...
}
                    </pre>
                </div>
                <p>
                    Cuando crea un objeto <code>Pair</code>, no puede substituir un tipo primitivo por el parámetro tipo
                    <code>K</code> o <code>V</code>:
                </p>
                <div class="codeblock">
                    <pre>
Pair&lt;<strong>int, char</strong>&gt; p = new Pair&lt;&gt;(8, 'a');  // error en tiempo de compilación
                    </pre>
                </div>
                <p>
                    Puede substituir sólo tipos no primitivos por los parámetros de tipo <code>K</code> and <code>V</code>:
                </p>
                <div class="codeblock">
                    <pre>
Pair&lt;<strong>Integer, Character</strong>&gt; p = new Pair&lt;&gt;(8, 'a');
                    </pre>
                </div>
                <p>
                    Note que el compilador de Java "encaja" <code>8</code> en <code>Integer.valueOf(8)</code> y '<code>a</code>' en
                    <code>Character('a')</code>:
                </p>
                <div class="codeblock">
                    <pre>
Pair&lt;Integer, Character&gt; p = new Pair&lt;&gt;(Integer.valueOf(8), new Character('a'));
                    </pre>
                </div>
                <p>
                    Para obtener más información sobre el autoboxing, vea
                    <a class="TutorialLink" target="_top" href="../data/autoboxing.html">
                        Autoboxing y Unboxing (Conversiones Automáticas)</a> en la lección
                    <a class="TutorialLink" target="_top" href="../data/index.html">Números y Cadenas</a>.
                </p>
                <h2>
                    <a id="createObjects">No Puede Crear Instancias de los Parámetros Tipo</a>
                </h2>
                <p>
                    No puede crear una instancia de un parámetro tipo. Por ejemplo, el siguiente código causa un error en tiempo de
                    compilación:
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;E&gt; void append(List&lt;E&gt; list) {
    E elem = new E();  // error en tiempo de compilación
    list.add(elem);
}
                    </pre>
                </div>
                <p>
                    Como una solución alternativa, puede crear un objeto de un parámetro tipo a través de la reflexión:
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;E&gt; void append(List&lt;E&gt; list, Class&lt;E&gt; cls) throws Exception {
    E elem = cls.newInstance();   // OK
    list.add(elem);
}
                    </pre>
                </div>
                <p>
                    Puede invocar el método <code>append</code> como sigue:
                </p>
                <div class="codeblock">
                    <pre>
List&lt;String&gt; ls = new ArrayList&lt;&gt;();
append(ls, String.class);
                    </pre>
                </div>
                <h2>
                    <a id="createStatic">No Puede Declarar Campos Estáticos Cuyos Tipos sean Parámetros Tipo</a>
                </h2>
                <p>
                    Un campo estático de la clase es una variable de nivel-de-clase compartida por todos los objetos no estáticos de
                    la clase. Por lo tanto, los campos estáticos de parámetros tipo no están permitidos. Considere la siguiente
                    clase:
                </p>
                <div class="codeblock">
                    <pre>
public class MobileDevice&lt;T&gt; {
    private static T os;

    // ...
}
                    </pre>
                </div>
                <p>
                    Si los campos estáticos de parámetros tipo fueran permitidos, entonces el siguiente código sería confuso:
                </p>
                <div class="codeblock">
                    <pre>
MobileDevice&lt;Smartphone&gt; phone = new MobileDevice&lt;&gt;();
MobileDevice&lt;Pager&gt; pager = new MobileDevice&lt;&gt;();
MobileDevice&lt;TabletPC&gt; pc = new MobileDevice&lt;&gt;();
                    </pre></div>
                <p>
                    Porque el campo estático <code>os</code> es compartido por <code>phone</code>, <code>pager</code>, y
                    <code>pc</code>, ¿Cual es el tipo actual de <code>os</code>? No puede ser <code>Smartphone</code>,
                    <code>Pager</code>, y <code>TabletPC</code> al mismo tiempo. No puede, por tanto, crear campos estáticos de
                    parámetros tipo.
                </p>
                <h2>
                    <a id="cannotCast">No Puede Usar Moldeos o <code>instanceof</code> Con los Tipos Parametrizados</a>
                </h2>
                <p>
                    Debido a que el compilador de Java borra todos los parámetros de tipo en el código genérico, no puede verificar
                    cual de los tipos parametrizados para un tipo genérico está siendo usado en tiempo de ejecución:
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;E&gt; void rtti(List&lt;E&gt; list) {
    if (list instanceof ArrayList&lt;Integer&gt;) {  // error en tiempo de compilación
        // ...
    }
}
                    </pre>
                </div>
                <p>
                    El conjunto de tipos parametrizados pasados al método <code>rtti</code> es:
                </p>
                <div class="codeblock">
                    <pre>
S = { ArrayList&lt;Integer&gt;, ArrayList&lt;String&gt; LinkedList&lt;Character&gt;, ... }
                    </pre>
                </div>
                <p>
                    El entorno de ejecución no sigue la pista de los parámetros tipo, así que no puede decir la diferencia entre una
                    <code>ArrayList&lt;Integer&gt;</code> y una <code>ArrayList&lt;String&gt;</code>. Lo máximo que puede hacer es
                    usar un comodín sin acotar para verificar que la lista es una <code>ArrayList</code>:
                </p>
                <div class="codeblock">
                    <pre>
public static void rtti(List&lt;?&gt; list) {
    if (list instanceof ArrayList&lt;?&gt;) {  // OK; instanceof requiere un tipo cosificable
        // ...
    }
}
                    </pre>
                </div>
                <p>
                    Típìcamente, no puede moldear a un tipo parametrizado a menos que sea parametrizado por comodines sin acotar.
                    Por ejemplo:
                </p>
                <div class="codeblock">
                    <pre>
List&lt;Integer&gt; li = new ArrayList&lt;&gt;();
List&lt;Number&gt;  ln = (List&lt;Number&gt;) li;  // error en tiempo de compilación
                    </pre>
                </div>
                <p>
                    Sin embargo, en algunos casos el compilador sabe que un parámetro tipo es siempre válido y permite el moldeo.
                    Por ejemplo:
                </p>
                <div class="codeblock">
                    <pre>
List&lt;String&gt; l1 = ...;
ArrayList&lt;String&gt; l2 = (ArrayList&lt;String&gt;)l1;  // OK
                    </pre>
                </div>
                <h2>
                    <a id="createArrays">No Puede Crear Matrices de Tipos Parametrizados</a>
                </h2>
                <p>
                    No puede crear matrices de tipos parametrizados. Por ejemplo, el siguiente código no compila:
                </p>
                <div class="codeblock">
                    <pre>
List&lt;Integer&gt;[] arrayOfLists = new List&lt;Integer&gt;[2];  // error en tiempo de compilación
                    </pre>
                </div>
                <p>
                    El siguiente código ilustra que ocurre cuando tipos diferentes son insertados dentro de una matriz:
                </p>
                <div class="codeblock">
                    <pre>
Object[] strings = new String[2];
strings[0] = "hi";   // OK
strings[1] = 100;    // Se lanza una ArrayStoreException.
                    </pre>
                </div>
                <p>
                    Si intenta lo mismo con una lista genérica, habría un problema:
                </p>
                <div class="codeblock">
                    <pre>
Object[] stringLists = new List&lt;String&gt;[];  // error del compilador, pero pretenda que es permitido
stringLists[0] = new ArrayList&lt;String&gt;();   // OK
stringLists[1] = new ArrayList&lt;Integer&gt;();  // Una ArrayStoreException será lanzada,
                                            // pero el entorno de ejecución no puede detectarla.
                    </pre>
                </div>
                <p>
                    Si las matrices de listas parametrizadas fueran permitidas, el código previo fallaría en lanzar la deseada
                    <code>ArrayStoreException</code>.
                </p>
                <h2>
                    <a id="cannotCatch">No Puede Crear, Capturar, o Lanzar Objetos de Tipos Parametrizados</a>
                </h2>
                <p>
                    Una clase genérica no puede extender la clase <code>Throwable</code> directa o indirectamente.  Por ejemolo, las
                    siguientes clases no compilarán:
                </p>
                <div class="codeblock">
                    <pre>
// Extiende Throwable indirectamente
class MathException&lt;T&gt; extends Exception { /* ... */ }    // error en tiempo de compilación

// Extiende Throwable directamente
class QueueFullException&lt;T&gt; extends Throwable { /* ... */ // error en tiempo de compilación
                    </pre>
                </div>
                <p>
                    Un método no puede capturar una instancia de un parámetro tipo:
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;T extends Exception, J&gt; void execute(List&lt;J&gt; jobs) {
    try {
        for (J job : jobs)
            // ...
    } catch (T e) {   // error en tiempo de compilación
        // ...
    }
}
                    </pre>
                </div>
                <p>
                    Puede, sin embargo, usar un parámetro tipo en una cláusula <code>throws</code>:
                </p>
                <div class="codeblock">
                    <pre>
class Parser&lt;T extends Exception&gt; {
    public void parse(File file) throws T {     // OK
        // ...
    }
}
                    </pre>
                </div>
                <h2>
                    <a id="cannotOverload">
                        No Puede Sobrecargar un Método donde Los Tipos de los Parámetros Formales de Cada Sobrecarga Borra el
                        Mismo Tipo Crudo
                    </a>
                </h2>
                <p>
                    Una clase no puede tener dos métodos sobrecargados que tendrán la misma firma después del borrado de tipos.
                </p>
                <div class="codeblock">
                    <pre>
public class Example {
    public void print(Set&lt;String&gt; strSet) { }
    public void print(Set&lt;Integer&gt; intSet) { }
}
                    </pre>
                </div>
                <p>
                    Las sobrecargas compartirán todas la misma representación de la clase y generarán un error en tiempo de
                    compilación.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="nonReifiableVarargsType.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="QandE/generics-questions.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Tipos No-Cosificables<br />
            <b>Página siguiente:</b> Preguntas y Ejercicios: Genéricos
        </div>
    </body>
</html>