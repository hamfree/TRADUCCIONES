<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Tipos No-Cosificables (Los Tutoriales de Java&trade; &gt; Aprendiendo el Lenguaje Java &gt; Genéricos (Actualizado))
        </title>
        <meta name="description" content="Este tutorial para principiantes de Java describle los fundamentos de programación en el
              lenguaje de programación Java" />
        <meta name="keywords" content="java programming, learn java, java sample code, java objects, java classes, java inheritance,
              interfaces, variables, arrays, data types, operators, control flow, number, string" />
        <link rel="stylesheet" href="../../indice.css" type="text/css">
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Genéricos (Actualizado)</a></div>
                <div class="linkAHEAD"><a href="why.html">¿Porqué usar Genéricos?</a></div>
                <div class="linkAHEAD"><a href="types.html">Tipos Genéricos</a></div>
                <div class="linkBHEAD"><a href="rawTypes.html">Tipos Crudos</a></div>
                <div class="linkAHEAD"><a href="methods.html">Métodos Genéricos</a></div>
                <div class="linkAHEAD"><a href="bounded.html">Parámetros de Tipos Acotados</a></div>
                <div class="linkBHEAD"><a href="boundedTypeParams.html">Métodos Genéricos y Parámetros de Tipos Acotados</a></div>
                <div class="linkAHEAD"><a href="inheritance.html">Genéricos, Herencia, y Subtipos</a></div>
                <div class="linkAHEAD"><a href="genTypeInference.html">Inferencia de Tipos</a></div>
                <div class="linkAHEAD"><a href="wildcards.html">Comodines</a></div>
                <div class="linkBHEAD"><a href="upperBounded.html">Comodines Acotados Superiormente</a></div>
                <div class="linkBHEAD"><a href="unboundedWildcards.html">Comodines no Acotados</a></div>
                <div class="linkBHEAD"><a href="lowerBounded.html">Comodines Acotados Inferiormente</a></div>
                <div class="linkBHEAD"><a href="subtyping.html">Comodines y Subtipado</a></div>
                <div class="linkBHEAD"><a href="capture.html">Captura de Comodines y Métodos de Ayuda</a></div>
                <div class="linkBHEAD"><a href="wildcardGuidelines.html">Directrices para el Uso de Comodines</a></div>
                <div class="linkAHEAD"><a href="erasure.html">Borrado de Tipos</a></div>
                <div class="linkBHEAD"><a href="genTypes.html">Borrado de Tipos Genéricos</a></div>
                <div class="linkBHEAD"><a href="genMethods.html">Borrado de Métodos Genéricos</a></div>
                <div class="linkBHEAD"><a href="bridgeMethods.html">Efectos del Borrado de Tipos y Métodos Puente</a></div>
                <div class="nolinkBHEAD">Tipos No-Cosificables</div>
                <div class="linkAHEAD"><a href="restrictions.html">Restricciones de los Genéricos</a></div>
                <div class="linkQUESTIONS"><a href="QandE/generics-questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Aprendiendo el Lenguaje Java<br />
                <b>Lección:</b> Genéricos (Actualizado)<br />
                <b>Sección:</b> Borrado de Tipos
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Aprendiendo el Lenguaje Java</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Genéricos (Actualizado)</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="bridgeMethods.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="restrictions.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Tipos No-Cosificables</h1>
            </div>
            <div id="PageContent">
                <p>La sección
                    <a class="TutorialLink" target="_top" href="erasure.html">
                        Borrado de Tipos</a> describe el proceso donde el compilador elimina la información relacionada a los
                    parámetros de tipo y los argumentos de tipo. El borrado de tipos tiene consecuencias relacionadas con los
                    argumentos variables de los métodos (tambien conocidos como <em>varargs</em> ) cuyos parámetros formales
                    varargs tiene un tipo no-cuantificable. Vea la sección
                    <a class="TutorialLink" target="_top" href="../javaOO/arguments.html#varargs">
                        Número Arbitrario de Argumentos</a> en
                    <a class="TutorialLink" target="_top" href="../javaOO/arguments.html">
                        Pasando Información a un Método o a un Constructor</a> para obtener más información sobre los métodos
                    varargs.
                </p>
                <p>
                    Esta página cubre los siguientes tópicos:
                </p>
                <ul>
                    <li>
                        <a href="#non-reifiable-types">Tipos No-Cosificables</a>
                    </li>
                    <li>
                        <a href="#heap_pollution">Contaminación del Heap (Montón)</a>
                    </li>
                    <li>
                        <a href="#vulnerabilities">
                            Vulnerabilidades Potenciales de los Métodos Varargs con los Parámetros Formales No-Cuantificables
                        </a>
                    </li>
                    <li>
                        <a href="#suppressing">
                            Prevenir Advertencias de los Métodos Varargs con los Parámetros Formales No-Cuantificables
                        </a>
                    </li>
                </ul>
                <h2>
                    <a id="non-reifiable-types">Tipos No-Cosificables</a>
                </h2>
                <p>
                    Un tipo <em>cosificable</em> es un tipo cuya información de tipo está plenamente disponible en tiempo de
                    ejecución. Esto incluye los tipos primitivos, los tipos no genéricos, los tipos crudos, y las invocaciones de
                    comodines sin acotar.
                </p>
                <p>
                    Los <em>tipos no-cosificables</em> son tipos donde la información ha sido eliminada en tiempo de compilación por
                    el borrado de tipos &mdash; las invocaciones de tipos genéricos que no están definidas como comodines sin
                    acotar. Un tipo no-cosificable no tiene toda su información disponible en tiempo de ejecución. Ejemplos de tipos
                    no-cosificables son
                    <code>List&lt;String&gt;</code> y <code>List&lt;Number&gt;</code>; que la MVJ no puede decir las diferencias
                    entre estos tipos en tiempo de ejecución. Como se muestra en
                    <a class="TutorialLink" target="_top" href="restrictions.html">
                        Restricciones de los Genéricos
                    </a>, hay ciertas situaciones donde los tipos no-cuantificables no pueden ser usados: en una expresión 
                    <code>instanceof</code>. por ejemplo, o como un elemento en una matriz.
                </p>
                <h2>
                    <a id="heap_pollution">Contaminación del Heap (Montón)</a>
                </h2>
                <p>
                    La <em>contaminación del Heap</em> ocurre cuando una variable de un tipo parametrizado se refiere a un objeto
                    que no es de ese tipo parametrizado. Esta situación ocurre si el programa realiza alguna operación que da lugar
                    a una advertencia de sin comprobación en tiempo de compilación. Una <em>advertencia sin comprobación</em> es
                    generada si, ya sea en tiempo de compilación (con los límites de las reglas de comprobación de tipos en tiempo
                    de compilación) o en tiempo de ejecución, la corrección de una operación que implica un tipo parametrizado (por
                    ejemplo, un moldeo o una llamada a método) no puede ser verificada. Por ejemplo, la contaminación del heap
                    ocurre cuando se mezclan tipos crudos y tipos parametrizados, o cuando se realizan moldeos sin comprobar.
                </p>
                <p>
                    En situaciones normales, cuando todo el código es compilado al mismo tiempo, el compilador emite una advertencia
                    de sin comprobación para dirigir su atención a la potencial contaminación del heap. Si compila secciones de
                    su código de forma separada, es dificil detectar el riesgo potencial de contaminación del heap. Si usted se
                    asegura de que su código compila sin advertencias, entonces ninguna polución del heap puede ocurrir.
                </p>
                <h2>
                    <a id="vulnerabilities">
                        Vulnerabilidades Potenciales de los Métodos Varargs con los Parámetros Formales No-Cuantificables
                    </a>
                </h2>
                <p>
                    Los métodos genéricos que incluyen parámetros de entrada vararg pueden causar contaminación del heap.
                </p>
                <p>
                    Considere la siguiente clase <code>ArrayBuilder</code>:
                </p>
                <div class="codeblock">
                    <pre>
public class ArrayBuilder {

  public static &lt;T&gt; void addToList (List&lt;T&gt; listArg, T... elements) {
    for (T x : elements) {
      listArg.add(x);
    }
  }

  public static void faultyMethod(List&lt;String&gt;... l) {
    Object[] objectArray = l;     // Valid
    objectArray[0] = Arrays.asList(42);
    String s = l[0].get(0);       // aquí se lanza ClassCastException
  }

}
                    </pre>
                </div>
                <p>
                    El siguiente ejemplo, <code>HeapPollutionExample</code> usa la clase <code>ArrayBuiler</code>:
                </p>
                <div class="codeblock">
                    <pre>
public class HeapPollutionExample {

  public static void main(String[] args) {

    List&lt;String> stringListA = new ArrayList&lt;String>();
    List&lt;String> stringListB = new ArrayList&lt;String>();

    ArrayBuilder.addToList(stringListA, "Seven", "Eight", "Nine");
    ArrayBuilder.addToList(stringListB, "Ten", "Eleven", "Twelve");
    List&lt;List&lt;String>> listOfStringLists =
      new ArrayList&lt;List&lt;String>>();
    ArrayBuilder.addToList(listOfStringLists,
      stringListA, stringListB);

    ArrayBuilder.faultyMethod(Arrays.asList("Hello!"), Arrays.asList("World!"));
  }
}
                    </pre>
                </div>
                <p>
                    Cuando se compiló, la siguiente advertencia es producida por la definición del método
                    <code>ArrayBuilder.addToList</code> :
                </p>
                <div class="codeblock">
                    <pre>
warning: [varargs] Possible heap pollution from parameterized vararg type T
                    </pre>
                </div>
                <p>
                    Cuando el compilador encuentra un método varargs. traduce el parámetro formal varargs en una matriz. Sin 
                    embargo, el lenguaje de programación Java no permite la creación de matrices de tipos parametrizados. En el 
                    método <code>ArrayBuilder.addToList</code>, el compilador traduce el parámetro formal varargs
                    <code>T... elements</code> al parámetro formal <code>T[] elements</code>, una matriz. Sin embargo, debido al
                    borrado de tipos, el compilador convierte el parámetro formal de varargs a <code>Object[] elements</code>.
                    Consecuentemente, hay una posibilidad de contaminación del heap.
                </p>
                <p>
                    La siguiente sentencia asigna el parámetro formal varargs <code>l</code> a la matriz de <code>Object</code>
                    <code>objectArgs</code>:
                </p>
                <div class="codeblock">
                    <pre>
Object[] objectArray = l;
                    </pre>
                </div>
                <p>
                    Esta sentencia puede potencialmente introducir contaminación en el heap. Un valor que hace coincidir el tipo
                    parametrizado de un parámetro formal varargs <code>l</code> puede ser asignado a la variable
                    <code>objectArray</code>, y así puede ser asignado  a <code>l</code>. Sin embargo, el compilador no genera una
                    advertencia sin comprobación en esta sentencia. El compilador ya ha generado una advertencia cuando tradujo
                    el parámetro formal varargs <code>List&lt;String&gt;... l</code> al parámetro formal <code>List[] l</code>.
                    Esta sentencia es válida; la variable <code>l</code> tiene el tipo <code>List[]</code>, la cual es un subtipo de
                    <code>Object[]</code>.
                </p>
                <p>
                    Consecuentemente, el compilador no emite una advertencia o error si usted asigna un objeto <code>List</code>
                    de cualquier tipo a cualquier componente de la matriz de la matriz <code>objectArray</code> como es mostrado por
                    esta sentencia:
                </p>
                <div class="codeblock">
                    <pre>
objectArray[0] = Arrays.asList(42);
                    </pre>
                </div>
                <p>
                    Esta sentencia asigna al primer componente de la matriz <code>objectArray</code> con un objeto <code>List</code>
                    que contiene un objeto de tipo <code>Integer</code>.
                </p>
                <p>
                    Suponga que invoca <code>ArrayBuilder.faultyMethod</code> con la siguiente sentencia:
                </p>
                <div class="codeblock">
                    <pre>
ArrayBuilder.faultyMethod(Arrays.asList("Hello!"), Arrays.asList("World!"));
                    </pre>
                </div>
                <p>
                    En ejecución, la MVH lanza una <code>ClassCastException</code> en la siguiente sentencia:
                </p>
                <div class="codeblock">
                    <pre>
// ClassCastException lanzada aquí
String s = l[0].get(0);
                    </pre>
                </div>
                <p>
                    El objeto almaceando en el primer componente de la matriz de la variable <code>l</code> tiene el tipo
                    <code>List&lt;Integer&gt;</code>, pero esta sentencia está esperando un objeto del tipo
                    <code>List&lt;String&gt;</code>.
                </p>
                <h2>
                    <a id="suppressing">
                        Prevenir Advertencias de los Métodos Varargs con los Parámetros Formales No-Cuantificables
                    </a>
                </h2>
                <p>
                    Si declara un método varargs que tiene parámetros de tipo parametrizado, y se asegura que el cuerpo del
                    método no lanza una <code>ClassCastException</code> u otra excepción similar debido al mal manejo del parámetro
                    formal varargs, puede prevenir la advertencia que el compilador genera para esta clase de métodos varargs
                    añadiendo la siguiente anotación a las declaraciones de método estáticas y que no sean constructores:
                </p>
                <div class="codeblock">
                    <pre>
@SafeVarargs
                    </pre>
                </div>
                <p>
                    La anotación <code>@SafeVarargs</code> es una parte documentada del contrato del método; esta anotación afirma
                    que la implementación del método no manejará mal el parámetro formal de varargs.
                </p>
                <p>
                    Es también posible, aunque menos deseable, suprimir tales advertencias añadiendo lo siguiente en la declaración
                    del método:
                </p>
                <div class="codeblock">
                    <pre>
@SuppressWarnings({"unchecked", "varargs"})
                    </pre>
                </div>
                <p>
                    Sin embargo, este enfoque no suprime las advertencias generadas desde el sitio que llama al método. Si no está
                    familiarizado con el sintaxis de <code>@SuppressWarnings</code> , vea
                    <a class="TutorialLink" target="_top" href="../../java/annotations/index.html">Anotaciones</a>.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="bridgeMethods.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="restrictions.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Efectos del Borrado de Tipos y Métodos Puente<br />
            <b>Página siguiente:</b> Restricciones de los Genéricos
        </div>
    </body>
</html>