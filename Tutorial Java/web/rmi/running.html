<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Ejecutando los Programas de Ejemplo (Los Tutoriales de Java&trade; &gt; RMI)
        </title>
        <meta name="description" content="Este tutorial del RMI de Java describe el sistema RMI de Java. Recorre un ejemplo completo
              de cliente/servidor" />
        <meta name="keywords" content="java programming, learn java, java sample code, java rmi, java client server" />
        <link rel="stylesheet" href="../indice.css" type="text/css"/>
        <script src="../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkAHEAD"><a href="overview.html">Una descripción de las Aplicaciones RMI (Remote Method Interface)</a></div>
                <div class="linkAHEAD"><a href="server.html">Escribiendo un Servidor RMI</a></div>
                <div class="linkBHEAD"><a href="designing.html">Diseñando un Interfaz Remoto</a></div>
                <div class="linkBHEAD"><a href="implementing.html">Implementando un Intefaz Remoto</a></div>
                <div class="linkAHEAD"><a href="client.html">Creando un Programa Cliente</a></div>
                <div class="linkAHEAD"><a href="example.html">Compilando y Ejecutando el Ejemplo</a></div>
                <div class="linkBHEAD"><a href="compiling.html">Compilando los Programas de Ejemplo</a></div>
                <div class="nolinkBHEAD">Ejecutando los Programas de Ejemplo</div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> RMI<br />
                <b>Sección:</b> Compilando y Ejecutando el Ejemplo
            </div>
            <div id="BreadCrumbs">
                <a href="../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="./index.html" target="_top">RMI</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="compiling.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="./TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="./end.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Ejecutando los Programas de Ejemplo</h1>
            </div>
            <div id="PageContent">
                <h2>
                    Una Nota Sobre Seguridad
                </h2>
                <p>
                    Los programas servidor y cliente se ejecutan con un gestor de seguridad instalado. Cuando ejecute cualquiera de 
                    los programas, debe especificar un archivo de política de seguridad para que el código tenga los permisos de 
                    seguridad que necesita para ejecutarse. Aquí tiene un ejemplo de 
                    <a href="examples/server.policy">fichero de políticas para usar con el programa servidor</a>:
                </p>
                <div class="codeblock">
                    <pre>
grant codeBase "file:/home/ann/src/" {
    permission java.security.AllPermission;
};
                    </pre>
                </div>
                <p>
                    Aquí tiene un ejemplo de 
                    <a href="examples/client.policy">fichero de políticas para usar con el programa cliente</a>:
                </p>
                <div class="codeblock">
                    <pre>
grant codeBase "file:/home/jones/src/" {
    permission java.security.AllPermission;
};
                    </pre>
                </div>
                <p>
                    Para ambos archivos de política de ejemplo, todos los permisos se otorgan a las clases en la ruta de clases 
                    local del programa, porque el código de la aplicación local es confiable, pero no se otorgan permisos para el 
                    código descargado de otras ubicaciones. Por lo tanto, el servidor del motor de cálculo restringe las tareas que 
                    ejecuta (cuyo código no es confiable y podría ser hostil) de realizar cualquier operación que requiera permisos 
                    de seguridad. La tarea <code>Pi</code> del cliente del ejemplo no requiere ningún permiso para ejecutarse.
                </p>
                <p>
                    En estge ejemplo, el fichero de políticas para el programa del servidor se llamó <code>server.policy</code>, y 
                    el fichero de políticas para el programa cliente se llamó <code>client.policy</code>.
                </p>
                <h2>
                    Iniciar el Servidor
                </h2>
                <p>
                    Antes de iniciar el motor de cálculo, necesita iniciar el registro RMI. El registro RMI es un servicio 
                    sencillo de nomenclatura de arranque del lado del servidor que permite a los clientes remotos obtener una 
                    referencia a un objeto remoto inicial. Puede ser iniciado con el comando <code>rmiregistry</code>. Antes de 
                    ejecutar <code>rmiregistry</code>, debe estar seguro de que el shell o ventana en la que ejecutará 
                    <code>rmiregistry</code> no tiene establecida la variable de entorno <code>CLASSPATH</code> o tiene una 
                    variable de entorno <code>CLASSPATH</code> que no incluya la ruta a ninguna clase que desee descargar a los 
                    clientes de sus objetos remotos.
                </p>
                <p>
                    Para iniciar el registro en el servidor, ejecute el comando <code>rmiregistry</code>. Este comando no produce 
                    salida y se ejecuta habitualmente en segundo plano. Para este ejemplo, el registro se inicia en la máquina 
                    <code>mycomputer</code>.
                </p>
                <p>
                    <strong>Microsoft Windows</strong> (use <code>javaw</code> si <code>start</code> no está disponible):
                </p>
                <div class="codeblock">
                    <pre>
start rmiregistry
                    </pre>
                </div>
                <p>
                    <strong>Solaris OS o Linux</strong>:
                </p>
                <div class="codeblock">
                    <pre>
rmiregistry &amp;
                    </pre>
                </div>
                <p>
                    De forma predeterminada, el registro se ejecuta en el puerto 1099. Para iniciar el registro en un puerto 
                    diferente, especifique el número de puerto en la línea de comandos. No olvide borrar los valores de la variable 
                    de entorno <code>CLASSPATH</code>.
                </p>
                <p>
                    <strong>Microsoft Windows</strong>:
                </p>
                <div class="codeblock">
                    <pre>
start rmiregistry 2001
                    </pre>
                </div>
                <p>
                    <strong>Solaris OS or Linux</strong>:
                </p>
                <div class="codeblock">
                    <pre>
rmiregistry 2001 &amp;
                    </pre>
                </div>
                <p>
                    Una vez se inicia el registro, puede iniciar el servidor. Necesita asegurarse de que el fichero 
                    <code>compute.jar</code> y la clase de implementación del objeto remoto están en su ruta de clases. Cuando 
                    inicia el motor de cálculo, necesita especificar, usando la propiedad <code>java.rmi.server.codebase</code>, 
                    donde son accesibles desde la red las clases del servidor. En este ejemplo, las clases del lado del servidor 
                    que estarán disponibles para su descarga son las interfaces <code>Compute</code> y <code>Task</code>, que están 
                    disponibles en el fichero <code>compute.jar</code> en el directorio <code>public_html\classes</code> del 
                    usuario <code>ann</code>. El servidor del motor de cálculo se inicia en la máquina <code>mycomputer</code>, la 
                    misma máquina en la que fue iniciado el registro.
                </p>
                <p>
                    <strong>Microsoft Windows</strong>:
                </p>
                <div class="codeblock">
                    <pre>
java -cp c:\home\ann\src;c:\home\ann\public_html\classes\compute.jar
     -Djava.rmi.server.codebase=file:/c:/home/ann/public_html/classes/compute.jar
     -Djava.rmi.server.hostname=mycomputer.example.com
     -Djava.security.policy=server.policy
        engine.ComputeEngine
                    </pre>
                </div>
                <p>
                    <strong>Solaris OS o Linux</strong>:
                </p>
                <div class="codeblock">
                    <pre>
java -cp /home/ann/src:/home/ann/public_html/classes/compute.jar
     -Djava.rmi.server.codebase=http://mycomputer/~ann/classes/compute.jar
     -Djava.rmi.server.hostname=mycomputer.example.com
     -Djava.security.policy=server.policy
        engine.ComputeEngine
                    </pre>
                </div>
                <p>
                    Los comandos <code>java</code> de arriba definen las siguientes propiedades del sistema:
                </p>
                <ul>
                    <li>
                        La propiedad <code>java.rmi.server.codebase</code> especifica la ubicación, una URL de base de código, 
                        desde la cual se pueden descargar las definiciones para las clases que se originan <i>desde</i> este 
                        servidor. Si la base de código especifica una jerarquía de directorio (a diferencia de un archivo JAR), 
                        debe incluir una barra al final de la URL del código base.
                    </li>
                    <li>
                        La propiedad <code>java.rmi.server.hostname</code> especifica el nombre de la máquina o dirección para 
                        colocar en los esbozos de los objetos remotos exportados en esta máquina virtual de Java. Este valor es el 
                        nombre de la máquina o dirección utilizada por los clientes cuando intentan comunicar invocaciones de 
                        métodos remotos. De forma predeterminada, la implementación RMI usa la dirección IP del servidor como se 
                        indica por la IPA <code>java.net.InetAddress.getLocalHost</code>. Sin embargo, algunas veces, esta 
                        dirección no es apropiada para todos los clientes y un nombre de máquina completamente cualificado sería 
                        más efectivo. Para asegurar que RMI usa un nombre de máquina (o una dirección  IP) para el servidor que sea 
                        enrutable desde todos los clientes potenciales, establezca la propiedad 
                        <code>java.rmi.server.hostname</code>.
                    </li>
                    <li>
                        La propiedad <code>java.security.policy</code> se usa para especificar el fichero de políticas que contiene 
                        los permisos que desea otorgar.
                    </li>
                </ul>
                <h2>
                    Iniciar el Cliente
                </h2>
                <p>
                    Una vez el registro y el motor de cálculo están ejecutándose, puede iniciar el cliente, especificando lo 
                    siguiente:
                </p>
                <ul>
                    <li>
                        La ubicación donde el cliente atiende sus clases (la clase <code>Pi</code>) usando la propiedad 
                        <code>java.rmi.server.codebase</code>
                    </li>
                    <li>
                        La propiedad <code>java.security.policy</code>, que se usa para especificar el fichero de políticas de 
                        seguridad que contiene los permisos que desea otorgar a varias piezas de código
                    </li>
                    <li>
                        Como argumentos de línea de comandos, el nombre de la máquina del servidor (así el cliente sabe dónde 
                        localizar el objeto remoto <code>Compute</code>) y el número de lugares decimales a usar en el cálculo de 
                        <img src="../figures/rmi/pi.gif" width="9" height="9" alt="el símbolo pi" />
                    </li>
                </ul>
                <p>
                    Inicie el cliente en otra máquina (una máquina llamada <code>mysecondcomputer</code>, por ejemplo) como sigue:
                </p>
                <hr />
                <p>
                    <strong>Microsoft Windows</strong>:
                </p>
                <div class="codeblock">
                    <pre>
java -cp c:\home\jones\src;c:\home\jones\public_html\classes\compute.jar
     -Djava.rmi.server.codebase=file:/c:/home/jones/public_html/classes/
     -Djava.security.policy=client.policy
        client.ComputePi mycomputer.example.com 45
                    </pre>
                </div>
                <p>
                    <strong>Solaris OS o Linux</strong>:
                </p>
                <div class="codeblock">
                    <pre>
java -cp /home/jones/src:/home/jones/public_html/classes/compute.jar
     -Djava.rmi.server.codebase=http://mysecondcomputer/~jones/classes/
     -Djava.security.policy=client.policy
        client.ComputePi mycomputer.example.com 45
                    </pre>
                </div>
                <p>
                    Tenga en cuenta que la ruta de clases se establece en la línea de comandos de forma que el intérprete puede 
                    encontrar las clases del cliente y el fichero JAR que contiene las interfaces. También dese cuenta de que el 
                    valor de la propiedad <code>java.rmi.server.codebase</code>, que especifica una jerarquí de directorios, 
                    termina con una barra al final.
                </p>
                <p>
                    Después de que inicie el cliente, se muestra el siguiente resultado:
                </p>
                <div class="codeblock">
                    <pre>
3.141592653589793238462643383279502884197169399
                    </pre>
                </div>
                <p>
                    La siguiente figura ilustra dónde obtienen las clases el <code>rmiregistry</code>, el servidor 
                    <code>ComputeEngine</code>, y el cliente <code>ComputePi</code> durante la ejecución del programa.
                </p>
                <div class="centrado">
                    <img src="../figures/rmi/rmi-5.gif" width="400" height="182" class="imgbottom"
                         alt="el registro, el motor de cálculo y el cliente obteniendo clases durante la ejecución del programa" />
                </div>
                <p>
                    Cuando el servidor <code>ComputeEngine</code> vincula su referencia de objeto remoto en el registro, el 
                    registro descarga las interfaces <code>Compute</code> y <code>Task</code> de las que dependen la clase de 
                    esbozo. Estas clases se descargan desde el servidor web del servidor <code>ComputeEngine</code> o del sistema 
                    de ficheros, dependiendo del tipo de URL de base de código usada cuando se inicia el servidor.
                </p>
                <p>
                    Debido a que el cliente <code>ComputePi</code> tiene las interfaces <code>Compute</code> y <code>Task</code> 
                    disponibles en su ruta de clases, carga sus definiciones desde su ruta de clases, no desde la base de código 
                    del servidor.
                </p>
                <p>
                    Finalmente, la clase <code>Pi</code> se crga dentro de la máquina virtual de Java del servidor 
                    <code>ComputeEngine</code> cuando se pasa el objeto <code>Pi</code> en la llamada remota 
                    <code>executeTask</code> al objeto <code>ComputeEngine</code>. La clase <code>Pi</code> es cargada por el 
                    servidor desde el servidor web del cliente o del sistema de ficheros, dependiendo del tipo de la URL de base de 
                    código usada cuando se inicia el cliente.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="compiling.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="./TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="./end.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Compilando los Programas de Ejemplo<br />
            <b>Página siguiente:</b> Final de la Lección
        </div>
    </body>
</html> 
