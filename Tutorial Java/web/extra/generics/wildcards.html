<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Los Comodines (Los Tutoriales de Java&trade; &gt; Extras &gt; Genéricos)
        </title>
        <meta name="description" content="Este tutorial de Java describe los genéricos, la IPA del modo de pantalla completo, y 
              los recursos relacionados con la certificación de Java" />
        <meta name="keywords" content="programación en java, aprender java, ejemplos de código java, genéricos de java, IPA del 
              modo de pantalla completa, certificación" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Genéricos</a></div>
                <div class="linkAHEAD"><a href="intro.html">Introducción</a></div>
                <div class="linkAHEAD"><a href="simple.html">Definiendo Genéricos Simples</a></div>
                <div class="linkAHEAD"><a href="subtype.html">Genéricos y Subtipado</a></div>
                <div class="nolinkAHEAD">Los Comodines</div>
                <div class="linkAHEAD"><a href="methods.html">Métodos Genéricos</a></div>
                <div class="linkAHEAD"><a href="legacy.html">Interoperando con Código Heredado</a></div>
                <div class="linkAHEAD"><a href="fineprint.html">La Letra Pequeña</a></div>
                <div class="linkAHEAD"><a href="literals.html">Clases Literales como Objetos de Tipo en Tiempo de Ejecución</a></div>
                <div class="linkAHEAD"><a href="morefun.html">Más Diversión con Comodines</a></div>
                <div class="linkAHEAD"><a href="convert.html">Convirtiendo Código Heredado para Usar Genéricos</a></div>
                <div class="linkAHEAD"><a href="acknowledgements.html">Agradecimientos</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Extras<br />
                <b>Lección:</b> Genéricos
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Extras</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Genéricos</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="subtype.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="methods.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Los Comodines</h1>
            </div>
            <div id="PageContent">
                <p>
                    Considere los problemas de escribir una rutina que imprime todos los elementos en una colección. Aquí tiene cómo usted 
                    podría escribirla en una versión más antigua del lenguaje (p.e., una versión anterior a la 5.0):
                </p>
                <div class="codeblock">
                    <pre>
<b>void</b> printCollection(Collection c) {
    Iterator i = c.iterator();
    <b>for</b> (k = 0; k &lt; c.size(); k++) {
        System.out.println(i.next());
    }
}
                    </pre>
                </div>
                <p>
                    Y aquí hay un intento ingenuo de escribirlo usando genéricos (y la nueva sintaxis de bucle <code>for</code>):
                </p>
                <div class="codeblock">
                    <pre>
<b>void</b> printCollection(Collection&lt;Object&gt; c) {
    <b>for</b> (Object e : c) {
        System.out.println(e);
    }
}
                    </pre>
                </div>
                <p>
                    El problema es que esta nueva versión es muchmo menos útil que la vieja. Mientras que el antiguo código podría llamarse 
                    con cualquier tipo de colección como parámetro, el nuevo código solo toma <code>Collection&lt;Object&gt;</code>, que, 
                    como acabamos de demostrar, ¡<b>no</b> es un supertipo de todo tipo de colecciones!
                </p>
                <p>
                    Asi que ¿cuál <b>es</b> el supertipo de todas las clases de colecciones? Se escribe <code>Collection&lt;?&gt;</code> 
                    (pronunciado &quot;colección de desconocido&quot;), esto es, una colección cuyo tipo de elemento coincide con cualquier 
                    cosa. Se llama <b>tipo comodín</b> por razones obvias. Podemos escribir:
                </p>
                <div class="codeblock">
                    <pre>
<b>void</b> printCollection(Collection&lt;?&gt; c) {
    <b>for</b> (Object e : c) {
        System.out.println(e);
    }
}
                    </pre>
                </div>
                <p>
                    Y ahora, podemos llamarla con cualquier tipo de colección. Note que dentro de <code>printCollection()</code>, podemos 
                    aún leer elementos de <code>c</code> y les da a ellos el tipo <code>Object</code>. Esto es siempre seguro, ya que 
                    cualquiera que sea el tipo actual de la colección, contiene objetos. No es seguro agregar objetos arbitrariamente a ella 
                    sin embargo:
                </p>
                <div class="codeblock">
                    <pre>
Collection&lt;?&gt; c = new ArrayList&lt;String&gt;();
c.add(new Object()); // Error en tiempo de compilación
                    </pre>
                </div>
                <p>
                    Como no sabemos qué significa el tipo de elemento de <code>c</code>, no podemos agregarle objetos. El método 
                    <code>add()</code> toma argumentos del tipo <code>E</code>, el tipo de elemento de la colección. Cuando el tipo de 
                    parámetro real es <code>?</code>, significa algún tipo desconocido. Cualquier parámetro que pasemos a <code>add</code> 
                    tendría que ser un subtipo de este tipo desconocido. Ya que no sabemos qué tipo es ese, no podemos pasarle cualquier 
                    cosa. La única excepción es <code>null</code>, el cual es un miembro de todos los tipos.
                </p>
                <p>
                    Por otro lado, dada una <code>List&lt;?&gt;</code>, <b>podemos</b> llamar a <code>get()</code> y hacer uso del resultado. 
                    El tipo de resultado es un tipo desconocido, pero siempre sabemos que es un objeto. Por lo tanto, es seguro asignar el 
                    resultado de <code>get()</code> a una variable de tipo <code>Object</code> o pasarlo como un parámetro donde el tipo 
                    <code>Object</code> es el esperado.
                </p>
                <h2>
                    Comodines acotados
                </h2>
                <p>
                    Considere una aplicación simple de dibujo que pueda dibujar figuras tales como rectángulos y círculos. Para representar 
                    estas figuras en el programa, podría definir una jerarquía de clases tales como ésta:
                </p>
                <div class="codeblock">
                    <pre>
<b>public abstract class</b> Shape {
    <b>public abstract void</b> draw(Canvas c);
}

<b>public class</b> Circle <b>extends</b> Shape {
    <b>private int</b> x, y, radius;
    <b>public void</b> draw(Canvas c) {
        ...
    }
}

<b>public class</b> Rectangle <b>extends</b> Shape {
    <b>private int</b> x, y, width, height;
    <b>public void</b> draw(Canvas c) {
        ...
    }
}
                    </pre>
                </div>
                <p>
                    Estas clases pueden ser dibujadas sobre un lienzo:
                </p>
                <div class="codeblock">
                    <pre>
<b>public class</b> Canvas {
    <b>public void</b> draw(Shape s) {
        s.draw(<b>this</b>);
   }
}
                    </pre>
                </div>
                <p>
                    Cualquier dibujo contendrá habitualmente un número de figuras. Asumiendo que estén representadas com una lista, sería 
                    conveniente tener un método en <code>Canvas</code> que las dibuja todas:
                </p>
                <div class="codeblock">
                    <pre>
<b>public void</b> drawAll(List&lt;Shape&gt; shapes) {
    <b>for</b> (Shape s: shapes) {
        s.draw(<b>this</b>);
   }
}
                    </pre>
                </div>
                <p>
                    Ahora, las reglas de tipo dicen que <code>drawAll()</code> sólo puede ser llamada para listas de <code>Shape</code> 
                    exactamente: no se puede, por ejemplo, llamarla con una <code>List&lt;Circle&gt;</code>. Eso es desafortunado, ya que 
                    todo lo que el método hace es leer figuras de la lista, de forma que podría ser llamado con una 
                    <code>List&lt;Circle&gt;</code>. Lo que queremos realmente es que el método acepte una lista de <b>cualquier</b> clase 
                    de figuras:
                </p>
                <div class="codeblock">
                    <pre>
<b>public void</b> drawAll(List&lt;? <b>extends</b> Shape&gt; shapes) {
    ...
}
                    </pre>
                </div>
                <p>
                    Hay una pequeña pero muy importante diferencia aquí: hemos reemplazado el tipo <code>List&lt;Shape&gt;</code> con 
                    <code>List&lt;? <b>extends</b> Shape&gt;</code>. Ahora <code>drawAll()</code> aceptará listas de cualquier subclase de 
                    <code>Shape</code>, de forma que ahora podemos llamarlo con una <code>List&lt;Circle&gt;</code> si queremos.
                </p>
                <p>
                    <code>List&lt;? <b>extends</b> Shape&gt;</code> es un ejemplo de un <i>comodín acotado</i>. El <code>?</code> significa 
                    un tipo desconocido, igual que los comodines que vimos anteriormente. Sin embargo, en este caso, sabemos que este tipo 
                    desconocido es en en realidad un subtipo de <code>Shape</code>. (Nota: Podría ser el mismo <code>Shape</code>, o alguna 
                    subclase; no se necesita que extienda literalmente a <code>Shape</code>). Decimos que <code>Shape</code> es el <i>límite 
                    superior</i> del comodín.
                </p>
                <p>
                    Hay, como es habitual, un precio a pagar por la flexibilidad del uso de comodines. El precio es que ahora es ilegal 
                    usar <code>shapes</code> en el cuerpo del método. Por ejemplo, esto no está permitido:
                </p>
                <div class="codeblock">
                    <pre>
<b>public void</b> addRectangle(List&lt;? <b>extends</b> Shape&gt; shapes) {
    // <i>¡Error en tiempo de compilación!</i>
    shapes.add(0, <b>new</b> Rectangle());
}
                    </pre>
                </div>
                <p>
                    Debería poder averiguar por qué el código anterior no está permitido. El tipo del segundo parámetro para 
                    <code>shapes.add()</code> es <code>? <b>extends</b> Shape</code>-- un subtipo desconocido de <code>Shape</code>. 
                    Ya que no conocemos qué tipo es, no sabemos si es un supertipo de <code>Rectangle</code>; podría o no ser un supertipo, 
                    de forma que no es seguro pasar un <code>Rectangle</code> ahí.
                </p>
                <p>
                    Los comodines acotados son justo lo que uno necesita para manejar el ejemplo del departamento de vehículos motorizados 
                    que pasa sus datos a la oficina del censo. Nuestro ejemplo asume que los datos son representados asignando los nombres 
                    (representados como cadenas) a personas (representados por tipos de referencia tales como <code>Person</code> o sus 
                    subtipos, tales como <code>Driver</code>). <code>Map&lt;K,V&gt;</code> es un ejemplo de un tipo genérico que toma dos 
                    tipos de argumentos, representando las claves y valores del mapa.
                </p>
                <p>
                    De nuevo, note la convención de nombrados para los parámetros de tipo formal--<code>K</code> para las claves y 
                    <code>V</code> para los valores.
                </p>
                <div class="codeblock">
                    <pre>
<b>public class</b> Census {
    <b>public static void</b> addRegistry(Map&lt;String, ? <b>extends</b> Person&gt; registry) {
}
...

Map&lt;String, Driver&gt; allDrivers = ... ;
Census.addRegistry(allDrivers);
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="subtype.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="methods.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos
                            <a href="../../information/cpyr.html">avisos legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs</a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Genéricos y Subtipado<br />
            <b>Página siguiente:</b> Métodos Genéricos
        </div>
    </body>
</html> 
