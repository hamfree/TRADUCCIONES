<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />        
        <title>Implementaciones de Wrapper (Los Tutoriales de Java&trade; &gt; Colecciones)</title>
        <meta name="description" content="Este tutorial de Java sobre colecciones describe los interfaces, implementaciones, y
              algoritmos en el marco de trabajo de Colecciones de Java" />
        <meta name="keywords" content="programacion java , aprender java, codigo de ejemplo de java, colecciones de java,
              set, list, queue, map, array, arraylist" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Implementaciones</a></div>
                <div class="linkAHEAD"><a href="set.html">Implementaciones de Set</a></div>
                <div class="linkAHEAD"><a href="list.html">Implementaciones de List</a></div>
                <div class="linkAHEAD"><a href="map.html">Implementaciones de Map</a></div>
                <div class="linkAHEAD"><a href="queue.html">Implementaciones de Queue</a></div>
                <div class="linkAHEAD"><a href="deque.html">Implementaciones de Deque</a></div>
                <div class="nolinkAHEAD">Implementaciones de Wrapper</div>
                <div class="linkAHEAD"><a href="convenience.html">Implementaciones de Convenencia</a></div>
                <div class="linkAHEAD"><a href="summary.html">Sumario de Implementaciones</a></div>
                <div class="linkQUESTIONS"><a href="QandE/questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Colecciones<br />
                <b>Lección:</b> Implementaciones
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;
                <a href="../index.html" target="_top">Colecciones</a>&nbsp;&gt;
                <a href="index.html" target="_top">Implementaciones</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="deque.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="convenience.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Implementaciones de Wrapper</h1>
            </div>
            <div id="PageContent">
                <p>
                    Las implementaciones Wrapper delegan todo su trabajo real en una colección especificada pero agrega
                    funcionalidad extra además de lo que ofrece esta colección. Para los fanáticos del diseño, este es un ejemplo
                    del patrón <em>decorator</em>. Aunque puede parecer un poco exótico, es realmente bastante sencillo.
                </p>
                <p>
                    Estas implementaciones son anónimas; en lugar de proporcionar una clase pública, la librería ofrece un método
                    de fábrica estático. Todas estas implementaciones se encuentran en la clase
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html">
                        <code>Collections</code>
                    </a>, la cual consiste únicamente en método estáticos.
                </p>
                <h2>Wrappers de Sincronización</h2>
                <p>
                    Los wrappers de sincronización agrega sincronización automática (seguridad en hilos) a una colección
                    arbitraria. Cada una de las seis interfaces de colección principales &mdash;
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html"><code>Collection</code></a>,
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html"><code>Set</code></a>,
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html"><code>List</code></a>,
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html"><code>Map</code></a>,
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html"><code>SortedSet</code></a>, y
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html"><code>SortedMap</code></a> &mdash;
                       tiene un método de factoría estático.
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;T&gt; Collection&lt;T&gt; synchronizedCollection(Collection&lt;T&gt; c);
public static &lt;T&gt; Set&lt;T&gt; synchronizedSet(Set&lt;T&gt; s);
public static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list);
public static &lt;K,V&gt; Map&lt;K,V&gt; synchronizedMap(Map&lt;K,V&gt; m);
public static &lt;T&gt; SortedSet&lt;T&gt; synchronizedSortedSet(SortedSet&lt;T&gt; s);
public static &lt;K,V&gt; SortedMap&lt;K,V&gt; synchronizedSortedMap(SortedMap&lt;K,V&gt; m);
                    </pre>
                </div>
                <p>
                    Cada uno de estos métodos devuelven una <code>Collection</code> sincronizada (segura para hilos) respaldada 
                    por la colección especificada. Para garantizar el acceso en serie, <em>todos</em> el acceso a la colección de
                    respaldo debe lograrse a través de la colección devuelta. La forma más fácil de garantizar esto es no mantener 
                    una referencia a la colección subyacente. Cree la colección sincronizada con el siguiente truco.
                </p>
                <div class="codeblock">
                    <pre>
List&lt;Type&gt; list = Collections.synchronizedList(new ArrayList&lt;Type&gt;());
                    </pre>
                </div>
                <p>
                    Una colección creada de esta manera es tan segura para subprocesos como una colección normalmente sincronizada,
                    tales como un 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html">
                        <code>Vector</code>
                    </a>.
                </p>
                <p>
                    Frente al acceso concurrente, es imperativo que el usuario sincronize manualmente la colección devuelta
                    cuando se itera sobfre ella. La razón es que la iteración se logra a través de múltiples llamadas a la
                    colección, lo cual debe ser compuesta en una operación atómica única. Lo siguiente es el idioma para iterar en
                    una colección wrapper-sincronizada.
                </p>
                <div class="codeblock">
                    <pre>
Collection&lt;Type&gt; c = Collections.synchronizedCollection(myCollection);
synchronized(c) {
    for (Type e : c)
        foo(e);
}
                    </pre>
                </div>
                <p>
                    Si se usa un iterador explícito, el método <code>iterator</code> debe ser llamado desde dentro del bloque
                    <code>synchronized</code>. El incumplimiento de este consejo puede dar como resultado un comportamiento no 
                    determinista. El idioma para la iteración sobre una vista de <code>Collection</code> de un <code>Map</code>
                    sincronizado es similar. Es imperativo que el usuario sincronize un <code>Map</code> sincronizado cuando itera
                    sobre cualquiera de sus vistas de <code>Collection</code> en vez de sincronizar con una vista de
                    <code>Collection</code>, como se muestra en el ejemplo siguiente.
                </p>
                <div class="codeblock">
                    <pre>
Map&lt;KeyType, ValType&gt; m = Collections.synchronizedMap(new HashMap&lt;KeyType, ValType&gt;());
    ...
Set&lt;KeyType&gt; s = m.keySet();
    ...
// Sincroniza sobre m, no s!
synchronized(m) {
    while (KeyType k : s)
        foo(k);
}
                    </pre>
                </div>
                <p>
                    Una pequeña desventaja de usar las implementaciones de wrapper es que no tiene la habilidad de ejecutar 
                    ninguna operación <em>sin interfaz</em> de una implementación envuelta. Así, por ejemplo, en el ejemplo de
                    <code>List</code> anterior, no puede llamar a la operación
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ensureCapacity-int-">
                        <code>ensureCapacity</code>
                    </a> de <code>Arraylist</code> en la <code>ArrayList</code> envuelta.
                </p>
                <h2>Wrappers No Modificables</h2>
                <p>
                    A diferencia de las envolturas de sincronización, que agregan funcionalidad a la colección envuelta, las 
                    envolturas no modificables quitan esa funcionalidad. En particular, quitan la habilidad de modificar la 
                    colección interceptando todas las operaciones que modificarían la colección lanzando una 
                    <code>UnsupportedOperationException</code>. Las envolturas no modificables tienen dos usos principales,
                    de la siguiente manera:
                </p>
                <ul>
                    <li>
                        Para hacer una colección inmutable una vez que ha sido construída. En este caso, es una buena práctica el
                        no mantener una referencia a la colección de respaldo. Esto garantiza absolutamente la inmutabilidad.
                    </li>
                    <li>
                        Permitir a ciertos clientes acceso de sólo-lectura a sus estructuras de datos. Usted mantiene una
                        referencia a la colección de respaldo pero reparte una referencia a la envoltura. De esta forma, los
                        clientes pueden mirar pero no modificar, mientras usted mantiene el acceso completo.
                    </li>
                </ul>
                <p>
                    Al igual que las envolturas de sincronización, cada uno de los seis interfaces principales de
                    <code>Collection</code> tienen un método de factoría estático.
                </p>
                <div class="codeblock">
                    <pre>
public static &lt;T&gt; Collection&lt;T&gt; unmodifiableCollection(Collection&lt;? extends T&gt; c);
public static &lt;T&gt; Set&lt;T&gt; unmodifiableSet(Set&lt;? extends T&gt; s);
public static &lt;T&gt; List&lt;T&gt; unmodifiableList(List&lt;? extends T&gt; list);
public static &lt;K,V&gt; Map&lt;K, V&gt; unmodifiableMap(Map&lt;? extends K, ? extends V&gt; m);
public static &lt;T&gt; SortedSet&lt;T&gt; unmodifiableSortedSet(SortedSet&lt;? extends T&gt; s);
public static &lt;K,V&gt; SortedMap&lt;K, V&gt; unmodifiableSortedMap(SortedMap&lt;K, ? extends V&gt; m);
                    </pre>
                </div>
                <h2>Wrappers de Interfaz Comprobado</h2>
                <p>
                    Las envolturas de <em>interfaz</em> <code>Collections.checked</code> se proporcionan para su uso con
                    colecciones genéricas. Estas implementaciones devuelven una vista <em>dinámicamente</em> segura en cuanto a su
                    tipo  de la colección especificada, que lanzará una <code>ClassCastException</code> si un cliente intenta
                    agregar un elemento del tipo equivocado. El mecanismo de genéricos en el lenguaje suministra la comprobación de 
                    tipos en tiempo de compilación (estático), pero es posible vencer a este mecanismo. Las vistas dinámicamente 
                    seguras de tipo eliminan esta posibilidad completamente.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="deque.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="convenience.html">Siguiente &nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos
                            <a href="../../information/cpyr.html">avisos legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs</a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Implementaciones de Deque<br />
            <b>Página siguiente:</b> Implementaciones de Convenencia
        </div>
    </body>
</html> 
