<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Cierre (Los Tutoriales de Java&trade; &gt; Nombrado en Java e Interfaz de Directorio &gt; Temas Avanzados para los
            Usuarios LDAP)
        </title>
        <meta name="description" content="Este tutorial de Java JNDI describe la tecnología de Nombrado en Java e Interfaz de 
              Directorio (JNDI), operaciones de nombre y directorio, y LDAP" />
        <meta name="keywords" content="java programming, learn java, java sample code, jndi, ldap, jndi service provider" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Temas Avanzados para los Usuarios LDAP</a></div>
                <div class="linkAHEAD"><a href="ldap.html">LDAP v3</a></div>
                <div class="linkAHEAD"><a href="jndi.html">JNDI como una IPA de LDAP</a></div>
                <div class="linkBHEAD"><a href="operations.html">Cómo las Operaciones LDAP se Mapean a las IPAs de JNDI</a></div>
                <div class="linkBHEAD"><a href="exceptions.html">Cómo los Códigos de Error LDAP se Mapean a las Excepciones de JNDI</a></div>
                <div class="linkAHEAD"><a href="security.html">Seguridad</a></div>
                <div class="linkBHEAD"><a href="authentication.html">Modos de Autenticación en LDAP</a></div>
                <div class="linkBHEAD"><a href="auth_mechs.html">Mecanismos de Autenticación</a></div>
                <div class="linkBHEAD"><a href="anonymous.html">Anónimo</a></div>
                <div class="linkBHEAD"><a href="simple.html">Simple</a></div>
                <div class="linkBHEAD"><a href="sasl.html">SASL</a></div>
                <div class="linkBHEAD"><a href="digest.html">Digest-MD5</a></div>
                <div class="linkBHEAD"><a href="ssl.html">SSL y Sockets Personalizados</a></div>
                <div class="linkAHEAD"><a href="rename.html">Más Operaciones LDAP</a></div>
                <div class="linkBHEAD"><a href="compare.html">Comparación LDAP</a></div>
                <div class="linkBHEAD"><a href="result.html">Resultados de la Búsqueda</a></div>
                <div class="linkBHEAD"><a href="unsol.html"> Notificaciones no Solicitadas de LDAP</a></div>
                <div class="linkAHEAD"><a href="connect.html">Gestión de Conexiones</a></div>
                <div class="linkBHEAD"><a href="create.html">Creación</a></div>
                <div class="nolinkBHEAD"> Cierre</div>
                <div class="linkBHEAD"><a href="pool.html">Agrupación (Pooling)</a></div>
                <div class="linkBHEAD"><a href="config.html">Configuración</a></div>
                <div class="linkAHEAD"><a href="faq.html">Preguntas Frecuentes</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Nombrado en Java e Interfaz de Directorio<br />
                <b>Lección:</b> Temas Avanzados para los Usuarios LDAP<br />
                <b>Sección:</b> Gestión de Conexiones
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Nombrado en Java e Interfaz de Directorio</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Temas Avanzados para los Usuarios LDAP</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="create.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="pool.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1> Cierre</h1>
            </div>
            <div id="PageContent">
                <p>
                    La recolección de basura normal se encarga de eliminar las instancias de <code>Context</code> cuando ya no 
                    están en uso. Las conexiones usadas por las instancias <code>Context</code> que se recolectan como basura se 
                    cerrarán automáticamente. Por lo tanto, no necesita cerrar conexiones explícitamente. Las conexiones de red, 
                    sin embargo, son recursos limitados y para ciertos programas, podría querer tener el control sobre su 
                    proliferación y uso. Esta sección contiene información sobre cómo cerrar conexiones y cómo recibir una 
                    notificación si el servidor cierra la conexión.
                </p>
                <h2>
                    Cierres Explícitos
                </h2>
                <p>
                    Usted invoca 
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#close--">
                        <code>Context.close()</code></a> sobre una instancia <code>Context</code> para indicar que no necesita 
                    usarla más. Si la instancia <code>Context</code> que está siendo cerrada está usando una conexión dedicada, 
                    la conexión también se cierra. Si la instancia <code>Context</code> está compartiendo una conexión con otro 
                    <code>Context</code> e instancias de <code>NamingEnumeration</code> sin terminar, la conexión no se cerrará 
                    hasta que se haya invocado <code>close()</code> en todas las instancias de <code>Context</code> y 
                    <code>NamingEnumeration</code>.
                </p>
                <p>
                    En el 
                    <a class="SourceLink" target="_blank" 
                       href="examples/Shared.java" 
                       onclick="showCode('../../displayCode.html', 'examples/Shared.java'); return false;">
                        <code>ejemplo</code></a> del ejemplo de la sección 
                    <a class="TutorialLink" target="_top" href="create.html#SHARE">Conexiones Compartidas</a>, las tres instancias 
                    <code>Context</code> deben ser cerradas antes de que la conexión subyacente se cierre.
                </p>
                <div class="codeblock">
                    <pre>
// Create initial context
DirContext ctx = new InitialDirContext(env);

// Get a copy of the same context
Context ctx2 = (Context)ctx.lookup("");

// Get a child context
Context ctx3 = (Context) ctx.lookup("ou=NewHires");

// do something useful with ctx, ctx2, ctx3

// Close the contexts when we're done
ctx.close();
ctx2.close();
ctx3.close();
                    </pre>
                </div>
                <h2>
                    Cierres Implícitos Forzados
                </h2>
                <p>
                    Como se mencionó previamente, para aquellas instancias <code>Context</code> y <code>NamingEnumeration</code> que 
                    ya no están en alcance, el sistema de tiempo ejecución de Java eventualmente las recolectará como basura, 
                    limpiando así el estado que habría hecho un <code>close()</code>. Para forzar la recolección de basura, puede 
                    usar el código siguiente.
                </p>
                <div class="codeblock">
                    <pre>
Runtime.getRuntime().gc();
Runtime.getRuntime().runFinalization();
                    </pre>
                </div>
                <p>
                    Dependiendo del estado del programa, realizar este procedimiento puede causar una degradación seria de 
                    rendimiento (temporal). Si necesita asegurarse de que se cierran las conexiones, monitorize las instancias 
                    <code>Context</code> y ciérrelas explícitamente.
                </p>
                <h2>
                    Detectar Cierres de Conexión
                </h2>
                <p>
                    Los servidores LDAP a menudo tienen un periodo de inactividad después del cual cerrarán las conexiones que ya 
                    no se utilizan. Cuando usted posteriormente invoca un método sobre una instancia <code>Context</code> que 
                    está usando dicha conexión, el método lanzará una 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/CommunicationException.html">
                        <code>CommunicationException</code></a>. Para detectar cuando el servidor cierra la conexión que una 
                    instancia <code>Context</code> está usando, puede registrar un 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/ldap/UnsolicitedNotificationListener.html">
                        <code>UnsolicitedNotificationListener</code></a> con la instancia <code>Context</code>.
                    <a class="SourceLink" target="_blank" href="examples/RegUnsol.java" 
                       onclick="showCode('../../displayCode.html', 'examples/RegUnsol.java'); return false;">
                        <code>Un ejemplo</code></a> se muestra en la sección Notificaciones no Solicitadas de LDAP. Aunque el 
                    ejemplo se diseñó para recibir notificaciones no solicitadas del servidor, puede también ser usado para 
                    detectar cierres de conexión por el servidor. Después de iniciar el programa, para el servidor LDAP y 
                    observe que se llama al método 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/event/NamingListener.html#namingExceptionThrown-javax.naming.event.NamingExceptionEvent-">
                        <code>namingExceptionThrown()</code></a> del listener.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="create.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="pool.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Creación<br />
            <b>Página siguiente:</b> Agrupación (Pooling)
        </div>
    </body>
</html> 
