<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Configuración (Los Tutoriales de Java&trade; &gt; Nombrado en Java e Interfaz de Directorio &gt; Temas Avanzados para
            los Usuarios LDAP)
        </title>
        <meta name="description" content="Este tutorial de Java JNDI describe la tecnología de Nombrado en Java e Interfaz de 
              Directorio (JNDI), operaciones de nombre y directorio, y LDAP" />
        <meta name="keywords" content="java programming, learn java, java sample code, jndi, ldap, jndi service provider" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Temas Avanzados para los Usuarios LDAP</a></div>
                <div class="linkAHEAD"><a href="ldap.html">LDAP v3</a></div>
                <div class="linkAHEAD"><a href="jndi.html">JNDI como una IPA de LDAP</a></div>
                <div class="linkBHEAD"><a href="operations.html">Cómo las Operaciones LDAP se Mapean a las IPAs de JNDI</a></div>
                <div class="linkBHEAD"><a href="exceptions.html">Cómo los Códigos de Error LDAP se Mapean a las Excepciones de JNDI</a></div>
                <div class="linkAHEAD"><a href="security.html">Seguridad</a></div>
                <div class="linkBHEAD"><a href="authentication.html">Modos de Autenticación en LDAP</a></div>
                <div class="linkBHEAD"><a href="auth_mechs.html">Mecanismos de Autenticación</a></div>
                <div class="linkBHEAD"><a href="anonymous.html">Anónimo</a></div>
                <div class="linkBHEAD"><a href="simple.html">Simple</a></div>
                <div class="linkBHEAD"><a href="sasl.html">SASL</a></div>
                <div class="linkBHEAD"><a href="digest.html">Digest-MD5</a></div>
                <div class="linkBHEAD"><a href="ssl.html">SSL y Sockets Personalizados</a></div>
                <div class="linkAHEAD"><a href="rename.html">Más Operaciones LDAP</a></div>
                <div class="linkBHEAD"><a href="compare.html">Comparación LDAP</a></div>
                <div class="linkBHEAD"><a href="result.html">Resultados de la Búsqueda</a></div>
                <div class="linkBHEAD"><a href="unsol.html"> Notificaciones no Solicitadas de LDAP</a></div>
                <div class="linkAHEAD"><a href="connect.html">Gestión de Conexiones</a></div>
                <div class="linkBHEAD"><a href="create.html">Creación</a></div>
                <div class="linkBHEAD"><a href="close.html"> Cierre</a></div>
                <div class="linkBHEAD"><a href="pool.html">Agrupación (Pooling)</a></div>
                <div class="nolinkBHEAD">Configuración</div>
                <div class="linkAHEAD"><a href="faq.html">Preguntas Frecuentes</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Nombrado en Java e Interfaz de Directorio<br />
                <b>Lección:</b> Temas Avanzados para los Usuarios LDAP<br />
                <b>Sección:</b> Gestión de Conexiones
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Nombrado en Java e Interfaz de Directorio</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Temas Avanzados para los Usuarios LDAP</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="pool.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="faq.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Configuración</h1>
            </div>
            <div id="PageContent">
                <p>
                    La agrupación de conexiones se configura y mantiene por el tiempo de ejecución de Java. Las conexiones no son 
                    compartidas entre diferentes tiempos de ejecución. Para usar la agrupación de conexión, no se requiere 
                    configuración. La configuración es necesaria sólo si quiere personalizar como se hace la agrupación, tal como 
                    el control del tamaño de los grupos y qué tipos de conexión serán agrupadas.
                </p>
                <p>
                    La agrupación de conexiones se configura mediante una serie de propiedades del sistema en el momento de inicio 
                    del programa. Dese cuenta de que estas son propiedades del sistema, <em>no</em> propiedades de entorno y que 
                    afectan a todas las peticiones de agrupación de conexiones.
                </p>
                <p>
                    Aquí tiene un ejemplo de línea de comando que establece el tamaño máximo de la agrupación en 20, el tamaño 
                    preferido de la agrupación en 10, y el tiempo de espera inactivo a un minuto para conexiones agrupadas.
                </p>
                <div class="codeblock">
                    <pre>
# java -Dcom.sun.jndi.ldap.connect.pool.maxsize=20 \
       -Dcom.sun.jndi.ldap.connect.pool.prefsize=10 \
       -Dcom.sun.jndi.ldap.connect.pool.timeout=60000 \
    UsePool
                    </pre>
                </div>
                <p>
                    La siguiente tabla lista las propiedades de sistema para configurar la agrupación de conexiones. Se describen 
                    con más detalle en el resto de esta sección.
                </p>
                <table class="celda" style="width:100%">
                    <caption>Propiedades del sistema para configurar una agrupación de conexión</caption>
                    <tr>
                        <th id="h1" class="celda">Nombre de la Propiedad del Sistema</th>
                        <th id="h2" class="celda">Descripción</th>
                        <th id="h3" class="celda">Valor predeterminado</th>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.authentication</code></td>
                        <td headers="h2" class="celda">
                            Una lista de tipos de autenticación separados por espacios de conexiones que pueden ser agrupadas. Los 
                            tipos válidos son 
                            &quot;none&quot;, &quot;simple&quot;, and &quot;DIGEST-MD5&quot;.
                        </td>
                        <td headers="h3" class="celda"><code>&quot;none simple&quot;</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.debug</code></td>
                        <td headers="h2" class="celda">
                            Una cadena que indica el nivel de salida de depuración a producir. Los valores válidos son 
                            <code>&quot;fine&quot;</code> (seguimiento de la creación y eliminación de conexiones) y 
                            &quot;all&quot; (toda la información de depuración).
                        </td>
                        <td headers="h3" class="celda">&nbsp;</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.initsize</code></td>
                        <td headers="h2" class="celda">
                            La representación textual de un entero que representa el número de conexiones por identidad de 
                            conexión a crear cuando se crea inicialmente una conexión para la identidad.
                        </td>
                        <td headers="h3" class="celda">1</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.maxsize</code></td>
                        <td headers="h2" class="celda">
                            La representación textual de un entero que representa el número máximo de conexiones por identidad de 
                            conexión que pueden ser mantenidas simultáneamente.
                        </td>
                        <td headers="h3" class="celda">sin tamaño máximo</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.prefsize</code></td>
                        <td headers="h2" class="celda">
                            La representación textual de un entero que representa el número preferido de conexiones por identidad 
                            de conexión que debe ser mantenido simultáneamente.
                        </td>
                        <td headers="h3" class="celda">sin tamaño preferido</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.protocol</code></td>
                        <td headers="h2" class="celda">
                            Una lista de tipos de protocolo separados por espacio de conexiones que pueden ser agrupadas. Los tipos 
                            válidos son &quot;plain&quot; and &quot;ssl&quot;.
                        </td>
                        <td headers="h3" class="celda"><code>&quot;plain&quot;</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>com.sun.jndi.ldap.connect.pool.timeout</code></td>
                        <td headers="h2" class="celda">
                            La representación textual de un entero que representa el número de milisegundos que una conexión en 
                            espera puede permanecer en la agrupación sin ser cerrada y eliminada de la agrupación.
                        </td>
                        <td headers="h3" class="celda">sin tiempo de espera</td>
                    </tr>
                </table>
                <br />
                <h2>
                    Lo Que Se Agrupa
                </h2>
                <p>
                    Cuando pide que una instancia <code>Context</code> use agrupación de conexiones usando la propiedad de entorno 
                    <code>&quot;com.sun.jndi.ldap.connect.pool&quot;</code>, la conexión que se usa podría o no podría ser 
                    agrupada. La regla predeterminada es que las conexiones planas (no SSL) que usan autenticación simple o sin 
                    autenticación se permita que sean agrupadas. Puede cambiar este valor predeterminado para incluir las 
                    conexiones SSL y el tipo de autenticación DIGEST-MD5 usando propiedades del sistema. Para permitir que tanto 
                    las conexiones SSL y las planas sean agrupadas, establezca la propiedad del sistema 
                    <code>&quot;com.sun.jndi.ldap.connect.pool.protocol&quot;</code> con la cadena 
                    <code>&quot;plain ssl&quot;</code>. Para permitir las conexiones de tipos de autenticación anónimo (none), 
                    simple y DIGEST-MD5 sean agrupadas, establezca la propiedad del sistema 
                    <code>com.sun.jndi.ldap.connect.pool.authentication</code> con la cadena 
                    <code>&quot;none simple DIGEST-MD5&quot;</code>.
                </p>
                <p>
                    Hay un par de propiedades de entorno que automáticamente descalifican una instancia de <code>Context</code> 
                    para usar una conexión agrupada. Una instancia <code>Context</code> no puede usar una conexión agrupada si ésta 
                    tiene su propiedad <code>&quot;java.naming.ldap.factory.socket&quot;</code> establecida a una clase de 
                    factoría de sockets personalizada, o su propiedad <code>&quot;java.naming.security.sasl.callback&quot;</code> 
                    establecida a una clase gestora de retrollamada, o su propiedad 
                    <code>&quot;com.sun.jndi.ldap.trace.ber&quot;</code> se estable para habilitar el seguimiento del protocolo.
                </p>
                <h2>
                    Cómo Se Agrupan las Conexiones
                </h2>
                <p>
                    Cuando una instancia <code>Context</code> solicita el uso de una conexión agrupada, el proveedor LDAP necesita 
                    determinar si la petición puede ser satisfecha por una agrupación de conexiones existente. Lo hace asignando 
                    una <em>identidad de conexión</em> a cada conexión agrupada y comprobando si la petición entrante tiene la 
                    misma identidad de conexión que la de una de sus conexiones agrupadas.
                </p>
                <p>
                    Una identidad de conexión es el conjunto de parámetros requeridos para crear una conexión LDAP posiblemente 
                    autenticada. Su composición depende del tipo de autenticación de la petición, como se muestra en la siguiente 
                    tabla.
                </p>
                <table class="celda" style="width:100%">
                    <caption>
                        Tabla que muestra el contenido de la identidad de conexión para varios tipos de autenticación
                    </caption>
                    <tr>
                        <th id="h101" class="celda" style="padding: 3px;">Tipo de Autenticación</th>
                        <th id="h102" class="celda" style="padding: 3px;">Contenido de la Identidad de Conexión</th>
                    </tr>
                    <tr>
                        <td headers="h101" class="celda" style="padding: 3px;">none</td>
                        <td headers="h102" class="celda" style="padding: 3px;">
                            <ul>
                                <li>controles de conexión</li>
                                <li>
                                    nombre del host, número de puerto como se especifica en la propiedad 
                                    <code>&quot;java.naming.provider.url&quot;</code>, referencia, o URL proporcionada al contexto 
                                    inicial
                                </li>
                                <li>
                                    Los contenidos de las propiedades siguientes:
                                    <div class="codeblock">
                                        <pre>
java.naming.security.protocol
java.naming.ldap.version
                                        </pre>
                                    </div>
                                </li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td headers="h101" class="celda" style="padding: 3px;">simple</td>
                        <td headers="h102" class="celda" style="padding: 3px;">
                            <ul>
                                <li>toda la información listada para none</li>
                                <li>
                                    los contenidos de las propiedades siguientes:
                                    <div class="codeblock">
                                        <pre>
java.naming.security.principal
java.naming.security.credentials
                                        </pre>
                                    </div>
                                </li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td headers="h101" class="celda" style="padding: 3px;">DIGEST-MD5</td>
                        <td headers="h102" class="celda" style="padding: 3px;">
                            <ul>
                                <li>toda la información listada para simple</li>
                                <li>
                                    los contenidos de las propiedades siguientes:
                                    <div class="codeblock">
                                        <pre>
java.naming.security.sasl.authorizationId
java.naming.security.sasl.realm
javax.security.sasl.qop
javax.security.sasl.strength
javax.security.sasl.server.authentication
javax.security.sasl.maxbuffer
javax.security.sasl.policy.noplaintext
javax.security.sasl.policy.noactive
javax.security.sasl.policy.nodictionary
javax.security.sasl.policy.noanonymous
javax.security.sasl.policy.forward
javax.security.sasl.policy.credentials
                                        </pre>
                                    </div>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </table>
                <br />
                <h2>
                    Tamaños de la Agrupación
                </h2>
                <p>
                    El proveedor LDAP mantiene agrupaciones de conexiones; cada agrupación mantiene las conexiones (ya sea en uso o 
                    inactiva) que tiene la misma identidad de conexión. Hay tres tamaños que afectan a la gestión de cada 
                    agrupación. Estos tamaños son globales y afecta a todas las agrupaciones.
                </p>
                <p>
                    El <em>tamaño inicial de agrupación</em> es el número de conexiones por identidad de conexión que el proveedor 
                    de servicio LDAP crea cuando crea por primera vez la agrupación (que corresponden a cuando la aplicación 
                    solicita por primera vez una conexión agrupada para esa identidad de conexión). La autenticación de cada 
                    conexión en la agrupación se realiza a demanda, a medida que se utiliza la conexión. Por defecto, el tamaño 
                    inicial de la agrupación es 1 y puede ser cambiada usando la propiedad del sistema 
                    <code>&quot;com.sun.jndi.ldap.connect.pool.initsize&quot;</code>. Por lo general, se usa en el momento de 
                    inicio de la aplicación para preparar el grupo con una cierta cantidad de conexiones a un servidor.
                </p>
                <p>
                    El <em>tamaño máximo de la agrupación</em> es el número máximo de conexiones por identidad de conexión que 
                    pueden ser mantenidas simultáneamente por el proveedor de servicio LDAP. Tanto las conexiones en uso como las 
                    inactivas contribuyen a este número. Cuando el tamaño de la agrupación alcanza este número, no se puede crear 
                    una nueva conexión para la identidad de conexión correspondiente hasta que se haya eliminado una conexión en el 
                    grupo (p.e., la conexión física se cierra). Cuando el tamaño de la agrupación alcanza el máximo y todas las 
                    conexiones en la agrupación están en uso, la petición de aplicación pur una conexión de esa agrupación se 
                    bloquea hasta que una conexión en la agrupación quede inactiva o se elimine. Un tamaño máximo de agrupación de 
                    0 significa que no hay tamaño máximo: una petición por una conexión agrupada usará una conexión inactiva 
                    agrupada existente o una conexión agrupada creada nuevamente.
                </p>
                <p>
                    El <em>tmaño preferido de la agrupación</em> es el número preferido de conexiones por identidad de conexión que 
                    el provedor de servicio LDAP debe mantener. Tanto las conexiones en uso como las inactivas contribuyen a este 
                    número. Cuando una aplicación solicita el uso de una conexión agrupada y el tamaño de la agrupación es menor 
                    que el tamaño preferido, el proveedor LDAP creará y usará una nueva conexión agrupada independientemeente de 
                    si hay una conexión en espera disponible. Cuando una aplicación ha terminado con una conexión agrupada (al 
                    invocar <code>Context.close()</code> en todos los contextos que comparten la conexión) y el tamaño de la 
                    agrupación es mayor que el tamaño preferido, el proveedor LDAP cerrará y eliminará la conexión agrupada de la 
                    agrupación. Un tamaño preferido de la agrupación de 0 significa que no hay tamaño preferido: una petición de 
                    una conexión agrupada resultará en una conexión creada nuevamente sólo si no hay conexiones en espera 
                    disponibles.
                </p>
                <p>
                    Dese cuenta de que el tamaño máximo de la agrupación sobreescribe tanto los tamaños iniciales y preferidos de 
                    la agrupación. Por ejemplo, establecer el tamaño preferido de la agrupación como más grande que el tamaño 
                    máximo de la agrupación es efectivamente establecerlo al tamaño máximo de la agrupación.
                </p>
                <h2>
                    Conexiones inactivas
                </h2>
                <p>
                    Cuando la aplicación termina con una conexión agrupada (invocando <code>Context.close()</code> en todos los 
                    contexto que comparten la conexión), la conexión agrupada subyacente se marca como inactiva, esperarando para 
                    ser reutilizada. De forma predeterminada, las conexiones inactivas permanecen en la agrupación indefinidamente 
                    hasta que son recolectadas para la basura. Si la propiedad de sistema 
                    <code>&quot;com.sun.jndi.ldap.connect.pool.timeout&quot;</code> ha sido establecida, el proveedor LDAP cerrará 
                    automáticamente y eliminará las conexiones agrupadas que han estado inactivas por más tiempo que el periodo 
                    especificado.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="pool.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="faq.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Agrupación (Pooling)<br />
            <b>Página siguiente:</b> Preguntas Frecuentes
        </div>
    </body>
</html> 
