<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Modos de Autenticación en LDAP (Los Tutoriales de Java&trade; &gt; Nombrado en Java e Interfaz de Directorio &gt;
            Temas Avanzados para los Usuarios LDAP)
        </title>
        <meta name="description" content="Este tutorial de Java JNDI describe la tecnología de Nombrado en Java e Interfaz de 
              Directorio (JNDI), operaciones de nombre y directorio, y LDAP" />
        <meta name="keywords" content="java programming, learn java, java sample code, jndi, ldap, jndi service provider" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Temas Avanzados para los Usuarios LDAP</a></div>
                <div class="linkAHEAD"><a href="ldap.html">LDAP v3</a></div>
                <div class="linkAHEAD"><a href="jndi.html">JNDI como una IPA de LDAP</a></div>
                <div class="linkBHEAD"><a href="operations.html">Cómo las Operaciones LDAP se Mapean a las IPAs de JNDI</a></div>
                <div class="linkBHEAD"><a href="exceptions.html">Cómo los Códigos de Error LDAP se Mapean a las Excepciones de JNDI</a></div>
                <div class="linkAHEAD"><a href="security.html">Seguridad</a></div>
                <div class="nolinkBHEAD">Modos de Autenticación en LDAP</div>
                <div class="linkBHEAD"><a href="auth_mechs.html">Mecanismos de Autenticación</a></div>
                <div class="linkBHEAD"><a href="anonymous.html">Anónimo</a></div>
                <div class="linkBHEAD"><a href="simple.html">Simple</a></div>
                <div class="linkBHEAD"><a href="sasl.html">SASL</a></div>
                <div class="linkBHEAD"><a href="digest.html">Digest-MD5</a></div>
                <div class="linkBHEAD"><a href="ssl.html">SSL y Sockets Personalizados</a></div>
                <div class="linkAHEAD"><a href="rename.html">Más Operaciones LDAP</a></div>
                <div class="linkBHEAD"><a href="compare.html">Comparación LDAP</a></div>
                <div class="linkBHEAD"><a href="result.html">Resultados de la Búsqueda</a></div>
                <div class="linkBHEAD"><a href="unsol.html"> Notificaciones no Solicitadas de LDAP</a></div>
                <div class="linkAHEAD"><a href="connect.html">Gestión de Conexiones</a></div>
                <div class="linkBHEAD"><a href="create.html">Creación</a></div>
                <div class="linkBHEAD"><a href="close.html"> Cierre</a></div>
                <div class="linkBHEAD"><a href="pool.html">Agrupación (Pooling)</a></div>
                <div class="linkBHEAD"><a href="config.html">Configuración</a></div>
                <div class="linkAHEAD"><a href="faq.html">Preguntas Frecuentes</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Nombrado en Java e Interfaz de Directorio<br />
                <b>Lección:</b> Temas Avanzados para los Usuarios LDAP<br />
                <b>Sección:</b> Seguridad
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Nombrado en Java e Interfaz de Directorio</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Temas Avanzados para los Usuarios LDAP</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="security.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="auth_mechs.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Modos de Autenticación en LDAP</h1>
            </div>
            <div id="PageContent">
                <p>
                    En LDAP, la información de autenticación se proporciona en la operación &quot;bind&quot;. En LDAP v2, un 
                    cliente  inicia una conexión con el servidor LDAP enviando al servidor una operación &quot;bind&quot; que 
                    contiene la información de autenticación.
                </p>
                <p>
                    En LDAP v3, esta operación sirve para el mismo propósito, pero es opcional. Un cliente que envía una petición 
                    LDAP sin hacer un &quot;bind&quot; se trata como un cliente <em>anónimo</em> (vea la sección 
                    <a class="TutorialLink" target="_top" href="anonymous.html">Anónimo</a> para los detalles). En LDAP v3,
                    la operación &quot;bind&quot;  puede ser enviada en cualquier momento, posiblemente más de una vez, durante la 
                    conexión. Un cliente puede enviar una petición &quot;bind&quot; en la mitad de una conexión para cambiar su 
                    identidad. Si la petición tiene éxito, luego, todas las solicitudes pendientes que utilizan la identidad 
                    anterior en la conexión se descartan y la conexión se asocia con la nueva identidad.
                </p>
                <p>
                    La información de autenticación proporcionada en la operación &quot;bind&quot; depende del 
                    <em>mecanismo de autenticación</em> que el cliente elija. Vea 
                    <a class="TutorialLink" target="_top" href="auth_mechs.html">Mecanismos de Autenticación</a> para una 
                    descripción del mecanismo de autenticación.
                </p>
                <h2>
                    Autenticar a LDAP usando JNDI
                </h2>
                <p>
                    En JNDI, la información de autenticación se especifica en propiedades de entorno. Cuando crea un contexto 
                    inicial usando la clase 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/directory/InitialDirContext.html">
                        <code>InitialDirContext</code></a> (o su superclase o subclase), proporciona un conjunto de propiedades de 
                        entorno, alguna de las cuales podría contener información de autenticación. Puede usar las siguientes 
                        propiedades de entorno para especifciar la información de autenticación.
                </p>
                <ul>
                    <li>
                        <a class="APILink" target="_blank"
                           href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#SECURITY_AUTHENTICATION">
                            <code>Context.SECURITY_AUTHENTICATION</code></a>
                        (<code>&quot;java.naming.security.authentication&quot;</code>).
                        <br />
                        Especifica el mecanismo de autenticación a usar. Para el proveedor de servicio LDAP en el KDJ, este puede 
                        ser una de las siguientes cadenas: <code>&quot;none&quot;</code>, <code>&quot;simple&quot;</code>, 
                        <em>sasl_mech</em>, donde <em>sasl_mech</em> es una lista separada por espacios del mecanismo de nombres de 
                        SASL. Vea 
                        <a class="TutorialLink" target="_top" href="auth_mechs.html">Mecanismos de Autenticación</a> para una 
                        descripción de estas cadenas.
                    </li>
                    <li>
                        <a class="APILink" target="_blank"
                           href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#SECURITY_PRINCIPAL">
                            <code>Context.SECURITY_PRINCIPAL</code></a> (<code>&quot;java.naming.security.principal&quot;</code>).
                        <br />
                        Especifica el nombre del usuario/programa que hace la autenticación y depende del valor la propiedad 
                        <code>Context.SECURITY_AUTHENTICATION</code>. Vea la siguientes secciones en esta lección para obtener 
                        detalles y ejemplos.
                    </li>
                    <li>
                        <a class="APILink" target="_blank" 
                           href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#SECURITY_CREDENTIALS">
                            <code>Context.SECURITY_CREDENTIALS</code></a>
                        (<code>&quot;java.naming.security.credentials&quot;</code>).
                        <br />
                        Especifica las credenciales del usuario/programa que hace la autenticación y dependiendo del valor de la 
                        propiedad <code>Context.SECURITY_AUTHENTICATION</code>. Vea las siguientes secciones en esta lección para 
                        obtener detalles y ejemplos.
                    </li>
                </ul>
                <p>
                    Cuando se crea el contexto inicial, el proveedor de servicio LDAP subyacente extrae la información de 
                    autenticación de estas propiedades de entorno y usa la operación de LDAP &quot;bind&quot; para pasarlas al 
                    servidor.
                </p>
                <p>
                    <a id="SIMPLE"></a> El 
                    <a class="SourceLink" target="_blank"
                       href="examples/Simple.java"
                       onclick="showCode('../../displayCode.html', 'examples/Simple.java'); return false;">
                        <code>ejemplo siguiente</code></a> muestra cómo, usando una simple contraseña en texto claro, un cliente 
                        se autentica a un servidor LDAP.
                </p>
                <div class="codeblock">
                    <pre>
// Set up the environment for creating the initial context
Hashtable&lt;String, Object&gt; env = new Hashtable&lt;String, Object&gt;();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://localhost:389/o=JNDITutorial");

// Authenticate as S. User and password "mysecret"
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, 
        "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "mysecret");

// Create the initial context
DirContext ctx = new InitialDirContext(env);

// ... do something useful with ctx
                    </pre>
                </div>
                <h2>
                    Usar Diferente Información de Autenticación para un Contexto
                </h2>
                <p>
                    Si quiere usar una información de autentificación diferente par un contexto existente, entonces puede usar 
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#addToEnvironment-java.lang.String-java.lang.Object-">
                        <code>Context.addToEnvironment()</code></a> y 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/Context.html#removeFromEnvironment-java.lang.String-">
                        <code>Context.removeFromEnvironment()</code></a> para actualizar las propiedades del entorno que contiene la 
                        información de autenticación. Las invocaciones subsiguientes de los métodos en el contexto usarán la nueva 
                        información de autenticación para comunicar con el servidor.
                </p>
                <p>
                    El 
                    <a class="SourceLink" target="_blank" href="examples/UseDiff.java" 
                       onclick="showCode('../../displayCode.html', 'examples/UseDiff.java'); return false;">
                        <code>ejemplo siguiente</code></a> muestra como la información de autenticación de un contexto se cambia a 
                        <code>&quot;none&quot;</code> después de que el contexto ha sido creado.
                </p>
                <div class="codeblock">
                    <pre>
// Authenticate as S. User and the password "mysecret"
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, 
        "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "mysecret");

// Create the initial context
DirContext ctx = new InitialDirContext(env);

// ... do something useful with ctx

// Change to using no authentication
ctx.addToEnvironment(Context.SECURITY_AUTHENTICATION, "none");

// ... do something useful with ctx
                    </pre>
                </div>
                <h2>
                    Fallos de autenticación
                </h2>
                <p>
                    La autenticación puede fallar por una variedad de razones. Por ejemplo, si proporciona información de 
                    autenticación incorrecta, tal como una contraseña o nombre principal incorrectos, después se lanaza una 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/AuthenticationException.html">
                        <code>AuthenticationException</code></a>.
                </p>
                <p>
                    Aquí tiene 
                    <a class="SourceLink" target="_blank" href="examples/BadPasswd.java" 
                       onclick="showCode('../../displayCode.html', 'examples/BadPasswd.java'); return false;">
                        <code>un ejemplo</code></a> que es una variación del ejemplo previo. Esta vez, una contraseña incorrecta 
                        causa que la autenticación falle.
                </p>
                <div class="codeblock">
                    <pre>
// Authenticate as S. User and give an incorrect password
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, 
        "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "notmysecret");
                    </pre>
                </div>
                <p>
                    Esto produce la salida siguiente.
                </p>
                <div class="codeblock">
                    <pre>
javax.naming.AuthenticationException: [LDAP: error code 49 - Invalid Credentials]
        ...
                    </pre>
                </div>
                <p>
                    Debido a que servidores diferentes admiten diferentes mecanismos de autenticación, podría pedir un mecanismo de 
                    autenticación que el servidor no admite. En este caso, se lanzará una 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/AuthenticationNotSupportedException.html">
                        <code>AuthenticationNotSupportedException</code></a>.
                </p>
                <p>
                    Aquí tiene 
                    <a class="SourceLink" target="_blank"
                       href="examples/BadAuth.java"
                       onclick="showCode('../../displayCode.html', 'examples/BadAuth.java'); return false;">
                        <code>un ejemplo</code></a> que es una variación del ejemplo previo. Esta vez, un mecanismo de 
                        autenticación no admitido (<code>&quot;custom&quot;</code>) causa que la autenticación falle.
                </p>
                <div class="codeblock">
                    <pre>
// Authenticate as S. User and the password "mysecret"
env.put(Context.SECURITY_AUTHENTICATION, "custom");
env.put(Context.SECURITY_PRINCIPAL, 
        "cn=S. User, ou=NewHires, o=JNDITutorial");
env.put(Context.SECURITY_CREDENTIALS, "mysecret");
                    </pre>
                </div>
                <p>
                    Esto produce la salida siguiente.
                </p>
                <div class="codeblock">
                    <pre>
javax.naming.AuthenticationNotSupportedException: custom
        ...
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="security.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="auth_mechs.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Seguridad<br />
            <b>Página siguiente:</b> Mecanismos de Autenticación
        </div>
    </body>
</html> 
