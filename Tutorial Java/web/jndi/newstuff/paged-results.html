<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Control de Resultados Paginados (Los Tutoriales de Java&trade; &gt; Nombrado en Java e Interfaz de Directorio &gt; 
            Nuevas funcionalidades en KDJ 5.0 y KDJ 6)
        </title>
        <meta name="description" content="Este tutorial de Java JNDI describe la tecnología de Nombrado en Java e Interfaz de 
              Directorio (JNDI), operaciones de nombre y directorio, y LDAP" />
        <meta name="keywords" content="java programming, learn java, java sample code, jndi, ldap, jndi service provider" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Nuevas funcionalidades en KDJ 5.0 y KDJ 6</a></div>
                <div class="linkAHEAD"><a href="dn.html">Recuperando el Nombre Distinguido</a></div>
                <div class="linkAHEAD"><a href="controls-std.html">Controles estándar de LDAP</a></div>
                <div class="nolinkAHEAD">Control de Resultados Paginados</div>
                <div class="linkAHEAD"><a href="sort.html">Control de Ordenación</a></div>
                <div class="linkAHEAD"><a href="mdsaIT.html">Gestionar Control de Referencia</a></div>
                <div class="linkAHEAD"><a href="ldapname.html">Manipulando LdapName (Nombre Distinguido)</a></div>
                <div class="linkAHEAD"><a href="rdn.html">Manipulando Nombre Distinguido Relativo (RDN)</a></div>
                <div class="linkAHEAD"><a href="readtimeout.html">Configuración de Tiempo de Espera para Operaciones LDAP</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Nombrado en Java e Interfaz de Directorio<br />
                <b>Lección:</b> Nuevas funcionalidades en KDJ 5.0 y KDJ 6
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Nombrado en Java e Interfaz de Directorio</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Nuevas funcionalidades en KDJ 5.0 y KDJ 6</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="controls-std.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="sort.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Control de Resultados Paginados</h1>
            </div>
            <div id="PageContent">
                <h2>
                    BasicControl
                </h2>
                <p>
                    La clase 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/javax/naming/ldap/BasicControl.html">
                        <code>javax.naming.ldap.BasicControl</code></a> que implementa a <code>javax.naming.ldap.Control</code>
                    sirve como una implementación base para extender otros controles.
                </p>
                <h2>
                    Control de Resultados Paginados
                </h2>
                <p>
                    El control de resultados paginados es útil para los clientes LDAP que quieren recibir los resultados de la 
                    búsqueda de una manera controlada limitada por el tamaño de la página. El tamaño de la página puede ser 
                    configurado por el cliente según la disponibilidad de sus recursos, como el ancho de banda y la capacidad de 
                    procesamiento.
                </p>
                <p>
                    El servidor usa una cookie (similar al mecanismo de cookie de sesión de HTTP) para mantener el estado de las 
                    peticiones de búsqueda con el fin de rastrear los resultados que están siendo enviados al cliente. El control 
                    de resultados paginados se especifica en 
                    <a class="OutsideLink" target="_blank" href="http://www.ietf.org/rfc/rfc2696.txt">RFC 2696</a>. Las clases de 
                    abajo proporcionan la funcionalidad requerida para admitir el control de resultados paginados.
                </p>
                <ul>
                    <li>
                        <a class="APILink" target="_blank" 
                           href="https://docs.oracle.com/javase/8/docs/api/javax/naming/ldap/PagedResultsControl.html">
                            <code>javax.naming.ldap.PagedResultsControl</code></a>
                    </li>
                    <li>
                        <a class="APILink" target="_blank" 
                           href="https://docs.oracle.com/javase/8/docs/api/javax/naming/ldap/PagedResultsResponseControl.html">
                            <code>javax.naming.ldap.PagedResultsResponseControl</code></a>
                    </li>
                </ul>
                <h3>
                    ¿Cómo Usar el Control de Resultados Paginados?
                </h3>
                <p>
                    El ejemplo de abajo ilustra la interacción cliente-servidor entre un cliente que está haciendo una solicitud de 
                    búsqueda con un tamaño de página límite de 5. El conjunto entero de resultados devueltos por el servidor 
                    contiene 21 entradas.
                </p>
                <ol>
                    <li>
                        El cliente envía una soliticud de búsqueda pidiendo resultados paginados con un tamaño de página de 5.
                        <div class="codeblock">
                            <pre>
    // Activate paged results
     int pageSize = 5; // 5 entries per page
     byte[] cookie = null;
     int total;
     ctx.setRequestControls(new Control[]{ 
         new PagedResultsControl(pageSize, Control.CRITICAL) });
     // Perform the search
     NamingEnumeration results = ctx.search("", "(objectclass=*)", 
                                            new SearchControls());
                            </pre>
                        </div>
                    </li>
                    <li>
                        El servidor responde con entradas mas una indicación de 21 entradas en total en el resultado de búsqueda y 
                        una cookie opaca que será utilizada por el cliente al recuperar páginas posteriores.
                        <div class="codeblock">
                            <pre>
   // Iterate over a batch of search results sent by the server
         while (results != null &amp;&amp; results.hasMore()) {
             // Display an entry
             SearchResult entry = (SearchResult)results.next();
             System.out.println(entry.getName());

             // Handle the entry's response controls (if any)
             if (entry instanceof HasControls) {
                 // ((HasControls)entry).getControls();
             }
         }
   // Examine the paged results control response 
         Control[] controls = ctx.getResponseControls();
         if (controls != null) {
             for (int i = 0; i &lt; controls.length; i++) {
                 if (controls[i] instanceof PagedResultsResponseControl) {
                     PagedResultsResponseControl prrc =
                         (PagedResultsResponseControl)controls[i];
                     total = prrc.getResultSize();
                     cookie = prrc.getCookie();
                 } else {
                     // Handle other response controls (if any)
                 }
             }
         }   
                            </pre>
                        </div>
                    </li>
                    <li>
                        El cliente envía una petición de búsqueda idéntica, devolviendo la cookie opaca, pidiendo la página 
                        siguiente.
                        <div class="codeblock">
                            <pre>
  // Re-activate paged results
         ctx.setRequestControls(new Control[]{
             new PagedResultsControl(pageSize, cookie, Control.CRITICAL) });
                            </pre>
                        </div>
                    </li>
                    <li>
                        El servidor responde con cinco entradas mas una indicación de que hay más entradas. El cliente repite la 
                        búsqueda realizada en el paso 4 hasta que el servidor devuelve una cookie nula, lo que indica que el 
                        servidor no enviará más entradas.
                    </li>
                </ol>
                <p>
                    El ejemplo completo de JNDI se puede encontrar 
                    <a class="SourceLink" target="_blank" 
                       href="examples/PagedSearch.java" 
                       onclick="showCode('../../displayCode.html', 'examples/PagedSearch.java'); return false;">
                        <code>aquí</code></a>.
                </p>
                <hr />
                <p>
                    <strong>Nota:</strong> El servidor Directorio Activo de Windows admite el Control de Búsqueda Paginada. No es 
                    admitido por el Servidor de Directorio de Oracle versión 5.2
                </p>
                <hr />
            </div>
            <div class="NavBit">
                <a target="_top" href="controls-std.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="sort.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Controles estándar de LDAP<br />
            <b>Página siguiente:</b> Control de Ordenación
        </div>
    </body>
</html> 
