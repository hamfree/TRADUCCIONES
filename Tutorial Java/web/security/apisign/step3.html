<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Firmando los Datos (Los Tutoriales de Java&trade; &gt; Características de Seguridad en Java SE &gt; Generando y 
            Verificando Firmas)
        </title>
        <meta name="description" content="Este tutorial de seguridad de Java describe el uso de firmas digitales, claves y servicios 
              de criptografía" />
        <meta name="keywords" content="programación java, aprender java, código ejemplo java, seguridad java, criptografía, firma 
              digital, verificación firma, código de firma" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Generando y Verificando Firmas</a></div>
                <div class="linkAHEAD"><a href="gensig.html">Generando una Firma Digital</a></div>
                <div class="linkBHEAD"><a href="step1.html">Preparar la Estructura Inicial del Programa</a></div>
                <div class="linkBHEAD"><a href="step2.html">Generar las Claves Públicas y Privadas</a></div>
                <div class="nolinkBHEAD">Firmando los Datos</div>
                <div class="linkBHEAD"><a href="step4.html">Salvar la Firma y la Clave Pública en los Ficheros</a></div>
                <div class="linkBHEAD"><a href="step5.html">Compilar y Ejecutar el Programa</a></div>
                <div class="linkAHEAD"><a href="versig.html">Verificando una Signatura Digital</a></div>
                <div class="linkBHEAD"><a href="vstep1.html">Preparar la Estructura Inicial del Programa</a></div>
                <div class="linkBHEAD"><a href="vstep2.html">Introducir y Convertir los Bytes Codificados de la Clave Pública</a></div>
                <div class="linkBHEAD"><a href="vstep3.html">Introducir los Bytes de la Firma</a></div>
                <div class="linkBHEAD"><a href="vstep4.html">Verificar la Firma</a></div>
                <div class="linkBHEAD"><a href="vstep5.html">Compilar y Ejecutar el Programa</a></div>
                <div class="linkAHEAD"><a href="enhancements.html">Debilidades y Alternativas</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Características de Seguridad en Java SE<br />
                <b>Lección:</b> Generando y Verificando Firmas<br />
                <b>Sección:</b> Generando una Firma Digital
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Características de Seguridad en Java SE</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Generando y Verificando Firmas</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="step2.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="step4.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Firmando los Datos</h1>
            </div>
            <div id="PageContent">
                <p>
                    Ahora que ha creado una clave pública y una clave privada, está listo para firmar los datos. En este ejemplo 
                    firmará los datos contenidos en un archivo. <code>GenSig</code> obtiene el nombre del archivo de la línea de 
                    comandos. Una firma digital se crea (o verifica) usando una instancia de la clase <code>Signature</code>.
                </p>
                <p>
                    Firmar los datos, generando una firma digital para esos datos, se hace con los pasos siguientes.    
                </p>
                <p>
                    <b>Obtener un Objeto Signature</b>: Lo siguiente obtiene un objeto <code>Signature</code> para generar o 
                    verificar firmas usando el algoritmo DSA, el mismo algoritmo para el cual el programa generó claves en el paso 
                    previo, <a href="step2.html">Generar las Claves Públicas y Privadas</a>.
                </p>
                <div class="codeblock">
                    <pre>
Signature dsa = Signature.getInstance("SHA1withDSA", "SUN"); 
                    </pre>
                </div>
                <p>
                    Nota: Cuando especifica el nombre del algoritmo de firma, debe también incluir el nombre del algoritmo de 
                    resumen de mensajes usado por el algoritmo de firma. SHA1withDSA es una forma de especificar el algoritmo de 
                    firma DSA; usando el algoritmo de resumen de mensajes SHA-1.
                    
                </p>
                <p style="font-weight: bold">
                    Inicializar el Objeto Signature
                </p>
                <p>
                    Antes de que se pueda usar un objeto <code>Signature</code> para firmar o verificar, debe ser inicializado. El 
                    método de inicialización para firmar requiere una clave privada. Use la clave privada colocada en el objeto 
                    <code>PrivateKey</code> llamado <code>priv</code> en el paso previo.
                </p>
                <div class="codeblock">
                    <pre>
dsa.initSign(priv);
                    </pre>
                </div>
                <p>
                    <b>Proporcione al Objeto Signature los Datos Que se Van a Firmar</b> Este programa usará los datos del archivo 
                    cuyo nombre se especificó como el primer (y único) argumento de línea de comandos. El programa leerá los datos 
                    un búfer a la vez y los proporcionará al objeto <code>Signature</code> llamando al método <code>update</code>.
                </p>
                <div class="codeblock">
                    <pre>
FileInputStream fis = new FileInputStream(args[0]);
BufferedInputStream bufin = new BufferedInputStream(fis);
byte[] buffer = new byte[1024];
int len;
while ((len = bufin.read(buffer)) >= 0) {
    dsa.update(buffer, 0, len);
};
bufin.close();
                    </pre>
                </div>
                <p style="font-weight: bold">
                    Generar la Firma
                </p>
                <p>
                    Una vez que todos los datos han sido proporcionados al objeto <code>Signature</code>, puede generar la firma 
                    digital de esos datos.
                </p>
                <div class="codeblock">
                    <pre>
byte[] realSig = dsa.sign();
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="step2.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="step4.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Generar las Claves Públicas y Privadas<br />
            <b>Página siguiente:</b> Salvar la Firma y la Clave Pública en los Ficheros
        </div>
    </body>
</html> 
