<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Encontrando Ficheros (Los Tutoriales de Java&trade; &gt; Clases Esenciales &gt; E/S Básica)
        </title>
        <meta name="description" content="Este tutorial de Java describe las excepciones, la entrada/salida básica, concurrencia,
              expresiones regulares, y el entorno de la plataforma" />
        <meta name="keywords" content="java programming, learn java, java sample code, java exception, java input output, java
              threads, java regex, regular expressions, path, classpath, environment variable" />
        <link type="text/css" rel="stylesheet" href="../../indice.css" />
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">E/S Básica</a></div>
                <div class="linkAHEAD"><a href="streams.html">Flujos E/S</a></div>
                <div class="linkBHEAD"><a href="bytestreams.html">Flujos de Bytes</a></div>
                <div class="linkBHEAD"><a href="charstreams.html">Flujos de Caracteres</a></div>
                <div class="linkBHEAD"><a href="buffers.html">Flujos Cacheados</a></div>
                <div class="linkBHEAD"><a href="scanfor.html">Escaneando y Formateando</a></div>
                <div class="linkCHEAD"><a href="scanning.html">Escaneando</a></div>
                <div class="linkCHEAD"><a href="formatting.html">Formateando</a></div>
                <div class="linkBHEAD"><a href="cl.html">E/S desde la Línea de Comandos</a></div>
                <div class="linkBHEAD"><a href="datastreams.html">Flujos de Datos</a></div>
                <div class="linkBHEAD"><a href="objectstreams.html">Flujos de Objetos</a></div>
                <div class="linkAHEAD"><a href="fileio.html">E/S de Ficheros (caracterizando NIO.2)</a></div>
                <div class="linkBHEAD"><a href="path.html">¿Qué es un Path? (Y Otros Hechos del Sistema del Ficheros)</a></div>
                <div class="linkBHEAD"><a href="pathClass.html">La Clase Path</a></div>
                <div class="linkCHEAD"><a href="pathOps.html">Operaciones con Path</a></div>
                <div class="linkBHEAD"><a href="fileOps.html">Operaciones con Ficheros</a></div>
                <div class="linkBHEAD"><a href="check.html">Comprobando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="delete.html">Borrando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="copy.html">Copiando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="move.html">Managing Metadata (File and File Store Attributes)</a></div>
                <div class="linkBHEAD"><a href="fileAttr.html">Gestionando Metadatos (Fichero y Almacenamiento de Atributos del Fichero)</a></div>
                <div class="linkBHEAD"><a href="file.html">Leyendo, Escribiendo y Creando Ficheros</a></div>
                <div class="linkBHEAD"><a href="rafs.html">Acceso Aleatorio a Ficheros</a></div>
                <div class="linkBHEAD"><a href="dirs.html">Creando y Leyendo Directorios</a></div>
                <div class="linkBHEAD"><a href="links.html">Enlaces, Simbólicos o Inversos</a></div>
                <div class="linkBHEAD"><a href="walk.html">Recorriendo el Árbol de Ficheros</a></div>
                <div class="nolinkBHEAD">Encontrando Ficheros</div>
                <div class="linkBHEAD"><a href="notification.html">Monitorizando un Directorio en busca de Cambios</a></div>
                <div class="linkBHEAD"><a href="misc.html">Otros Métodos Útiles</a></div>
                <div class="linkBHEAD"><a href="legacy.html">Código de E/S de Ficheros Heredado</a></div>
                <div class="linkAHEAD"><a href="summary.html">Sumario</a></div>
                <div class="linkQUESTIONS"><a href="QandE/questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Clases Esenciales<br />
                <b>Lección:</b> E/S Básica<br />
                <b>Sección:</b> E/S de Ficheros (caracterizando NIO.2)
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Clases Esenciales</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">E/S Básica</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="walk.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="notification.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Encontrando Ficheros</h1>
            </div>
            <div id="PageContent">
                <p>
                    Si usted ha usado alguna vez un guión de shell (shell scripts, en inglés), es muy probable que haya utilizado la 
                    coincidencia de patrones para localizar ficheros. En realidada, usted los ha usado problablemente de forma 
                    extensiva. Si no los ha usado, la coincidencia de patrones usa caracteres especiales para crear un patrón y 
                    entonces los nombres de los ficheros pueden ser comparados contra ese patrón. Por ejemplo, en la mayoría de los 
                    guiones de shell, el asterisco <code>*</code>, coincide con cualquier número de caracteres. Por ejemplo, el
                    siguiente comando lista todos los ficheros en el directorio actual que terminan en <code>.html</code>:
                </p>
                <div class="codeblock">
                    <pre>
% ls *.html
                    </pre>
                </div>
                <p>
                    El paquete <code>java.nio.file</code> ofrece soporte programático para esta útil característica. Cada
                    implementación de sistema de ficheros establece un
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/PathMatcher.html">
                        <code>PathMatcher</code>
                    </a>. Puede obtener un <code>PathMatcher</code> del sistema de ficheros usando el método
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/FileSystem.html#getPathMatcher-java.lang.String-">
                        <code>getPathMatcher(String)</code>
                    </a> en la clase <code>FileSystem</code> . El siguiente trozo de código obtiene el path matcher para el sistema
                    de archivos por defecto:
                </p>
                <div class="codeblock">
                    <pre>
String pattern = ...;
PathMatcher matcher =
    FileSystems.getDefault().getPathMatcher("glob:" + pattern);
                    </pre>
                </div>
                <p>
                    El argumento de cadena pasado a <code>getPathMatcher</code> especifica el sabor de sintaxis y el patrón a
                    probar. Este ejemplo especifica  la sintaxis <em>glob</em>. Si no está familiarizado con la sintaxis glob, vea
                    <a class="TutorialLink" target="_top" href="fileOps.html#glob">Qué es un Glob</a>.
                </p>
                <p>
                    La sintaxis glob es fácil de usar y flexible pero, si lo prefiere, puede usar también expresiones regulares, o 
                    sintaxis <em>regex</em>. Para más información sobre regex, vea la lección
                    <a class="TutorialLink" target="_top"
                       href="../regex/index.html">
                        Expresiones Regulares</a> . Algunas implementaciones de sistema de ficheros podrían soportar otras sintaxis.
                </p>
                <p>
                    Si quiere usr alguna otra forma de patrón basado-en-cadenas, puede crear su propia clase 
                    <code>PathMatcher</code>. El ejemplo en esta página usa la sintaxis glob.
                </p>
                <p>
                    Una vez ha creado su instancia <code>PathMatcher</code>, está listo para compararla contra ficheros. El interfaz
                    <code>PathMatcher</code> tiene un único método,
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/PathMatcher.html#matches-java.nio.file.Path-">
                        <code>matches</code></a>, que toma un argumento <code>Path</code> y devuelve un booleano: o coincide el
                    patrón, o no lo hace. El trozo de código siguiente busca ficheros que terminen en <code>.java</code> o
                    <code>.class</code> e imprime esos ficheros a la salida estándar:
                </p>
                <div class="codeblock">
                    <pre>
PathMatcher matcher =
    FileSystems.getDefault().getPathMatcher("glob:*.{java,class}");

Path filename = ...;
if (matcher.matches(filename)) {
    System.out.println(filename);
}
                    </pre>
                </div>
                <h2>
                    <a id="recursive">Correspondencia de patrones recursivos</a>
                </h2>
                <p>
                    Buscar ficheros que coincidan con un particular patrón va de la mano con recorrer un árbol de ficheros. ¿Cuántas
                    veces sabe que un fichero está <em>en alguna parte</em> del sistema de ficheros, pero dónde? O quizás necesite
                    buscar todos los ficheros en un árbol de ficheros que tienen una extensión de fichero particular.
                </p>
                <p>
                    El ejemplo
                    <a class="SourceLink" target="_blank" href="examples/Busca.java"
                       onclick="showCode('../../displayCode.html', 'examples/Busca.java'); return false;">
                        <code>Busca</code></a> hace precisamente eso. <code>Busca</code> es similar a la utilidad de UNIX
                    <code>find</code>, pero se ha reducido su funcionalidad. Puede extender este ejemplo para incluir otra 
                    funcionalidad. Por ejemplo, la utilidad <code>find</code> soporta la bandera <code>-prune</code> para excluir
                    un subárbol entero de la búsqueda. Podría implementar esa funcionalidad devolviendo <code>SKIP_SUBTREE</code>
                    en el método <code>preVisitDirectory</code>. Para implementar la opción <code>-L</code>, que resuelve los
                    enlaces simbólicos, podría usar el método de cuatro argumentos <code>walkFileTree</code> y pasarle la
                    enumeración <code>FOLLOW_LINKS</code> (pero asegúrese que ha comprobado los enlaces circulares en el método
                    <code>visitFile</code>).
                </p>
                <p>
                    Para ejecutar la aplicación Busca, use el siguiente formato:
                </p>
                <div class="codeblock">
                    <pre>
% java Busca &lt;path&gt; -name "&lt;glob_pattern&gt;"
                    </pre>
                </div>
                <p>
                    El patrón es colocado dentro de las comillas de forma que cualquier comodín no sea interpretado por el shell.
                    Por ejemplo:
                </p>
                <div class="codeblock">
                    <pre>
% java Busca . -name "*.html"
                    </pre>
                </div>
                <p>
                    Aquí está el código fuente para el ejemplo <code>Busca</code>:
                </p>
                <div class="codeblock">
                    <pre>
/**
 * Código de ejemplo que busca ficheros que coinciden con el patrón glob especificado. Para más información sobre qué constituye un
 * patrón glob, vea http://docs.oracle.com/javase/javatutorials/tutorial/essential/io/fileOps.html#glob
 *
 * El fichero o directorios que coinciden con el patrón son impresos en la salida estándar. El número de coincidencias es también
 * impreso.
 *
 * Cuando se ejecuta esta aplicación, debe colocar el patrón glob entre comillas, de forma que el shell no expanda ningún comodín:
 * java Find . -name &quot;*.java&quot;
 */
// fuente original: Find.java
public class Busca {

    /**
     * A {@code FileVisitor} that finds all files that match the specified pattern.
     */
    public static class Buscador
            extends SimpleFileVisitor&lt;Path&gt; {

        private final PathMatcher matcher;
        private int numCoincidencias = 0;

        Buscador(String patron) {
            matcher = FileSystems.getDefault()
                    .getPathMatcher(&quot;glob:&quot; + patron);
        }

        // Compara el patrón glob contra
        // el nombre del fichero o directorio.
        void busca(Path fichero) {
            Path nombre = fichero.getFileName();
            if (nombre != null && matcher.matches(nombre)) {
                numCoincidencias++;
                System.out.println(fichero);
            }
        }

        // Imprime el número total de
        // coincidencias en la salida estándar.
        void hecho() {
            System.out.println(&quot;Coincidieron: &quot;
                    + numCoincidencias);
        }

        // Invoca el método de
        // coincidencia de patrones en cada fichero.
        @Override
        public FileVisitResult visitFile(Path fichero,
                BasicFileAttributes attrs) {
            busca(fichero);
            return CONTINUE;
        }

        // Invoca el método de
        // patrón de coincidencia en cada directorio.
        @Override
        public FileVisitResult preVisitDirectory(Path dir,
                BasicFileAttributes attrs) {
            busca(dir);
            return CONTINUE;
        }

        @Override
        public FileVisitResult visitFileFailed(Path file,
                IOException exc) {
            System.err.println(exc);
            return CONTINUE;
        }
    }

    static void uso() {
        System.err.println(&quot;java Busca &lt;path&gt;&quot;
                + &quot; -name \&quot;&lt;glob_pattern&gt;\&quot;&quot;);
        System.exit(-1);
    }

    public static void main(String[] args)
            throws IOException {

        if (args.length &lt; 3 || !args[1].equals(&quot;-name&quot;)) {
            uso();
        }

        Path dirInicial = Paths.get(args[0]);
        String pattern = args[2];

        Buscador finder = new Buscador(pattern);
        Files.walkFileTree(dirInicial, finder);
        finder.hecho();
    }
}
                    </pre>
                </div>
                <p>
                    El recorrer recursivamente un árbol de ficheros está cubierto en
                    <a class="TutorialLink" target="_top" href="walk.html">Recorriendo el Árbol de Ficheros</a>.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="walk.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="notification.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página Anterior:</b> Recorriendo el Árbol de Ficheros
            <br />
            <b>Página Siguiente:</b> Monitorizando un Directorio en busca de Cambios
        </div>
    </body>
</html>