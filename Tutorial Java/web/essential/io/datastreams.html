<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Flujos de Datos (Los Tutoriales de Java&trade; &gt; Clases Esenciales &gt; E/S Básica)
        </title>
        <meta name="description" content="Este tutorial de Java describe las excepciones, la entrada/salida básica, concurrencia,
              expresiones regulares, y el entorno de la plataforma" />
        <meta name="keywords" content="java programming, learn java, java sample code, java exception, java input output, java
              threads, java regex, regular expressions, path, classpath, environment variable" />
        <link type="text/css" rel="stylesheet" href="../../indice.css" />
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">E/S Básica</a></div>
                <div class="linkAHEAD"><a href="streams.html">Flujos E/S</a></div>
                <div class="linkBHEAD"><a href="bytestreams.html">Flujos de Bytes</a></div>
                <div class="linkBHEAD"><a href="charstreams.html">Flujos de Caracteres</a></div>
                <div class="linkBHEAD"><a href="buffers.html">Flujos Cacheados</a></div>
                <div class="linkBHEAD"><a href="scanfor.html">Escaneando y Formateando</a></div>
                <div class="linkCHEAD"><a href="scanning.html">Escaneando</a></div>
                <div class="linkCHEAD"><a href="formatting.html">Formateando</a></div>
                <div class="linkBHEAD"><a href="cl.html">E/S desde la Línea de Comandos</a></div>
                <div class="nolinkBHEAD">Flujos de Datos</div>
                <div class="linkBHEAD"><a href="objectstreams.html">Flujos de Objetos</a></div>
                <div class="linkAHEAD"><a href="fileio.html">E/S de Ficheros (caracterizando NIO.2)</a></div>
                <div class="linkBHEAD"><a href="path.html">¿Qué es un Path? (Y Otros Hechos del Sistema del Ficheros)</a></div>
                <div class="linkBHEAD"><a href="pathClass.html">La Clase Path</a></div>
                <div class="linkCHEAD"><a href="pathOps.html">Operaciones con Path</a></div>
                <div class="linkBHEAD"><a href="fileOps.html">Operaciones con Ficheros</a></div>
                <div class="linkBHEAD"><a href="check.html">Comprobando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="delete.html">Borrando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="copy.html">Copiando un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="move.html">Moviendo un Fichero o Directorio</a></div>
                <div class="linkBHEAD"><a href="fileAttr.html">Gestionando Metadatos (Fichero y Almacenamiento de Atributos del Fichero)</a></div>
                <div class="linkBHEAD"><a href="file.html">Leyendo, Escribiendo y Creando Ficheros</a></div>
                <div class="linkBHEAD"><a href="rafs.html">Acceso Aleatorio a Ficheros</a></div>
                <div class="linkBHEAD"><a href="dirs.html">Creando y Leyendo Directorios</a></div>
                <div class="linkBHEAD"><a href="links.html">Enlaces, Simbólicos o Inversos</a></div>
                <div class="linkBHEAD"><a href="walk.html">Recorriendo el Árbol de Ficheros</a></div>
                <div class="linkBHEAD"><a href="find.html">Encontrando Ficheros</a></div>
                <div class="linkBHEAD"><a href="notification.html">Monitorizando un Directorio en busca de Cambios</a></div>
                <div class="linkBHEAD"><a href="misc.html">Otros Métodos Útiles</a></div>
                <div class="linkBHEAD"><a href="legacy.html">Código de E/S de Ficheros Heredado</a></div>
                <div class="linkAHEAD"><a href="summary.html">Sumario</a></div>
                <div class="linkQUESTIONS"><a href="QandE/questions.html">Preguntas y Ejercicios</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Clases Esenciales<br />
                <b>Lección:</b> E/S Básica<br />
                <b>Sección:</b> Flujos E/S
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Clases Esenciales</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">E/S Básica</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="cl.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="objectstreams.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Flujos de Datos</h1>
            </div>
            <div id="PageContent">
                <p>
                    Los Flujos de datos soportan E/S binaria de  valores de tipos de datos primitivos (<code>boolean</code>,
                    <code>char</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>,
                    <code>float</code>, y <code>double</code>) como también valores String. Todos los flujos de datos implementan o
                    el interfaz
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/io/DataInput.html">
                        <code>DataInput</code></a> o el interfaz
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/io/DataOutput.html">
                        <code>DataOutput</code></a>. Esta sección se centra en las implementaciones más usadas ampliamente de estos
                    interfaces,
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/io/DataInputStream.html">
                        <code>DataInputStream</code></a> y
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/io/DataOutputStream.html">
                        <code>DataOutputStream</code></a>.
                </p>
                <p>
                    El ejemplo
                    <a class="SourceLink" target="_blank" href="examples/FlujosDeDatos.java"
                       onclick="showCode('../../displayCode.html', 'examples/FlujosDeDatos.java'); return false;">
                        <code>FlujosDeDatos</code></a> demuestra los flujos de datos escribiendo en la salida un conjunto de registros
                    de datos, y entonces leyéndolos de nuevo. Cada registro consiste en tres valores relacionados a un item
                    de una factura, como es mostrado en la siguiente tabla:
                </p>
                <table class="celda">
                    <caption>Tabla mostrando los registros en el ejemplo DataStreams</caption>
                    <tr>
                        <th class="celda" style="padding: 4px;" id="h1">Orden en el registro</th>
                        <th class="celda" style="padding: 4px;" id="h2">Tipo de Dato</th>
                        <th class="celda" style="padding: 4px;" id="h3">Descripción del Dato</th>
                        <th class="celda" style="padding: 4px;" id="h4">Método de Salida</th>
                        <th class="celda" style="padding: 4px;" id="h5">Método de Entrada</th>
                        <th class="celda" style="padding: 4px;" id="h6">Valor de Ejemplo</th>
                    </tr>
                    <tr>
                        <td class="celda" style="padding: 4px;" headers="h1">1</td>
                        <td class="celda" style="padding: 4px;" headers="h2"><code>double</code></td>
                        <td class="celda" style="padding: 4px;" headers="h3">Precio del Item</td>
                        <td class="celda" style="padding: 4px;" headers="h4"><code>DataOutputStream.writeDouble</code></td>
                        <td class="celda" style="padding: 4px;" headers="h5"><code>DataInputStream.readDouble</code></td>
                        <td class="celda" style="padding: 4px;" headers="h6"><code>19.99</code></td>
                    </tr>
                    <tr>
                        <td class="celda" style="padding: 4px;" headers="h1">2</td>
                        <td class="celda" style="padding: 4px;" headers="h2"><code>int</code></td>
                        <td class="celda" style="padding: 4px;" headers="h3">Cantidad de Unidades</td>
                        <td class="celda" style="padding: 4px;" headers="h4"><code>DataOutputStream.writeInt</code></td>
                        <td class="celda" style="padding: 4px;" headers="h5"><code>DataInputStream.readInt</code></td>
                        <td class="celda" style="padding: 4px;" headers="h6"><code>12</code></td>
                    </tr>
                    <tr>
                        <td class="celda" style="padding: 4px;" headers="h1">3</td>
                        <td class="celda" style="padding: 4px;" headers="h2"><code>String</code></td>
                        <td class="celda" style="padding: 4px;" headers="h3">Descripción del Item</td>
                        <td class="celda" style="padding: 4px;" headers="h4"><code>DataOutputStream.writeUTF</code></td>
                        <td class="celda" style="padding: 4px;" headers="h5"><code>DataInputStream.readUTF</code></td>
                        <td class="celda" style="padding: 4px;" headers="h6"><code>&quot;Java T-Shirt&quot;</code></td>
                    </tr>
                </table>
                <p>
                    Examinemos el código crucial en <code>DataStreams</code>. Primero, el programa define algunas constantes
                    conteniendo el nombre del fichero de datos y los datos que serán escritos en él:
                </p>
                <div class="codeblock">
                    <pre>
static final String ficheroDatos = "invoicedata";

    static final double[] precios = { 19.99, 9.99, 15.99, 3.99, 4.99 };
    static final int[] unidades = { 12, 8, 13, 29, 50 };
    static final String[] descripciones = { "Camiseta Java",
            "Taza Java",
            "Duke Jugando con Muñecas",
            "Broche de Java",
            "Llavero de Java" };
                    </pre>
                </div>
                <p>
                    Entonces <code>DataStreams</code> abre un flujo de salida. Ya que un <code>DataOutputStream</code> puede sólo
                    ser creado como un envoltorio para un objeto de flujo de bytes existente, <code>DataStreams</code> ofrece
                    un flujo de bytes cacheado de ficheros de salida.
                </p>
                <div class="codeblock">
                    <pre>
salida = new DataOutputStream(new
                    BufferedOutputStream(new FileOutputStream(ficheroDatos)));
                    </pre>
                </div>
                <p>
                    <code>DataStreams</code> escribe en la salida los registros y cierra el flujo de salida.
                </p>
                <div class="codeblock">
                    <pre>
for (int i = 0; i &lt; precios.length; i ++) {
                salida.writeDouble(precios[i]);
                salida.writeInt(unidades[i]);
                salida.writeUTF(descripciones[i]);
            }
                    </pre>
                </div>
                <p>
                    El método <code>writeUTF</code> escribe en la salida valores <code>String</code> en una forma modificada de
                    UTF-8. Esto es una codficación de caracteres de tamaño variable que sólo necesita un byte único para los
                    caracteres comunes en Occidente.
                </p>
                <p>
                    Ahora <code>DataStreams</code> lee los datos de vuelta de nuevo. Primero debe establecer un flujo de entrada, y
                    variables para contener los datos de entrada. Como <code>DataOutputStream</code>, <code>DataInputStream</code>
                    debe ser construido como un envoltorio de un flujo de bytes.
                </p>
                <div class="codeblock">
                    <pre>
entrada = new DataInputStream(new
                    BufferedInputStream(new FileInputStream(ficheroDatos)));

double precio;
int unidad;
String descripcion;
double total = 0.0;
                    </pre>
                </div>
                <p>
                    Ahora <code>DataStreams</code> puede leer cada registro en el flujo, informando sobre los datos que encuentra.
                </p>
                <div class="codeblock">
                    <pre>
try {
    while (true) {
        precio = entrada.readDouble();
        unidad = entrada.readInt();
        descripcion = entrada.readUTF();
        System.out.format("Usted ordenó %d unidades de %s a $%.2f%n",
            unidad, descripcion, precio);
        total += unidad * precio;
    }
} catch (EOFException e) { }
                    </pre>
                </div>
                <p>
                    Note que <code>DataStreams</code> detecta una condición de final-de-fichero capturando
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/io/EOFException.html">
                        <code>EOFException</code>
                    </a>, en vez de comprobar si un valor devuelto es erróneo. Todas las implementaciones de los métodos de 
                    <code>DataInput</code> usan <code>EOFException</code> en vez de los valores de retorno.
                </p>
                <p>
                    Note también que cada <code>write</code> especializado en <code>DataStreams</code> está exactamente pareado con
                    su <code>read</code> especializado correspondiente. Depende del programador el asegurarse de que los tipos de
                    salida y entrada coincidan de esta forma: El flujo de entrada consiste en datos binarios simples, con nada que
                    indique el tipo de los valores individuales, o dónde empiezan en el flujo.
                </p>
                <p>
                    <code>DataStreams</code> usa una técnica de programación muy mala: usa números en coma flotante para representar
                    valores monetarios. En general, la coma flotante es mala para valores precisos. Es particularmente mala para las
                    fracciones decimales, porque los valores comunes (tales como <code>0.1</code>) no tienen una representación
                    binaria.
                </p>
                <p>
                    El tipo correcto para usar con los valores de moneda es
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html">
                        <code>java.math.BigDecimal</code>
                    </a>. Desafortunadamente, <code>BigDecimal</code> es un tipo de objeto, de forma que no funciona con los flujos
                    de datos. Sin embargo <code>BigDecimal</code> <i>funcionará</i> con flujos de objetos, los cuales están cubiertos
                    en la siguiente sección.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="cl.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="objectstreams.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página Anterior:</b> E/S desde la Línea de Comandos<br />
            <b>Página Siguiente:</b> Flujos de Objetos
        </div>
    </body>
</html>