<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Respuestas a Preguntas y Ejercicios: El Entorno de la Plataforma (Los Tutoriales de Java&trade; &gt; Clases Esenciales
            &gt; El Entorno de la Plataforma)
        </title>
        <meta name="description" content="Este tutorial de Java describe las excepciones, la entrada/salida básica, concurrencia,
              expresiones regulares, y el entorno de la plataforma" />
        <meta name="keywords" content="java programming, learn java, java sample code, java exception, java input output, java
              threads, java regex, regular expressions, path, classpath, environment variable" />
        <link rel="stylesheet" href="../../../indice.css" type="text/css"/>
    </head>
    <body>
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper  clearfix">       
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div> 
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                            </div>
                            <div class="PrintHeaders">
                                <b>Recorrido:</b> Clases Esenciales
                                <br />
                                <b>Lección:</b> El Entorno de la Plataforma
                            </div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
        <div class="MainFlow_wide">
            <span id="BreadCrumbs">
                <a href="../../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../../index.html" target="_top">Clases Esenciales</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">El Entorno de la Plataforma</a>
            </span>
            <div class="NavBit">
                <a href="../QandE/questions.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a href="../../TOC.html">TdC</a>
            </div>
            <div id="PageTitle">
                <h1>Respuestas a Preguntas y Ejercicios: El Entorno de la Plataforma</h1>
            </div>
            <div id="PageContent">
                <h2>Preguntas</h2>
                <p>
                    <strong>Pregunta 1.</strong>Un programador instala una nueva librería contenida en un fichero .jar. Para acceder 
                    a la librería desde su código, establece una variable de entorno CLASSPATH que apunta al nuevo fichero .jar. 
                    Ahora encuentra que obtiene un mensaje de error cuando intenta lanzar aplicaciones simples:
                </p>
                <div class="codeblock">
                    <pre>
<b>java Hola</b>
Exception in thread "main" java.lang.NoClassDefFoundError: Hola
                    </pre>
                </div>
                <p>
                    En este caso, la clase <code>Hola</code> es compilada en un fichero .class file en el directorio actual &mdash; 
                    incluso el comando <code>java</code> no parece encontrarlo. ¿Qué está yendo mal?
                </p>
                <p>
                    <strong>Respuesta 1.</strong> Una clase sólo es encontrada si aparece en la ruta de clases. Por defeccto, la 
                    ruta de clases consiste del directorio actual. Si la variable de entorno CLASSPATH es establecida, y no incluye
                    el directorio actual, el lanzador no puede ya encontrar clases en el directorio actual. La solución es cambiar
                    la variable CLASSPATH para que incluya el directorio actual. Por ejemplo, si el valor CLASSPATH es 
                    <code>c:\java\newLibrary.jar</code> (Windows) o <code>/home/me/newLibrary.jar</code> (UNIX o Linux) necesita ser
                    cambiado a <code>.;c:\java\newLibrary.jar</code> or <code>.:/home/me/newLibrary.jar</code>.
                </p>
                <h2>Ejercicios</h2>
                <p>
                    <strong>Ejercicio 1.</strong>
                </p>
                <p>
                   Escriba una aplicación, <code>EcoPersistente</code>, con las siguientes características:
                </p>
                <ul>
                    <li>
                        Si <code>EcoPersistente</code> es ejecutado con argumentos en la línea de comandos, que imprima esos 
                        argumentos. También salva la cadena impresa en una propiedad, y salva la propiedad en un fichero llamado 
                        <code>EcoPersistente.txt</code>
                    </li>
                    <li>
                        Si <code>EcoPersistente</code> es ejecutado sin argumentos en la linea de comandos, que busque una variable
                        de entorno llamada ECOPERSISTENTE. Si esa variable existe, <code>EcoPersistente</code> imprime su valor, 
                        y también salva el valor de la misma forma que lo hace para los argumentos de la línea de comandos.
                    </li>
                    <li>
                        Si <code>EcoPersistente</code> es ejecutaddo sin argumentos de línea de comandos, y la variable de 
                        entorno ECOPERSISTENTE no está definida, recupera el valor de la propiedad desde 
                        <code>EcoPersistente.txt</code> y la imprime.
                    </li>
                </ul>
                <p>
                    <strong>Respuesta 1.</strong>
                </p>
                <div class="codeblock">
                    <pre>

import java.util.Properties;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
//fuente original: PersistentEcho.java
public class EcoPersistente {
    public static void main (String[] args) {
        String argumentos = "";
        boolean sinPropiedad = true;

        // ¿Hay argumentos? 
        // Si es así recupéralos.
        if (args.length > 0) {
            for (String arg: args) {
                argumentos += arg + " ";
            }
            argumentos = argumentos.trim();
        }
        // Sin argumentos, ¿Hay 
        // una variable de entorno?
        // Si es así, recupérala.
        else if ((argumentos = System.getenv("ECOPERSISTENTE")) != null) {}
        // No hay variable de entorno
        // Recupera el valor de la propiedad.
        else {
            sinPropiedad = false;
            // Estabelece argumentos a null.
            // Si es aún null después
            // de que salgamos del try-catch ,
            // habremos fallado en recuperar
            // el valor de la propiedad.
            argumentos = null;
            FileInputStream ficheroEntrada = null;
            try {
                ficheroEntrada =
                    new FileInputStream("EcoPersistente.txt");
                Properties propEntrada
                    = new Properties();
                propEntrada.load(ficheroEntrada);
                argumentos = propEntrada.getProperty("argumentos");
            } catch (IOException e) {
                System.err.println("No puedo leer el fihcero de propiedades.");
                System.exit(1);
            } finally {
                if (ficheroEntrada != null) {
                    try {
                        ficheroEntrada.close();
                    } catch(IOException e) {};
                }
            }
        }
        if (argumentos == null) {
            System.err.println("No pude encontrar la propiedad 'argumentos'.");
            System.exit(1);
        }

        // De alguna forma, hemos obtenido el
        // valor. ¡Lo mostramos ya!
        System.out.println(argumentos);

        // Si no recuperamos el 
        // valor desde la propiedad,
        // lo salvamos en la propiedad.
        if (sinPropiedad) {
            Properties outProperties =
                new Properties();
            outProperties.setProperty("argString",
                                      argumentos);
            FileOutputStream ficheroSalida = null;
            try {
                ficheroSalida =
                    new FileOutputStream("EcoPersistente.txt");
                outProperties.store(ficheroSalida,
                        "Propiedades EcoPersistente");
            } catch (IOException e) {}
            finally {
                if (ficheroSalida != null) {
                    try {
                        ficheroSalida.close();
                    } catch(IOException e) {};
                }
            }
        }
    }
}

                    </pre>
                </div>
            </div>
        </div>
        <div class="NavBit">
            <a href="../QandE/questions.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
            <a href="../../TOC.html">TdC</a>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">
                                Su uso de ésta
                            </a>
                            página y todo el material en las páginas bajo el anuncio &quot;Los Tutoriales de Java&quot; está sujeto
                            a estos
                            <a href="../../../information/cpyr.html">
                                avisos legales
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../../information/run-examples.html">
                                Compilando y Ejecutando los Ejemplos: PFs
                            </a>
                            .
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias?
                            <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión
                            </a>
                            .
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página Anterior:</b> Preguntas y Ejercicios: El Entorno de la Plataforma
        </div>
    </body>
</html>