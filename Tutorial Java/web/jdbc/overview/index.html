<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Lección: Introducción a JDBC (Los Tutoriales de Java&trade; &gt; Acceso a Bases de Datos JDBC(TM))
        </title>
        <meta name="description" content="Este tutorial de Java JDBC describe cómo usar la IPA JDBC para crear, insertar, 
              actualizar y consultar tablas. También aprenderá cómo usar declaraciones simples y preparadas, procedimientos 
              almacenados y realizar transacciones" />
        <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="nolinkLESSON">Introducción a JDBC</div>
                <div class="linkAHEAD"><a href="architecture.html">Arquitectura JDBC</a></div>
                <div class="linkAHEAD"><a href="database.html">Descripción de una Base de Datos Relacional</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Acceso a Bases de Datos JDBC(TM)
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Acceso a Bases de Datos JDBC(TM)</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="../index.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="architecture.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Lección: Introducción a JDBC</h1>
            </div>
            <div id="PageContent">
                <p>
                    La IPA de JDBC es una IPA de Java que puede acceder a cualquier clase de datos tabulares, especialmente a datos 
                    almacenados en una 
                    <a href="#relational">Base de Datos Relacional.</a>
                </p>
                <p>
                    JDBC le ayuda a escribir aplicaciones de Java que gestionen estas tres actividades de programación:
                </p>
                <ol>
                    <li>
                        Conectar a una fuente de datos, como una base de datos
                    </li>
                    <li>
                        Enviar sentencias de consulta y actualización a la base de datos
                    </li>
                    <li>
                        Recuperar y procesar los resultados recibidos desde la base de datos en respuesta a su consulta
                    </li>
                </ol>
                <p>
                    El fragmento de código simple siguiente da un ejemplo simple de estos tres pasos:
                </p>
                <div class="codeblock">
                    <pre>
public void connectToAndQueryDatabase(String username, String password) {

    Connection con = DriverManager.getConnection(
                         "jdbc:myDriver:myDatabase",
                         username,
                         password);

    Statement stmt = con.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM Table1");

    while (rs.next()) {
        int x = rs.getInt("a");
        String s = rs.getString("b");
        float f = rs.getFloat("c");
    }
}
                    </pre>
                </div>
                <p>
                    Este fragmento de código corto instancia un objeto <code>DriverManager</code> para conectar a un controlador de 
                    base de datos y conectarse en una base de datos, instancia un objeto <code>Statement</code> que lleva su 
                    consulta en lenguaje SQL a la base de datos; instancia un objeto <code>ResultSet</code> que recupera los 
                    resultados de su consulta, y ejecuta un simple bucle <code>while</code>, el cual recupera y visualiza esos 
                    resultados. Es así de simple.
                </p>
                <h2>
                    Componentes del Producto JDBC
                </h2>
                <p>
                    JDBC incluye cuatro componentes:
                </p>
                <ol>
                    <li>
                        <p>
                            <b>LA IPA de JDBC</b>&nbsp;&mdash;&nbsp; La IPA de JDBC&trade; proporciona acceso programático a datos 
                            relaciones desde el lenguaje de programación Java&trade;. Usando la IPA de JDBC, las aplicaciones 
                            pueden ejecutar sentencias SQL, recuperar resultados, y propagar los cambios de vuelta a una fuente de 
                            datos subyacente. La IPA de JDBC puede también interactuar con fuentes de datos múltiples en un entorno 
                            distribuído y heterogéneo.
                        </p>
                        <p>
                            La IPA de JDBC es parte de la plataforma JAva, la cual incluye la 
                            <i>Edición Estándar de Java&trade;</i> y la <i>Edición Empresarial de Java&trade;</i> (Java&trade; 
                            EE). La IPA 4.0 de JDBC está dividida en dos paquetes: <code>java.sql</code> y <code>javax.sql</code>. 
                            Ambos paquetes están incluídos en las plataformas Java SE y Java EE.
                        </p>
                    </li>
                    <li>
                        <p>
                            El <b>Gestor de Controladores JDBC</b>&nbsp;&mdash;&nbsp; La clase de JDBC <code>DriverManager</code> 
                            define los objetos a los cuales pueden conectar las aplicaciones Java a un controlador JDBC. 
                            <code>DriverManager</code> ha sido tradicionalmente la columna vertebral de la arquitectura JDBC. Es 
                            bastante pequeño y sencillo.
                        </p>
                        <p>
                            Los paquetes de Extensión Estándar <code>javax.naming</code> y <code>javax.sql</code> le permiten usar 
                            un objeto <code>DataSource</code> registrado con un servicio de nombrado  
                            <i>Interfaz de Nombrado y Directorio de Java</i>&trade; (JNDI) para establecer una conexión con una 
                            fuente de datos. Puede usar otro mecanismo de conexión, pero se recomienda usar un objeto 
                            <code>DataSource</code> siempre que sea posible.
                        </p>
                    </li>
                    <li>
                        <p>
                            La <b>Suite de Pruebas JDBC</b>&nbsp;&mdash;&nbsp; La suite de pruebas del controlador JDBC le ayuda a 
                            determinar qué controladores JDBC ejecutarán su programa. Estas pruebas no son completas ni 
                            exhaustivas, pero ejercen muchas de las características importantes de la IPA de JDBC.
                        </p>
                    </li>
                    <li>
                        <p>
                            El <b>Puente JDBC-ODBC</b>&nbsp;&mdash;&nbsp; El puente de Software Java proporciona acceso JDBC a 
                            través de los controladores ODBC. Tenga en cuenta que debe cargar código binario ODBC en cada máquina 
                            cliente que utilice este controlador. Como resultado, el controlador ODBC es más apropiado en una red 
                            corporativa donde las instalaciones de cliente no son un problema mayor, o para código escrito en Java 
                            en un servidor de aplicaciones en una arquitectura de tres capas.
                        </p>
                    </li>
                </ol>
                <p>
                    Este recorrido usa los dos primeros de estos cuatro componentes JDBC para conectar a una base de datos y 
                    entonces construye un programa de java que usa comandos SQL para comunicar con una base de datos relacionales de 
                    pruebas. Los dos últimos componentes se usan en entornos especializados para probar aplicaciones web, o para 
                    comunicar DBMSs compatibles con ODBC.
                </p>
                <h2>
                    Arquitectura JDBC
                </h2>
                <p>
                    <a id="teir"></a>
                </p>
                <h3>
                    Modelos de Procesamiento de Dos y Tres Niveles

                </h3>
                <p>
                    La IPA de JDBC soporta tanto los modelos de dos niveles como los de tres niveles para el acceso a bases de 
                    datos.
                </p>
                <p>
                    <a id="fig1"></a>
                </p>
                <p style="font-style: italic; font-weight: bold">
                    Figura 1: Arquitectura de Dos Niveles para Acceso a Datos.
                </p>
                <br />
                <p></p>
                <img alt="El protocolo propietario de la DBMS proporciona comunicación de dos vías entre la máquina cliente y el 
                     servidor de base de datos" src="intro.anc2.gif" /><br />
                <p>
                    En el modelo de dos niveles, un applet de Java o aplicación habla directamente con la fuente de datos. Esto 
                    requiere un controlador JDBC que pueda comunicar con la fuente de datos particular que está siendo accedida. 
                    Unos comandos de usuario se envían a la base de datos u otra fuente de datos, y los resultados de estas 
                    sentencias son enviadas de vuelta al usuario. La fuente de datos puede estar ubicada en otra máquina a la cual 
                    está conectado el usuario a través de la red. Esto se conoce como configuración cliente/servidor, con la 
                    máquina del usuario como cliente y la máquina que aloja la fuente de datos como servidor. La red puede ser una 
                    intranet, la cual, por ejemplo, conecta los empleados dentro de una empresa, o puede ser Internet.
                </p>
                <p>
                    En el modelo de tres niveles, los comandos se envía a un &quot;nivel intermedio&quot; de servicios, los cuales 
                    después envian los comandos a la fuente de datos. La fuente de datos procesa los comandos y envía los 
                    resultados de vuelta al nivel intermedio, el cual después los envía al usuario. Los directores de las empresas 
                    encuentran muy atractivo el modelo de tres niveles porque el nivel medio permite mantener el control sobre el 
                    acceso y los tipos de actualizaciones que se pueden realizar a los datos corporativos. Otra ventaja es que 
                    simplica el despliegue de aplicaciones. Finalmente, en muchos casos, la arquitectura de tres niveles puede 
                    proporcionar ventajas de rendimiento.
                </p>
                <p>
                    <a id="fig2"></a>
                </p>
                <p style="font-style: italic; font-weight: bold">
                    Figura 2: Arquitectura de Tres Niveles para el Acceso a Datos.
                </p>
                <br />
                <p></p>
                <img alt="El protocolo propietario de DBMS proporcioa la comunicación de dos vías entre el servidor de la base de 
                     datos y la máquina servidora. HTTP, RMI, CORBA u otras llamadas proporcionan la comunicación de dos vías entre 
                     la máquina servidora y la máquina cliente" src="intro.anc1.gif" /><br />
                <p>
                    Hasta hace poco, el nivel medio a menudo se escribía en lenguajes como C o C ++, que ofrecen un rendimiento 
                    rápido. Sin embargo, con la introducción de compiladores optimizados que traducen el bytecode de Java en código 
                    eficiente específico de la máquina y tecnologías tales como los Enterprise JavaBeans&trade;, la plataforma Java 
                    se está convirtiendo rápidamente en la plataforma estándar para el desarrollo del nivel medio. Esta es una gran 
                    ventaja, ya que permite aprovechar las características de robustez, multiproceso y seguridad de Java.
                </p>
                <p>
                    Con empresas que utilizan cada vez más el lenguaje de programación Java para escribir código de servidor, la 
                    IPA de JDBC se está usando más y más en el nivel medio de una arquitectura de tres niveles. Algunas de las 
                    características que hacen de JDBC una tecnología de servidor es que soporta la agrupación de conexiones, las 
                    transacciones distribuídas, y los conjuntos de filas desconectados. La IPA de JDBC es también la que permite el 
                    acceso a una fuente de datos desde un nivel medio de Java.
                </p>
                <p>
                    <a id="relational"></a>
                </p>
                <h2>
                    Descripción de una Base de Datos Relacional
                </h2>
                <p>
                    Una base de datos es un medio para almacenar información de tal manera que se pueda recuperar información de 
                    ella. En los términos más simples, una base de datos relacional es una que presenta la información en tablas 
                    con filas y columnas. Una tabla se denomina relación en el sentido de que es una colección de objetos del mismo 
                    tipo (filas). Los datos en una tabla pueden ser relacionados de acuerdo a claves comunes o conceptos, y la 
                    habilidad de recuperar datos relacionados desde una tabla es la base para el término base de datos relacional. 
                    Un Sistema de Gestión de Base de Datos (DBMS, en inglés) maneja la forma en que los datos son almacenados, 
                    mantenidos, y recuperados. En el caso de una base de datos relacional, un Sistema Gestor de Base de Datos 
                    Relacional (RDBMS, en inglés) realiza estas tareas. DBMS, tal como se utiliza en este libro, es un término 
                    general que incluye RDBMS.
                </p>
                <p>
                    <a id="integrity"></a>
                </p>
                <h3>
                    Reglas de Integridad
                </h3>
                <p>
                    Las tablas relacionales siguen ciertas reglas de integridad para asegurar que los datos que contienen sean 
                    precisos y estén siempre accesibles. Primero, las filas en una tabla relacional deben ser todas distintas. Si 
                    hay filas duplicadas, puede hacer problemas resolviendo cual de las dos selecciones posibles es la correcta. 
                    Para la mayoría de los DBMSs, el usuario puede especificar que las filas duplicadas no están permitidas, y si 
                    eso está hecho, el DBMS evitará la adicción de filas que dupliquen una fila existente.
                </p>
                <p>
                    Una segunda regla de integración del modelo relacional tradicional es que los valores de columna no deben ser 
                    grupos repetitivos o matrices. Un tercer aspecto de la integridad de datos involucra el concepto del valor 
                    nulo. Una base de datos se encarga de situaciones en las que los datos pueden no estar disponibles mediante el 
                    uso de un valor nulo para indicar que falta un valor. No equivale a un espacio en blanco o cero. Un blanco se 
                    considera igual a otro blanco, un cero es igual a otro cero, pero dos valores nulos no se consideran iguales.
                </p>
                <p>
                    Cuando cada fila en una tabla es diferente, es posible usar una o más columnas para identificar una fila en 
                    particular. Esta columna única o grupo de columnas se llama clave primaria. Cualquier columna que es parte de 
                    una clave primaria no puede ser nula; si lo fuera, la clave principal que lo contiene dejaría de ser un 
                    identificador completo. Esta regla se conoce como integridad de la entidad.
                </p>
                <p>
                    La tabla <code>Employees</code> ilustra algunos de estos conceptos de base de datos relacional. Tiene cinco 
                    columnas y seis filas, con cada fila representando un empleado diferente.
                </p>
                <p>
                    <a id="employees"></a>
                </p>
                <p class="centrado">
                    Tabla <code>Employees</code>
                </p>
                <table class="celda">
                    <caption>Empleados, tabla de base de datos de ejemplo</caption>
                    <tr>
                        <th id="h1" class="celda"><code>Employee_Number</code></th>
                        <th id="h2" class="celda"><code>First_name</code></th>
                        <th id="h3" class="celda"><code>Last_Name</code></th>
                        <th id="h4" class="celda"><code>Date_of_Birth</code></th>
                        <th id="h5" class="celda"><code>Car_Number</code></th>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10001</td>
                        <td headers="h2" class="celda">Axel</td>
                        <td headers="h3" class="celda">Washington</td>
                        <td headers="h4" class="celda">28-Aug-43</td>
                        <td headers="h5" class="celda">5</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10083</td>
                        <td headers="h2" class="celda">Arvid</td>
                        <td headers="h3" class="celda">Sharma</td>
                        <td headers="h4" class="celda">24-Nov-54</td>
                        <td headers="h5" class="celda">null</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10120</td>
                        <td headers="h2" class="celda">Jonas</td>
                        <td headers="h3" class="celda">Ginsberg</td>
                        <td headers="h4" class="celda">01-Jan-69</td>
                        <td headers="h5" class="celda">null</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10005</td>
                        <td headers="h2" class="celda">Florence</td>
                        <td headers="h3" class="celda">Wojokowski</td>
                        <td headers="h4" class="celda">04-Jul-71</td>
                        <td headers="h5" class="celda">12</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10099</td>
                        <td headers="h2" class="celda">Sean</td>
                        <td headers="h3" class="celda">Washington</td>
                        <td headers="h4" class="celda">21-Sep-66</td>
                        <td headers="h5" class="celda">null</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda">10035</td>
                        <td headers="h2" class="celda">Elizabeth</td>
                        <td headers="h3" class="celda">Yamaguchi</td>
                        <td headers="h4" class="celda">24-Dec-59</td>
                        <td headers="h5" class="celda">null</td>
                    </tr>
                </table>
                <p>
                    La clave primaria para esta tabla generalmente sería el número de empleado porque se garantiza que cada uno es 
                    diferente. (Un número es también más eficiente que una cadena para hacer comparaciones). También sería posible 
                    usar <code>First_Name</code> y <code>Last_Name</code> porque la combinación de los dos también identifica solo 
                    una fila en nuestra base de datos de muestra. Usar el apellido sólo no funcionaría porque hay dos empleados con 
                    el mismo apellido de &quot;Washington&quot;. En este caso particular los nombres son todos diferentes, por lo 
                    que posiblemente se podría usar esa columna como clave principal, pero es mejor evitar el uso de una columna 
                    donde podrían ocurrir duplicados. Si Elizabeth Yamaguchi obtiene un empleo en esta compañía y la clave primaria 
                    es <code>First_Name</code>, el RDBMS no permitiría que su nombre fuera agregado (si se le ha especificado que 
                    no se permiten duplicados). Debido a que ya hay una Elizabeth en la tabla, agregar una segunda haría que la 
                    clave principal fuera inútil como una forma de identificar solo una fila. Tenga en cuenta que aunque el uso de 
                    <code>First_Name</code> y <code>Last_Name</code> es una clave compuesta única para este ejemplo, es posible que 
                    no sea única en una base de datos más grande. Tenga en cuenta también que la tabla <code>Empleado</code> asume 
                    que solo puede haber un automóvil por empleado.
                </p>
                <h3>
                    Sentencias <a id="select"><code>SELECT</code></a>
                </h3>
                <p>
                    SQL es una lenguaje diseñado para ser utilizado con bases de datos relacionales. Hay un conjunto de comandos 
                    SQL básicos que se consideran estándar y son usados por todas los RDBMSs. Por ejemplo, todas los RDBMSs usan la 
                    sentencia <code>SELECT</code>.
                </p>
                <p>
                    Una sentencia <code>SELECT</code>, también llamada una consulta, se usa para obtener información de una tabla. 
                    Especifica una o más cabececerar de columna, una o más tablas de las cuales seleccionar, y algún criterio para 
                    la selección. El RDBMS devuelve las filas de las entradas de columna que satisfacen los requisitos 
                    establecidos. Una sentencia <code>SELECT</code> tal como la siguiente recuperará los nombres y apellidos de los 
                    empleados que tienen coches de empresa:
                </p>
                <div class="codeblock">
                    <pre>
SELECT First_Name, Last_Name
FROM Employees
WHERE Car_Number IS NOT NULL
                    </pre>
                </div>
                <p>
                    A continuación el conjunto resultante (el conjunto de filas que satisfacen el requisito de no tener null en la 
                    columna <code>Car_Number</code>). El nombre y el apellido se imprime para cada fila que satisface el requisito 
                    por la sentencia <code>SELECT</code> (la primer línea) especifica las columnas <code>First_Name</code> y 
                    <code>Last_Name</code>. La cláusula <code>FROM</code> (la segunda línea) da la tabla desde la cual las columnas 
                    serán seleccionadas.
                </p>
                <table class="celda">
                    <caption>Conjunto de resultados con el requisito de no tener null en la columna Car_Number</caption>
                    <tr>
                        <th id="h101" class="celda">FIRST_NAME</th>
                        <th id="h102" class="celda">LAST_NAME</th>
                    </tr>
                    <tr>
                        <td headers="h101" class="celda">Axel</td>
                        <td headers="h102" class="celda">Washington</td>
                    </tr>
                    <tr>
                        <td headers="h101" class="celda">Florence</td>
                        <td headers="h102" class="celda">Wojokowski</td>
                    </tr>
                </table>
                <p>
                    El código siguiente produce un conjunto de resultados que incluye la tabla entera porque pide todas las columnas 
                    en la tabla Employees sin restricciones (no hay cláusula <code>WHERE</code>). Dese cuenta de que 
                    <code>SELECT *</code> significa &quot;SELECT todas las columnas&quot;.
                </p>
                <div class="codeblock">
                    <pre>
SELECT *
FROM Employees
                    </pre>
                </div>
                <p>
                    <a id="where"></a>
                </p>
                <h3>
                    Cláusulas <code>WHERE</code>
                </h3>
                <p>
                    La cláusula <code>WHERE</code> en una sentencia <code>SELECT</code> proporiciona el criterio para seleccionar 
                    valores. Por ejemplo, en el fragmento de código siguiente, los valores serán seleccionados sólo si ocurren en 
                    una fila en la cual la columna Last_Name  empieza con la cadena &#39;Washington&#39;.
                </p>
                <div class="codeblock">
                    <pre>
SELECT First_Name, Last_Name
FROM Employees
WHERE Last_Name LIKE 'Washington%'
                    </pre>
                </div>
                <p>
                    La palabra clave <code>LIKE</code> se usa para comparar cadenas, y ofrece la característica de que se puedan 
                    usar patrones que contienen comodines. Por ejemplo, en el fragmento de código de arriba, hay un signo de 
                    porcentaje (<code>%</code>) al final de &#39;Washington&#39;, lo que significa que cualquier valor que 
                    contenga la cadena &#39;Washington&#39; más cero o más caracteres adicionales satisfará este criterio de 
                    selección. Así &#39;Washington&#39; o &#39;Washingtonian&#39; coincidiría, pero &#39;Washing&#39; no. El otro 
                    comodín usado en las cláusulas <code>LIKE</code> es un subrayado (<code>_</code>), que representa cualquier 
                    carácter. Por ejemplo, 
                </p>
                <div class="codeblock">
                    <pre>
WHERE Last_Name LIKE 'Ba_man'
                    </pre>
                </div>
                <p>
                    coincidiría con &#39;Batman&#39;, &#39;Barman&#39;, &#39;Badman&#39;, &#39;Balman&#39;, &#39;Bagman&#39;,
                    &#39;Bamman&#39;, y así sucesivamente.
                </p>
                <p>
                    El fragmento de código de abajo tiene una cláusula <code>WHERE</code> que usa el signo igual (=) para comparar 
                    números. Selecciona el nombre y apellidos del empleado que tiene asignado el coche 12.
                </p>
                <div class="codeblock">
                    <pre>
SELECT First_Name, Last_Name
FROM Employees
WHERE Car_Number = 12
                    </pre>
                </div>
                <p>
                    El siguiente fragmento de código selecciona el nombre y apellidos de los empleados cuyo número de empleado es 
                    mayor que 10005:
                </p>
                <div class="codeblock">
                    <pre>
SELECT First_Name, Last_Name
FROM Employees
WHERE Employee_Number &gt; 10005
                    </pre>
                </div>
                <p>
                    Las cláusulas <code>WHERE</code> pueden volverse bastante elaboradas, con múltiples condiciones y, en algunos 
                    DBMSs, condiciones anidadas. Esta introducción no cubre las cláusulas <code>WHERE</code> complicadas, pero el 
                    siguiente fragmento de código tiene una cláusula <code>WHERE</code> con dos condiciones; esta consulta 
                    selecciona el nombre y apellidos de los empleados cuyo número de empleado es menor de 10100 y que no tienen 
                    coche de empresa.
                </p>
                <div class="codeblock">
                    <pre>
SELECT First_Name, Last_Name
FROM Employees
WHERE Employee_Number &lt; 10100 and Car_Number IS NULL
                    </pre>
                </div>
                <p>
                    Un tipo especial de cláusula <code>WHERE</code> implica una combinación (join, en inglés), que se explica en la 
                    siguiente sección.
                </p>
                <p>
                    <a id="joins"></a>
                </p>
                <h3>
                    Combinaciones (Joins)
                </h3>
                <p>
                    Una característica distintiva de las bases de datos relacionales es que es posible obtener datos de más de una 
                    tabla en lo que se denomina combinación (o unión). Suponga que después de recuperar los nombres de los 
                    empleados que tienen coches de empresa, uno quería saber quién tiene qué automóvil, incluida la marca, el 
                    modelo y el año del automóvil. Esta información se almacena en otro tabla, <code>Cars</code>:
                </p>
                <p>
                    <a id="cars"></a>
                </p>
                <p class="centrado">
                    Tabla <code>Cars</code>
                </p>
                <table class="celda">
                    <caption>tabla Cars</caption>
                    <tr>
                        <th id="h201" class="celda"><code>Car_Number</code></th>
                        <th id="h202" class="celda"><code>Make</code></th>
                        <th id="h203" class="celda"><code>Model</code></th>
                        <th id="h204" class="celda"><code>Year</code></th>
                    </tr>
                    <tr>
                        <td headers="h201" class="celda">5</td>
                        <td headers="h202" class="celda">Honda</td>
                        <td headers="h203" class="celda">Civic DX</td>
                        <td headers="h204" class="celda">1996</td>
                    </tr>
                    <tr>
                        <td headers="h201" class="celda">12</td>
                        <td headers="h202" class="celda">Toyota</td>
                        <td headers="h203" class="celda">Corolla</td>
                        <td headers="h204" class="celda">1999</td>
                    </tr>
                </table>
                <p>
                    Debe haber una columna que aparezca en ambas tablas para relacionarlas entre sí. Esta columna, la cual debe 
                    ser la clave primari en una tabla, se llama la clave externa (o foránea) en la otra tabla. En este caso, la 
                    columna que aparece en las dos tablas es <code>Car_Number</code>, la cual es la clave primaria para la tabla 
                    <code>Cars</code> y la clave externa en la tabla Employees. Si el Honda Civic de 1996 fue destruído y eliminado 
                    de la tabla <code>Cars</code>, entonces el <code>Car_Number</code> 5 también debería ser eliminado de la tabla 
                    Employees para mantener lo que se llama integridad referencial. De otra forma, la columna de la clave externa 
                    (<code>Car_Number</code>) en la tabla <code>Employees</code> debería contener una entrada que no se refiera a 
                    nada en <code>Cars</code>. Una clave externa debe o ser nula o igual a un valor de una clave primaria existente 
                    de la tabla a la cual referencia. Esto es diferente desde una clave primaria, la cual no puede ser nula. Hay 
                    varios valores nulos en la columna <code>Car_Number</code> en la tabla <code>Employees</code> porque es posible 
                    para un empleado que no tenga coche de empresa.
                </p>
                <p>
                    El código siguiente pide el nombre y apellidos de los empleados que tengan coches de emprea y la marca, modelo, 
                    y año de esos coches. Dese cuenta de que la cláusula <code>FROM</code> lista tanto a Employees como Cars porque 
                    los datos requeridos están contenidos en ambas tablas. Usar el nombre de la tabla y un punto (.) antes del 
                    nombre de la columna indica qué tabla contiene la columna.
                </p>
                <div class="codeblock">
                    <pre>
SELECT Employees.First_Name, Employees.Last_Name,
    Cars.Make, Cars.Model, Cars.Year
FROM Employees, Cars
WHERE Employees.Car_Number = Cars.Car_Number
                    </pre>
                </div>
                <p>
                    Esto devuelve un conjunto de resultados que se verá similar a lo siguiente:
                </p>
                <table class="celda">
                    <caption>
                        Conjunto de resultados del nombre y apellidos de empleados que tienen coches de empresa con la marca, 
                        modelo y años de esos coches
                    </caption>
                    <tr>
                        <th id="h301" class="celda"><code>FIRST_NAME</code></th>
                        <th id="h302" class="celda"><code>LAST_NAME</code></th>
                        <th id="h303" class="celda"><code>MAKE</code></th>
                        <th id="h304" class="celda"><code>MODEL</code></th>
                        <th id="h305" class="celda"><code>YEAR</code></th>
                    </tr>
                    <tr>
                        <td headers="h301" class="celda">Axel</td>
                        <td headers="h302" class="celda">Washington</td>
                        <td headers="h303" class="celda">Honda</td>
                        <td headers="h304" class="celda">Civic DX</td>
                        <td headers="h305" class="celda">1996</td>
                    </tr>
                    <tr>
                        <td headers="h301" class="celda">Florence</td>
                        <td headers="h302" class="celda">Wojokowski</td>
                        <td headers="h303" class="celda">Toyota</td>
                        <td headers="h304" class="celda">Corolla</td>
                        <td headers="h305" class="celda">1999</td>
                    </tr>
                </table>
                <p>
                    <a id="commands"></a>
                </p>
                <h3>
                    Comandos SQL comunes
                </h3>
                <p>
                    Los comandos SQL se dividen en categorías, siendo las dos principales los comandos del Lenguaje de Manipulación 
                    de Datos (DML, en inglés) y los comandos del Lenguaje de Definición de Datos (DDL, en inglés). Los comandos DML 
                    tratan con datos, ya sea recuperándolos o modificándolos para mantenerlos actualizados. Los comandos DDL crean 
                    o cambian tablas y otros objetos de la base de datos tales como vistas e índices.
                </p>
                <p>
                    A continuación, se muestra una lista de los comandos DML más comunes:
                </p>
                <ul>
                    <li>
                        <p>
                            <code>SELECT&nbsp;&mdash;&nbsp;</code> usado para consultar y visualizar datos de una base de datos. 
                            La sentencia <code>SELECT</code> especifica qué columnas incluir en el conjunto de resultados. La gran 
                            mayoría de los comandos SQL usados en las aplicaciones son sentencias <code>SELECT</code>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>INSERT&nbsp;&mdash;&nbsp;</code> agrega nuevas filas a una tabla. <code>INSERT</code> se usa 
                            para completar una tabla recién creada o agregar una nueva fila (o filas) a una tabla ya existente.
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>DELETE&nbsp;&mdash;&nbsp;</code> elimina una fila o conjunto de filas de una tabla
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>UPDATE&nbsp;&mdash;&nbsp;</code> cambia un valor existente en una columna o grupo de columnas de 
                            una tabla
                        </p>
                    </li>
                </ul>
                <p>
                    Los comandos DDL más comunes son los siguientes:
                </p>
                <ul>
                    <li>
                        <p>
                            <code>CREATE TABLE&nbsp;&mdash;&nbsp;</code> crea una tabla con los nombres de columna que el usuario 
                            proporiciona. El usuario también necesita especificar un tipo para los datos en cada columna. Los tipos 
                            de datos varían de un RDBMS a otro, así que un usuario podría necesitar el uso de metadatos para 
                            establecer los tipos de datos usados por una base de datos en particular. <code>CREATE TABLE</code> se 
                            usa normalmente menos a menudo que los comandos de manipulación de datos porque una tabla se crea una 
                            sola vez, mientras que la agregación o borrado de filas o el cambio de valores individuales ocurre 
                            generalmente más frecuentemente.
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>DROP TABLE&nbsp;&mdash;&nbsp;</code> borra todas las filas y elimina la definición de la tabla 
                            de la base de datos. Una implementación de la IPA de JDBC se requiere para admitir el comando 
                            <code>DROP TABLE</code> como se especifica en el estándar SQL92, Nivel Transicional. Sin embargo, el 
                            soporte para las opciones <code>CASCADE</code> y <code>RESTRICT</code> de <code>DROP TABLE</code> es 
                            opcional. Además, el comportamiento de <code>DROP TABLE</code> se encuentra definido por la 
                            implementación cuando existen vistas o restricciones de integridad definidas que referencia a la tabla 
                            que se va a descartar.
                        </p>
                    </li>
                    <li>
                        <p>
                            <code>ALTER TABLE&nbsp;&mdash;&nbsp;</code> agrega o elimina una columna de una tabla. También 
                            agrega o descarta restricciones de tabla y altera los atributos de columna
                        </p>
                    </li>
                </ul>
                <p>
                    <a id="result"></a>
                </p>
                <h3>
                    Conjuntos de Resultados y Cursores
                </h3>
                <p>
                    Las filas que satisfacen las condiciones de una consulta se llaman conjunto de resultados. El número de filas 
                    devueltas en un conjunto de resultados puede ser cero, uno, o muchos. Un usuario puede acceder a los datos en 
                    un conjunto de resultados una fila a la vez, y un cursor proporciona los medios para hacerlo. Se puede pensar 
                    en un cursor como un puntero en un archivo que contiene las filas del conjunto de resultados, y ese puntero 
                    tiene la capacidad de realizar un seguimiento de la fila a la que se accede actualmente. Un cursor permite a 
                    un usuario procesar cada fila de un conjunto de resultados de arriba a abajo y, en consecuencia, puede usarse 
                    para el procesamiento iterativo. La mayoría de los DBMSs crean un cursor automáticamente cuando se genera un 
                    conjunto de resultados.
                </p>
                <p>
                    Las versions del IPA de JDBC anteriores agregaron nuevas capacidades al cursor de un conjunto de resultados, 
                    permitiendo que se moviera hacia adelante y hacia atrás y también permitiéndole moverse a una fila especificada 
                    o a una fila cuya posición es relativa a otra fila.
                </p>
                <p>
                    <a id="transactions"></a>
                </p>
                <h3>
                    Transacciones
                </h3>
                <p>
                    Cuando un usuario está accediendo a los datos en una base de datos, otro usuario puede estar accediendo a los 
                    mismos datos al mismo tiempo. Si, por ejemplo, el primer usuario está actualizando algunas columnas en una 
                    tabla al mismo tiempo que el segundo usuario está seleccionando columnas de la misma tabla, es posible que el 
                    segundo usuario obtenga datos parcialmente viejos y datos actualizados parcialemnte. Por esta razón, las DBMSs 
                    usan transacciones para mantener los datos en un estado consistente (consistencia de datos) mientras permiten 
                    que más de un usuario acceda a la base de datos al mismo tiempo (concurrencia de datos).
                </p>
                <p>
                    Una transacción es un conjunto de una o más sentencias SQL que hacen una unidad lógica de trabajo. Una 
                    transacción termina con una confirmación (commit, en inglés) o una reversión (rollback, en inglés), dependiendo 
                    de si hay algún problema con la consistencia de datos o la concurrencia de datos. La sentencia de confirmación 
                    hace permanentes los cambios resultantes de las sentencias SQL en la transacción, y la sentencia de reversión 
                    deshace todos los cambios resultantes de las sentencias SQL en la transacción.
                </p>
                <p>
                    Un bloqueo (lock, en inglés) es un mecanismo que prohibe a dos transacciones de manipular los mismos datos al 
                    mismo tiempo. Por ejemplo, un bloque de tabla previene que una tabla sea borrada si hay una transacción sin 
                    confirmar sobre esa tabla. En algunas DBMSs, un bloqueo de tabla también bloquea todas las filas en la tabla. 
                    Un bloque de fila previene que dos transacciones modifiquen la misma tabla, o previene a una transacción de 
                    seleccionar una fila mientras otra transacción está aún modificándola.
                </p>
                <p>
                    <a id="stored"></a>
                </p>
                <h3>
                    Procedimientos Almacenados
                </h3>
                <p>
                    Un procedimiento almacenado es un grupo de sentencias SQL que pueden ser llamadas por un nombre. En otras 
                    palabras, es código ejecutable, un miniprograma, que realiza una tarea particular que puede ser invocada de la 
                    misma forma que uno puede llamar a una función o método. Tradicionalmente, los procedimientos almacenados han 
                    sido escritos en un lenguaje de programación específico del DBMS. La última generación de productos de bases de 
                    datos permiten que los procedimientos almacenados sean escritos usando el lenguaje de programación Java y la 
                    IPA del JDBC. Los procedimientos almacenados escritos en el lenguaje de programación Java son bytecodes 
                    portables entre DBMSs. Una vez se escribe un procedimiento almacenado, puede usarse y reutilizarse porque un
                    DBMS que soporta procedimientos almacenados lo almacenará, como su nombre implica, en la base de datos.
                </p>
                <p>
                    El código siguiente es un ejemplo de cómo crear un procedimiento almacenado muy simple usando el lenguaje de 
                    programación Java. Dese cuenta de que el procedimiento almacenado es simplemente un método de Java estático que 
                    contiene código normal de JDBC. Acepta dos parámetros de entrada y los usa para cambiar el número de coche de 
                    un empleado.
                </p>
                <p>
                    No se preocupe si no entiende el ejemplo en este punto. El ejemplo de código de abajo se presenta sólo para 
                    ilustrar cómo se ve un procedimiento almacenado. Aprenderá cómo escribir el código en este ejemplo en los 
                    tutoriales que siguen.
                </p>
                <div class="codeblock">
                    <pre>
import java.sql.*;

public class UpdateCar {

    public static void UpdateCarNum(int carNo, int empNo)
        throws SQLException {

        Connection con = null;
        PreparedStatement pstmt = null;   
      
        try {
            con = DriverManager.getConnection(
                      "jdbc:default:connection");

            pstmt = con.prepareStatement(
                        "UPDATE EMPLOYEES " +
                        "SET CAR_NUMBER = ? " +
                        "WHERE EMPLOYEE_NUMBER = ?");

            pstmt.setInt(1, carNo);
            pstmt.setInt(2, empNo);
            pstmt.executeUpdate();
        }
        finally {
            if (pstmt != null) pstmt.close();
        }
    }
}
                    </pre>
                </div>
                <p>
                    <a id="metadata"></a>
                </p>
                <h3>
                    Metadatos
                </h3>
                <p>
                    Las bases de datos almacenan datos del usuario, y también almacenan información sobre la base de datos en sí 
                    misma. La mayoría de los DBMSs tienen un conjunto de tablas del sistema, las cuales listan las tablas en la 
                    base de datos, los nombres de columna en cada tabla, las claves primarias, las claves externas, los 
                    procedimientos almacenados, etcetera. Cada DBMS tiene sus propias funciones para obtener información sobre los 
                    diseños de tabla y capacidades de la base de datos. JDBC proporciona la interfaz <code>DatabaseMetaData</code>, 
                    en la cual un escritor del controlador debe implementarla de forma que sus métodos devuelvan información sobre 
                    el controlador y/o el DBMS para el cual se escribió el controlador. Por ejemplo, un gran número de métodos 
                    devuelven si el controlador admite una funcionalidad en particular. Esta interfaz le da a los usuario y 
                    herramientas una forma estandarizada de obtener los metadatos.
                </p>
                <p>
                    En general, los desarrolladores que escriben herramientas y controladores son los que más se preocupan
                    por los metadatos.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="../index.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="architecture.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Tabla de Contenidos<br />
            <b>Página siguiente:</b> Arquitectura JDBC
        </div>
    </body>
</html> 
