<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Utilizando Objetos FilteredRowSet (Los Tutoriales de Java&trade; &gt; Acceso a Bases de Datos JDBC(TM) &gt; 
            Lo Básico de JDBC)
        </title>
        <meta name="description" content="Este tutorial de Java JDBC describe cómo usar la IPA JDBC para crear, insertar, 
              actualizar y consultar tablas. También aprenderá cómo usar declaraciones simples y preparadas, procedimientos 
              almacenados y realizar transacciones" />
        <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Lo Básico de JDBC</a></div>
                <div class="linkAHEAD"><a href="gettingstarted.html">Empezando</a></div>
                <div class="linkAHEAD"><a href="processingsqlstatements.html">Procesando Sentencias SQL con JDBC</a></div>
                <div class="linkAHEAD"><a href="connecting.html">Estableciendo una Conexión</a></div>
                <div class="linkAHEAD"><a href="sqldatasources.html">Conectando con Objetos DataSource</a></div>
                <div class="linkAHEAD"><a href="sqlexception.html">Manejando SQLExceptions</a></div>
                <div class="linkAHEAD"><a href="tables.html">Configurando Tablas</a></div>
                <div class="linkAHEAD"><a href="retrieving.html">Recuperando y Modificando Valores de los Result Sets</a></div>
                <div class="linkAHEAD"><a href="prepared.html">Usando Prepared Statements</a></div>
                <div class="linkAHEAD"><a href="transactions.html">Usando Transacciones</a></div>
                <div class="linkAHEAD"><a href="rowset.html">Usando Objetos RowSet</a></div>
                <div class="linkAHEAD"><a href="jdbcrowset.html">Utilizando Objetos JdbcRowSet</a></div>
                <div class="linkAHEAD"><a href="cachedrowset.html">Utilizando CachedRowSetObjects</a></div>
                <div class="linkAHEAD"><a href="joinrowset.html">Utilizando Objetos JoinRowSet</a></div>
                <div class="nolinkAHEAD">Utilizando Objetos FilteredRowSet</div>
                <div class="linkAHEAD"><a href="webrowset.html">Utilizando Objetos WebRowSet</a></div>
                <div class="linkAHEAD"><a href="sqltypes.html">Usando Tipos de Datos Avanzados</a></div>
                <div class="linkAHEAD"><a href="blob.html">Utilizando Objetos Grandes</a></div>
                <div class="linkAHEAD"><a href="sqlxml.html">Utilizando Objetos SQLXML</a></div>
                <div class="linkAHEAD"><a href="array.html">Utilizando Objetos Array</a></div>
                <div class="linkAHEAD"><a href="distinct.html">Usando el Tipo de Datos DISTINCT</a></div>
                <div class="linkAHEAD"><a href="sqlstructured.html">Utilizando Objetos Estructurados</a></div>
                <div class="linkAHEAD"><a href="sqlcustommapping.html">Usando Mapeados de Tipos Personalizados</a></div>
                <div class="linkAHEAD"><a href="sqldatalink.html">Utilizando Objetos Datalink</a></div>
                <div class="linkAHEAD"><a href="sqlrowid.html">Utilizando Objetos RowId</a></div>
                <div class="linkAHEAD"><a href="storedprocedures.html">Usando Procedimientos Almacenados</a></div>
                <div class="linkAHEAD"><a href="jdbcswing.html">Usando JDBC con una IPA de IGU</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Acceso a Bases de Datos JDBC(TM)<br />
                <b>Lección:</b> Lo Básico de JDBC
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Acceso a Bases de Datos JDBC(TM)</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Lo Básico de JDBC</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="joinrowset.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="webrowset.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Utilizando Objetos FilteredRowSet</h1>
            </div>
            <div id="PageContent">
                <p>
                    Un objeto <code>FilteredRowSet</code> le permite reducir el número de filas que son visibles en un objeto 
                    <code>RowSet</code> para que pueda trabajar sólo con los datos que son relevantes para lo que está haciendo.
                    Usted decide qué límites quiere establecer en sus datos (cómo quiere &quot;filtrar&quot; los datos) y aplicar 
                    ese filtro a un objeto <code>FilteredRowSet</code>. En otras palabras, el objeto <code>FilteredRowSet</code> 
                    hace visibles sólo las filas de datos que se ajustan a los límites establecidos. Un objeto 
                    <code>JdbcRowSet</code>, el cual siempre tiene una conexión a su fuente de datos, puede hacer este filtrado con 
                    una consulta a la fuente de datos que selecciona sólo las columnas y filas que quiere ver. La cláusula 
                    <code>WHERE</code> de la consulta define el criterio de filtrado. Un objeto <code>FilteredRowSet</code> 
                    proporciona una forma de hacer este filtrado para un objeto <code>RowSet</code> desconectado sin tener que 
                    ejecutar una consulta a la fuente de datos, evitando así tener que establecer una conexión a la fuente de datos 
                    y enviarle consultas.
                </p>
                <p>
                    Por ejemplo, asuma que la cadena de cafeterías Coffe Break ha crecido hasta tener cientos de tiendas en los 
                    Estados Unidos de América, y todas ellas están listas en una tabla llamada <code>COFFEE_HOUSES</code>. El 
                    propietario quiere medir el éxito de las tiendas sólo en California con una aplicación de comparación de 
                    cafeterías que no requiere una conexión persistente al sistema de base de datos. Esta comparación considerará 
                    la rentabilidad de vender mercancías versus vender bebidas de café mas otras medidas de éxito, y clasificará 
                    las tiendas de California por ventas de bebidas de café, ventas de mercancía y ventas totales. Debido a que la 
                    tabla <code>COFFEE_HOUSES</code> tiene cientos de filas, estas comparaciones serán más rápidas y fáciles si la 
                    cantidad de datos que se buscan se reducen a sólo aquellas filas donde el valor en la columna 
                    <code>STORE_ID</code> indica California.
                </p>
                <p>
                    Esta es exactamente la clase de problema que el objeto <code>FilteredRowSet</code> soluciona proporcionando las 
                    siguientes capacidades:
                </p>
                <ul>
                    <li>
                        Habilidad de limitar las filas que son visibles de acuerdo al criterio fijado
                    </li>
                    <li>
                        Habilidad de seleccionar qué datos son visibles sin estar conectados a una fuente de datos
                    </li>
                </ul>
                <p>
                    Los siguientes temas están cubiertos:
                </p>
                <ul>
                    <li>
                        <a href="#defining-filtering-criteria-in-predicate-object">
                            Definición de Criterios de Filtrado en Objetos Predicado</a>
                    </li>
                    <li>
                        <a href="#creating-filteredrowset-object">Crear Objetos FilteredRowSet</a>
                    </li>
                    <li>
                        <a href="#creating-and-setting-predicate-object">Crear y Configurar Objetos Predicado</a>
                    </li>
                    <li>
                        <a href="#filter-data-further">
                            Configuración de Objetos FilteredRowSet con Nuevos Objetos Predicado para Filtrar Más Datos</a>
                    </li>
                    <li>
                        <a href="#updating-filteredrowset-object">Actualizar Objetos FilteredRowSet</a>
                    </li>
                    <li>
                        <a href="#inserting-or-updating-row">Insertar o Actualizar Filas</a>
                    </li>
                    <li>
                        <a href="#removing-all-filters">Eliminar Todos los Filtros para que Todas las Filas Sean Visibles</a>
                    </li>
                    <li>
                        <a href="#deleting-row">Borrar Filas</a>
                    </li>
                </ul>
                <h2>
                    <a id="defining-filtering-criteria-in-predicate-object">
                        Definición de Criterios de Filtrado en Objetos Predicado</a>
                </h2>
                <p>
                    Para establecer el criterio por el cual las filas en un objeto <code>FilteredRowSet</code> serán visibles, 
                    define una clase que implementa la interfaz <code>Predicate</code>. Un objeto creado con esta clase se 
                    inicializa con lo siguiente:
                </p>
                <ul>
                    <li>
                        El extremo superior del rango dentro del cual deben caer los valores
                    </li>
                    <li>
                        El extremo inferior del rango dentro del cual deben caer los valores
                    </li>
                    <li>
                        El nombre de la columna o el número de columna de la columna con el valor que debe estar dentro del rango 
                        de valores establecido por los límites alto y bajo.
                    </li>
                </ul>
                <p>
                    Tenga en cuenta que el rango de valores es inclusivo, lo que significa que un valor en el límite es incluído en 
                    el rango. Por ejemplo, si el rango tiene un máximo de 10 y un mínimo de 50, se considera que un valor de 50 
                    está dentro del rango. Un valor de 49 no lo está. Asimismo, 100 está dentro del rango, pero 101 no lo está.
                </p>
                <p>
                    En línea con el escenario donde el propietario quiere comparar las tiendas en California, una implementación de 
                    la interfaz <code>Predicate</code> que filtre las cafeterías de Coffee Break ubicadas en California debe ser 
                    escrito. No hay una única forma correcta de hacer esto, lo que significa que hay mucha libertad en la forma que 
                    se escribe la implementación. Por ejemplo, podría nombrar la clase y sus miembros como desee e implementar un 
                    constructor y los tres métodos de evaluación de cualquier manera que logre los resultados deseados.
                </p>
                <p>
                    La tabla que lista todas las cafeterías, llamada <code>COFFEE_HOUSES</code>, tiene cientos de filas. Para hacer 
                    las cosas más manejables, este ejemplo usar una tabla con muchas menos filas, lo cual es suficiente para 
                    demostrar cómo se hace el filtrado.
                </p>
                <p>
                    Un valor en la columna <code>STORE_ID</code> es un valor <code>int</code> que indica, entre otras cosas, el 
                    estado en el que la cafetería está ubicada. Un valor que empieza con 10, por ejemplo, significa que el estado 
                    es California. Los valores de <code>STORE_ID</code> que empiezan con 32 indican Oregón, y aquellos que empiezan 
                    con 33 indican el estado de Washington.
                </p>
                <p>
                    La clase siguiente <a href="gettingstarted.html"><code>StateFilter</code></a> implementa la interfaz 
                    <code>Predicate</code>:
                </p>
                <div class="codeblock">
                    <pre>
public class StateFilter implements Predicate {

    private int lo;
    private int hi;
    private String colName = null;
    private int colNumber = -1;

    public StateFilter(int lo, int hi, int colNumber) {
        this.lo = lo;
        this.hi = hi;
        this.colNumber = colNumber;
    }

    public StateFilter(int lo, int hi, String colName) {
        this.lo = lo;
        this.hi = hi;
        this.colName = colName;
    }

    public boolean evaluate(Object value, String columnName) {
        boolean evaluation = true;
        if (columnName.equalsIgnoreCase(this.colName)) {
            int columnValue = ((Integer)value).intValue();
            if ((columnValue >= this.lo)
                &amp;&amp;
                (columnValue &lt;= this.hi)) {
                evaluation = true;
            } else {
                evaluation = false;
            }
        }
        return evaluation;
    }

    public boolean evaluate(Object value, int columnNumber) {

        boolean evaluation = true;

        if (this.colNumber == columnNumber) {
            int columnValue = ((Integer)value).intValue();
            if ((columnValue >= this.lo)
                &amp;&amp;
                (columnValue &lt;= this.hi)) {
                evaluation = true;
            } else {
                evaluation = false;
            }
        }
        return evaluation;
    }


    public boolean evaluate(RowSet rs) {
    
        CachedRowSet frs = (CachedRowSet)rs;
        boolean evaluation = false;

        try {
            int columnValue = -1;

            if (this.colNumber > 0) {
                columnValue = frs.getInt(this.colNumber);
            } else if (this.colName != null) {
                columnValue = frs.getInt(this.colName);
            } else {
                return false;
            }

            if ((columnValue >= this.lo)
                &amp;&amp;
                (columnValue &lt;= this.hi)) {
                evaluation = true;
            }
        } catch (SQLException e) {
            JDBCTutorialUtilities.printSQLException(e);
            return false;
        } catch (NullPointerException npe) {
            System.err.println("NullPointerException caught");
            return false;
        }
        return evaluation;
    }
}
                    </pre>
                </div>
                <p>
                    Esta es una muy simple implementación que comprueba el valor en la columna especificada por 
                    <code>colName</code> o <code>colNumber</code> para ver si está en el rango de <code>lo</code> a 
                    <code>hi</code>, inclusive. La siguiente línea de código, de 
                    <a href="gettingstarted.html"><code>FilteredRowSetSample</code></a>, crea un filtro que permite sólo las filas 
                    donde el valor de la columna <code>STORE_ID</code> indica un valor entre 10000 y 10999, lo cual indica una 
                    ubicación en California:
                </p>
                <div class="codeblock">
                    <pre>
StateFilter myStateFilter = new StateFilter(10000, 10999, 1);
                    </pre>
                </div>
                <p>
                    Tenga en cuenta que la clase <code>StateFilter</code> que acaba de definir se aplica a una columna. Es posible 
                    tener que aplicar a dos o más columnas haciendo que cada uno de los parámetros sea un vector en lugar de 
                    valores únicos. Por ejemplo, el constructor para un objeto <code>Filter</code> podría verse como el siguiente:
                </p>
                <div class="codeblock">
                    <pre>
public Filter2(Object [] lo, Object [] hi, Object [] colNumber) {
    this.lo = lo;
    this.hi = hi;
    this.colNumber = colNumber;
}
                    </pre>
                </div>
                <p>
                    El primer elemento en el objeto <code>colNumber</code> da la primera columna en la cual el valor será 
                    comprobado contra el primer elemento en <code>lo</code> y el primer elemento en <code>hi</code>. El valor en la 
                    segunda columna indicado por <code>colNumber</code> será comprobado contra los segundos elementos en 
                    <code>lo</code> y <code>hi</code>, etcétera. Por lo tanto, el número de elementos en los tres vectores debería 
                    ser el mismo. El siguiente código es lo que podría parecer una implementación del método 
                    <code>evaluate(RowSet rs)</code> para un objeto <code>Filter2</code>, en el que los parámetros son matrices:
                </p>
                <div class="codeblock">
                    <pre>
public boolean evaluate(RowSet rs) {
    CachedRowSet crs = (CachedRowSet)rs;
    boolean bool1;
    boolean bool2;
    for (int i = 0; i &lt; colNumber.length; i++) {

        if ((rs.getObject(colNumber[i] &gt;= lo [i]) &amp;&amp;
            (rs.getObject(colNumber[i] &lt;= hi[i]) {
            bool1 = true;
        } else {
            bool2 = true;
        }

        if (bool2) {
            return false;
        } else {
            return true;
        }
    }
}
                    </pre>
                </div>
                <p>
                    La ventaja de usar una implementación de <code>Filter2</code> es que puede usar parámetros de cualquier tipo 
                    <code>Object</code> y puede comprobar una columna o múltiples columnas sin tener que escribir otra 
                    implementación. Sin embargo, debe pasar un tipo <code>Object</code>, lo que significa que debe convertir un 
                    tipo primitivo a su tipo <code>Object</code>. Por ejemplo, si usa un valor <code>int</code> para 
                    <code>lo</code> y <code>hi</code>, debe convertir el valor <code>int</code> a un objeto <code>Integer</code> 
                    antes de pasárselo al constructor. Los objetos <code>String</code> ya son tipos de <code>Object</code>, por lo 
                    que no tiene que convertirlos.
                </p>
                <h2>
                    <a id="creating-filteredrowset-object">Crear Objetos FilteredRowSet</a>
                </h2>
                <p>
                    La implementación de referencia para la interfaz <code>FilteredRowSet</code>, <code>FilteredRowSetImpl</code>, 
                    incluye un constructor por defecto, el cual se usa en la siguiente línea de código para crar el objeto vacío 
                    <code>FilteredRowSet</code> <code>frs:</code>.
                </p>
                <div class="codeblock">
                    <pre>
FilteredRowSet frs = new FilteredRowSetImpl();
                    </pre>
                </div>
                <p>
                    La implementación extiende la clase abstracta <code>BaseRowSet</code>, así que el objeto <code>frs</code> tiene 
                    las propiedades predeterminadas definidas en <code>BaseRowSet</code>. Esto significa que <code>frs</code> es 
                    desplazable, actualizable, no muestra filas borradas, tiene el procesamiento de escape activado, etcétera. 
                    También, porque la interfaz <code>FilteredRowSet</code> es una subinterfaz de <code>CachedRowSet</code>, 
                    <code>Joinable</code>, y <code>WebRowSet</code>, el objeto <code>frs</code> tiene las capacidades de cada uno. 
                    Puede operar como un objeto <code>RowSet</code> desconectado, pueder ser parte de un objeto 
                    <code>JoinRowSet</code>, y puede leer y escribirse a sí mismo en formato XML.
                </p>
                <p>
                    <strong>Nota</strong>: Alternativamente, puede usar el constructor de la implementación de 
                    <code>WebRowSet</code> de su controlador JDBC. Sin embarig, las implementaciones de la interfaz de 
                    <code>RowSet</code> diferirán de la implementación de referencia. Estas implementaciones tienen nombres y 
                    constructores diferentes. Por ejemplo, la implementación de la interfaz <code>WebRowSet</code> del controlador 
                    JDBC de Oracle se llama <code>oracle.jdbc.rowset.OracleWebRowSet</code>.
                </p>
                <p>
                    Puede usar una instancia de <code>RowSetFactory</code>, la cual se crea desde la clase 
                    <code>RowSetProvider</code>, para crear un objeto <code>FilteredRowSet</code>. Vea 
                    <a href="jdbcrowset.html#rowsetfactory">Usar la Interfaz RowSetFactory</a> en 
                    <a href="jdbcrowset.html">Utilizando Objetos JdbcRowSet</a> para más información.
                </p>
                <p>
                    Como otros objetos <code>RowSet</code> desconectados, el objeto <code>frs</code> debe llenarse a sí mismo con 
                    datos de una fuente de datos tabular, la cual es una base de datos relacional en la implementación de 
                    referencia. El fragmento de código siguiente de 
                    <a href="gettingstarted.html"><code>FilteredRowSetSample</code></a> establece las propiedades necesarias para 
                    conectar a la base de datos y ejecutar su comando. Tenga en cuenta que este código usa la clase 
                    <code>DriverManager</code> para hacer una conexión, lo cual se hace por conveniencia. Usualmente, es mejor usar 
                    un objeto <code>DataSource</code> que ha sido registrado con un servicio de nombres que implementa la Interfaz 
                    de Nombres y Directorio de Java (JNDI):
                </p>
                <div class="codeblock">
                    <pre>
frs.setCommand("SELECT * FROM COFFEE_HOUSES");
frs.setUsername(settings.userName);
frs.setPassword(settings.password);
frs.setUrl(settings.urlString);
                    </pre>
                </div>
                <p>
                    La línea de código siguiente rellenar el objeto <code>frs</code> con los datos almacenados en la tabla 
                    <code>COFFEE_HOUSE</code>:
                </p>
                <div class="codeblock">
                    <pre>
frs.execute();
                    </pre>
                </div>
                <p>
                    El método <code>execute</code> hace toda clase de cosas en segundo plano llamando al objeto 
                    <code>RowSetReader</code> para <code>frs</code>, el cual crea una conexión, ejecuta el comando para 
                    <code>frs</code>, llena <code>frs</code> con los datos del objeto <code>ResultSet</code> que se produce, y 
                    cierra la conexión. Dese cuenta de que si la tabla <code>COFFEE_HOUSES</code> tuviese más filas de las que el 
                    objeto <code>frs</code> podría mantener en memoria a la vez, se habrían de usar los métodos de paginado de 
                    <code>CachedRowSet</code>.
                    
                </p>
                <p>
                    En el escenario, el propietario de Coffee Break habría hecho las tareas precedentes en la oficina y después 
                    importado o descargado la información almacenada en el objeto <code>frs</code> para la aplicación de 
                    comparación de cafeterías. A partir de ahora, el objeto <code>frs</code> funcionará de forma independiente 
                    sin el beneficio de una conexión a la fuente de datos.
                </p>
                <h2>
                    <a id="creating-and-setting-predicate-object">Crear y Configurar Objetos Predicado</a>
                </h2>
                <p>
                    Ahora que el objeto <code>FilteredRowSet</code> <code>frs</code> contiene la lista de establecimientos de 
                    Coffee Break, puede establecer el criterio de selección para reducir el número de filas en el objeto 
                    <code>frs</code> que son visibles.
                </p>
                <p>
                    La siguiente línea de código usa la clase <code>StateFilter</code> definida previante para crear el objeto 
                    <code>myStateFilter</code>, el cual comprueba la columna <code>STORE_ID</code> para determinar que tiendas 
                    están en California (una tienda está en California si su número ID está entre 10000 y 10999, inclusive):
                </p>
                <div class="codeblock">
                    <pre>
StateFilter myStateFilter = new StateFilter(10000, 10999, 1);
                    </pre>
                </div>
                <p>
                    La línea siguiente establece <code>myStateFilter</code> como el filtro para <code>frs</code>.
                </p>
                <div class="codeblock">
                    <pre>
frs.setFilter(myStateFilter);
                    </pre>
                </div>
                <p>
                    Para hacer el filtrado real, llame al método <code>next</code>, que en la implementación de referencia llama a 
                    la versión apropiada del método <code>Predicate.evaluate</code> que ha implementado previamente.
                </p>
                <p>
                    Si el valor devuelto es <code>true</code>, la fila será visible; si el valor devuelto es <code>false</code>, 
                    la fila no será visible.
                </p>
                <h2>
                    <a id="filter-data-further">
                        Configuración de Objetos FilteredRowSet con Nuevos Objetos Predicado para Filtrar Más Datos</a>
                </h2>
                <p>
                    Puede establecer múltiples filtros en serie. La primera vez que llama al método <code>setFilter</code> y se lo 
                    pasa al objeto <code>Predicate</code>, ha aplicado el criterio de filtrado en ese filtro. Después de llamar al 
                    método <code>next</code> en cada fila, el cual hace visible sólo aquellas filas que satisfagan el filtro, puede 
                    llamar a <code>setFilter</code> de nuevo, pasándoselo a un objeto <code>Predicate</code> diferente. Aunque solo 
                    se establece un filtro a la vez, el efecto es que ambos filtros se aplican de forma acumulativa.
                </p>
                <p>
                    Por ejemplo, el propietario ha recuperado una lista de las tiendas de Coffee Break en California al establecer 
                    <code>stateFilter</code> como el objeto <code>Predicate</code> para <code>frs</code>. Ahora el propietario 
                    quiere comparar las tiendas en dos ciudades de California, San Francisco (SF en la tabla 
                    <code>COFFEE_HOUSES</code>) y Los Ángeles (LA en la tabla). La primera cosa a hacer es escribir una 
                    implementación de <code>Predicate</code> que filtre las tiendas en SF o LA:
                </p>
                <div class="codeblock">
                    <pre>
public class CityFilter implements Predicate {

    private String[] cities;
    private String colName = null;
    private int colNumber = -1;

    public CityFilter(String[] citiesArg, String colNameArg) {
        this.cities = citiesArg;
        this.colNumber = -1;
        this.colName = colNameArg;
    }

    public CityFilter(String[] citiesArg, int colNumberArg) {
        this.cities = citiesArg;
        this.colNumber = colNumberArg;
        this.colName = null;
    }

    public boolean evaluate Object valueArg, String colNameArg) {

        if (colNameArg.equalsIgnoreCase(this.colName)) {
            for (int i = 0; i &lt; this.cities.length; i++) {
                if (this.cities[i].equalsIgnoreCase((String)valueArg)) {
                    return true;
                }
            }
        }
        return false;
    }

    public boolean evaluate(Object valueArg, int colNumberArg) {

        if (colNumberArg == this.colNumber) {
            for (int i = 0; i &lt; this.cities.length; i++) {
                if (this.cities[i].equalsIgnoreCase((String)valueArg)) {
                    return true;
                }
            }
        }
        return false;
    }


    public boolean evaluate(RowSet rs) {

        if (rs == null) return false;

        try {
            for (int i = 0; i &lt; this.cities.length; i++) {

                String cityName = null;

                if (this.colNumber &gt; 0) {
                    cityName = (String)rs.getObject(this.colNumber);
                } else if (this.colName != null) {
                    cityName = (String)rs.getObject(this.colName);
                } else {
                    return false;
                }

                if (cityName.equalsIgnoreCase(cities[i])) {
                    return true;
                }
            }
        } catch (SQLException e) {
            return false;
        }
        return false;
    }
}
                    </pre>
                </div>
                <p>
                    El fragemento de código siguiente de <a href="gettingstarted.html"><code>FilteredRowSetSample</code></a> 
                    establece el nuevo filtro y recorre las filas en <code>frs</code>, imprimiendo las filas donde la columna 
                    <code>CITY</code> contiene SF o LA. Tenga en cuenta que <code>frs</code> actualmente contiene sólo filas donde 
                    la tienda está en California, así que el criterio del objeto <code>Predicate</code> <code>state</code> está aún 
                    en efecto cuando el filtro se cambia a otro objeto <code>Predicate</code>. El código que sigue establece el 
                    flotro para el objeto <code>CityFilter</code> <code>city</code>. La implementación de <code>CityFilter</code> 
                    usa vectores como parámetros a los constructores para ilustrar cómo se puede hacer:
                </p>
                <div class="codeblock">
                    <pre>
public void testFilteredRowSet() {

    FilteredRowSet frs = null;
    StateFilter myStateFilter = new StateFilter(10000, 10999, 1);
    String[] cityArray = { "SF", "LA" };

    CityFilter myCityFilter = new CityFilter(cityArray, 2);

    try {
        frs = new FilteredRowSetImpl();

        frs.setCommand("SELECT * FROM COFFEE_HOUSES");
        frs.setUsername(settings.userName);
        frs.setPassword(settings.password);
        frs.setUrl(settings.urlString);
        frs.execute();

        System.out.println("\nBefore filter:");
        FilteredRowSetSample.viewTable(this.con);

        System.out.println("\nSetting state filter:");
        frs.beforeFirst();
        frs.setFilter(myStateFilter);
        this.viewFilteredRowSet(frs);

        System.out.println("\nSetting city filter:");
        frs.beforeFirst();
        frs.setFilter(myCityFilter);
        this.viewFilteredRowSet(frs);
    } catch (SQLException e) {
        JDBCTutorialUtilities.printSQLException(e);
    }
}
                    </pre>
                </div>
                <p>
                    La salida debería contener una fila por cada tienda que está en San Francisco, California o Los Ángeles, 
                    California. Si hubiera una fila en la cual la columna <code>CITY</code> contenía LA y la columna 
                    <code>STORE_ID</code> contenía 40003, no sería incluída en la lista porque ha sido ya filtrada cuando el 
                    filtro fue establecido a <code>state</code>. (40003 no está en el rango de 10000 a 10999).
                </p>
                <h2>
                    <a id="updating-filteredrowset-object">Actualizar Objetos FilteredRowSet</a>
                </h2>
                <p>
                    Puede hacer un cambio al objeto <code>FilteredRowSet</code> pero sólo si ese cambio no viola ninguno de los 
                    criterios de filtrado actualmente en efeecto. Por ejemplo, puede insertar una nueva fila o cambiar uno o más 
                    valores en una fila existente si el valor o valores nuevos cumplen el criterio de filtrado.
                </p>
                <h2>
                    <a id="inserting-or-updating-row">Insertar o Actualizar Filas</a>
                </h2>
                <p>
                    Asuma que dos nuevas cafeterías de Coffee Break acaban de abrir y el propietario quiere agregarlas a la lista 
                    de todas las cafeterías. Si una fila a ser insertada no cumple con los criterios de filtrado acumulados 
                    vigentes, se bloqueará la adición.
                </p>
                <p>
                    El estado actual del objeto <code>frs</code> es que el objeto <code>StateFilter</code> fue establecido y 
                    después el objeto <code>CityFilter</code> fue establecido. Como resultado, <code>frs</code> actualmente hace 
                    visible sólo aquellas filas que satisfagan el criterio de ambos filtros. Y, igualmente importante, no puede 
                    agregar una fila al objeto <code>frs</code> a menos de que satisfaga el criterio de ambos filtros. El fragmento 
                    de código siguiente intenta insertar dos nuevas filas en el objeto <code>frs</code>, una fila en la cual ambos
                    valores en las columnas <code>STORE_ID</code> y <code>CITY</code> coinciden con el criterio, y una fila en la 
                    cual el valor en <code>STORE_ID</code> no pasa el filtro pero el valor en la columna <code>CITY</code> sí lo 
                    pasa:
                </p>
                <div class="codeblock">
                    <pre>
frs.moveToInsertRow();
frs.updateInt("STORE_ID", 10101);
frs.updateString("CITY", "SF");
frs.updateLong("COF_SALES", 0);
frs.updateLong("MERCH_SALES", 0);
frs.updateLong("TOTAL_SALES", 0);
frs.insertRow();

frs.updateInt("STORE_ID", 33101);
frs.updateString("CITY", "SF");
frs.updateLong("COF_SALES", 0);
frs.updateLong("MERCH_SALES", 0);
frs.updateLong("TOTAL_SALES", 0);
frs.insertRow();
frs.moveToCurrentRow();
                    </pre>
                </div>
                <p>
                    Si fuera a recorrer el objeto <code>frs</code> usando el método <code>next</code>,  encontraría una fila para 
                    la nueva cafetería en San Franciso, California, pero no para la tienda en San Francisco, Washington.
                </p>
                <h2>
                    <a id="removing-all-filters">Eliminar Todos los Filtros para que Todas las Filas Sean Visibles</a>
                </h2>
                <p>
                    El propietario quiere agregar la tienda en Washington anulando el filtro. Sin juego de filtros, todas las filas 
                    en el objeto <code>frs</code> son una vez más visibles, y una tienda en cualquier ubicación puede ser agregada 
                    a la lista de tiendas. La siguiente línea de código desarma el filtro actual, anulando efectivamente ambas 
                    implementaciones de <code>Predicate</code> configuradas previamente en el objeto <code>frs</code>.
                </p>
                <div class="codeblock">
                    <pre>
frs.setFilter(null);
                    </pre>
                </div>
                <h2>
                    <a id="deleting-row">Borrar Filas</a>
                </h2>
                <p>
                    Si el propietario decide cerrar o vender una de las cafeterías de Coffee Break, el propietario querrá 
                    eliminarla de la tabla <code>COFFEE_HOUSES</code>. El propietario puede borrar la fila de la cafetería con 
                    bajo rendimiento siempre que la fila sea visible.
                </p>
                <p>
                    Por ejemplo, dado que el método <code>setFilter</code> acaba de ser llamado con el argumento nulo, no hay 
                    filtro establecido en el objeto <code>frs</code>. Esto significa que todas las filas son visibles y pueden 
                    por lo tanto ser eliminadas. Sin embargo, después de que el objeto <code>StateFilter</code> 
                    <code>myStateFilter</code> fue establecido, el cual filtró cualquier estado que no fuera California, sólo las 
                    tiendas ubicadas en California podrían ser eliminadas. Cuando el objeto <code>CityFilter</code> 
                    <code>myCityFilter</code> fue establecido para el objeto <code>frs</code>, sólo las tiendas en San Francisco, 
                    California o Los Ángeles, California, podrían ser eliminadas porque estaban en las únicas filas visibles.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="joinrowset.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="webrowset.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Utilizando Objetos JoinRowSet<br />
            <b>Página siguiente:</b> Utilizando Objetos WebRowSet
        </div>
    </body>
</html> 
