<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Utilizando Objetos Grandes (Los Tutoriales de Java&trade; &gt; Acceso a Bases de Datos JDBC(TM) &gt; Lo Básico de JDBC)
        </title>
        <meta name="description" content="Este tutorial de Java JDBC describe cómo usar la IPA JDBC para crear, insertar, 
              actualizar y consultar tablas. También aprenderá cómo usar declaraciones simples y preparadas, procedimientos 
              almacenados y realizar transacciones" />
        <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Lo Básico de JDBC</a></div>
                <div class="linkAHEAD"><a href="gettingstarted.html">Empezando</a></div>
                <div class="linkAHEAD"><a href="processingsqlstatements.html">Procesando Sentencias SQL con JDBC</a></div>
                <div class="linkAHEAD"><a href="connecting.html">Estableciendo una Conexión</a></div>
                <div class="linkAHEAD"><a href="sqldatasources.html">Conectando con Objetos DataSource</a></div>
                <div class="linkAHEAD"><a href="sqlexception.html">Manejando SQLExceptions</a></div>
                <div class="linkAHEAD"><a href="tables.html">Configurando Tablas</a></div>
                <div class="linkAHEAD"><a href="retrieving.html">Recuperando y Modificando Valores de los Result Sets</a></div>
                <div class="linkAHEAD"><a href="prepared.html">Usando Prepared Statements</a></div>
                <div class="linkAHEAD"><a href="transactions.html">Usando Transacciones</a></div>
                <div class="linkAHEAD"><a href="rowset.html">Usando Objetos RowSet</a></div>
                <div class="linkAHEAD"><a href="jdbcrowset.html">Utilizando Objetos JdbcRowSet</a></div>
                <div class="linkAHEAD"><a href="cachedrowset.html">Utilizando CachedRowSetObjects</a></div>
                <div class="linkAHEAD"><a href="joinrowset.html">Utilizando Objetos JoinRowSet</a></div>
                <div class="linkAHEAD"><a href="filteredrowset.html">Utilizando Objetos FilteredRowSet</a></div>
                <div class="linkAHEAD"><a href="webrowset.html">Utilizando Objetos WebRowSet</a></div>
                <div class="linkAHEAD"><a href="sqltypes.html">Usando Tipos de Datos Avanzados</a></div>
                <div class="nolinkAHEAD">Utilizando Objetos Grandes</div>
                <div class="linkAHEAD"><a href="sqlxml.html">Utilizando Objetos SQLXML</a></div>
                <div class="linkAHEAD"><a href="array.html">Utilizando Objetos Array</a></div>
                <div class="linkAHEAD"><a href="distinct.html">Usando el Tipo de Datos DISTINCT</a></div>
                <div class="linkAHEAD"><a href="sqlstructured.html">Utilizando Objetos Estructurados</a></div>
                <div class="linkAHEAD"><a href="sqlcustommapping.html">Usando Mapeados de Tipos Personalizados</a></div>
                <div class="linkAHEAD"><a href="sqldatalink.html">Utilizando Objetos Datalink</a></div>
                <div class="linkAHEAD"><a href="sqlrowid.html">Utilizando Objetos RowId</a></div>
                <div class="linkAHEAD"><a href="storedprocedures.html">Usando Procedimientos Almacenados</a></div>
                <div class="linkAHEAD"><a href="jdbcswing.html">Usando JDBC con una IPA de IGU</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Acceso a Bases de Datos JDBC(TM)<br />
                <b>Lección:</b> Lo Básico de JDBC
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Acceso a Bases de Datos JDBC(TM)</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Lo Básico de JDBC</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="sqltypes.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="sqlxml.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Utilizando Objetos Grandes</h1>
            </div>
            <div id="PageContent">
                <p>
                    Una característica importante de los objetos Java <code>Blob</code>, <code>Clob</code>, y <code>NClob</code> 
                    es que puede manipularlos sin tener que traer todos sus datos desde el servidor de la base de datos a su 
                    computadora cliente. Algunas implementaciones representan una instancia de estos tipos con un localizador 
                    (puntero lógico) al objeto en la base de datos que la instancia representa. Debido a que un objeto SQL 
                    <code>BLOB</code>, <code>CLOB</code>, o <code>NCLOB</code> puede ser muy grande, el uso de localizadores puede 
                    hacer que el rendimiento sea significativamente más rápido. Sin embargo, otras implementaciones materializan 
                    completamente objetos grandes en la computadora cliente.
                </p>
                <p>
                    Si quiere traer los datos de un valor SQL <code>BLOB</code>, <code>CLOB</code>, o <code>NCLOB</code> a la 
                    computadora cliente, use los métodos en las interfaces de Java de <code>Blob</code>, <code>Clob</code>, y 
                    <code>NClob</code> que se han proporcionado para este propósito. Estos objetos de tipo objeto grande 
                    materializan los datos de los objetos que representan como un flujo.
                </p>
                <p>
                    Los siguientes temas están cubiertos:
                </p>
                <ul>
                    <li>
                        <a href="#add_lob">Agregar Objetos de Tipo de Objeto Grande a Bases de Datos</a>
                    </li>
                    <li>
                        <a href="#retrieve_clob">Recuperar Valores CLOB</a>
                    </li>
                    <li>
                        <a href="#add_retrieve_blob">Agregar y Recuperar Objetos BLOB</a>
                    </li>
                    <li>
                        <a href="#release_large_objects">Liberación de Recursos en Poder de Objetos Grandes</a>
                    </li>
                </ul>
                <h2>
                    <a id="add_lob">Agregar Objetos de Tipo de Objeto Grande a Bases de Datos</a>
                </h2>
                <p>
                    El extracto siguiente de <code><a href="gettingstarted.html">ClobSample.addRowToCoffeeDescriptions</a></code> 
                    agrega un valor SQL <code>CLOB</code> a la tabla <code>COFFEE_DESCRIPTIONS</code>. El objeto de Java 
                    <code>Clob</code> <code>myClob</code> contiene los contenidos del fichero especificado por 
                    <code>fileName</code>.
                </p>
                <div class="codeblock">
                    <pre>
public void addRowToCoffeeDescriptions(
    String coffeeName, String fileName)
    throws SQLException {

    PreparedStatement pstmt = null;
    try {
        Clob myClob = this.con.createClob();
        Writer clobWriter = myClob.setCharacterStream(1);
        String str = this.readFile(fileName, clobWriter);
        System.out.println("Wrote the following: " +
            clobWriter.toString());

        if (this.settings.dbms.equals("mysql")) {
            System.out.println(
                "MySQL, setting String in Clob " +
                "object with setString method");
            myClob.setString(1, str);
        }
        System.out.println("Length of Clob: " + myClob.length());

        String sql = "INSERT INTO COFFEE_DESCRIPTIONS " +
                     "VALUES(?,?)";

        pstmt = this.con.prepareStatement(sql);
        pstmt.setString(1, coffeeName);
        pstmt.setClob(2, myClob);
        pstmt.executeUpdate();
    } catch (SQLException sqlex) {
        JDBCTutorialUtilities.printSQLException(sqlex);
    } catch (Exception ex) {
      System.out.println("Unexpected exception: " + ex.toString());
    } finally {
        if (pstmt != null)pstmt.close();
    }
}
                    </pre>
                </div>
                <p>
                    La línea siguiente crea un objeto <code>Clob</code> de Java:
                </p>
                <div class="codeblock">
                    <pre>
Clob myClob = this.con.createClob();
                    </pre>
                </div>
                <p>
                    La línea siguiente recupera un flujo (en este caso un objeto <code>Writer</code> llamado 
                    <code>clobWriter</code>) que se usa para escribir un flujo de caracteres al objeto de Java <code>Clob</code> 
                    <code>myClob</code>. El método <code>ClobSample.readFile</code> escribe este flujo de caracteres; el flujo es 
                    desde el fichero especificado por <code>fileName</code> de tipo <code>String</code>. El argumento 
                    <code>1</code> del método indica que el objeto <code>Writer</code> empezará a escribir el flujo de caracteres 
                    al principio del valor <code>Clob</code>:
                </p>
                <div class="codeblock">
                    <pre>
Writer clobWriter = myClob.setCharacterStream(1);
                    </pre>
                </div>
                <p>
                    El método <code>ClobSample.readFile</code> lee el fichero línea por línea especificado por el fichero 
                    <code>fileName</code> y lo escribe al objeto <code>Writer</code> especificado por <code>writerArg</code>:
                </p>
                <div class="codeblock">
                    <pre>
private String readFile(String fileName, Writer writerArg)
        throws FileNotFoundException, IOException {

    BufferedReader br = new BufferedReader(new FileReader(fileName));
    String nextLine = "";
    StringBuffer sb = new StringBuffer();
    while ((nextLine = br.readLine()) != null) {
        System.out.println("Writing: " + nextLine);
        writerArg.write(nextLine);
        sb.append(nextLine);
    }
    // Convert the content into to a string
    String clobData = sb.toString();

    // Return the data.
    return clobData;
}
                    </pre>
                </div>
                <p>
                    El extracto siguiente crea un objeto <code>PreparedStatement</code> <code>pstmt</code> que inserta el objeto 
                    de Java <code>Clob</code> <code>myClob</code> en <code>COFFEE_DESCRIPTIONS</code>:
                </p>
                <div class="codeblock">
                    <pre>
PreparedStatement pstmt = null;
// ...
String sql = "INSERT INTO COFFEE_DESCRIPTIONS VALUES(?,?)";
pstmt = this.con.prepareStatement(sql);
pstmt.setString(1, coffeeName);
pstmt.setClob(2, myClob);
pstmt.executeUpdate();
                    </pre>
                </div>
                <h2>
                    <a id="retrieve_clob">Recuperar Valores CLOB</a>
                </h2>
                <p>
                    El método <code><a href="gettingstarted.html">ClobSample.retrieveExcerpt</a></code> recupera el valor SQL 
                    <code>CLOB</code> almacenado en la columna <code>COF_DESC</code> de <code>COFFEE_DESCRIPTIONS</code> desde la 
                    fila cuyo valor de la columna <code>COF_NAME</code> es igual al valor de tipo <code>String</code> especificado 
                    por el parámetro <code>coffeeName</code>:
                </p>
                <div class="codeblock">
                    <pre>
public String retrieveExcerpt(String coffeeName, int numChar)
    throws SQLException {

    String description = null;
    Clob myClob = null;
    PreparedStatement pstmt = null;

    try {
        String sql =
            "select COF_DESC " +
            "from COFFEE_DESCRIPTIONS " +
            "where COF_NAME = ?";

        pstmt = this.con.prepareStatement(sql);
        pstmt.setString(1, coffeeName);
        ResultSet rs = pstmt.executeQuery();

        if (rs.next()) {
            myClob = rs.getClob(1);
            System.out.println("Length of retrieved Clob: " +
                myClob.length());
        }
        description = myClob.getSubString(1, numChar);
    } catch (SQLException sqlex) {
        JDBCTutorialUtilities.printSQLException(sqlex);
    } catch (Exception ex) {
        System.out.println("Unexpected exception: " + ex.toString());
    } finally {
        if (pstmt != null) pstmt.close();
    }
    return description;
}
                    </pre>
                </div>
                <p>
                    La línea siguiente recupera el valor de Java <code>Clob</code> desde el objeto <code>ResultSet</code> 
                    <code>rs</code>:
                </p>
                <div class="codeblock">
                    <pre>
myClob = rs.getClob(1);
                    </pre>
                </div>
                <p>
                    La línea siguiente recupera una subcadena desde el objeto <code>myClob</code>. La subcadena empieza en el 
                    primer carácter del valor de <code>myClob</code> y tiene como tamaño el número de caracteres consecutivos 
                    especificados en <code>numChar</code>, donde <code>numChar</code>, es un entero.
                </p>
                <div class="codeblock">
                    <pre>
description = myClob.getSubString(1, numChar);
                    </pre>
                </div>
                <h2>
                    <a id="add_retrieve_blob">Agregar y Recuperar Objetos BLOB</a>
                </h2>
                <p>
                    Agregar y recuperar objetos <code>BLOB</code> de SQL es similar a agregar y recuperar objetos <code>CLOB</code> 
                    de SQL. Use el método <code>Blob.setBinaryStream</code> para recuperar un objeto <code>OutputStream</code> para 
                    escribir el valor <code>BLOB</code> de SQL que el objeto de Java <code>Blob</code> (que llama al método) 
                    representa.
                </p>
                <h2>
                    <a id="release_large_objects">Liberación de Recursos en Poder de Objetos Grandes</a>
                </h2>
                <p>
                    Los objetos de Java <code>Blob</code>, <code>Clob</code>, y <code>NClob</code> siguen siendo válidos durante al 
                    menos la duración de la transacción en la que se crean. Esto podría provocar que una aplicación se quede sin 
                    recursos durante una transacción de larga ejecución. Las aplicaciones pueden liberar recursos 
                    <code>Blob</code>, <code>Clob</code>, y <code>NClob</code> invocando sus métodos <code>free</code>.
                </p>
                <p>
                    En el extracto siguiente, se llama al método <code>Clob.free</code> para liberar los recursos retenidos por un 
                    objeto <code>Clob</code> creado previamente:
                </p>
                <div class="codeblock">
                    <pre>
Clob aClob = con.createClob();
int numWritten = aClob.setString(1, val);
aClob.free();
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="sqltypes.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="sqlxml.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Usando Tipos de Datos Avanzados<br />
            <b>Página siguiente:</b> Utilizando Objetos SQLXML
        </div>
    </body>
</html> 
