<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Utilizando Objetos Array (Los Tutoriales de Java&trade; &gt; Acceso a Bases de Datos JDBC(TM) &gt; Lo Básico de JDBC)
        </title>
        <meta name="description" content="Este tutorial de Java JDBC describe cómo usar la IPA JDBC para crear, insertar, 
              actualizar y consultar tablas. También aprenderá cómo usar declaraciones simples y preparadas, procedimientos 
              almacenados y realizar transacciones" />
        <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Lo Básico de JDBC</a></div>
                <div class="linkAHEAD"><a href="gettingstarted.html">Empezando</a></div>
                <div class="linkAHEAD"><a href="processingsqlstatements.html">Procesando Sentencias SQL con JDBC</a></div>
                <div class="linkAHEAD"><a href="connecting.html">Estableciendo una Conexión</a></div>
                <div class="linkAHEAD"><a href="sqldatasources.html">Conectando con Objetos DataSource</a></div>
                <div class="linkAHEAD"><a href="sqlexception.html">Manejando SQLExceptions</a></div>
                <div class="linkAHEAD"><a href="tables.html">Configurando Tablas</a></div>
                <div class="linkAHEAD"><a href="retrieving.html">Recuperando y Modificando Valores de los Result Sets</a></div>
                <div class="linkAHEAD"><a href="prepared.html">Usando Prepared Statements</a></div>
                <div class="linkAHEAD"><a href="transactions.html">Usando Transacciones</a></div>
                <div class="linkAHEAD"><a href="rowset.html">Usando Objetos RowSet</a></div>
                <div class="linkAHEAD"><a href="jdbcrowset.html">Utilizando Objetos JdbcRowSet</a></div>
                <div class="linkAHEAD"><a href="cachedrowset.html">Utilizando CachedRowSetObjects</a></div>
                <div class="linkAHEAD"><a href="joinrowset.html">Utilizando Objetos JoinRowSet</a></div>
                <div class="linkAHEAD"><a href="filteredrowset.html">Utilizando Objetos FilteredRowSet</a></div>
                <div class="linkAHEAD"><a href="webrowset.html">Utilizando Objetos WebRowSet</a></div>
                <div class="linkAHEAD"><a href="sqltypes.html">Usando Tipos de Datos Avanzados</a></div>
                <div class="linkAHEAD"><a href="blob.html">Utilizando Objetos Grandes</a></div>
                <div class="linkAHEAD"><a href="sqlxml.html">Utilizando Objetos SQLXML</a></div>
                <div class="nolinkAHEAD">Utilizando Objetos Array</div>
                <div class="linkAHEAD"><a href="distinct.html">Usando el Tipo de Datos DISTINCT</a></div>
                <div class="linkAHEAD"><a href="sqlstructured.html">Utilizando Objetos Estructurados</a></div>
                <div class="linkAHEAD"><a href="sqlcustommapping.html">Usando Mapeados de Tipos Personalizados</a></div>
                <div class="linkAHEAD"><a href="sqldatalink.html">Utilizando Objetos Datalink</a></div>
                <div class="linkAHEAD"><a href="sqlrowid.html">Utilizando Objetos RowId</a></div>
                <div class="linkAHEAD"><a href="storedprocedures.html">Usando Procedimientos Almacenados</a></div>
                <div class="linkAHEAD"><a href="jdbcswing.html">Usando JDBC con una IPA de IGU</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Acceso a Bases de Datos JDBC(TM)<br />
                <b>Lección:</b> Lo Básico de JDBC
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Acceso a Bases de Datos JDBC(TM)</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Lo Básico de JDBC</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="sqlxml.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="distinct.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Utilizando Objetos Array</h1>
            </div>
            <div id="PageContent">
                <p>
                    <strong>Nota</strong>: MySQL y Java DB actualmente no soportan el tipo de datos SQL <code>ARRAY</code>. En 
                    consecuencia, no hay ningún ejemplo de tutorial de JDBC disponible para demostrar el tipo de datos 
                    <code>Array</code> JDBC.
                </p>
                <p>
                    Los siguientes temas están cubiertos:
                </p>
                <ul>
                    <li>
                        <a href="#creating_array">Crear Objetos Array</a>
                    </li>
                    <li>
                        <a href="#retrieving_array">Recuperar y Acceder Valores de Array en ResultSet</a>
                    </li>
                    <li>
                        <a href="#storing_array">Almacenar y Actualizar Objetos Array</a>
                    </li>
                    <li>
                        <a href="#releasing_array">Liberar Recursos Array</a>
                    </li>
                </ul>
                <h2>
                    <a id="creating_array">Crear Objetos Array</a>
                </h2>
                <p>
                    Use el método <code>Connection.createArrayOf</code> para crear objetos <code>Array</code>.
                </p>
                <p>
                    Por ejemplo, suponga que su base de datos contiene una tabla llamada <code>REGIONS</code>, la cual ha sido 
                    creada y llenada con las siguientes sentencias SQL; tenga en cuenta que la sintaxis de estas declaraciones 
                    varíarán dependiendo de su base de datos:
                </p>
                <div class="codeblock">
                    <pre>
create table REGIONS
    (REGION_NAME varchar(32) NOT NULL,
    ZIPS varchar32 ARRAY[10] NOT NULL,
    PRIMARY KEY (REGION_NAME));

insert into REGIONS values(
    'Northwest',
    '{"93101", "97201", "99210"}');
insert into REGIONS values(
    'Southwest',
    '{"94105", "90049", "92027"}');
                    </pre>
                </div>
                <div class="codeblock">
                    <pre>
Connection con = DriverManager.getConnection(url, props);
String [] northEastRegion = { "10022", "02110", "07399" };
Array aArray = con.createArrayOf("VARCHAR", northEastRegionnewYork);
                    </pre>
                </div>
                <p>
                    El controlador JDBC de la Base de Datos de Oracle implementa la interfaz <code>java.sql.Array</code> con la 
                    clase <code>oracle.sql.ARRAY</code>.
                </p>
                <h2>
                    <a id="retrieving_array">Recuperar y Acceder Valores de Array en ResultSet</a>
                </h2>
                <p>
                    Como con las interfaces de objetos grandes de JDBC 4.0 (<code>Blob</code>, <code>Clob</code>, 
                    <code>NClob</code>), puede manipular los objetos <code>Array</code> sin tener que traer todos sus datos desde 
                    el servidor de bases de datos a su computadora cliente. Un objeto <code>Array</code> materializa el SQL 
                    <code>ARRAY</code> que representa como un conjunto de resultados o una matriz de Java.
                </p>
                <p>
                    El siguientre extracto recupera el valor SQL <code>ARRAY</code> en la columna <code>ZIPS</code> y asignarlo al 
                    objeto <code>java.sql.Array</code> <code>z</code>. El extracto recupera los contenidos de <code>z</code> y 
                    lo almacena en <code>zips</code>, una matriz de Java que contiene objetos de tipo <code>String</code>. El 
                    extracto recorre la matriz <code>zips</code> y comprueba que cada código postal (zip) es válido. Este código 
                    asume que la clase <code>ZipCode</code> ha sido definida previamente con el método <code>isValid</code> 
                    devolviendo <code>true</code> si el código postal dado coincide con uno de los códigos postales en una lista 
                    maestra de códigos postales válidos:
                </p>
                <div class="codeblock">
                    <pre>
ResultSet rs = stmt.executeQuery(
    "SELECT region_name, zips FROM REGIONS");

while (rs.next()) {
    Array z = rs.getArray("ZIPS");
    String[] zips = (String[])z.getArray();
    for (int i = 0; i &lt; zips.length; i++) {
        if (!ZipCode.isValid(zips[i])) {
            // ...
            // Code to display warning
        }
    }
}
                    </pre>
                </div>
                <p>
                    En la sentencia siguiente, el método <code>getArray</code> de <code>ResultSet</code> devuelve el valor 
                    almacenado en la columna <code>ZIPS</code> de la fila actual como el objeto <code>z</code> de tipo 
                    <code>java.sql.Array</code>:
                </p>
                <div class="codeblock">
                    <pre>
Array z = rs.getArray(&quot;ZIPS&quot;);
                    </pre>
                </div>
                <p>
                    La variable <code><em>z</em></code> contiene un localizador, que es un puntero lógico al SQL <code>ARRAY</code> 
                    en el servidor; no contiene los elementos del <code>ARRAY</code> en sí. Al ser un puntero lógico, 
                    <code><em>z</em></code> puede usarse para manipular la matriz en el servidor.
                </p>
                <p>
                    En la línea siguiente, <code>getArray</code> es el método <code>Array.getArray</code>, no el método 
                    <code>ResultSet.getArray</code> usado en la línea anterior. Ya que el método <code>Array.getArray</code> 
                    devuelve un <code>Object</code> en el lenguaje de programación Java y porque el código posta es un objeto 
                    <code>String</code>, el resultado es moldeado a una matriz de objetos <code>String</code> antes de ser asignado 
                    a la variable <code>zips</code>.
                </p>
                <div class="codeblock">
                    <pre>
String[] zips = (String[])z.getArray();
                    </pre>
                </div>
                <p>
                    El método <code>Array.getArray</code> materializa los elementos del SQL <code>ARRAY</code> en el cliente como 
                    una matriz de objetos <code>String</code>. Porque, en efecto, la variable <code><em>zips</em></code> contiene 
                    los elementos de la matriz, es posible recorrer <code>zips</code> en un bucle <code>for</code>, buscando 
                    códigos postales que no son válidos.
                </p>
                <h2>
                    <a id="storing_array">Almacenar y Actualizar Objetos Array</a>
                </h2>
                <p>
                    Use los métodos <code>PreparedStatement.setArray</code> y <code>PreparedStatement.setObject</code> para pasar 
                    un valor <code>Array</code> como parámetro de entrada a un objeto <code>PreparedStatement</code>.
                </p>
                <p>
                    El ejemplo siguiente establece el objeto <code>northEastRegion</code> de tipo <code>Array</code> (creado en un 
                    ejemplo previo) como el segundo parámetros al PreparedStatement <code>pstmt</code>:
                </p>
                <div class="codeblock">
                    <pre>
PreparedStatement pstmt = con.prepareStatement(
    "insert into REGIONS (region_name, zips) " + "VALUES (?, ?)");
pstmt.setString(1, "NorthEast");
pstmt.setArray(2, northEastRegion);
pstmt.executeUpdate();
                    </pre>
                </div>
                <p>
                    Del mismo modo, use los métodos <code>PreparedStatement.updateArray</code> y 
                    <code>PreparedStatement.updateObject</code> para actualizar un columna en una tabla con un valor 
                    <code>Array</code>.
                </p>
                <h2>
                    <a id="releasing_array">Liberar Recursos Array</a>
                </h2>
                <p>
                    Los objetos <code>Array</code> permanecen válidos por al menos la duración de la transacción en la cual son 
                    creados. Esto podría provocar que una aplicación se quede sin recursos durante una transacción de larga 
                    ejecución. Las aplicaciones pueden liberar recursos <code>Array</code> invocando su método<code>free</code>.
                </p>
                <p>
                    En el siguente extracto, se llama al método <code>Array.free</code> para liberar los recursos retenidos por un 
                    objeto <code>Array</code> previamente creado.
                </p>
                <div class="codeblock">
                    <pre>
Array aArray = con.createArrayOf("VARCHAR", northEastRegionnewYork);
// ...
aArray.free();
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="sqlxml.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="distinct.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Utilizando Objetos SQLXML<br />
            <b>Página siguiente:</b> Usando el Tipo de Datos DISTINCT
        </div>
    </body>
</html> 
