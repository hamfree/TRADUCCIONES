<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Obteniendo y Estableciendo los Valores de los Campos (Los Tutoriales de Java&trade; &gt; La IPA de Reflexión &gt; 
            Miembros)
        </title>
        <meta name="description" content="Este tutorial de reflexión de Java describe el uso de la reflexión para acceder y 
              manipular clases, campos, métodos y constructores" />
        <meta name="keywords" content="java programming, learn java, java sample code, java reflection" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Miembros</a></div>
                <div class="linkAHEAD"><a href="field.html">Campos</a></div>
                <div class="linkBHEAD"><a href="fieldTypes.html">Obteniendo los Tipos de los Campos</a></div>
                <div class="linkBHEAD"><a href="fieldModifiers.html">Recuperando y Analizando Modificadores de los Campos</a></div>
                <div class="nolinkBHEAD">Obteniendo y Estableciendo los Valores de los Campos</div>
                <div class="linkBHEAD"><a href="fieldTrouble.html">Solución de Problemas</a></div>
                <div class="linkAHEAD"><a href="method.html">Métodos</a></div>
                <div class="linkBHEAD"><a href="methodType.html">Obteniendo Información del Tipo del Método</a></div>
                <div class="linkBHEAD"><a href="methodparameterreflection.html">Obteniendo los Nombre de los Parámetros del Método</a></div>
                <div class="linkBHEAD"><a href="methodModifiers.html">Recuperando y Analizando Modificadores del Método</a></div>
                <div class="linkBHEAD"><a href="methodInvocation.html">Invocando Métodos</a></div>
                <div class="linkBHEAD"><a href="methodTrouble.html">Solución de Problemas</a></div>
                <div class="linkAHEAD"><a href="ctor.html">Constructores</a></div>
                <div class="linkBHEAD"><a href="ctorLocation.html">Encontrando Constructores</a></div>
                <div class="linkBHEAD"><a href="ctorModifiers.html">Recuperando y Analizando Modificadores del Constructor</a></div>
                <div class="linkBHEAD"><a href="ctorInstance.html">Creando Nuevas Instancias de Clase</a></div>
                <div class="linkBHEAD"><a href="ctorTrouble.html">Solución de Problemas</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> La IPA de Reflexión<br />
                <b>Lección:</b> Miembros<br />
                <b>Sección:</b> Campos
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">La IPA de Reflexión</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Miembros</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="fieldModifiers.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="fieldTrouble.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Obteniendo y Estableciendo los Valores de los Campos</h1>
            </div>
            <div id="PageContent">
                <p>
                    Dada una instancia de una clase, es posible usar reflexión para establecer los valores de los campos en esa 
                    clase. Esto se hace típicamente sólo en circunstancias especiales cuando establecer los valores de la forma 
                    usual no es posible. Ya que tal acceso usualmente viola las intenciones de diseño de la clase, debería usarse 
                    con la máxima restricción.
                </p>
                <p>
                    La clase 
                    <a class="SourceLink" target="_blank" href="example/Book.java" 
                       onclick="showCode('../../displayCode.html', 'example/Book.java'); return false;">
                        <code>Book</code></a> ilustra como establecer los valores para los tipos long, matrices, y campos de 
                        enumeración. Los métodos para obtener y establecer otros tipos primitivos de datos se describen en 
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html#method_summary">
                        <code>Field</code></a>.
                </p>
                <div class="codeblock">
                    <pre>

import java.lang.reflect.Field;
import java.util.Arrays;
import static java.lang.System.out;

enum Tweedle { DEE, DUM }

public class Book {
    public long chapters = 0;
    public String[] characters = { &quot;Alice&quot;, &quot;White Rabbit&quot; };
    public Tweedle twin = Tweedle.DEE;

    public static void main(String... args) {
	Book book = new Book();
	String fmt = &quot;%6S:  %-12s = %s%n&quot;;

	try {
	    Class&lt;?&gt; c = book.getClass();

	    Field chap = c.getDeclaredField(&quot;chapters&quot;);
	    out.format(fmt, &quot;before&quot;, &quot;chapters&quot;, book.chapters);
  	    chap.setLong(book, 12);
	    out.format(fmt, &quot;after&quot;, &quot;chapters&quot;, chap.getLong(book));

	    Field chars = c.getDeclaredField(&quot;characters&quot;);
	    out.format(fmt, &quot;before&quot;, &quot;characters&quot;,
		       Arrays.asList(book.characters));
	    String[] newChars = { &quot;Queen&quot;, &quot;King&quot; };
	    chars.set(book, newChars);
	    out.format(fmt, &quot;after&quot;, &quot;characters&quot;,
		       Arrays.asList(book.characters));

	    Field t = c.getDeclaredField(&quot;twin&quot;);
	    out.format(fmt, &quot;before&quot;, &quot;twin&quot;, book.twin);
	    t.set(book, Tweedle.DUM);
	    out.format(fmt, &quot;after&quot;, &quot;twin&quot;, t.get(book));

        // production code should handle these exceptions more gracefully
	} catch (NoSuchFieldException x) {
	    x.printStackTrace();
	} catch (IllegalAccessException x) {
	    x.printStackTrace();
	}
    }
}
                    </pre>
                </div>
                <p>
                    Esta es la salida correspondiente:
                </p>
                <div class="codeblock">
                    <pre>
&#36; <em>java Book</em>
BEFORE:  chapters     = 0
 AFTER:  chapters     = 12
BEFORE:  characters   = [Alice, White Rabbit]
 AFTER:  characters   = [Queen, King]
BEFORE:  twin         = DEE
 AFTER:  twin         = DUM
                    </pre>
                </div>
                <div class="note">
                    <hr />
                    <strong>Nota:</strong>&nbsp;Establecer el valor de un campo&#39;a través de reflexión tiene una cierta cantidad 
                    de sobrecarga de rendimiento porque deben ocurrir varias operaciones, como la validación de permsiso de acceso. 
                    Desde el punto de vista del tiempo de ejecución, los efectos son los mismos, y la operación es tan atómica como 
                    si el valor se cambiara directamente en el código de la clase.
                    <br /><br />
                    El uso de reflexión puede causar que algunas optimizaciones de tiempo de ejecución se pierdan. Por ejemplo, es 
                    muy probable que una máquina virtual de Java optimice el siguiente código:
                    <div class="codeblock">
                        <pre>
int x = 1;
x = 2;
x = 3;
                        </pre>
                    </div>
                    <p>
                        El código equivamente que usa <code>Field.set*()</code> puede no serlo.
                    </p>
                    <hr />
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="fieldModifiers.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="fieldTrouble.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Recuperando y Analizando Modificadores de los Campos<br />
            <b>Página siguiente:</b> Solución de Problemas
        </div>
    </body>
</html> 
