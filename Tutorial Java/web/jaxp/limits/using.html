<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Usando los Límites (Los Tutoriales de Java&trade; &gt; IPA de Java para Procesado de XML (JAXP) &gt; 
            Límites de Procesamiento)
        </title>
        <meta name="description" content="Este tutorial de Java JAXP describe la IPA de Java para el procesado de XML (jaxp), XSLT, 
              SAX, y tópicos de XML relacionados" />
        <meta name="keywords" content="java programming, learn java, java sample code, jaxp, xml, xslt, sax" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Límites de Procesamiento</a></div>
                <div class="linkAHEAD"><a href="limits.html">Definiciones de Límites de Procesamiento</a></div>
                <div class="linkAHEAD"><a href="scope.html">Alcance y Orden</a></div>
                <div class="nolinkAHEAD">Usando los Límites</div>
                <div class="linkAHEAD"><a href="error.html">Gestión de Errores</a></div>
                <div class="linkAHEAD"><a href="stax.html">StAX</a></div>
                <div class="linkAHEAD"><a href="sample.html">Ejemplos</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> IPA de Java para Procesado de XML (JAXP)<br />
                <b>Lección:</b> Límites de Procesamiento
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">IPA de Java para Procesado de XML (JAXP)</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Límites de Procesamiento</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="scope.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="error.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Usando los Límites</h1>
            </div>
            <div id="PageContent">
                <h2>
                    Evaluación del Entorno
                </h2>
                <p>
                    La evaluación incluye, a nivel del sistema, la cantidad de memoria disponible para las aplicaciones, si se 
                    aceptan y procesan las fuentes no confiables de XML, XSD, o XSL, y a nivel de aplicación, si se usan ciertas 
                    construcciones como las DTDs.
                </p>
                <h2>
                    Límites y Configuración de Memoria
                </h2>
                <p>
                    El procesamiento de XML puede consumir mucha memoria. La cantidad de memoria permitida depende de los 
                    requerimientos específicos de las aplicaciones. La memoria máxima permitida por un entorno depende de los 
                    requerimientos de las aplicaciones, y la necesidad de prevenir el uso de memoria excesiva al procesar datos de 
                    XML con formato incorrecto.
                </p>
                <p>
                    Los límites predeterminados se establecen generalmente para permitir las entradas XML legítimas para la mayoría 
                    de las aplicaciones con el uso de memoria permitido para un sistema de hardware pequeño (como un PC). Se 
                    recomienda que los límites se establezcan a sus posibles valores más pequeños, de forma que cualquier entrada con 
                    formato incorrecto pueda ser capturada más pronto sin consumir una gran cantidad de memoria.
                </p>
                <h2>
                    Estimación de los Límites Usando la Propiedad getEntityCountInfo
                </h2>
                <p>
                    Para ayudar a los usuarios a analizar cuales son los límites apropiados, está disponible una propiedad especial 
                    llamada <code>http://www.oracle.com/xml/jaxp/properties/getEntityCountInfo</code>. El trozo de código siguiente 
                    muestra un ejemplo de cómo usar esta propiedad:
                </p>
                <div class="codeblock">
                    <pre>
parser.setProperty("http://www.oracle.com/xml/jaxp/properties/getEntityCountInfo", "yes");
                    </pre>
                </div>
                <p>
                    Vea los 
                    <a class="TutorialLink" target="_top" href="sample.html">Ejemplos</a> para obtener más información sobre la 
                    descarga del código de ejemplo.
                </p>
                <p>
                    Cuando el programa se ejecuta con la DTD en W3C MathML 3.0, imprime la siguiente tabla:
                </p>
                <table class="celda">
                    <caption>
                        Una tabla que muestra los valores cuando la propiedad getEntityCountInfo del analizador se establece a yes
                    </caption>
                    <tr>
                        <th id="h1" class="celda">Property</th>
                        <th id="h2" class="celda">Limit</th>
                        <th id="h3" class="celda">Total Size</th>
                        <th id="h4" class="celda">Size</th>
                        <th id="h5" class="celda">Entity Name</th>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>ENTITY_EXPANSION_LIMIT</code></td>
                        <td headers="h2" class="celda">64000</td>
                        <td headers="h3" class="celda">1417</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>MAX_OCCUR_NODE_LIMIT</code></td>
                        <td headers="h2" class="celda">5000</td>
                        <td headers="h3" class="celda">0</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>ELEMENT_ATTRIBUTE_LIMIT</code></td>
                        <td headers="h2" class="celda">10000</td>
                        <td headers="h3" class="celda">0</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>TOTAL_ENTITY_SIZE_LIMIT</code></td>
                        <td headers="h2" class="celda">50000000</td>
                        <td headers="h3" class="celda">55425</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>GENEAL_ENTITY_SIZE_LIMIT</code></td>
                        <td headers="h2" class="celda">0</td>
                        <td headers="h3" class="celda">0</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>PARAMETER_ENTITY_SIZE_LIMIT</code></td>
                        <td headers="h2" class="celda">1000000</td>
                        <td headers="h3" class="celda">0</td>
                        <td headers="h4" class="celda">7303</td>
                        <td headers="h5" class="celda">%MultiScriptExpression</td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>MAX_ELEMENT_DEPTH_LIMIT</code></td>
                        <td headers="h2" class="celda">0</td>
                        <td headers="h3" class="celda">2</td>
                        <td headers="h4" class="celda">0</td>
                        <td headers="h5" class="celda"><code>null</code></td>
                    </tr>
                </table>
                <p>
                    En este ejemplo, el número total de referencias de entidad, o la expansión de entidades, es 1417; el límite 
                    predeterminado es 64000. El tamaño total de todas las entidades 55425; el límite predeterminado es 50000000. La 
                    entidad con el parámetro más grande es <code>%MultiScriptExpression</code> con una longitud de 7303 después de
                    que todas las referencias se resuelvan; el límite predeterminado es 1000000.
                </p>
                <p>
                    Si este es el fichero más grande que la aplicación espera procesar, se recomienda que los límites se establezcan 
                    a los número más pequeños. Por ejemplo, 2000 para <code>ENTITY_EXPANSION_LIMIT</code>, 100000 para 
                    <code>TOTAL_ENTITY_SIZE_LIMIT</code>, y 10000 para <code>PARAMETER_ENTITY_SIZE_LIMIT</code>.
                </p>
                <h2>
                    Establecer Límites
                </h2>
                <p>
                    Los límites pueden establecerse de la misma forma que otras propiedades JAXP. Pueden establecerse a través de 
                    métodos de factoría, o a través del analizador:
                </p>
                <div class="codeblock">
                    <pre>
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setAttribute(name, value);
 
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser parser = spf.newSAXParser();
parser.setProperty(name, value);
 
XMLInputFactory xif = XMLInputFactory.newInstance();
xif.setProperty(name, value);
 
SchemaFactory schemaFactory = SchemaFactory.newInstance(schemaLanguage);
schemaFactory.setProperty(name, value);
 
TransformerFactory factory = TransformerFactory.newInstance();
factory.setAttribute(name, value);
                    </pre>
                </div>
                <p>
                    El ejemplo siguiente muestra cómo establecer límites usando <code>DocumentBuilderFactory</code>:
                </p>
                <div class="codeblock">
                    <pre>
dbf.setAttribute(JDK_ENTITY_EXPANSION_LIMIT, "2000");
dbf.setAttribute(TOTAL_ENTITY_SIZE_LIMIT, "100000");
dbf.setAttribute(PARAMETER_ENTITY_SIZE_LIMIT, "10000"); 
dbf.setAttribute(JDK_MAX_ELEMENT_DEPTH, "100"); 
                    </pre>
                </div>
                <h2>
                    Usar Propiedades del Sistema
                </h2>
                <p>
                    Las propiedades del sistema pueden ser útiles si cambiar el código no es factible.
                </p>
                <p>
                    Para establecer los límites de una invocación entera del KDJ o EEJ, establezca las propiedades del sistema en 
                    la línea de comandos. Para establecer los límites para sólo una porción de la aplicación, las propiedades del 
                    sistema deben ser establecidas antes de la sección y borradas después. El código siguiente muestra cómo se 
                    pueden usar las propiedades del sistema:
                </p>
                <div class="codeblock">
                    <pre>
public static final String SP_GENEAL_ENTITY_SIZE_LIMIT = "jdk.xml.maxGeneralEntitySizeLimit";

//set limits using system property
System.setProperty(SP_GENEAL_ENTITY_SIZE_LIMIT, "2000");

//this setting will affect all processing after it's set
...

//after it is done, clear the property
System.clearProperty(SP_GENEAL_ENTITY_SIZE_LIMIT);
                    </pre>
                </div>
                <p>
                    Vea los 
                    <a class="TutorialLink" target="_top" href="sample.html">Ejemplos</a> para obtener más información sobre la 
                    descarga del código de ejemplo.
                </p>
                <h2>
                    Usar el Fichero jaxp.properties
                </h2>
                <p>
                    El fichero <code>jaxp.properties</code> es un fichero plano de configuración. Se ubica habitualmente en 
                    <code>${<em>java.home</em>}/lib/jaxp.properties</code> donde <code><em>java.home</em></code> es el directorio de 
                    instalación del EEJ, p.e, <em>[ruta al directorio de instalación]</em>/jdk7/jre.
                </p>
                <p>
                    Un límite se puede establecer agregando la línea siguiente al fichero <code>jaxp.properties</code>:
                </p>
                <div class="codeblock">
                    <pre>
jdk.xml.maxGeneralEntitySizeLimit=2000
                    </pre>
                </div>
                <p>
                    Tenga en cuenta que el nombre de la propiedad es el mismo que el de la propiedad del sistema y tiene el prefijo
                    <code>jdk.xml</code>.
                </p>
                <p>
                    Cuando se establece la propiedad en el fichero, todas las invocaciones del KDJ y el EEJ observarán el límite.
                </p>
            </div>
            <div class="NavBit">
                <a target="_top" href="scope.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="error.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Alcance y Orden<br />
            <b>Página siguiente:</b> Gestión de Errores
        </div>
    </body>
</html> 
