<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Tratando con Mensajes Compuestos (Los Tutoriales de Java&trade; &gt; Internacionalización &gt; Formateando)
        </title>
        <meta name="description" content="Este tutorial de internacionalización de Java describe la configuración regional, 
              aislando datos específicos de la configuración regional, formateando datos, nombre de dominio internacionalizado e 
              identificador de recursos" />
        <meta name="keywords" content="java programming, learn java, java sample code, i18n, internationalization, locale, text
              formatting" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Formateando</a></div>
                <div class="linkAHEAD"><a href="numberintro.html">Números y Monedas</a></div>
                <div class="linkBHEAD"><a href="numberFormat.html">Usando Formatos Predefinidos</a></div>
                <div class="linkBHEAD"><a href="decimalFormat.html">Personalizando Formatos</a></div>
                <div class="linkAHEAD"><a href="dateintro.html">Fechas y Horas</a></div>
                <div class="linkBHEAD"><a href="dateFormat.html">Usando Formatos Predefinidos</a></div>
                <div class="linkBHEAD"><a href="simpleDateFormat.html">Personalizando Formatos</a></div>
                <div class="linkBHEAD"><a href="dateFormatSymbols.html">Cambiando los Símbolos del Formato de Fecha</a></div>
                <div class="linkAHEAD"><a href="messageintro.html">Mensajes</a></div>
                <div class="nolinkBHEAD">Tratando con Mensajes Compuestos</div>
                <div class="linkBHEAD"><a href="choiceFormat.html">Manejando plurales</a></div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Internacionalización<br />
                <b>Lección:</b> Formateando<br />
                <b>Sección:</b> Mensajes
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Internacionalización</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Formateando</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="messageintro.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="choiceFormat.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Tratando con Mensajes Compuestos</h1>
            </div>
            <div id="PageContent">
                <p>
                    Un mensaje compuesto puede contener varias clases de variables: fechas, horas, cadenas, números, monedas, y 
                    porcentajes. Para dar formato a un mensaje compuesto de una manera independiente de la configuración regional, 
                    construya un patrón que aplique a un objeto <code>MessageFormat</code>, y almacene este patrón en un 
                    <code>ResourceBundle</code>.
                </p>
                <p>
                    Pasando por un programa de muestra, esta sección demuestra cómo internacionalizar un mensaje compuesto. El 
                    programa ejemplo hace uso de la clase 
                    <a class="APILink" target="_blank" 
                       href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html">
                        <code>MessageFormat</code></a>. El código fuente completo para este programa está en el fichero llamado 
                    <a class="SourceLink" target="_blank" href="examples/MessageFormatDemo.java" 
                       onclick="showCode('../../displayCode.html', 'examples/MessageFormatDemo.java'); return false;">
                        <code>MessageFormatDemo.java</code></a>. Las propiedades de la configuración regional de alemán están en el 
                        fichero llamado 
                    <a class="SourceLink" target="_blank" href="examples/MessageBundle_de_DE.properties"
                       onclick="showCode('../../displayCode.html', 'examples/MessageBundle_de_DE.properties'); return false;">
                        <code>MessageBundle_de_DE.properties</code></a>.
                </p>
                <h2>
                    1. Identificar las Variables en el Mensaje
                </h2>
                <p>
                    Suponga que quiere internacionalizar el mensaje siguiente:
                </p>
                <div class="centrado">
                    <img src="../../figures/i18n/i18n-2.gif" width="574" height="66"
                         alt="La siguiente línea de texto: a las 1:15 del 13 Abril, 1998, detectamos 7 naves espaciales en el 
                         planeta Marte. Los datos variables (1:15, Abril 13,1998, 7, y Marte) han sido subrayados." />
                </div>
                <p>
                    Observe que hemos subrayado los datos variables y hemos identificado qué tipo de objetos representarán estos 
                    datos.
                </p>
                <h2>
                    2. Aisle el Patrón de Mensaje en un ResourceBundle
                </h2>
                <p>
                    Almacen el mensaje en un <code>ResourceBundle</code> llamando <code>MessageBundle</code>, como sigue:
                </p>
                <div class="codeblock">
                    <pre>
ResourceBundle messages =
   ResourceBundle.getBundle(&quot;MessageBundle&quot;, currentLocale);
                    </pre>
                </div>
                <p>
                    Este <code>ResourceBundle</code> está respaldado por un fichero de propiedades para cada <code>Locale</code>. 
                    Ya que el <code>ResourceBundle</code> se llama <code>MessageBundle</code>, el fichero de propiedades para el 
                    inglés de EE.UU se llama <code>MessageBundle_en_US.properties</code>. Los contenidos de este fichero son los 
                    siguientes:
                </p>
                <div class="codeblock">
                    <pre>
template = At {2,time,short} on {2,date,long}, \
    we detected {1,number,integer} spaceships on \
    the planet {0}.
planet = Mars
                    </pre>
                </div>
                <p>
                    La primera línea del fichero de propiedades contiene el patrón de mensaje. Si compara este patrón con el 
                    mensaje  de texto mostrado en el paso 1, verá que un argumento encerrado entre llaves reemplaza cada variable 
                    en el mensaje de texto. Cada argumento empieza con un dígito llamado el número de argumento, el cual coincide 
                    con el índice de un elemento en un vector de <code>Object</code>s que contiene los valores del argumento. Tenga 
                    en cuenta que en el patrón los números de los argumentos no están en ningún orden en particular. Puede colocar 
                    los argumentos en cualquier lugar del patrón. El único requisito es que el número de argumento tenga un 
                    elemento coincidente en la matriz de valores de argumento.
                </p>
                <p>
                    El paso siguiente describe el vector de valores de argumento, pero primero veamos cada uno de los argumentos en 
                    el patrón. La tabla siguiente proporciona algunos detalles sobre los argumentos:
                </p>
                <table class="celda">
                    <caption>Argumentos para <code>template</code> en <code>MessageBundle_en_US.properties</code></caption>
                    <tr>
                        <th id="h1" class="celda">Argumento</th>
                        <th id="h2" class="celda">Descripción</th>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>{2,time,short}</code></td>
                        <td headers="h2" class="celda">
                            La porción de hora de un objeto <code>Date</code>. El estilo <code>short</code> especifica el estilo de 
                            formato <code>DateFormat.SHORT</code>.
                        </td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>{2,date,long}</code></td>
                        <td headers="h2" class="celda">
                            La porción de fecha de un objeto <code>Date</code>. El mismo objeto <code>Date</code> se usa para las 
                            variables de fecha y tiempo. En el vector de <code>Object</code> de argumentos el índice del elemento 
                            que contiene el objeto <code>Date</code> es el 2. (Esto se describe en el paso siguiente).
                        </td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>{1,number,integer}</code></td>
                        <td headers="h2" class="celda">
                            Un objeto <code>Number</code>, adicionalmente calificado con el estilo de número <code>integer</code>.
                        </td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>{0}</code></td>
                        <td headers="h2" class="celda">
                            El objeto <code>String</code> en el <code>ResourceBundle</code> que corresponde a la clave 
                            <code>planet</code>.
                        </td>
                    </tr>
                </table>
                <p>
                    Para una descripción completa de la sintaxis de los argumentos, vea la documentación de la IPA para la clase 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html">
                        <code>MessageFormat</code></a>.
                </p>
                <h2>
                    3. Establecer los Argumentos del Mensaje
                </h2>
                <p>
                    Las siguientes líneas de código asigna los valores a cada argumento en el patrón. Los índices de los elementos 
                    en el vector <code>messageArguments</code> coinciden con los números de los argumentos en el patrón. Por 
                    ejemplo, el elemento <code>Integer</code> en el índice 1 se corresponde con el argumento 
                    <code>{1,number,integer}</code> en el patrón. Debido a que debe traducirse, el objeto <code>String</code> en el 
                    elemento 0 se obtendrá del <code>ResourceBundle</code> con el método <code>getString</code>. Aquí está el 
                    código que define la matriz de argumentos del mensaje:
                </p>
                <div class="codeblock">
                    <pre>
Object[] messageArguments = {
    messages.getString(&quot;planet&quot;),
    new Integer(7),
    new Date()
};
                    </pre>
                </div>
                <h2>
                    4. Crear el Formateador
                </h2>
                <p>
                    A continuación, cree el objeto <code>MessageFormat</code>. Establezca el <code>Locale</code> porque el mensaje 
                    contiene objetos <code>Date</code> y <code>Number</code>, los cuales deben ser formateados de una manera 
                    sensible a la configuración regional.
                </p>
                <div class="codeblock">
                    <pre>
MessageFormat formatter = new MessageFormat(&quot;&quot;);
formatter.setLocale(currentLocale);
                    </pre>
                </div>
                <h2>
                    5. De Formato al Mensaje Usando el Patrón y los Argumentos
                </h2>
                <p>
                    Este paso muestra cómo el patrón, los argumentos del mensaje, y el formateador trabajan todos juntos. Primero, 
                    se recupera el <code>String</code> del patrón desde el <code>ResourceBundle</code> con el método 
                    <code>getString</code>. La clave para el patrón es <code>template</code>. Pase el <code>String</code> del 
                    patrón al formateador con el método <code>applyPattern</code>. Después de formato al mensaje usando el vector 
                    de argumentos del mensaje, invocando el método <code>format</code>. La <code>String</code> devuelta por el 
                    método <code>format</code> está lista para ser visualizada. Todo esto se logra con solo dos líneas de código:
                </p>
                <div class="codeblock">
                    <pre>
formatter.applyPattern(messages.getString(&quot;template&quot;));
String output = formatter.format(messageArguments);
                    </pre>
                </div>
                <h2>
                    6. Ejecutar el Programa Demostración
                </h2>
                <p>
                    El programa demostración imprime los mensajes traducidos para las configuraciones regionales de inglés y alemán 
                    y formate apropiadamente las variables de fecha y hora. Dese cuenta de que los verbos en inglés y en alemán 
                    (&quot;detected&quot; and &quot;entdeckt&quot;) están en diferentes ubicaciones relativas a las variables:
                </p>
                <div class="codeblock">
                    <pre>
currentLocale = en_US
At 10:16 AM on July 31, 2009, we detected 7
spaceships on the planet Mars.
currentLocale = de_DE
Um 10:16 am 31. Juli 2009 haben wir 7 Raumschiffe
auf dem Planeten Mars entdeckt.
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="messageintro.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="choiceFormat.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Mensajes<br />
            <b>Página siguiente:</b> Manejando plurales
        </div>
    </body>
</html> 
