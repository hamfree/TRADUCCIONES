<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Manejando plurales (Los Tutoriales de Java&trade; &gt; Internacionalización &gt; Formateando)
        </title>
        <meta name="description" content="Este tutorial de internacionalización de Java describe la configuración regional, 
              aislando datos específicos de la configuración regional, formateando datos, nombre de dominio internacionalizado e 
              identificador de recursos" />
        <meta name="keywords" content="java programming, learn java, java sample code, i18n, internationalization, locale, text
              formatting" />
        <link rel="stylesheet" href="../../indice.css" type="text/css"/>
        <script src="../../navegacion.js"></script>
    </head>
    <body onload="load()">
        <noscript>Se requiere un navegador con JavaScript habilitado para que esta página opere apropiadamente.</noscript>
        <div class="header-container">
            <div class="bookwrapper clearfix">
                <div id="brandProdName">
                    <div id="logocover"></div>
                    <div id="productName">Documentación</div>
                </div>
                <br class="clearfloat" />
            </div>
        </div>
        <div id="TopBar">
            <div id="TopBar_tr">
                <div id="TopBar_tl">
                    <div id="TopBar_br">
                        <div id="TopBar_bl">
                            <div id="TopBar_left">Los Tutoriales de Java&trade;</div>
                            <div id="TopBar_right">
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">
                                    Descargar Libros Electrónicos</a><br />
                                <a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">
                                    Descargar KDJ</a><br />
                                <a href="javascript:toggleLeft()" id="ToggleLeft">
                                    Ocultar TdC</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="LeftBar" class="LeftBar_shown">
            <div id="Contents">
                <div class="linkLESSON"><a href="index.html">Formateando</a></div>
                <div class="linkAHEAD"><a href="numberintro.html">Números y Monedas</a></div>
                <div class="linkBHEAD"><a href="numberFormat.html">Usando Formatos Predefinidos</a></div>
                <div class="linkBHEAD"><a href="decimalFormat.html">Personalizando Formatos</a></div>
                <div class="linkAHEAD"><a href="dateintro.html">Fechas y Horas</a></div>
                <div class="linkBHEAD"><a href="dateFormat.html">Usando Formatos Predefinidos</a></div>
                <div class="linkBHEAD"><a href="simpleDateFormat.html">Personalizando Formatos</a></div>
                <div class="linkBHEAD"><a href="dateFormatSymbols.html">Cambiando los Símbolos del Formato de Fecha</a></div>
                <div class="linkAHEAD"><a href="messageintro.html">Mensajes</a></div>
                <div class="linkBHEAD"><a href="messageFormat.html">Tratando con Mensajes Compuestos</a></div>
                <div class="nolinkBHEAD">Manejando plurales</div>
            </div>
        </div>
        <div id="MainFlow" class="MainFlow_indented">
            <div class="PrintHeaders">
                <b>Recorrido:</b> Internacionalización<br />
                <b>Lección:</b> Formateando<br />
                <b>Sección:</b> Mensajes
            </div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">Página de Inicio</a>&nbsp;&gt;&nbsp;
                <a href="../index.html" target="_top">Internacionalización</a>&nbsp;&gt;&nbsp;
                <a href="index.html" target="_top">Formateando</a>
            </div>
            <div class="NavBit">
                <a target="_top" href="messageFormat.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../text/index.html">Siguiente&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle">
                <h1>Manejando plurales</h1>
            </div>
            <div id="PageContent">
                <p>
                    Las palabras en un mensaje pueden variar si son posibles tanto la forma de la palabra en plural como en 
                    singular. Con la clase <code>ChoiceFormat</code>, puede asignar un número a una palabra o una frase, 
                    permitiéndole construir mensajes gramaticalmente correctos.
                </p>
                <p>
                    En inglés las formas plural y singular de una palabra son habitualmente diferentes. Esto puede presentar un 
                    problema cuando está construyendo mensajes que se refieren a cantidades. Por ejemplo, si su mensaje informa del 
                    número de ficheros en un disco, las variaciones siguientes son posibles:
                </p>
                <div class="codeblock">
                    <pre>
There are no files on XDisk.
There is one file on XDisk.
There are 2 files on XDisk.
                    </pre>
                </div>
                <p>
                    La forma más rápida de resolver este problema es crear un patrón de <code>MessageFormat</code> como este:
                </p>
                <div class="codeblock">
                    <pre>
There are {0,number} file(s) on {1}.
                    </pre>
                </div>
                <p>
                    Desafortunadamente, el patrón anterior da como resultado una gramática incorrecta:
                </p>
                <div class="codeblock">
                    <pre>
There are 1 file(s) on XDisk.
                    </pre>
                </div>
                <p>
                    Puede hacerlo mejor que eso, siempre que use la clase 
                    <a class="APILink" target="_blank"
                       href="https://docs.oracle.com/javase/8/docs/api/java/text/ChoiceFormat.html"><code>ChoiceFormat</code></a>. 
                    En esta sección aprenderá cómo tratar con plurales en un mensaje recorriendo un programa de ejemplo llamado 
                    <a class="SourceLink" target="_blank" href="examples/ChoiceFormatDemo.java"
                       onclick="showCode('../../displayCode.html', 'examples/ChoiceFormatDemo.java'); return false;">
                        <code>ChoiceFormatDemo</code></a>. Este programa también usa la clase <code>MessageFormat</code>, la cual 
                    se describe en la sección anterior, <a href="messageFormat.html">Tratando con Mensajes Compuestos</a>.
                    <a id="step1"></a>
                </p>
                <h2>
                    <a id="step1__1">1. Defina el Patrón del Mensaje</a>
                </h2>
                <p>
                    Primero, identifique las variables en el mensaje:
                </p>
                <div class="centrado">
                    <img src="../../figures/i18n/i18n-3.gif" width="227" height="114"
                         alt="Tres líneas de texto, con las variables en cada línea subrayadas." />
                </div>
                <p>
                    A continuación, reemplaza las variables en el mensaje con los argumentos, creando un patrón que puede ser 
                    aplicado a un objeto <code>MessageFormat</code>:
                </p>
                <div class="codeblock">
                    <pre>
There {0} on {1}.
                    </pre>
                </div>
                <p>
                    El argumento para el nombre del disco, el cual está representado por <code>{1}</code>, es bastante fácil de 
                    manejar. Simplemente trátelo como cualquier otra variable <code>String</code> en un patrón de 
                    <code>MessageFormat</code>. Este argumento coincide con el elemento en el índice 1 en el vector de valores de 
                    argumento. (Vea <a href="#step7">paso 7</a>).
                </p>
                <p>
                    Tratar con el argumento <code>{0}</code> es más complejo, por un par de razones:
                </p>
                <ul>
                    <li>
                        La frase que este argumento reemplaza varía con el número de ficheros. Para construir esta frase en tiempo 
                        de ejecución, necesita asignar el número de ficheros a una <code>String</code> particular. Por ejemplo, el 
                        número 1 se mapeará a la <code>String</code> que contiene la frase <code>is one file</code>. La clase 
                        <code>ChoiceFormat</code> le permite realizar la asignación necesario.
                    </li>
                    <li>
                        Si el disco contiene múltiples ficheros, la frase incluye un entero. La clase <code>MessageFormat</code> le 
                        permite insertar un número dentro de una frase.
                    </li>
                </ul>
                <h2>
                    2. Cree un ResourceBundle
                </h2>
                <p>
                    Ya que el mensaje de texto debe ser traducido, aíslelo en un <code>ResourceBundle</code>:
                </p>
                <div class="codeblock">
                    <pre>
ResourceBundle bundle = ResourceBundle.getBundle(
    "ChoiceBundle", currentLocale);
                    </pre>
                </div>
                <p>
                    El programa de ejemplo respalda el <code>ResourceBundle</code> con ficheros de propiedades. El fichero 
                    <a class="SourceLink" target="_blank" href="examples/ChoiceBundle_en_US.properties"
                       onclick="showCode('../../displayCode.html', 'examples/ChoiceBundle_en_US.properties'); return false;">
                        <code>ChoiceBundle_en_US.properties</code></a> contiene las líneas siguientes:
                </p>
                <div class="codeblock">
                    <pre>
pattern = There {0} on {1}.
noFiles = are no files
oneFile = is one file
multipleFiles = are {2} files
                    </pre>
                </div>
                <p>
                    Los contenidos de este fichero de propiedades muestran cómo será construído y formateado el mensaje. La primera 
                    línea contiene el patrón para <code>MessageFormat</code>. (Vea <a href="#step1">paso 1</a>). Las otras líneas 
                    contienen frases que reemplazarán el argumento <code>{0}</code> en el patrón. La frase para la clave 
                    <code>multipleFiles</code> contiene el argumento <code>{2}</code>, el cual será reemplazado por un número.
                </p>
                <p>
                    Aquí está la versión francesa del fichero de propiedades, 
                    <a class="SourceLink" target="_blank" href="examples/ChoiceBundle_fr_FR.properties"
                       onclick="showCode('../../displayCode.html', 'examples/ChoiceBundle_fr_FR.properties'); return false;">
                        <code>ChoiceBundle_fr_FR.properties</code></a>
                </p>
                <div class="codeblock">
                    <pre>
pattern = Il {0} sur {1}.
noFiles = n'y a pas de fichiers
oneFile = y a un fichier
multipleFiles = y a {2} fichiers
                    </pre>
                </div>
                <h2>
                    3. Cree un Formateador de Mensaje
                </h2>
                <p>
                    En este paso instancia <code>MessageFormat</code> y establece su <code>Locale</code>:
                </p>
                <div class="codeblock">
                    <pre>
MessageFormat messageForm = new MessageFormat(&quot;&quot;);
messageForm.setLocale(currentLocale);
                    </pre>
                </div>
                <h2>
                    4. Cree un Formateador de Elección
                </h2>
                <p>
                    El objeto <code>ChoiceFormat</code> le permite elegir, basado en un número <code>double</code>, un objeto 
                    <code>String</code> particular. El rango de números <code>double</code>, y los objetos <code>String</code> a 
                    los cuales se asignan, son especificados en vectores:
                </p>
                <div class="codeblock">
                    <pre>
double[] fileLimits = {0,1,2};
String [] fileStrings = {
    bundle.getString(&quot;noFiles&quot;),
    bundle.getString(&quot;oneFile&quot;),
    bundle.getString(&quot;multipleFiles&quot;)
};
                    </pre>
                </div>
                <p>
                    <code>ChoiceFormat</code> asigna cada elemento en el vector de <code>double</code> al elemento en el vector de 
                    <code>String</code> que tiene el mismo índice. En el código de ejemplo el 0 se asigna al objeto 
                    <code>String</code> devuelto de llamar a <code>bundle.getString(&quot;noFiles&quot;)</code>. Por coincidencia, 
                    el índice es el mismo que el valor de la matriz <code>fileLimits</code>. Si el código hubiera establecido 
                    <code>fileLimits[0]</code> en siete, <code>ChoiceFormat</code> asignaría el número 7 a 
                    <code>fileStrings[0]</code>.
                </p>
                <p>
                    Especifique los vectores de <code>double</code> y <code>String</code> cuando instancie 
                    <code>ChoiceFormat</code>:
                </p>
                <div class="codeblock">
                    <pre>
ChoiceFormat choiceForm = new ChoiceFormat(fileLimits, fileStrings);
                    </pre>
                </div>
                <h2>
                    5. Aplique el Patrón
                </h2>
                <p>
                    ¿Recuerda el patrón que construyó en el paso 1? Es la hora de recuperar el patrón desde el 
                    <code>ResourceBundle</code> y aplicarlo al objeto <code>MessageFormat</code>:
                </p>
                <div class="codeblock">
                    <pre>
String pattern = bundle.getString(&quot;pattern&quot;);
messageForm.applyPattern(pattern);
                    </pre>
                </div>
                <h2>
                    6. Asigne los Formatos
                </h2>
                <p>
                    En este paso asigna al objeto <code>MessageFormat</code> el objeto <code>ChoiceFormat</code> creado en el 
                    paso 4:
                </p>
                <div class="codeblock">
                    <pre>
Format[] formats = {choiceForm, null, NumberFormat.getInstance()};
messageForm.setFormats(formats);
                    </pre>
                </div>
                <p>
                    El método <code>setFormats</code> asigna objetos <code>Format</code> a los argumentos en el patrón de mensaje.
                    Debe invocar el método <code>applyPattern</code> antes de llamar al método <code>setFormats</code>. La tabla 
                    siguiente muestra cómo los elementos del vector <code>Format</code> se corresponden con los argumentos en el 
                    patrón del mensaje:
                </p>
                <h2>
                    El Vector <code>Format</code> del Programa <code>ChoiceFormatDemo</code>
                </h2>
                <table class="celda">
                    <caption>Vector Format y argumentos del patrón</caption>
                    <tr>
                        <th id="h1" class="celda">Elemento del Vector</th>
                        <th id="h2" class="celda">Argumento del Patrón</th>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>choiceForm</code></td>
                        <td headers="h2" class="celda"><code>{0}</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>null</code></td>
                        <td headers="h2" class="celda"><code>{1}</code></td>
                    </tr>
                    <tr>
                        <td headers="h1" class="celda"><code>NumberFormat.getInstance()</code></td>
                        <td headers="h2" class="celda"><code>{2}</code></td>
                    </tr>
                </table>
                <h2>
                    <a id="step7">7. Establezca los Argumentos y De Formato al Mensaje</a>
                </h2>
                <p>
                    En tiempo de ejecución el programa asigna las variables al vector de argumentos que le pasa al objeto 
                    <code>MessageFormat</code>. Los elementos en el vector se corresponden a los argumentos en el patrón. Por 
                    ejemplo, <code>messageArgument[1]</code> se asigna al argumento de patrón <code>{1}</code>, el cual es un objeto 
                    <code>String</code> que contiene el nombre del disco. En el paso previo el programa asignó un objeto 
                    <code>ChoiceFormat</code> al argumento <code>{0}</code> del patrón. Por lo tanto el número asignado a 
                    <code>messageArgument[0]</code> determina que <code>String</code> selecciona el objeto 
                    <code>ChoiceFormat</code>. Si <code>messageArgument[0]</code> es mayor o igual a 2, el objeto 
                    <code>String</code> que contiene la frase <code>are {2} files</code> reemplazar el argumento <code>{0}</code> 
                    en el patrón. El número asignado a <code>messageArgument[2]</code> será substituido en el lugar del argumento 
                    de patrón <code>{2}</code>. Aquí está el código que prueba esto:
                </p>
                <div class="codeblock">
                    <pre>
Object[] messageArguments = {null, "XDisk", null};

for (int numFiles = 0; numFiles &lt; 4; numFiles++) {
    messageArguments[0] = new Integer(numFiles);
    messageArguments[2] = new Integer(numFiles);
    String result = messageForm.format(messageArguments);
    System.out.println(result);
}
                    </pre>
                </div>
                <h2>
                    8. Ejecute el Programa Demostración
                </h2>
                <p>
                    Compare los mensajes visualizados por el programa con las frases en el <code>ResourceBundle</code> del paso 2. 
                    Dese cuenta de que el objeto <code>ChoiceFormat</code> selecciona la frase correcta, la cual usa el objeto 
                    <code>MessageFormat</code> para construir el mensaje apropiado. La salida del programa 
                    <code>ChoiceFormatDemo</code> es como sigue:
                </p>
                <div class="codeblock">
                    <pre>
currentLocale = en_US
There are no files on XDisk.
There is one file on XDisk.
There are 2 files on XDisk.
There are 3 files on XDisk.

currentLocale = fr_FR
Il n'y a pas des fichiers sur XDisk.
Il y a un fichier sur XDisk.
Il y a 2 fichiers sur XDisk.
Il y a 3 fichiers sur XDisk.
                    </pre>
                </div>
            </div>
            <div class="NavBit">
                <a target="_top" href="messageFormat.html">&laquo;&nbsp;Anterior</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../TOC.html">TdC</a>&nbsp;&bull;&nbsp;
                <a target="_top" href="../text/index.html">Siguiente&nbsp;&raquo;</a>
            </div>
        </div>
        <hr class="clearfloat"/>
        <div id="Footer">
            <table style="width: 100%;padding: 5px">
                <tr>
                    <td>
                        <p class="footertext">
                            <a id="license_info">Su uso de ésta</a> página y todo el material en las páginas bajo el anuncio
                            &quot;Los Tutoriales de Java&quot; está sujeto a estos <a href="../../information/cpyr.html">avisos
                                legales</a>.
                        </p>
                        <p class="footertext">
                            Copyright &copy; 1995, 2015 Oracle y/o sus afiliados. Todos los derechos reservados.
                        </p>
                    </td>
                    <td style="text-align: right">
                        <p class="footertext">
                            ¿Problemas con estos ejemplos? Intente
                            <a target="_blank" href="../../information/run-examples.html">Compilando y Ejecutando los Ejemplos: PFs
                            </a>.
                        </p>
                        <p class="footertext">
                            ¿Quejas? ¿Elogios? ¿Sugerencias? <a target="_blank" href="https://docs.oracle.com/javase/feedback.html">
                                Denos su opinión</a>.
                        </p>
                    </td>
                </tr>
            </table>
        </div>
        <div class="PrintHeaders">
            <b>Página anterior:</b> Tratando con Mensajes Compuestos<br />
            <b>Página siguiente:</b> Working with Text
        </div>
    </body>
</html> 
